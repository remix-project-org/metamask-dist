LavaPack.loadBundle([[7309,{"../../../selectors":7568,"./account-type-utils":7303,"./btc-account-details":7304,"./evm-account-details":7305,"./hardware-account-details":7306,"./institutional-evm-account-details":7308,"./private-key-account-details":7310,"./solana-account-details":7311,react:4992,"react-redux":4936,"react-router-dom":4960},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.MultichainAccountDetails=void 0;var a,o=(a=e("react"))&&a.__esModule?a:{default:a},i=e("react-redux"),r=e("react-router-dom"),s=e("../../../selectors"),c=e("./evm-account-details"),l=e("./account-type-utils"),u=e("./solana-account-details"),d=e("./hardware-account-details"),p=e("./private-key-account-details"),m=e("./institutional-evm-account-details"),f=e("./btc-account-details");n.MultichainAccountDetails=()=>{const{address:e}=(0,r.useParams)(),t=(0,i.useSelector)(t=>(0,s.getInternalAccountByAddress)(t,e)),n=(0,l.getAccountTypeCategory)(t);return(()=>{switch(n){case"evm":return o.default.createElement(c.EVMAccountDetails,{address:e,account:t});case"solana":return o.default.createElement(u.SolanaAccountDetails,{address:e,account:t});case"hardware":return o.default.createElement(d.HardwareAccountDetails,{address:e,account:t});case"private-key":return o.default.createElement(p.PrivateKeyAccountDetails,{address:e,account:t});case"institutional-evm":return o.default.createElement(m.InstitutionalEVMAccountDetails,{address:e,account:t});case"bitcoin":return o.default.createElement(f.BitcoinAccountDetails,{address:e,account:t});default:return null}})()}}}},{package:"$root$",file:"ui/pages/multichain-accounts/account-details/multichain-account-details.tsx"}],[7310,{"../../../components/component-library":6123,"../../../components/multichain-accounts/account-show-private-key-row/account-show-private-key-row":6193,"../../../components/multichain-accounts/smart-contract-account-toggle-section":6229,"../../../helpers/constants/routes":6677,"../base-account-details/base-account-details":7319,react:4992},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.PrivateKeyAccountDetails=void 0;var a,o=(a=e("react"))&&a.__esModule?a:{default:a},i=e("../base-account-details/base-account-details"),r=e("../../../components/multichain-accounts/smart-contract-account-toggle-section"),s=e("../../../helpers/constants/routes"),c=e("../../../components/multichain-accounts/account-show-private-key-row/account-show-private-key-row"),l=e("../../../components/component-library");n.PrivateKeyAccountDetails=({address:e,account:t})=>o.default.createElement(i.BaseAccountDetails,{address:e,account:t},o.default.createElement(l.Box,{className:"multichain-account-details__section"},o.default.createElement(c.AccountShowPrivateKeyRow,{account:t})),o.default.createElement(r.SmartContractAccountToggleSection,{address:e,returnToPage:s.ACCOUNT_DETAILS_ROUTE}))}}},{package:"$root$",file:"ui/pages/multichain-accounts/account-details/private-key-account-details.tsx"}],[7311,{"../../../components/component-library":6123,"../../../components/multichain-accounts/account-show-srp-row/account-show-srp-row":6194,"../base-account-details/base-account-details":7319,react:4992},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SolanaAccountDetails=void 0;var a,o=(a=e("react"))&&a.__esModule?a:{default:a},i=e("../base-account-details/base-account-details"),r=e("../../../components/multichain-accounts/account-show-srp-row/account-show-srp-row"),s=e("../../../components/component-library");n.SolanaAccountDetails=({address:e,account:t})=>o.default.createElement(i.BaseAccountDetails,{address:e,account:t},o.default.createElement(s.Box,{className:"multichain-account-details__section"},o.default.createElement(r.AccountShowSrpRow,{account:t})))}}},{package:"$root$",file:"ui/pages/multichain-accounts/account-details/solana-account-details.tsx"}],[7312,{"../../../components/component-library":6123,"../../../components/multichain-accounts/add-wallet-modal":6198,"../../../components/multichain-accounts/multichain-account-list":6208,"../../../components/multichain/pages/page":6451,"../../../helpers/constants/design-system":6672,"../../../hooks/multichain-accounts/useAccountBalance":6762,"../../../hooks/useI18nContext":6799,"../../../selectors/multichain-accounts/account-tree":7572,"./utils":7314,"@metamask/design-system-react":1674,react:4992,"react-redux":4936,"react-router-dom":4960},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.AccountList=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(a,i,r):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-router-dom"),i=e("react-redux"),r=e("@metamask/design-system-react"),s=e("../../../components/multichain/pages/page"),c=e("../../../helpers/constants/design-system"),l=e("../../../hooks/useI18nContext"),u=e("../../../components/multichain-accounts/multichain-account-list"),d=e("../../../selectors/multichain-accounts/account-tree"),p=e("../../../hooks/multichain-accounts/useAccountBalance"),m=e("../../../components/multichain-accounts/add-wallet-modal"),f=e("../../../components/component-library"),g=e("./utils");function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}n.AccountList=()=>{const e=(0,l.useI18nContext)(),t=(0,o.useHistory)(),n=(0,i.useSelector)(d.getAccountTree),{wallets:h}=n,{selectedAccountGroup:y}=n,b=(0,p.useAllWalletAccountsBalances)(),[E,k]=(0,a.useState)(""),v=(0,a.useMemo)(()=>Object.keys(h).length>1,[h]),C=(0,a.useCallback)(e=>k(e.target.value),[]),x=(0,a.useMemo)(()=>(0,g.filterWalletsByGroupName)(h,E),[h,E]),_=(0,a.useMemo)(()=>Object.keys(x).length>0,[x]),[T,w]=(0,a.useState)(!1),S=(0,a.useCallback)(()=>{w(!0)},[w]),I=(0,a.useCallback)(()=>{w(!1)},[w]);return a.default.createElement(s.Page,{className:"account-list-page"},a.default.createElement(s.Header,{textProps:{variant:c.TextVariant.headingMd},startAccessory:a.default.createElement(r.ButtonIcon,{size:r.ButtonIconSize.Md,ariaLabel:e("back"),iconName:r.IconName.ArrowLeft,onClick:()=>t.goBack()})},e("accounts")),a.default.createElement(s.Content,{className:"account-list-page__content"},a.default.createElement(f.Box,{flexDirection:c.FlexDirection.Column,paddingTop:1,paddingLeft:4,paddingRight:4,paddingBottom:2},a.default.createElement(f.TextFieldSearch,{size:f.TextFieldSearchSize.Lg,placeholder:e("searchYourAccounts"),value:E,onChange:C,clearButtonOnClick:()=>k(""),width:c.BlockSize.Full,borderWidth:0,backgroundColor:c.BackgroundColor.backgroundMuted,borderRadius:c.BorderRadius.LG,"data-testid":"multichain-account-list-search"})),a.default.createElement(f.Box,{display:c.Display.Flex,height:c.BlockSize.Full,flexDirection:c.FlexDirection.Column},_?a.default.createElement(u.MultichainAccountList,{wallets:x,selectedAccountGroups:[y],isInSearchMode:Boolean(E),displayWalletHeader:v,formattedAccountGroupBalancesByWallet:b}):a.default.createElement(f.Box,{display:c.Display.Flex,justifyContent:c.JustifyContent.center,alignItems:c.AlignItems.center,width:c.BlockSize.Full,height:c.BlockSize.Full},a.default.createElement(f.Text,{color:c.TextColor.textAlternative,variant:c.TextVariant.bodyMdMedium},e("noAccountsFound"))))),a.default.createElement(s.Footer,{className:"shadow-sm"},a.default.createElement(r.Button,{variant:r.ButtonVariant.Secondary,size:r.ButtonSize.Lg,onClick:S,isFullWidth:!0},a.default.createElement(f.Text,{variant:c.TextVariant.bodyMdMedium},e("addWallet")))),a.default.createElement(m.AddWalletModal,{isOpen:T,onClose:I}))}}}},{package:"$root$",file:"ui/pages/multichain-accounts/account-list/account-list.tsx"}],[7313,{"./account-list":7312},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"AccountList",{enumerable:!0,get:function(){return a.AccountList}});var a=e("./account-list")}}},{package:"$root$",file:"ui/pages/multichain-accounts/account-list/index.ts"}],[7314,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.filterWalletsByGroupName=function(e,t){const n=t.trim().toLowerCase();if(!n)return e;return Object.entries(e).reduce((e,[t,a])=>{const o=Object.entries(a.groups||{}).reduce((e,[t,a])=>{var o;const i=null===(o=a.metadata)||void 0===o?void 0:o.name;return null!=i&&i.toLowerCase().includes(n)&&(e[t]=a),e},{});return Object.keys(o).length>0&&(e[t]={...a,groups:o}),e},{})}}}},{package:"$root$",file:"ui/pages/multichain-accounts/account-list/utils.ts"}],[7315,{"../../../components/multichain/import-account/import-account":6347,"../../../components/multichain/pages/page":6451,"../../../helpers/constants/design-system":6672,"../../../hooks/useI18nContext":6799,"@metamask/design-system-react":1674,react:4992,"react-router-dom":4960},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.AddWalletPage=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(a,i,r):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-router-dom"),i=e("@metamask/design-system-react"),r=e("../../../components/multichain/pages/page"),s=e("../../../helpers/constants/design-system"),c=e("../../../hooks/useI18nContext"),l=e("../../../components/multichain/import-account/import-account");function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}n.AddWalletPage=()=>{const e=(0,c.useI18nContext)(),t=(0,o.useHistory)(),n=(0,a.useCallback)(async e=>{e&&t.goBack()},[t]);return a.default.createElement(r.Page,{className:"max-w-[600px]"},a.default.createElement(r.Header,{textProps:{variant:s.TextVariant.headingSm},startAccessory:a.default.createElement(i.ButtonIcon,{size:i.ButtonIconSize.Md,ariaLabel:e("back"),iconName:i.IconName.ArrowLeft,onClick:()=>t.goBack(),"data-testid":"add-wallet-page-back-button"})},e("addWallet")),a.default.createElement(r.Content,null,a.default.createElement(i.Text,{variant:i.TextVariant.HeadingSm},e("privateKey")),a.default.createElement(l.ImportAccount,{onActionComplete:n})))}}}},{package:"$root$",file:"ui/pages/multichain-accounts/add-wallet-page/add-wallet-page.tsx"}],[7316,{"./add-wallet-page":7315},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"AddWalletPage",{enumerable:!0,get:function(){return a.AddWalletPage}});var a=e("./add-wallet-page")}}},{package:"$root$",file:"ui/pages/multichain-accounts/add-wallet-page/index.ts"}],[7317,{"../../../../shared/constants/metametrics":5462,"../../../components/component-library":6123,"../../../components/multichain/menu-items/view-explorer-menu-item":6359,"../../../components/multichain/pages/page":6451,"../../../components/ui/qr-code-view":6591,"../../../contexts/metametrics":6635,"../../../helpers/constants/design-system":6672,"../../../helpers/utils/multichain/blockExplorer":6713,"../../../hooks/useI18nContext":6799,"../../../hooks/useMultichainSelector":6807,"../../../selectors":7568,"../../../selectors/multichain":7577,"../account-details":7307,"@metamask/utils":2835,react:4992,"react-redux":4936,"react-router-dom":4960},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.AddressQRCode=void 0;var a,o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=v(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(a,i,r):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(e("react")),i=e("@metamask/utils"),r=e("react-redux"),s=e("react-router-dom"),c=e("../../../components/multichain/pages/page"),l=e("../../../hooks/useI18nContext"),u=e("../../../components/component-library"),d=e("../../../helpers/constants/design-system"),p=(a=e("../../../components/ui/qr-code-view"))&&a.__esModule?a:{default:a},m=e("../../../selectors"),f=e("../../../selectors/multichain"),g=e("../../../hooks/useMultichainSelector"),h=e("../../../helpers/utils/multichain/blockExplorer"),y=e("../../../components/multichain/menu-items/view-explorer-menu-item"),b=e("../../../contexts/metametrics"),E=e("../../../../shared/constants/metametrics"),k=e("../account-details");function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(v=function(e){return e?n:t})(e)}n.AddressQRCode=()=>{const e=(0,l.useI18nContext)(),t=(0,s.useHistory)(),{address:n}=(0,s.useParams)(),a=(0,o.useContext)(b.MetaMetricsContext),v=(0,r.useSelector)(e=>(0,m.getInternalAccountByAddress)(e,n)),C=(0,g.useMultichainSelector)(f.getMultichainNetwork,v),x=(0,h.getMultichainAccountUrl)(v.address,C),_=(0,i.parseCaipChainId)(C.chainId).reference,T="Account Details QR Code Page",w=(0,o.useCallback)(()=>{a({event:E.MetaMetricsEventName.BlockExplorerLinkClicked,category:E.MetaMetricsEventCategory.Accounts,properties:{location:T,chain_id:_}}),(0,y.openBlockExplorer)(x,T,a)},[_,a,x]);return o.default.createElement(c.Page,{className:"address-qr-code-page"},o.default.createElement(c.Header,{backgroundColor:d.BackgroundColor.backgroundDefault,startAccessory:o.default.createElement(u.ButtonIcon,{ariaLabel:"Back",iconName:u.IconName.ArrowLeft,size:u.ButtonIconSize.Sm,onClick:()=>t.goBack()})},e("address")),o.default.createElement(c.Content,{paddingTop:0},o.default.createElement(p.default,{Qr:{data:n},location:"Account Details Page",accountName:v.metadata.name})),o.default.createElement(c.Footer,null,o.default.createElement(u.ButtonSecondary,{onClick:w,size:u.ButtonSecondarySize.Lg,"data-testid":x,textProps:{variant:d.TextVariant.bodyMdMedium},style:{width:"100%"}},(()=>{switch((0,k.getAccountTypeCategory)(v)){case"evm":return e("viewAddressOnExplorer",["Etherscan"]);case"solana":return e("viewAddressOnExplorer",["Solscan"]);default:return e("viewOnExplorer")}})())))}}}},{package:"$root$",file:"ui/pages/multichain-accounts/address-qr-code/address-qr-code.tsx"}],[7318,{"./address-qr-code":7317},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var a=e("./address-qr-code");Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===a[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return a[e]}}))})}}},{package:"$root$",file:"ui/pages/multichain-accounts/address-qr-code/index.ts"}],[7319,{"../../../../shared/constants/keyring":5458,"../../../../shared/constants/metametrics":5462,"../../../../shared/modules/hexstring-utils":5564,"../../../../shared/modules/selectors/networks":5575,"../../../components/app/preferred-avatar":5849,"../../../components/component-library":6123,"../../../components/component-library/icon":6122,"../../../components/multichain-accounts/account-details-row":6190,"../../../components/multichain-accounts/account-remove-modal":6192,"../../../components/multichain-accounts/edit-account-name-modal":6201,"../../../components/multichain/pages/page":6451,"../../../contexts/metametrics":6635,"../../../helpers/constants/design-system":6672,"../../../helpers/constants/routes":6677,"../../../helpers/utils/metrics":6711,"../../../helpers/utils/util":6728,"../../../hooks/useI18nContext":6799,"../../../selectors":7568,"../../../selectors/multichain-accounts/account-tree":7572,"../../../store/actions":7594,"@metamask/bridge-controller":1210,"@metamask/design-system-react":1674,"@metamask/keyring-api":2012,react:4992,"react-redux":4936,"react-router-dom":4960},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.BaseAccountDetails=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=N(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(a,i,r):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-redux"),i=e("react-router-dom"),r=e("@metamask/keyring-api"),s=e("@metamask/bridge-controller"),c=e("@metamask/design-system-react"),l=e("../../../selectors"),u=e("../../../components/component-library"),d=e("../../../components/multichain/pages/page"),p=e("../../../helpers/constants/design-system"),m=e("../../../helpers/constants/routes"),f=e("../../../components/component-library/icon"),g=e("../../../../shared/modules/hexstring-utils"),h=e("../../../helpers/utils/util"),y=e("../../../hooks/useI18nContext"),b=e("../../../components/multichain-accounts/account-details-row"),E=e("../../../components/multichain-accounts/edit-account-name-modal"),k=e("../../../store/actions"),v=e("../../../selectors/multichain-accounts/account-tree"),C=e("../../../../shared/constants/keyring"),x=e("../../../components/multichain-accounts/account-remove-modal"),_=e("../../../../shared/constants/metametrics"),T=e("../../../contexts/metametrics"),w=e("../../../../shared/modules/selectors/networks"),S=e("../../../helpers/utils/metrics"),I=e("../../../components/app/preferred-avatar");function N(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(N=function(e){return e?n:t})(e)}n.BaseAccountDetails=({children:e,account:t,address:n})=>{var N;const O=(0,i.useHistory)(),M=(0,o.useDispatch)(),A=(0,y.useI18nContext)(),B=(0,a.useContext)(T.MetaMetricsContext),R=(0,o.useSelector)(w.getCurrentChainId),P=(0,o.useSelector)(l.getHDEntropyIndex),D=(0,o.useSelector)(l.getHardwareWalletType),F=(0,o.useSelector)(l.getIsSocialLoginFlow),{metadata:{name:L},type:j}=t,W=(0,r.isEvmAccountType)(j)?null===(N=(0,g.toChecksumHexAddress)(n))||void 0===N?void 0:N.toLowerCase():n,$=(0,h.shortenAddress)(W),[U,z]=(0,a.useState)(!1),{keyring:G}=t.metadata,V=(0,S.formatAccountType)((0,l.getAccountTypeForKeyring)(G)),q=(0,a.useCallback)(()=>{M((0,k.setAccountDetailsAddress)("")),O.goBack()},[O,M]),{id:J,name:K}=(0,o.useSelector)(e=>(0,v.getWalletIdAndNameByAccountAddress)(e,n)),H=`/wallet-details/${encodeURIComponent(J)}`,Y=t.metadata.keyring.type!==C.KeyringType.hdKeyTree&&!(0,l.isSolanaAccount)(t)&&!F,[X,Q]=(0,a.useState)(!1),Z=(0,a.useCallback)(()=>{M((0,k.removeAccount)(t.address)),B({event:_.MetaMetricsEventName.AccountRemoved,category:_.MetaMetricsEventCategory.Accounts,properties:{account_hardware_type:D,chain_id:R,account_type:V,hd_entropy_index:P,caip_chain_id:(0,s.formatChainIdToCaip)(R)}}),M((0,k.setAccountDetailsAddress)("")),O.push(m.DEFAULT_ROUTE)},[M,t.address,B,D,R,V,P,O]);return a.default.createElement(d.Page,{backgroundColor:p.BackgroundColor.backgroundDefault,className:"multichain-account-details-page"},a.default.createElement(d.Header,{backgroundColor:p.BackgroundColor.backgroundDefault,startAccessory:a.default.createElement(u.ButtonIcon,{ariaLabel:"Back",iconName:f.IconName.ArrowLeft,size:u.ButtonIconSize.Sm,onClick:q})},L),a.default.createElement(d.Content,{paddingTop:3,gap:4},a.default.createElement(u.Box,{className:"flex justify-center"},a.default.createElement(I.PreferredAvatar,{address:n,size:c.AvatarAccountSize.Xl,"data-testid":"avatar"})),a.default.createElement(u.Box,{className:"multichain-account-details__section"},a.default.createElement(b.AccountDetailsRow,{label:A("accountName"),value:L,endAccessory:a.default.createElement(u.ButtonIcon,{iconName:f.IconName.Edit,color:p.IconColor.iconAlternative,size:u.ButtonIconSize.Md,ariaLabel:A("edit"),marginLeft:2}),onClick:()=>z(!0)}),a.default.createElement(b.AccountDetailsRow,{label:A("address"),value:$,endAccessory:a.default.createElement(u.ButtonIcon,{iconName:f.IconName.ArrowRight,color:p.IconColor.iconAlternative,size:u.ButtonIconSize.Md,ariaLabel:A("next"),marginLeft:2,"data-testid":"account-address-navigation-button"}),onClick:()=>{O.push(`${m.ACCOUNT_DETAILS_QR_CODE_ROUTE}/${n}`)}}),a.default.createElement(b.AccountDetailsRow,{label:A("wallet"),value:K,endAccessory:a.default.createElement(u.ButtonIcon,{iconName:f.IconName.ArrowRight,color:p.IconColor.iconAlternative,size:u.ButtonIconSize.Md,ariaLabel:A("next"),marginLeft:2,"data-testid":"wallet-details-link"}),onClick:()=>{O.push(H)}})),e,Y&&a.default.createElement(u.Box,{className:"multichain-account-details__remove_account_section"},a.default.createElement(u.Button,{size:u.ButtonSize.Lg,width:p.BlockSize.Full,variant:u.ButtonVariant.Secondary,danger:!0,onClick:()=>Q(!0)},A("removeAccount"))),U&&a.default.createElement(E.EditAccountNameModal,{isOpen:U,onClose:()=>z(!1),currentAccountName:L,address:n}),X&&a.default.createElement(x.AccountRemoveModal,{isOpen:X,onClose:()=>Q(!1),onSubmit:Z,accountName:t.metadata.name,accountAddress:t.address})))}}}},{package:"$root$",file:"ui/pages/multichain-accounts/base-account-details/base-account-details.tsx"}],[7320,{"./multichain-account-address-list-page":7321,"./multichain-account-address-list-page.types":7322},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"AddressListQueryParams",{enumerable:!0,get:function(){return o.AddressListQueryParams}}),Object.defineProperty(n,"AddressListSource",{enumerable:!0,get:function(){return o.AddressListSource}}),Object.defineProperty(n,"MultichainAccountAddressListPage",{enumerable:!0,get:function(){return a.MultichainAccountAddressListPage}});var a=e("./multichain-account-address-list-page"),o=e("./multichain-account-address-list-page.types")}}},{package:"$root$",file:"ui/pages/multichain-accounts/multichain-account-address-list-page/index.ts"}],[7321,{"../../../components/multichain-accounts/address-qr-code-modal/address-qr-code-modal":6199,"../../../components/multichain-accounts/multichain-address-rows-list":6217,"../../../components/multichain/pages/page":6451,"../../../helpers/constants/design-system":6672,"../../../hooks/useI18nContext":6799,"../../../selectors/multichain-accounts/account-tree":7572,"./multichain-account-address-list-page.types":7322,"@metamask/design-system-react":1674,react:4992,"react-redux":4936,"react-router-dom":4960},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.MultichainAccountAddressListPage=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(a,i,r):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-router-dom"),i=e("react-redux"),r=e("@metamask/design-system-react"),s=e("../../../components/multichain/pages/page"),c=e("../../../helpers/constants/design-system"),l=e("../../../hooks/useI18nContext"),u=e("../../../components/multichain-accounts/multichain-address-rows-list"),d=e("../../../selectors/multichain-accounts/account-tree"),p=e("../../../components/multichain-accounts/address-qr-code-modal/address-qr-code-modal"),m=e("./multichain-account-address-list-page.types");function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}n.MultichainAccountAddressListPage=()=>{var e,t;const n=(0,l.useI18nContext)(),f=(0,o.useHistory)(),g=(0,o.useLocation)(),{accountGroupId:h}=(0,o.useParams)(),y=h?decodeURIComponent(h):null,b=(0,i.useSelector)(e=>y?(0,d.getMultichainAccountGroupById)(e,y):null),E=new URLSearchParams(g.search).get(m.AddressListQueryParams.Source)===m.AddressListSource.Receive?n("receivingAddress"):`${(null==b||null===(e=b.metadata)||void 0===e?void 0:e.name)||n("account")} / ${n("addresses")}`,[k,v]=(0,a.useState)(!1),[C,x]=(0,a.useState)(null),_=(0,a.useCallback)((e,t,n)=>{x({address:e,networkName:t,networkImageSrc:n}),v(!0)},[]),T=(0,a.useCallback)(()=>{v(!1),x(null)},[]);return a.default.createElement(s.Page,{className:"max-w-[600px]"},a.default.createElement(s.Header,{textProps:{variant:c.TextVariant.headingMd},startAccessory:a.default.createElement(r.ButtonIcon,{size:r.ButtonIconSize.Md,ariaLabel:n("back"),iconName:r.IconName.ArrowLeft,onClick:()=>f.goBack(),"data-testid":"multichain-account-address-list-page-back-button"})},E),a.default.createElement(s.Content,null,a.default.createElement(r.Box,{flexDirection:r.BoxFlexDirection.Column},y?a.default.createElement(u.MultichainAddressRowsList,{groupId:y,onQrClick:_}):null)),C&&a.default.createElement(p.AddressQRCodeModal,{isOpen:k,onClose:T,address:C.address,accountName:(null==b||null===(t=b.metadata)||void 0===t?void 0:t.name)||n("account"),networkName:C.networkName,networkImageSrc:C.networkImageSrc}))}}}},{package:"$root$",file:"ui/pages/multichain-accounts/multichain-account-address-list-page/multichain-account-address-list-page.tsx"}],[7322,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.AddressListSource=n.AddressListQueryParams=void 0;n.AddressListQueryParams=function(e){return e.Source="source",e}({}),n.AddressListSource=function(e){return e.Receive="receive",e}({})}}},{package:"$root$",file:"ui/pages/multichain-accounts/multichain-account-address-list-page/multichain-account-address-list-page.types.ts"}],[7323,{"./multichain-account-details-page":7324},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"MultichainAccountDetailsPage",{enumerable:!0,get:function(){return a.MultichainAccountDetailsPage}});var a=e("./multichain-account-details-page")}}},{package:"$root$",file:"ui/pages/multichain-accounts/multichain-account-details-page/index.ts"}],[7324,{"../../../components/app/preferred-avatar":5849,"../../../components/component-library":6123,"../../../components/multichain-accounts/account-details-row":6190,"../../../components/multichain-accounts/multichain-account-edit-modal":6204,"../../../components/multichain-accounts/multichain-srp-backup":6224,"../../../components/multichain/pages/page":6451,"../../../helpers/constants/design-system":6672,"../../../helpers/constants/routes":6677,"../../../hooks/multichain-accounts/useWalletInfo":6764,"../../../hooks/useI18nContext":6799,"../../../selectors/multichain-accounts/account-tree":7572,"../../../selectors/multichain-accounts/utils":7575,"@metamask/account-api":1064,"@metamask/design-system-react":1674,classnames:3826,react:4992,"react-redux":4936,"react-router-dom":4960},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.MultichainAccountDetailsPage=void 0;var a,o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=C(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(a,i,r):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(e("react")),i=e("react-router-dom"),r=e("react-redux"),s=e("@metamask/account-api"),c=(a=e("classnames"))&&a.__esModule?a:{default:a},l=e("@metamask/design-system-react"),u=e("../../../components/component-library"),d=e("../../../components/app/preferred-avatar"),p=e("../../../components/multichain/pages/page"),m=e("../../../helpers/constants/design-system"),f=e("../../../hooks/useI18nContext"),g=e("../../../components/multichain-accounts/account-details-row"),h=e("../../../selectors/multichain-accounts/account-tree"),y=e("../../../selectors/multichain-accounts/utils"),b=e("../../../helpers/constants/routes"),E=e("../../../components/multichain-accounts/multichain-srp-backup"),k=e("../../../hooks/multichain-accounts/useWalletInfo"),v=e("../../../components/multichain-accounts/multichain-account-edit-modal");function C(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(C=function(e){return e?n:t})(e)}n.MultichainAccountDetailsPage=()=>{const e=(0,f.useI18nContext)(),t=(0,i.useHistory)(),{id:n}=(0,i.useParams)(),a=decodeURIComponent(n),C=(0,r.useSelector)(e=>(0,h.getMultichainAccountGroupById)(e,a)),x=(0,y.extractWalletIdFromGroupId)(a),_=(0,r.useSelector)(e=>(0,h.getWallet)(e,x)),{keyringId:T,isSRPBackedUp:w}=(0,k.useWalletInfo)(x),S=`${b.MULTICHAIN_WALLET_DETAILS_PAGE_ROUTE}/${encodeURIComponent(x)}`,I=(null==_?void 0:_.type)!==s.AccountWalletType.Entropy&&(null==_?void 0:_.type)!==s.AccountWalletType.Snap,N=(0,r.useSelector)(e=>(0,h.getNetworkAddressCount)(e,a)),O=(0,r.useSelector)(e=>(0,h.getInternalAccountsFromGroupById)(e,a)),[M,A]=(0,o.useState)(!1),B=(null==_?void 0:_.type)===s.AccountWalletType.Entropy,R=!1===w;return o.default.createElement(p.Page,{className:"multichain-account-details-page"},o.default.createElement(p.Header,{textProps:{variant:m.TextVariant.headingMd},startAccessory:o.default.createElement(u.ButtonIcon,{size:u.ButtonIconSize.Md,ariaLabel:e("back"),iconName:u.IconName.ArrowLeft,onClick:()=>t.goBack(),"data-testid":"back-button"})},C.metadata.name),o.default.createElement(p.Content,{className:"multichain-account-details-page__content",paddingTop:3,gap:4},o.default.createElement(u.Box,{className:"flex justify-center"},o.default.createElement(d.PreferredAvatar,{address:a,size:l.AvatarAccountSize.Xl,"data-testid":"avatar"})),o.default.createElement(u.Box,{className:"multichain-account-details-page__section"},o.default.createElement(g.AccountDetailsRow,{label:e("accountName"),value:C.metadata.name,onClick:()=>{A(!0)},endAccessory:o.default.createElement(u.ButtonIcon,{iconName:u.IconName.ArrowRight,color:m.IconColor.iconAlternative,size:u.ButtonIconSize.Sm,ariaLabel:e("accountName"),marginLeft:2,"data-testid":"account-name-action"})}),o.default.createElement(g.AccountDetailsRow,{label:e("networks"),value:`${N} ${e(N>1?"addressesLabel":"addressLabel")}`,onClick:()=>{t.push(`${b.MULTICHAIN_ACCOUNT_ADDRESS_LIST_PAGE_ROUTE}/${encodeURIComponent(a)}`)},endAccessory:o.default.createElement(u.ButtonIcon,{iconName:u.IconName.ArrowRight,color:m.IconColor.iconAlternative,size:u.ButtonIconSize.Sm,ariaLabel:e("addresses"),marginLeft:2,"data-testid":"network-addresses-link"})}),o.default.createElement(g.AccountDetailsRow,{label:e("privateKeys"),value:e("unlockToReveal"),onClick:()=>{t.push(`${b.MULTICHAIN_ACCOUNT_PRIVATE_KEY_LIST_PAGE_ROUTE}/${encodeURIComponent(a)}`)},endAccessory:o.default.createElement(u.ButtonIcon,{iconName:u.IconName.ArrowRight,color:m.IconColor.iconAlternative,size:u.ButtonIconSize.Sm,ariaLabel:e("privateKeys"),marginLeft:2,"data-testid":"private-keys-action"})}),o.default.createElement(g.AccountDetailsRow,{label:e("smartAccountLabel"),value:e("setUp"),onClick:()=>{var e;const n=null===(e=O[0])||void 0===e?void 0:e.address;n&&t.push(`${b.MULTICHAIN_SMART_ACCOUNT_PAGE_ROUTE}/${encodeURIComponent(n)}`)},endAccessory:o.default.createElement(u.ButtonIcon,{iconName:u.IconName.ArrowRight,color:m.IconColor.iconAlternative,size:u.ButtonIconSize.Sm,ariaLabel:e("smartAccountLabel"),marginLeft:2,"data-testid":"smart-account-action"})})),o.default.createElement(u.Box,{className:"multichain-account-details-page__section"},o.default.createElement(g.AccountDetailsRow,{label:e("wallet"),value:_.metadata.name,onClick:()=>{t.push(S)},endAccessory:o.default.createElement(u.ButtonIcon,{iconName:u.IconName.ArrowRight,color:m.IconColor.iconAlternative,size:u.ButtonIconSize.Sm,ariaLabel:e("wallet"),marginLeft:2,"data-testid":"wallet-details-link"})}),B?o.default.createElement(E.MultichainSrpBackup,{className:(0,c.default)("multichain-account-details__row","multichain-account-details-page__srp-button"),shouldShowBackupReminder:R,keyringId:T}):null),I&&o.default.createElement(u.Box,{className:"multichain-account-details-page__section"},o.default.createElement(g.AccountDetailsRow,{label:e("removeAccount"),labelColor:m.TextColor.errorDefault,value:"",endAccessory:o.default.createElement(u.ButtonIcon,{iconName:u.IconName.ArrowRight,color:m.IconColor.iconAlternative,size:u.ButtonIconSize.Md,ariaLabel:e("removeAccount"),marginLeft:2,"data-testid":"account-remove-action"})})),M&&o.default.createElement(v.MultichainAccountEditModal,{isOpen:M,onClose:()=>A(!1),accountGroupId:C.id})))}}}},{package:"$root$",file:"ui/pages/multichain-accounts/multichain-account-details-page/multichain-account-details-page.tsx"}],[7325,{"./multichain-account-private-key-list-page":7326},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"MultichainAccountPrivateKeyListPage",{enumerable:!0,get:function(){return a.MultichainAccountPrivateKeyListPage}});var a=e("./multichain-account-private-key-list-page")}}},{package:"$root$",file:"ui/pages/multichain-accounts/multichain-account-private-key-list-page/index.ts"}],[7326,{"../../../components/component-library":6123,"../../../components/multichain-accounts/multichain-private-key-list":6219,"../../../components/multichain/pages/page":6451,"../../../helpers/constants/design-system":6672,"../../../hooks/useI18nContext":6799,"../../../selectors/multichain-accounts/account-tree":7572,"@metamask/design-system-react":1674,react:4992,"react-redux":4936,"react-router-dom":4960},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.MultichainAccountPrivateKeyListPage=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(a,i,r):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-redux"),i=e("react-router-dom"),r=e("@metamask/design-system-react"),s=e("../../../components/multichain/pages/page"),c=e("../../../helpers/constants/design-system"),l=e("../../../hooks/useI18nContext"),u=e("../../../components/multichain-accounts/multichain-private-key-list"),d=e("../../../components/component-library"),p=e("../../../selectors/multichain-accounts/account-tree");function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}n.MultichainAccountPrivateKeyListPage=()=>{const e=(0,l.useI18nContext)(),t=(0,i.useHistory)(),{accountGroupId:n}=(0,i.useParams)(),m=n?decodeURIComponent(n):null,f=(0,o.useSelector)(e=>m?(0,p.getMultichainAccountGroupById)(e,m):null),g=(0,a.useMemo)(()=>f?f.metadata.name:e("account"),[f,e]);return a.default.createElement(s.Page,{className:"max-w-[600px]"},a.default.createElement(s.Header,{textProps:{variant:c.TextVariant.headingMd},startAccessory:a.default.createElement(r.ButtonIcon,{size:r.ButtonIconSize.Md,ariaLabel:e("back"),iconName:r.IconName.ArrowLeft,onClick:()=>t.goBack(),"data-testid":"multichain-account-address-list-page-back-button"})},g," / ",e("privateKeys")),a.default.createElement(s.Content,null,a.default.createElement(d.BannerAlert,{"data-testid":"backup-state-banner-alert",title:e("revealMultichainPrivateKeysBannerTitle"),description:e("revealMultichainPrivateKeysBannerDescription"),paddingTop:2,paddingBottom:2,severity:d.BannerAlertSeverity.Danger}),a.default.createElement(r.Box,{flexDirection:r.BoxFlexDirection.Column},m?a.default.createElement(u.MultichainPrivateKeyList,{groupId:m,goBack:t.goBack,"data-testid":"multichain-account-private-key-list"}):null)))}}}},{package:"$root$",file:"ui/pages/multichain-accounts/multichain-account-private-key-list-page/multichain-account-private-key-list-page.tsx"}],[7327,{"../../../../shared/constants/metametrics":5462,"../../../../shared/constants/network":5465,"../../../../shared/lib/caip25-caveat-merger":5493,"../../../../shared/lib/multichain/scope-utils":5536,"../../../../shared/modules/selectors/networks":5575,"../../../components/component-library":6123,"../../../components/multichain-accounts/multichain-account-cell":6202,"../../../components/multichain-accounts/multichain-site-cell/multichain-site-cell":6222,"../../../components/multichain-accounts/permissions/multichain-edit-accounts-page/multichain-edit-accounts-page":6227,"../../../components/multichain/pages/page":6451,"../../../components/ui/tabs":6604,"../../../contexts/metametrics":6635,"../../../helpers/constants/design-system":6672,"../../../helpers/utils/util":6728,"../../../hooks/multichain-accounts/useAccountBalance":6762,"../../../hooks/useAccountGroupsForPermissions":6778,"../../../hooks/useI18nContext":6799,"../../../selectors":7568,"../../permissions-connect/connect-page/utils":7397,"@metamask/chain-agnostic-permission":1301,"@metamask/design-system-react":1674,"@metamask/utils":2835,lodash:4565,react:4992,"react-redux":4936},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.MultichainAccountsConnectPageMode=n.MultichainAccountsConnectPage=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=I(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(a,i,r):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-redux"),i=e("@metamask/chain-agnostic-permission"),r=e("@metamask/utils"),s=e("lodash"),c=e("@metamask/design-system-react"),l=e("../../../hooks/useI18nContext"),u=e("../../../selectors"),d=e("../../../../shared/modules/selectors/networks"),p=e("../../../components/component-library"),m=e("../../../components/multichain/pages/page"),f=e("../../../helpers/constants/design-system"),g=e("../../../../shared/constants/network"),h=e("../../../components/ui/tabs"),y=e("../../../helpers/utils/util"),b=e("../../../../shared/constants/metametrics"),E=e("../../../contexts/metametrics"),k=e("../../../../shared/lib/caip25-caveat-merger"),v=e("../../../components/multichain-accounts/multichain-account-cell"),C=e("../../../hooks/useAccountGroupsForPermissions"),x=e("../../permissions-connect/connect-page/utils"),_=e("../../../components/multichain-accounts/multichain-site-cell/multichain-site-cell"),T=e("../../../components/multichain-accounts/permissions/multichain-edit-accounts-page/multichain-edit-accounts-page"),w=e("../../../../shared/lib/multichain/scope-utils"),S=e("../../../hooks/multichain-accounts/useAccountBalance");function I(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(I=function(e){return e?n:t})(e)}let N=n.MultichainAccountsConnectPageMode=function(e){return e.Summary="summary",e.EditAccounts="edit-accounts",e}({});n.MultichainAccountsConnectPage=({request:e,permissionsRequestId:t,rejectPermissionsRequest:n,approveConnection:I,targetSubjectMetadata:O})=>{const M=(0,l.useI18nContext)(),A=(0,a.useContext)(E.MetaMetricsContext),[B,R]=(0,a.useState)(N.Summary),P=(0,S.useAllWalletAccountsBalances)(),D=(0,o.useSelector)(t=>{var n;return(0,u.getPermissions)(t,null===(n=e.metadata)||void 0===n?void 0:n.origin)}),F=(0,a.useMemo)(()=>D?(0,x.getCaip25CaveatValueFromPermissions)(D):null,[D]),L=(0,x.getCaip25CaveatValueFromPermissions)(e.permissions),j=F?(0,k.mergeCaip25CaveatValues)(L,F):L,W=(0,i.getCaipAccountIdsFromCaip25CaveatValue)(L),$=(0,i.getAllNamespacesFromCaip25CaveatValue)(j).filter(e=>e!==r.KnownCaipNamespace.Wallet),U=(0,o.useSelector)(d.getAllNetworkConfigurationsByCaipChainId),[z,G]=(0,a.useMemo)(()=>Object.entries(U).reduce(([e,t],[n,a])=>{const o=n;return(g.CAIP_FORMATTED_EVM_TEST_CHAINS.includes(o)?t:e).push({...a,caipChainId:o}),[e,t]},[[],[]]),[U]),V=(0,i.getAllScopesFromCaip25CaveatValue)(j).filter(e=>{const{namespace:t}=(0,r.parseCaipChainId)(e);return t!==r.KnownCaipNamespace.Wallet}),q=(0,a.useMemo)(()=>V.length>0?V:[...new Set([...z.map(({caipChainId:e})=>e),...G.map(({caipChainId:e})=>e)])],[z,V,G]),{connectedAccountGroups:J,supportedAccountGroups:K}=(0,C.useAccountGroupsForPermissions)(j,W,q,$),[H,Y]=(0,a.useState)(!1),[X,Q]=(0,a.useState)(q),Z=(0,a.useCallback)((e,{isUserModified:t=!0}={})=>{t&&Y(!0),Q(e)},[Y,Q]),ee=(0,a.useMemo)(()=>{const e=Array.from(J).map(e=>e.id);return e.length?e:K.length>0?[K[0].id]:[]},[J,K]),[te,ne]=(0,a.useState)(ee),ae=(0,a.useMemo)(()=>{const e=K.filter(e=>te.includes(e.id));return(0,w.getCaip25AccountFromAccountGroupAndScope)(e,X)},[te,X,K]),oe=(0,a.useCallback)((e,{isUserModified:t=!0}={})=>{t&&Y(!0);const n=[...X];Z(n,{isUserModified:t}),ne(e),R(N.Summary)},[X,Z,Y,ne,R]);(0,a.useEffect)(()=>{H||(0,s.isEqual)(ee,te)||oe(ee,{isUserModified:!1})},[H,oe,te,ee]);const ie=(0,a.useCallback)(()=>{A({category:b.MetaMetricsEventCategory.Navigation,event:b.MetaMetricsEventName.ViewPermissionedAccounts,properties:{location:"Connect view (accounts tab), Permissions toast, Permissions (dapp)"}}),R(N.EditAccounts)},[A]),re=(0,a.useCallback)(()=>{n(t)},[t,n]),se=(0,a.useCallback)(()=>{const t={...e,permissions:{...e.permissions,...(0,i.generateCaip25Caveat)(j,ae,X)}};I(t)},[e,j,ae,X,I]),ce=(0,y.transformOriginToTitle)(O.origin),le=(0,a.useCallback)(e=>{var t;const n=K.find(t=>t.id===e),o=P&&n?(null==P||null===(t=P[n.walletId])||void 0===t?void 0:t[e])??undefined:"";return a.default.createElement(v.MultichainAccountCell,{accountId:e,accountName:(null==n?void 0:n.metadata.name)||"Unknown Account",balance:o??"",key:e,walletName:null==n?void 0:n.walletName})},[K,P]);return B===N.Summary?a.default.createElement(m.Page,{"data-testid":"connect-page",className:"main-container connect-page",backgroundColor:f.BackgroundColor.backgroundDefault},a.default.createElement(m.Header,{paddingTop:8,paddingBottom:0},a.default.createElement(p.Box,{display:f.Display.Flex,justifyContent:f.JustifyContent.center,marginBottom:8},O.iconUrl?a.default.createElement(a.default.Fragment,null,a.default.createElement(p.Box,{style:{filter:"blur(16px) brightness(1.1)",position:"absolute"}},a.default.createElement(p.AvatarFavicon,{backgroundColor:f.BackgroundColor.backgroundMuted,size:p.AvatarFaviconSize.Xl,src:O.iconUrl,name:ce})),a.default.createElement(p.AvatarFavicon,{backgroundColor:f.BackgroundColor.backgroundMuted,size:p.AvatarFaviconSize.Lg,src:O.iconUrl,name:ce,style:{zIndex:1,background:"transparent"}})):a.default.createElement(p.AvatarBase,{size:p.AvatarBaseSize.Lg,display:f.Display.Flex,alignItems:f.AlignItems.center,justifyContent:f.JustifyContent.center,color:f.TextColor.textAlternative,style:{borderWidth:"0px"},backgroundColor:f.BackgroundColor.backgroundMuted},(0,y.isIpAddress)(ce)?"?":(0,y.getAvatarFallbackLetter)(ce))),a.default.createElement(p.Text,{variant:f.TextVariant.headingLg,marginBottom:1},ce),a.default.createElement(p.Box,{display:f.Display.Flex,justifyContent:f.JustifyContent.center},a.default.createElement(p.Text,{color:f.TextColor.textAlternative},M("connectionDescription")))),a.default.createElement(m.Content,{paddingLeft:4,paddingRight:4,backgroundColor:f.BackgroundColor.transparent},a.default.createElement(h.Tabs,{onTabClick:()=>null,backgroundColor:c.BoxBackgroundColor.Transparent,justifyContent:c.BoxJustifyContent.Center,defaultActiveTabKey:"accounts",tabListProps:{backgroundColor:c.BoxBackgroundColor.Transparent}},a.default.createElement(h.Tab,{name:M("accounts"),tabKey:"accounts","data-testid":"accounts-tab"},a.default.createElement(p.Box,{marginTop:4,style:{overflow:"auto",maxHeight:"268px",scrollbarColor:"var(--color-icon-muted) transparent"}},a.default.createElement(p.Box,{backgroundColor:f.BackgroundColor.backgroundDefault,borderRadius:f.BorderRadius.XL},te.map(le)),0===te.length&&a.default.createElement(p.Box,{className:"connect-page__accounts-empty",display:f.Display.Flex,justifyContent:f.JustifyContent.flexStart,alignItems:f.AlignItems.center,borderRadius:f.BorderRadius.XL},a.default.createElement(p.ButtonLink,{onClick:ie,"data-testid":"edit"},M("selectAccountToConnect"))),te.length>0&&a.default.createElement(p.Box,{marginTop:4,display:f.Display.Flex,justifyContent:f.JustifyContent.flexStart,padding:4},a.default.createElement(p.Box,{className:"connect-page__edit-icon",marginRight:4,display:f.Display.Flex,alignItems:f.AlignItems.center,justifyContent:f.JustifyContent.center,backgroundColor:f.BackgroundColor.infoMuted,borderRadius:f.BorderRadius.MD,padding:4},a.default.createElement(p.Icon,{name:p.IconName.Edit,size:p.IconSize.Md,color:f.IconColor.infoDefault})),a.default.createElement(p.ButtonLink,{color:f.TextColor.infoDefault,onClick:ie,"data-testid":"edit"},M("editAccounts"))))),a.default.createElement(h.Tab,{name:M("permissions"),tabKey:"permissions","data-testid":"permissions-tab",disabled:0===te.length},a.default.createElement(p.Box,{marginTop:4},a.default.createElement(_.MultichainSiteCell,{nonTestNetworks:z,testNetworks:G,supportedAccountGroups:K,showEditAccounts:ie,onSelectChainIds:Z,selectedAccountGroupIds:te,selectedChainIds:X,isConnectFlow:!0}))))),a.default.createElement(m.Footer,null,a.default.createElement(p.Box,{display:f.Display.Flex,flexDirection:f.FlexDirection.Column,gap:4,width:f.BlockSize.Full},a.default.createElement(p.Box,{display:f.Display.Flex,gap:4,width:f.BlockSize.Full},a.default.createElement(p.Button,{block:!0,variant:p.ButtonVariant.Secondary,size:p.ButtonSize.Lg,"data-testid":"cancel-btn",onClick:re},M("cancel")),a.default.createElement(p.Button,{block:!0,"data-testid":"confirm-btn",size:p.ButtonSize.Lg,onClick:se,disabled:0===te.length||0===X.length},M("connect")))))):a.default.createElement(T.MultichainEditAccountsPage,{supportedAccountGroups:K,defaultSelectedAccountGroups:te,onSubmit:oe,onClose:()=>R(N.Summary)})}}}},{package:"$root$",file:"ui/pages/multichain-accounts/multichain-accounts-connect-page/multichain-accounts-connect-page.tsx"}],[7328,{"./smart-account-page":7329},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"SmartAccountPage",{enumerable:!0,get:function(){return a.SmartAccountPage}});var a=e("./smart-account-page")}}},{package:"$root$",file:"ui/pages/multichain-accounts/smart-account-page/index.ts"}],[7329,{"../../../components/multichain-accounts/smart-contract-account-toggle-section":6229,"../../../components/multichain/pages/page":6451,"../../../helpers/constants/design-system":6672,"../../../hooks/useI18nContext":6799,"@metamask/design-system-react":1674,react:4992,"react-router-dom":4960},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SmartAccountPage=void 0;var a,o=(a=e("react"))&&a.__esModule?a:{default:a},i=e("react-router-dom"),r=e("@metamask/design-system-react"),s=e("../../../components/multichain/pages/page"),c=e("../../../helpers/constants/design-system"),l=e("../../../hooks/useI18nContext"),u=e("../../../components/multichain-accounts/smart-contract-account-toggle-section");n.SmartAccountPage=()=>{const e=(0,l.useI18nContext)(),t=(0,i.useHistory)(),{address:n}=(0,i.useParams)(),a=n?decodeURIComponent(n):null;return a?o.default.createElement(s.Page,{className:"max-w-[600px]"},o.default.createElement(s.Header,{textProps:{variant:c.TextVariant.headingMd},startAccessory:o.default.createElement(r.ButtonIcon,{size:r.ButtonIconSize.Md,ariaLabel:e("back"),iconName:r.IconName.ArrowLeft,onClick:()=>t.goBack(),"data-testid":"smart-account-page-back-button"})},e("smartAccount")),o.default.createElement(s.Content,null,o.default.createElement(r.Box,{flexDirection:r.BoxFlexDirection.Column},o.default.createElement(u.SmartContractAccountToggleSection,{address:a})))):null}}}},{package:"$root$",file:"ui/pages/multichain-accounts/smart-account-page/smart-account-page.tsx"}],[7330,{"./wallet-details-page":7331},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"WalletDetailsPage",{enumerable:!0,get:function(){return a.WalletDetailsPage}});var a=e("./wallet-details-page")}}},{package:"$root$",file:"ui/pages/multichain-accounts/wallet-details-page/index.ts"}],[7331,{"../../../components/component-library":6123,"../../../components/multichain-accounts/add-multichain-account":6196,"../../../components/multichain-accounts/multichain-account-cell":6202,"../../../components/multichain-accounts/multichain-srp-backup":6224,"../../../components/multichain/pages/page":6451,"../../../helpers/constants/design-system":6672,"../../../helpers/constants/routes":6677,"../../../hooks/multichain-accounts/useWalletBalance":6763,"../../../hooks/multichain-accounts/useWalletInfo":6764,"../../../hooks/useI18nContext":6799,"../../../selectors/multichain-accounts/account-tree":7572,"@metamask/account-api":1064,classnames:3826,react:4992,"react-redux":4936,"react-router-dom":4960},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.WalletDetailsPage=void 0;var a,o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=k(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(a,i,r):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(e("react")),i=e("react-router-dom"),r=e("react-redux"),s=e("@metamask/account-api"),c=(a=e("classnames"))&&a.__esModule?a:{default:a},l=e("../../../components/component-library"),u=e("../../../helpers/constants/design-system"),d=e("../../../components/multichain/pages/page"),p=e("../../../hooks/useI18nContext"),m=e("../../../selectors/multichain-accounts/account-tree"),f=e("../../../helpers/constants/routes"),g=e("../../../components/multichain-accounts/multichain-account-cell"),h=e("../../../components/multichain-accounts/add-multichain-account"),y=e("../../../hooks/multichain-accounts/useWalletInfo"),b=e("../../../components/multichain-accounts/multichain-srp-backup"),E=e("../../../hooks/multichain-accounts/useWalletBalance");function k(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(k=function(e){return e?n:t})(e)}function v(){return v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},v.apply(null,arguments)}n.WalletDetailsPage=()=>{const e=(0,p.useI18nContext)(),t=(0,i.useHistory)(),{id:n}=(0,i.useParams)(),a=decodeURIComponent(n),k=(0,r.useSelector)(m.getWalletsWithAccounts)[a],{multichainAccounts:C,keyringId:x,isSRPBackedUp:_}=(0,y.useWalletInfo)(a),T=(0,E.useSingleWalletDisplayBalance)(a),w=(0,E.useSingleWalletAccountsBalanceCallback)(a);(0,o.useEffect)(()=>{k||t.push(f.ACCOUNT_LIST_PAGE_ROUTE)},[k,t]);const S=(null==k?void 0:k.type)===s.AccountWalletType.Entropy,I=!1===_,N={display:u.Display.Flex,justifyContent:u.JustifyContent.spaceBetween,alignItems:u.AlignItems.center,backgroundColor:u.BackgroundColor.backgroundMuted},O=(0,o.useMemo)(()=>C.map(e=>o.default.createElement(g.MultichainAccountCell,{key:`multichain-account-cell-${e.id}`,accountId:e.id,accountName:e.metadata.name,balance:w(e.id)??"",disableHoverEffect:!0})),[C,w]);return o.default.createElement(d.Page,{className:"multichain-wallet-details-page"},o.default.createElement(d.Header,{textProps:{variant:u.TextVariant.headingMd},startAccessory:o.default.createElement(l.ButtonIcon,{size:l.ButtonIconSize.Md,ariaLabel:e("back"),iconName:l.IconName.ArrowLeft,onClick:()=>{t.goBack()},"data-testid":"back-button"})},null==k?void 0:k.metadata.name),o.default.createElement(d.Content,null,o.default.createElement(l.Box,{marginBottom:4,className:"multichain-wallet-details-page__rows-container"},o.default.createElement(l.Box,v({className:(0,c.default)("multichain-wallet-details-page__row","multichain-wallet-details-page__row--first"),padding:4},N),o.default.createElement(l.Text,{variant:u.TextVariant.bodyMdMedium,color:u.TextColor.textDefault},e("walletName")),o.default.createElement(l.Text,{variant:u.TextVariant.bodyMdMedium,color:u.TextColor.textAlternative},null==k?void 0:k.metadata.name)),o.default.createElement(l.Box,v({className:"multichain-wallet-details-page__row",padding:4},N),o.default.createElement(l.Text,{variant:u.TextVariant.bodyMdMedium,color:u.TextColor.textDefault},e("balance")),o.default.createElement(l.Text,{variant:u.TextVariant.bodyMdMedium,color:u.TextColor.textAlternative},T??"$ n/a")),S?o.default.createElement(b.MultichainSrpBackup,{className:(0,c.default)("multichain-wallet-details-page__row","multichain-wallet-details-page__row--last","multichain-wallet-details-page__srp-button"),shouldShowBackupReminder:I,keyringId:x}):null),o.default.createElement(l.Box,{display:u.Display.Flex,flexDirection:u.FlexDirection.Column,backgroundColor:u.BackgroundColor.backgroundMuted,borderRadius:u.BorderRadius.XL},O,S&&o.default.createElement(h.AddMultichainAccount,{walletId:a}))))}}}},{package:"$root$",file:"ui/pages/multichain-accounts/wallet-details-page/wallet-details-page.tsx"}],[7332,{"./wallet-details.component":7333},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,o=(a=e("./wallet-details.component"))&&a.__esModule?a:{default:a};n.default=o.default}}},{package:"$root$",file:"ui/pages/multichain-accounts/wallet-details/index.ts"}],[7333,{"../../../../shared/lib/trace":5546,"../../../components/app/srp-quiz-modal":6006,"../../../components/app/user-preferenced-currency-display/user-preferenced-currency-display.component":6043,"../../../components/component-library":6123,"../../../components/component-library/modal-content/deprecated":6133,"../../../components/multichain/multichain-accounts/wallet-details-account-item/wallet-details-account-item":6366,"../../../components/multichain/multichain-accounts/wallet-details-account-type-selection":6367,"../../../components/multichain/pages/page":6451,"../../../ducks/metamask/metamask":6659,"../../../helpers/constants/design-system":6672,"../../../helpers/constants/routes":6677,"../../../hooks/accounts/useMultichainWalletSnapClient":6732,"../../../hooks/useI18nContext":6799,"../../../selectors":7568,"../../../selectors/multichain-accounts/account-tree":7572,"../../../store/actions":7594,"@metamask/keyring-api":2012,react:4992,"react-redux":4936,"react-router-dom":4960},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=_(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(a,i,r):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-router-dom"),i=e("react-redux"),r=e("@metamask/keyring-api"),s=e("../../../components/component-library"),c=e("../../../components/component-library/modal-content/deprecated"),l=e("../../../helpers/constants/design-system"),u=e("../../../components/multichain/pages/page"),d=e("../../../selectors"),p=e("../../../hooks/useI18nContext"),m=e("../../../selectors/multichain-accounts/account-tree"),f=e("../../../ducks/metamask/metamask"),g=x(e("../../../components/multichain/multichain-accounts/wallet-details-account-item/wallet-details-account-item")),h=x(e("../../../components/app/user-preferenced-currency-display/user-preferenced-currency-display.component")),y=x(e("../../../components/app/srp-quiz-modal")),b=e("../../../components/multichain/multichain-accounts/wallet-details-account-type-selection"),E=e("../../../store/actions"),k=e("../../../helpers/constants/routes"),v=e("../../../../shared/lib/trace"),C=e("../../../hooks/accounts/useMultichainWalletSnapClient");function x(e){return e&&e.__esModule?e:{default:e}}function _(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(_=function(e){return e?n:t})(e)}function T(){return T=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},T.apply(null,arguments)}const w=()=>{var e;const t=(0,p.useI18nContext)(),n=(0,o.useHistory)(),x=(0,i.useDispatch)(),{id:_}=(0,o.useParams)(),w=decodeURIComponent(_),S=(0,i.useSelector)(m.getWalletsWithAccounts),I=(0,i.useSelector)(f.getIsPrimarySeedPhraseBackedUp),N=(0,i.useSelector)(d.getMetaMaskHdKeyrings),[O,M]=(0,a.useState)(!1),A=S[w],[B,R]=(0,a.useState)({}),[P,D]=(0,a.useState)(!1),F=(0,C.useMultichainWalletSnapClient)(C.WalletClientType.Solana),L=(0,a.useMemo)(()=>Object.values(B).reduce((e,t)=>e+Number(t||0),0).toString(),[B]),j=(0,a.useCallback)((e,t)=>{R(n=>({...n,[e]:t}))},[]),W=e=>{x((0,E.setAccountDetailsAddress)(e.address)),n.push(`${k.ACCOUNT_DETAILS_ROUTE}/${e.address}`)},$=()=>{n.goBack()};if(!A)return a.default.createElement(u.Page,{className:"wallet-details-page"},a.default.createElement(u.Header,{textProps:{variant:l.TextVariant.headingSm},startAccessory:a.default.createElement(s.ButtonIcon,{size:s.ButtonIconSize.Sm,ariaLabel:t("back"),iconName:s.IconName.ArrowLeft,onClick:$})},t("walletDetails")),a.default.createElement(u.Content,null,a.default.createElement(s.BannerAlert,{severity:s.BannerAlertSeverity.Danger,title:t("walletNotFoundTitle")},t("walletNotFoundDescription",[_]))));const U=A.id.split(":")[1],z=A.id.includes("entropy"),G=(null===(e=N[0])||void 0===e||null===(e=e.metadata)||void 0===e?void 0:e.id)===U,V=!I&&G,q=Object.values(A.groups).flatMap(e=>e.accounts),J=()=>{D(!1)},K={display:l.Display.Flex,justifyContent:l.JustifyContent.spaceBetween,alignItems:l.AlignItems.center,backgroundColor:l.BackgroundColor.backgroundAlternative};return a.default.createElement(u.Page,{className:"wallet-details-page"},a.default.createElement(u.Header,{textProps:{variant:l.TextVariant.headingSm},startAccessory:a.default.createElement(s.ButtonIcon,{size:s.ButtonIconSize.Sm,ariaLabel:t("back"),iconName:s.IconName.ArrowLeft,onClick:$})},t("walletDetails")),a.default.createElement(u.Content,null,a.default.createElement(s.Box,{marginBottom:4,className:"wallet-details-page__rows-container"},a.default.createElement(s.Box,T({className:"wallet-details-page__row",padding:4},K),a.default.createElement(s.Text,{variant:l.TextVariant.bodyMdMedium,color:l.TextColor.textDefault},t("walletName")),a.default.createElement(s.Text,{variant:l.TextVariant.bodyMdMedium,color:l.TextColor.textAlternative},A.metadata.name)),a.default.createElement(s.Box,T({className:"wallet-details-page__row",padding:4},K),a.default.createElement(s.Text,{variant:l.TextVariant.bodyMdMedium,color:l.TextColor.textDefault},t("balance")),a.default.createElement(h.default,{value:L,type:"PRIMARY",ethNumberOfDecimals:4,hideTitle:!0,showFiat:!0,isAggregatedFiatOverviewBalance:!0,hideLabel:!0,textProps:{color:l.TextColor.textAlternative,variant:l.TextVariant.bodyMdMedium}}))),z?a.default.createElement(s.Box,{marginBottom:4,className:"wallet-details-page__rows-container"},a.default.createElement(s.Box,T({className:"wallet-details-page__row wallet-details-page__srp-button",padding:4,marginBottom:1,width:l.BlockSize.Full,textAlign:l.TextAlign.Left},K,{as:"button",onClick:()=>{if(V){const e=`${k.ONBOARDING_REVIEW_SRP_ROUTE}/?isFromReminder=true`;n.push(e)}else M(!0)}}),a.default.createElement(s.Box,null,a.default.createElement(s.Text,{variant:l.TextVariant.bodyMdMedium,color:l.TextColor.textDefault},t("secretRecoveryPhrase"))),a.default.createElement(s.Box,{display:l.Display.Flex,alignItems:l.AlignItems.center,gap:2},V?a.default.createElement(s.Text,{variant:l.TextVariant.bodyMdMedium,color:l.TextColor.errorDefault},t("backup")):null,a.default.createElement(s.Icon,{name:s.IconName.ArrowRight,size:s.IconSize.Sm,color:l.IconColor.iconAlternative})))):null,q.length>0&&a.default.createElement(s.Box,{className:"wallet-details-page__rows-container"},q.map(e=>a.default.createElement(g.default,T({key:e.id,account:e,onClick:W,onBalanceUpdate:j,className:"wallet-details-page__row"},K))),z?a.default.createElement(s.Box,T({className:"wallet-details-page__row wallet-details-page__add-account-button",padding:4,width:l.BlockSize.Full,textAlign:l.TextAlign.Left},K,{as:"button",onClick:()=>{D(!0)}}),a.default.createElement(s.Box,{display:l.Display.Flex,alignItems:l.AlignItems.center,gap:3},a.default.createElement(s.Icon,{name:s.IconName.Add,size:s.IconSize.Md,color:l.IconColor.primaryDefault}),a.default.createElement(s.Text,{variant:l.TextVariant.bodyMdMedium,color:l.TextColor.primaryDefault},t("addAccount")))):null)),z&&O&&a.default.createElement(y.default,{keyringId:U,isOpen:O,onClose:()=>M(!1),closeAfterCompleting:!0}),P&&a.default.createElement(s.Modal,{isOpen:!0,onClose:J},a.default.createElement(s.ModalOverlay,null),a.default.createElement(c.ModalContent,{className:"multichain-account-menu-popover",modalDialogProps:{className:"multichain-account-menu-popover__dialog",padding:0,display:l.Display.Flex,flexDirection:l.FlexDirection.Column}},a.default.createElement(b.WalletDetailsAccountTypeSelection,{onAccountTypeSelect:async e=>{let t=!1;e===C.EVM_WALLET_TYPE?t=await(async()=>{(0,v.trace)({name:v.TraceName.AddAccount});try{return await x((0,E.addNewAccount)(U,!1)),!0}catch(e){return console.error("Error creating Ethereum account:",e),!1}finally{(0,v.endTrace)({name:v.TraceName.AddAccount})}})():e===C.WalletClientType.Solana&&(t=await(async(e,t)=>{(0,v.trace)({name:v.TraceName.AddAccount});try{let n;return e!==C.WalletClientType.Solana?(console.error(`Unsupported client type: ${e}`),!1):(n=F,n?(await n.createAccount({scope:t,entropySource:U},{displayConfirmation:!1,displayAccountNameSuggestion:!1,setSelectedAccount:!1}),!0):(console.error(`Client not available for type: ${e}`),!1))}catch(t){return console.error(`Error creating ${e} account:`,t),!1}finally{(0,v.endTrace)({name:v.TraceName.AddAccount})}})(C.WalletClientType.Solana,r.SolScope.Mainnet)),t&&J()},onClose:J}))))};w.propTypes={};n.default=w}}},{package:"$root$",file:"ui/pages/multichain-accounts/wallet-details/wallet-details.component.tsx"}],[7334,{"../../../shared/constants/urls":5483,"../../../shared/lib/deep-links/routes/nonevm":5503,"../../../shared/lib/deep-links/routes/route":5506,"../../../shared/lib/deep-links/routes/swap":5507,"../../components/component-library":6123,"../../components/multichain/network-list-menu/add-non-evm-account/add-non-evm-account":6375,"../../helpers/constants/design-system":6672,"../../hooks/ramps/useRamps/useRamps":6766,"../../hooks/useMultichainBalances":6806,"../../selectors":7568,"../../selectors/multichain":7577,"../../store/actions":7594,react:4992,"react-redux":4936,"react-router-dom":4960},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.NonEvmBalanceCheck=void 0;var a,o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=E(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(a,i,r):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(e("react")),i=e("react-redux"),r=e("react-router-dom"),s=e("../../components/component-library"),c=e("../../helpers/constants/design-system"),l=e("../../store/actions"),u=e("../../hooks/useMultichainBalances"),d=e("../../../shared/lib/deep-links/routes/nonevm"),p=e("../../../shared/lib/deep-links/routes/route"),m=e("../../../shared/lib/deep-links/routes/swap"),f=e("../../hooks/ramps/useRamps/useRamps"),g=e("../../selectors/multichain"),h=e("../../selectors"),y=e("../../../shared/constants/urls"),b=(a=e("../../components/multichain/network-list-menu/add-non-evm-account/add-non-evm-account"))&&a.__esModule?a:{default:a};function E(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(E=function(e){return e?n:t})(e)}const{getExtensionURL:k}=globalThis.platform;n.NonEvmBalanceCheck=()=>{const e=(0,r.useLocation)(),t=(0,i.useDispatch)(),n=(0,i.useSelector)(h.getMetaMetricsId),a=(0,i.useSelector)(h.getParticipateInMetaMetrics),E=(0,i.useSelector)(h.getDataCollectionForMarketing),v=(0,i.useSelector)(h.getMetaMaskAccountsOrdered),C=(0,i.useSelector)(g.getLastSelectedNonEvmAccount),x=new URLSearchParams(e.search).get(d.NonEvmQueryParams.ChainId),{assetsWithBalance:_}=(0,u.useMultichainBalances)(),T=v.some(e=>e.scopes.includes(x));return(0,o.useEffect)(()=>{if(x&&T){var e;null!=C&&null!==(e=C.scopes)&&void 0!==e&&e.includes(x)&&t((0,l.setSelectedAccount)(C.address));const o=_.some(e=>e.chainId===x&&e.balance&&"0"!==e.balance);window.location.href=o?(e=>{const t=new URLSearchParams;return t.set("sourceToken",e),t.set(m.BridgeQueryParams.SWAPS,"true"),k(p.SWAP_ROUTE,t.toString())})(x):((e,t,n,a)=>{const o=new URLSearchParams;o.set("metamaskEntry",f.RampsMetaMaskEntry.BuySellButton),o.set("chainId",e),t&&o.set("metametricsId",t),o.set("metricsEnabled",String(n)),a&&o.set("marketingEnabled",String(a));const i=new URL("/buy",y.BaseUrl.Portfolio);return i.search=o.toString(),i.toString()})(x,n,a,E)}},[x,_,n,a,E,T,v]),T?null:o.default.createElement(s.Modal,{isOpen:!0,onClose:()=>{}},o.default.createElement(s.ModalOverlay,null),o.default.createElement(s.ModalContent,{modalDialogProps:{padding:0,display:c.Display.Flex,flexDirection:c.FlexDirection.Column}},o.default.createElement(s.Box,{display:c.Display.Flex,flexDirection:c.FlexDirection.Column,justifyContent:c.JustifyContent.spaceBetween,width:c.BlockSize.Full,padding:2},o.default.createElement(b.default,{chainId:x}))))}}}},{package:"$root$",file:"ui/pages/nonevm-balance-check/index.tsx"}],[7335,{"./notification-details":7339},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return o.default}});var a,o=(a=e("./notification-details"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"ui/pages/notification-details/index.js"}],[7336,{"../../../components/component-library":6123,"../../../helpers/constants/design-system":6672,"../../notifications/notification-components/types/notifications/notifications":7362,react:4992},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.NotificationDetailsBody=void 0;var a,o=(a=e("react"))&&a.__esModule?a:{default:a},i=e("../../../components/component-library"),r=e("../../../helpers/constants/design-system"),s=e("../../notifications/notification-components/types/notifications/notifications");n.NotificationDetailsBody=({body:e,notification:t})=>o.default.createElement(i.Box,{display:r.Display.Flex,flexDirection:r.FlexDirection.Column,padding:0},e.type===s.NotificationComponentType.AnnouncementBody&&o.default.createElement(o.default.Fragment,null,o.default.createElement(e.Image,{notification:t}),o.default.createElement(e.Description,{notification:t})),e.type===s.NotificationComponentType.OnChainBody&&o.default.createElement(o.default.Fragment,null,e.Image&&o.default.createElement(e.Image,{notification:t}),e.From&&o.default.createElement(e.From,{notification:t}),e.To&&o.default.createElement(e.To,{notification:t}),e.Account&&o.default.createElement(e.Account,{notification:t}),e.Asset&&o.default.createElement(e.Asset,{notification:t}),e.AssetReceived&&o.default.createElement(e.AssetReceived,{notification:t}),e.Status&&o.default.createElement(e.Status,{notification:t}),e.Network&&o.default.createElement(e.Network,{notification:t}),e.Rate&&o.default.createElement(e.Rate,{notification:t}),e.Provider&&o.default.createElement(e.Provider,{notification:t}),e.NetworkFee&&o.default.createElement(e.NetworkFee,{notification:t})),e.type===s.NotificationComponentType.SnapBody&&o.default.createElement(e.Content,{notification:t}))}}},{package:"$root$",file:"ui/pages/notification-details/notification-details-body/notification-details-body.tsx"}],[7337,{"../../../components/component-library":6123,"../../../helpers/constants/design-system":6672,"../../notifications/notification-components/types/notifications/notifications":7362,react:4992},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.NotificationDetailsFooter=void 0;var a,o=(a=e("react"))&&a.__esModule?a:{default:a},i=e("../../../components/component-library"),r=e("../../../helpers/constants/design-system"),s=e("../../notifications/notification-components/types/notifications/notifications");n.NotificationDetailsFooter=({footer:e,notification:t})=>o.default.createElement(i.Box,{width:r.BlockSize.Full,display:r.Display.Flex,flexDirection:r.FlexDirection.Row,justifyContent:r.JustifyContent.spaceBetween,padding:4,gap:4},e.type===s.NotificationComponentType.OnChainFooter&&o.default.createElement(e.ScanLink,{notification:t}),e.type===s.NotificationComponentType.AnnouncementFooter&&o.default.createElement(i.Box,{display:r.Display.Flex,gap:4,flexDirection:r.FlexDirection.Row,width:r.BlockSize.Full},o.default.createElement(e.ExternalLink,{notification:t}),o.default.createElement(e.ExtensionLink,{notification:t})),e.type===s.NotificationComponentType.SnapFooter&&o.default.createElement(e.Link,{notification:t}))}}},{package:"$root$",file:"ui/pages/notification-details/notification-details-footer/notification-details-footer.tsx"}],[7338,{"../../../components/component-library":6123,react:4992},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.NotificationDetailsHeader=void 0;var a,o=(a=e("react"))&&a.__esModule?a:{default:a},i=e("../../../components/component-library");n.NotificationDetailsHeader=({children:e,onClickBack:t})=>o.default.createElement(i.HeaderBase,{padding:4,startAccessory:o.default.createElement(i.ButtonIcon,{ariaLabel:"Back",iconName:i.IconName.ArrowLeft,size:i.ButtonIconSize.Sm,onClick:t,"data-testid":"notification-details-back-button"}),endAccessory:null},e)}}},{package:"$root$",file:"ui/pages/notification-details/notification-details-header/notification-details-header.tsx"}],[7339,{"../../components/component-library":6123,"../../components/multichain":6356,"../../components/multichain/pages/page":6451,"../../helpers/constants/design-system":6672,"../../helpers/constants/routes":6677,"../../hooks/metamask-notifications/useNotifications":6759,"../../hooks/useNotificationTimeouts":6813,"../../selectors/metamask-notifications/metamask-notifications":7569,"../notifications/notification-components":7354,"./notification-details-body/notification-details-body":7336,"./notification-details-footer/notification-details-footer":7337,"./notification-details-header/notification-details-header":7338,"./utils/utils":7340,"@metamask/notification-services-controller/notification-services":2249,react:4992,"react-redux":4936,"react-router-dom-v5-compat":4955},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){const e=(0,i.useNavigate)(),{notification:t}=function(){const{pathname:e}=(0,i.useLocation)(),t=(0,h.getExtractIdentifier)(e),n=(0,o.useSelector)((0,m.getMetamaskNotificationById)(t));return{notification:n}}();if(function(e){const{markNotificationAsRead:t}=(0,p.useMarkNotificationAsRead)(),{setNotificationTimeout:n}=(0,g.useSnapNotificationTimeouts)();(0,a.useEffect)(()=>(e&&t([{id:e.id,type:e.type,isRead:e.isRead}]),()=>{(null==e?void 0:e.type)===r.TRIGGER_TYPES.SNAP&&n(e.id)}),[])}(t),!t)return e(l.NOTIFICATIONS_ROUTE),null;if(!(0,f.hasNotificationComponents)(t.type))return e(l.NOTIFICATIONS_ROUTE),null;const n=f.NotificationComponents[t.type];return a.default.createElement(u.NotificationsPage,null,a.default.createElement(y.NotificationDetailsHeader,{onClickBack:()=>e(l.NOTIFICATIONS_ROUTE)},a.default.createElement(n.details.title,{notification:t})),a.default.createElement(d.Content,{padding:0},a.default.createElement(s.Box,{display:c.Display.Flex,flexDirection:c.FlexDirection.Column,gap:2,width:c.BlockSize.Full,height:c.BlockSize.Full,justifyContent:c.JustifyContent.spaceBetween},a.default.createElement(b.NotificationDetailsBody,{body:n.details.body,notification:t}),a.default.createElement(E.NotificationDetailsFooter,{footer:n.footer,notification:t}))))};var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=k(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(a,i,r):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-redux"),i=e("react-router-dom-v5-compat"),r=e("@metamask/notification-services-controller/notification-services"),s=e("../../components/component-library"),c=e("../../helpers/constants/design-system"),l=e("../../helpers/constants/routes"),u=e("../../components/multichain"),d=e("../../components/multichain/pages/page"),p=e("../../hooks/metamask-notifications/useNotifications"),m=e("../../selectors/metamask-notifications/metamask-notifications"),f=e("../notifications/notification-components"),g=e("../../hooks/useNotificationTimeouts"),h=e("./utils/utils"),y=e("./notification-details-header/notification-details-header"),b=e("./notification-details-body/notification-details-body"),E=e("./notification-details-footer/notification-details-footer");function k(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(k=function(e){return e?n:t})(e)}}}},{package:"$root$",file:"ui/pages/notification-details/notification-details.tsx"}],[7340,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getExtractIdentifier=function(e){if("string"!=typeof e)return"";const t=e.split("/");return t.length>2?t[2]:""}}}},{package:"$root$",file:"ui/pages/notification-details/utils/utils.ts"}],[7341,{"./notifications-settings":7345},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return o.default}});var a,o=(a=e("./notifications-settings"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"ui/pages/notifications-settings/index.js"}],[7342,{"../../../shared/constants/metametrics":5462,"../../components/component-library":6123,"../../components/multichain":6356,"../../contexts/metamask-notifications/metamask-notifications":6633,"../../contexts/metametrics":6635,"../../helpers/constants/design-system":6672,"../../hooks/metamask-notifications/useNotifications":6759,"../../hooks/useI18nContext":6799,"../../selectors/identity/backup-and-sync":7567,"../../selectors/metamask-notifications/metamask-notifications":7569,react:4992,"react-redux":4936},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.NotificationsSettingsAllowNotifications=function({loading:e,setLoading:t,disabled:n,dataTestId:g}){const h=(0,i.useI18nContext)(),y=(0,a.useContext)(r.MetaMetricsContext),{listNotifications:b}=(0,d.useMetamaskNotificationsContext)(),E=(0,o.useSelector)(l.selectIsMetamaskNotificationsEnabled),[k,v]=(0,a.useState)(E),C=(0,o.useSelector)(l.getIsUpdatingMetamaskNotifications),x=(0,o.useSelector)(u.selectIsBackupAndSyncEnabled),{enableNotifications:_,error:T}=(0,c.useEnableNotifications)(),{disableNotifications:w,error:S}=(0,c.useDisableNotifications)(),I=T||S;(0,a.useEffect)(()=>{t(C)},[C,t]),(0,a.useEffect)(()=>{v(E)},[E]),(0,a.useEffect)(()=>{!I&&E&&b()},[E,I,b]);const N=(0,a.useCallback)(async()=>{t(!0),E?(y({category:s.MetaMetricsEventCategory.NotificationSettings,event:s.MetaMetricsEventName.NotificationsSettingsUpdated,properties:{settings_type:"notifications",was_profile_syncing_on:x,old_value:!0,new_value:!1}}),await w()):(y({category:s.MetaMetricsEventCategory.NotificationSettings,event:s.MetaMetricsEventName.NotificationsSettingsUpdated,properties:{settings_type:"notifications",was_profile_syncing_on:x,old_value:!1,new_value:!0}}),await _()),t(!1),v(!k)},[t,E,w,_,k,x,y]),O=(0,a.useMemo)(()=>a.default.createElement(p.Text,{as:"a",href:"https://support.metamask.io/privacy-and-security/profile-privacy",target:"_blank",rel:"noopener noreferrer",key:"privacy-link",color:m.TextColor.infoDefault},h("notificationsSettingsPageAllowNotificationsLink")),[h]);return a.default.createElement(p.Box,{display:m.Display.Flex,justifyContent:m.JustifyContent.flexStart,flexDirection:m.FlexDirection.Column,alignItems:m.AlignItems.flexStart,gap:4,paddingLeft:8,paddingRight:8,paddingBottom:8},a.default.createElement(f.NotificationsSettingsBox,{value:k,onToggle:N,disabled:n,loading:e,dataTestId:g},a.default.createElement(f.NotificationsSettingsType,{title:h("allowNotifications")})),a.default.createElement(p.Text,{variant:m.TextVariant.bodyMd,color:m.TextColor.textAlternative},h("notificationsSettingsPageAllowNotifications",[O])),I&&a.default.createElement(p.Box,null,a.default.createElement(p.Text,{as:"p",color:m.TextColor.errorDefault},h(E?"turnOffMetamaskNotificationsError":"turnOnMetamaskNotificationsError"))))};var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(a,i,r):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-redux"),i=e("../../hooks/useI18nContext"),r=e("../../contexts/metametrics"),s=e("../../../shared/constants/metametrics"),c=e("../../hooks/metamask-notifications/useNotifications"),l=e("../../selectors/metamask-notifications/metamask-notifications"),u=e("../../selectors/identity/backup-and-sync"),d=e("../../contexts/metamask-notifications/metamask-notifications"),p=e("../../components/component-library"),m=e("../../helpers/constants/design-system"),f=e("../../components/multichain");function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}}}},{package:"$root$",file:"ui/pages/notifications-settings/notifications-settings-allow-notifications.tsx"}],[7343,{"../../../shared/constants/metametrics":5462,"../../components/multichain":6356,"../../contexts/metametrics":6635,"../../helpers/utils/util":6728,"../../hooks/metamask-notifications/useNotifications":6759,"../../hooks/metamask-notifications/useSwitchNotifications":6760,"@metamask/controller-utils":1321,react:4992},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.NotificationsSettingsPerAccount=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(a,i,r):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("@metamask/controller-utils"),i=e("../../contexts/metametrics"),r=e("../../../shared/constants/metametrics"),s=e("../../hooks/metamask-notifications/useSwitchNotifications"),c=e("../../components/multichain"),l=e("../../hooks/metamask-notifications/useNotifications"),u=e("../../helpers/utils/util");function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}n.NotificationsSettingsPerAccount=({address:e,name:t,isEnabled:n,isLoading:d,disabledSwitch:p,refetchAccountSettings:m})=>{const f=(0,a.useContext)(i.MetaMetricsContext),{toggleAccount:g,loading:h,error:y}=function(e,t){const{onChange:n,error:o}=(0,s.useSwitchAccountNotificationsChange)(),{listNotifications:i}=(0,l.useListNotifications)(),[r,c]=(0,a.useState)(!1);return{toggleAccount:(0,a.useCallback)(async a=>{c(!0);try{await n([e],a),await t(),i()}catch{}c(!1)},[e,i,t,n]),loading:r,error:o}}(e,m),b=d||h,E=y,k=(0,a.useCallback)(async()=>{f({category:r.MetaMetricsEventCategory.NotificationSettings,event:r.MetaMetricsEventName.NotificationsSettingsUpdated,properties:{settings_type:"account_notifications",old_value:n,new_value:!n}}),await g(!n)},[e,n,g,f]),v=(0,o.toChecksumHexAddress)(e),C=(0,u.shortenAddress)(v);return a.default.createElement(a.default.Fragment,null,a.default.createElement(c.NotificationsSettingsBox,{value:n??!1,onToggle:k,key:e,disabled:p,loading:b,error:E,dataTestId:`${C}-notifications-settings`},a.default.createElement(c.NotificationsSettingsAccount,{address:e,name:t})))}}}},{package:"$root$",file:"ui/pages/notifications-settings/notifications-settings-per-account.tsx"}],[7344,{"../../../shared/constants/metametrics":5462,"../../components/component-library":6123,"../../components/multichain":6356,"../../contexts/metamask-notifications/metamask-notifications":6633,"../../contexts/metametrics":6635,"../../helpers/constants/design-system":6672,"../../hooks/metamask-notifications/useSwitchNotifications":6760,"../../hooks/useI18nContext":6799,"../../selectors/metamask-notifications/metamask-notifications":7569,react:4992,"react-redux":4936},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.NotificationsSettingsTypes=function({disabled:e}){const t=(0,s.useI18nContext)(),{listNotifications:n}=(0,c.useMetamaskNotificationsContext)(),f=(0,a.useContext)(i.MetaMetricsContext),g=(0,o.useSelector)(m.selectIsFeatureAnnouncementsEnabled),{onChange:h,error:y}=(0,l.useSwitchFeatureAnnouncementsChange)(),[b,E]=(0,a.useState)(g);return a.default.createElement(a.default.Fragment,null,a.default.createElement(u.Box,{paddingLeft:8,paddingRight:8,paddingBottom:4,paddingTop:4,"data-testid":"notifications-settings-per-types"},a.default.createElement(u.Text,{variant:d.TextVariant.bodyMd,color:d.TextColor.textDefault},t("customizeYourNotifications")),a.default.createElement(u.Text,{variant:d.TextVariant.bodySm,color:d.TextColor.textAlternative},t("customizeYourNotificationsText"))),a.default.createElement(u.Box,{display:d.Display.Flex,justifyContent:d.JustifyContent.flexStart,flexDirection:d.FlexDirection.Column,alignItems:d.AlignItems.flexStart,gap:6,paddingLeft:8,paddingRight:8,paddingBottom:4},a.default.createElement(p.NotificationsSettingsBox,{value:b,onToggle:async()=>{E(!b);try{h(!b),f({category:r.MetaMetricsEventCategory.NotificationSettings,event:r.MetaMetricsEventName.NotificationsSettingsUpdated,properties:{settings_type:"product_announcements",old_value:b,new_value:!b}}),n()}catch(e){E(b)}},error:y,disabled:e,dataTestId:"product-announcements"},a.default.createElement(p.NotificationsSettingsType,{icon:u.IconName.Star,title:t("productAnnouncements")}))),a.default.createElement(u.Box,{borderColor:d.BorderColor.borderMuted,width:d.BlockSize.Full,style:{height:"1px",borderBottomWidth:0}}))};var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(a,i,r):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-redux"),i=e("../../contexts/metametrics"),r=e("../../../shared/constants/metametrics"),s=e("../../hooks/useI18nContext"),c=e("../../contexts/metamask-notifications/metamask-notifications"),l=e("../../hooks/metamask-notifications/useSwitchNotifications"),u=e("../../components/component-library"),d=e("../../helpers/constants/design-system"),p=e("../../components/multichain"),m=e("../../selectors/metamask-notifications/metamask-notifications");function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}}}},{package:"$root$",file:"ui/pages/notifications-settings/notifications-settings-types.tsx"}],[7345,{"../../components/component-library":6123,"../../components/multichain":6356,"../../components/multichain/pages/page":6451,"../../helpers/constants/design-system":6672,"../../helpers/constants/routes":6677,"../../hooks/metamask-notifications/useSwitchNotifications":6760,"../../hooks/useI18nContext":6799,"../../selectors":7568,"../../selectors/metamask-notifications/metamask-notifications":7569,"./notifications-settings-allow-notifications":7342,"./notifications-settings-per-account":7343,"./notifications-settings-types":7344,react:4992,"react-redux":4936,"react-router-dom-v5-compat":4955},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){var e;const t=(0,i.useNavigate)(),n=(0,i.useLocation)(),b=(0,r.useI18nContext)(),E=(0,o.useSelector)(p.selectIsMetamaskNotificationsEnabled),k=(0,o.useSelector)(p.getIsUpdatingMetamaskNotifications),v=function(){const e=(0,o.useSelector)(p.getValidNotificationAccounts),t=(0,o.useSelector)(m.getInternalAccounts),n=(0,a.useMemo)(()=>e.map(e=>t.find(t=>t.address.toLowerCase()===e.toLowerCase())).filter(e=>Boolean(e)),[e,t]);return n}(),[C,x]=(0,a.useState)(k),_=(0,a.useMemo)(()=>v.map(e=>e.address),[v]),T=(0,f.useAccountSettingsProps)(_),w=T.accountsBeingUpdated.length>0,S=async()=>{await T.update(_)},I=null===(e=n.state)||void 0===e?void 0:e.fromPage;return a.default.createElement(u.NotificationsPage,null,a.default.createElement(d.Header,{startAccessory:a.default.createElement(c.ButtonIcon,{ariaLabel:"Back",iconName:c.IconName.ArrowLeft,size:c.ButtonIconSize.Sm,onClick:()=>t(I||s.NOTIFICATIONS_ROUTE)}),endAccessory:null},b("notifications")),a.default.createElement(d.Content,{padding:0},a.default.createElement(g.NotificationsSettingsAllowNotifications,{loading:C,setLoading:x,dataTestId:"notifications-settings-allow",disabled:w}),a.default.createElement(c.Box,{borderColor:l.BorderColor.borderMuted,width:l.BlockSize.Full,style:{height:"1px",borderBottomWidth:0}}),E&&a.default.createElement(a.default.Fragment,null,a.default.createElement(h.NotificationsSettingsTypes,{disabled:C||w}),a.default.createElement(a.default.Fragment,null,a.default.createElement(c.Box,{paddingLeft:8,paddingRight:8,paddingBottom:4,paddingTop:4,"data-testid":"notifications-settings-per-account"},a.default.createElement(c.Text,{variant:l.TextVariant.bodyMd,color:l.TextColor.textDefault},b("accountActivity")),a.default.createElement(c.Text,{variant:l.TextVariant.bodySm,color:l.TextColor.textAlternative},b("accountActivityText"))),a.default.createElement(c.Box,{display:l.Display.Flex,justifyContent:l.JustifyContent.flexStart,flexDirection:l.FlexDirection.Column,alignItems:l.AlignItems.flexStart,gap:6,paddingLeft:8,paddingRight:8,paddingBottom:4},v.map(e=>{var t;return a.default.createElement(y.NotificationsSettingsPerAccount,{key:e.id,address:e.address,name:e.metadata.name,disabledSwitch:T.initialLoading||w,isLoading:T.accountsBeingUpdated.includes(e.address),isEnabled:(null===(t=T.data)||void 0===t?void 0:t[e.address.toLowerCase()])??!1,refetchAccountSettings:S})}))))))};var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=b(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(a,i,r):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-redux"),i=e("react-router-dom-v5-compat"),r=e("../../hooks/useI18nContext"),s=e("../../helpers/constants/routes"),c=e("../../components/component-library"),l=e("../../helpers/constants/design-system"),u=e("../../components/multichain"),d=e("../../components/multichain/pages/page"),p=e("../../selectors/metamask-notifications/metamask-notifications"),m=e("../../selectors"),f=e("../../hooks/metamask-notifications/useSwitchNotifications"),g=e("./notifications-settings-allow-notifications"),h=e("./notifications-settings-types"),y=e("./notifications-settings-per-account");function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(b=function(e){return e?n:t})(e)}}}},{package:"$root$",file:"ui/pages/notifications-settings/notifications-settings.tsx"}],[7346,{"../../components/component-library":6123,"../../helpers/constants/design-system":6672,"../../hooks/useI18nContext":6799,"../../selectors/metamask-notifications/metamask-notifications":7569,react:4992,"react-redux":4936},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.NewFeatureTag=function(){const e=(0,l.useI18nContext)();if((0,i.useSelector)(r.selectIsMetamaskNotificationsFeatureSeen))return null;return o.default.createElement(s.Tag,{backgroundColor:c.BackgroundColor.infoMuted,borderStyle:c.BorderStyle.none,borderRadius:c.BorderRadius.MD,label:e("new"),labelProps:{color:c.TextColor.primaryDefault,variant:c.TextVariant.bodySm},paddingLeft:2,paddingRight:2})};var a,o=(a=e("react"))&&a.__esModule?a:{default:a},i=e("react-redux"),r=e("../../selectors/metamask-notifications/metamask-notifications"),s=e("../../components/component-library"),c=e("../../helpers/constants/design-system"),l=e("../../hooks/useI18nContext")}}},{package:"$root$",file:"ui/pages/notifications/NewFeatureTag.tsx"}],[7347,{"./notifications":7368},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return o.default}});var a,o=(a=e("./notifications"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"ui/pages/notifications/index.js"}],[7348,{"../../../../../shared/lib/translate":5551,"../../../../components/component-library":6123,"../../../../components/multichain":6356,"../../../../components/multichain/notification-list-item-icon/notification-list-item-icon":6424,"../../../../helpers/constants/design-system":6672,"../../../../helpers/utils/notification.util":6716,"../../../../helpers/utils/util":6728,"../node-guard":7357,"../types/notifications/notifications":7362,"@metamask/notification-services-controller":2277,react:4992},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.components=void 0;var a,o=(a=e("react"))&&a.__esModule?a:{default:a},i=e("@metamask/notification-services-controller"),r=e("../../../../../shared/lib/translate"),s=e("../node-guard"),c=e("../types/notifications/notifications"),l=e("../../../../helpers/utils/util"),u=e("../../../../helpers/utils/notification.util"),d=e("../../../../helpers/constants/design-system"),p=e("../../../../components/multichain"),m=e("../../../../components/multichain/notification-list-item-icon/notification-list-item-icon"),f=e("../../../../components/component-library");const{TRIGGER_TYPES:g}=i.NotificationServicesController.Constants,h=(0,s.isOfTypeNodeGuard)([g.ERC1155_RECEIVED,g.ERC1155_SENT]),y=e=>e.type===g.ERC1155_SENT,b=e=>y(e)?(0,r.t)("notificationItemNFTSentTo"):(0,r.t)("notificationItemNFTReceivedFrom"),E=e=>{const t=(0,l.shortenAddress)(y(e)?e.data.to:e.data.from);return(0,u.createTextItems)([b(e)||"",t],d.TextVariant.bodySm)};n.components={guardFn:h,item:({notification:e,onClick:t})=>{var n,a,i,r,s;return o.default.createElement(p.NotificationListItem,{id:e.id,isRead:e.isRead,icon:{type:null!==(n=e.data.nft)&&void 0!==n&&n.image?m.NotificationListItemIconType.Nft:m.NotificationListItemIconType.Token,value:(null===(a=e.data.nft)||void 0===a?void 0:a.image)||"http://foo.com/bar.png",badge:{icon:y(e)?f.IconName.Arrow2UpRight:f.IconName.Received,position:f.BadgeWrapperPosition.bottomRight}},title:E(e),description:(r=e,(0,u.createTextItems)([(null===(s=r.data.nft)||void 0===s?void 0:s.collection.name)||""],d.TextVariant.bodyMd)),createdAt:new Date(e.createdAt),amount:(null===(i=e.data.nft)||void 0===i?void 0:i.token_id)||"",onClick:t})},details:{title:({notification:e})=>o.default.createElement(p.NotificationDetailTitle,{title:`${y(e)?(0,r.t)("notificationItemSent"):(0,r.t)("notificationItemReceived")} NFT`,date:(0,u.formatIsoDateString)(e.createdAt)}),body:{type:c.NotificationComponentType.OnChainBody,Image:({notification:e})=>{var t,n,a;const{nativeCurrencyLogo:i,nativeCurrencyName:r}=(0,u.getNetworkDetailsByChainId)(e.chain_id);return o.default.createElement(p.NotificationDetailNft,{networkSrc:i,tokenId:(null===(t=e.data.nft)||void 0===t?void 0:t.token_id)||"",tokenName:(null===(n=e.data.nft)||void 0===n?void 0:n.name)||"",tokenSrc:(null===(a=e.data.nft)||void 0===a?void 0:a.image)||"",networkName:r})},From:({notification:e})=>o.default.createElement(p.NotificationDetailAddress,{side:`${(0,r.t)("notificationItemFrom")}${y(e)?` (${(0,r.t)("you")})`:""}`,address:e.data.from}),To:({notification:e})=>o.default.createElement(p.NotificationDetailAddress,{side:`${(0,r.t)("notificationItemTo")}${y(e)?"":` (${(0,r.t)("you")})`}`,address:e.data.to}),Status:()=>o.default.createElement(p.NotificationDetailInfo,{icon:{iconName:f.IconName.Check,color:d.TextColor.successDefault,backgroundColor:d.BackgroundColor.successMuted},label:(0,r.t)("notificationItemStatus")||"",detail:(0,r.t)("notificationItemConfirmed")||""}),Asset:({notification:e})=>{var t,n,a;const{nativeCurrencyLogo:i}=(0,u.getNetworkDetailsByChainId)(e.chain_id);return o.default.createElement(p.NotificationDetailCollection,{icon:{src:(null===(t=e.data.nft)||void 0===t?void 0:t.image)||"",badgeSrc:i},label:(0,r.t)("notificationItemCollection")||"",collection:`${null===(n=e.data.nft)||void 0===n?void 0:n.collection.name} (${null===(a=e.data.nft)||void 0===a?void 0:a.token_id})`})},Network:({notification:e})=>{const{nativeCurrencyLogo:t,nativeCurrencyName:n}=(0,u.getNetworkDetailsByChainId)(e.chain_id);return o.default.createElement(p.NotificationDetailAsset,{icon:{src:t},label:(0,r.t)("notificationDetailNetwork")||"",detail:n})},NetworkFee:({notification:e})=>o.default.createElement(p.NotificationDetailNetworkFee,{notification:e})}},footer:{type:c.NotificationComponentType.OnChainFooter,ScanLink:({notification:e})=>o.default.createElement(p.NotificationDetailBlockExplorerButton,{notification:e,chainId:e.chain_id,txHash:e.tx_hash})}}}}},{package:"$root$",file:"ui/pages/notifications/notification-components/erc1155-sent-received/erc1155-sent-received.tsx"}],[7349,{"../../../../../shared/lib/translate":5551,"../../../../components/component-library":6123,"../../../../components/multichain":6356,"../../../../components/multichain/notification-list-item-icon/notification-list-item-icon":6424,"../../../../helpers/constants/design-system":6672,"../../../../helpers/utils/notification.util":6716,"../../../../helpers/utils/util":6728,"../node-guard":7357,"../types/notifications/notifications":7362,"@metamask/notification-services-controller":2277,react:4992},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.components=void 0;var a,o=(a=e("react"))&&a.__esModule?a:{default:a},i=e("@metamask/notification-services-controller"),r=e("../../../../../shared/lib/translate"),s=e("../node-guard"),c=e("../types/notifications/notifications"),l=e("../../../../components/multichain/notification-list-item-icon/notification-list-item-icon"),u=e("../../../../helpers/utils/util"),d=e("../../../../helpers/utils/notification.util"),p=e("../../../../components/multichain"),m=e("../../../../helpers/constants/design-system"),f=e("../../../../components/component-library");const{TRIGGER_TYPES:g}=i.NotificationServicesController.Constants,h=(0,s.isOfTypeNodeGuard)([g.ERC20_RECEIVED,g.ERC20_SENT]),y=e=>e.type===g.ERC20_SENT,b=e=>y(e)?(0,r.t)("notificationItemSentTo"):(0,r.t)("notificationItemReceivedFrom"),E=e=>{const t=(0,u.shortenAddress)(y(e)?e.data.to:e.data.from);return(0,d.createTextItems)([b(e)||"",t],m.TextVariant.bodySm)};n.components={guardFn:h,item:({notification:e,onClick:t})=>{return o.default.createElement(p.NotificationListItem,{id:e.id,isRead:e.isRead,icon:{type:l.NotificationListItemIconType.Token,value:e.data.token.image,badge:{icon:y(e)?f.IconName.Arrow2UpRight:f.IconName.Received,position:f.BadgeWrapperPosition.bottomRight}},title:E(e),description:(n=e,(0,d.createTextItems)([n.data.token.name],m.TextVariant.bodyMd)),createdAt:new Date(e.createdAt),amount:`${(0,d.getAmount)(e.data.token.amount,e.data.token.decimals,{shouldEllipse:!0})} ${e.data.token.symbol}`,onClick:t});var n},details:{title:({notification:e})=>o.default.createElement(p.NotificationDetailTitle,{title:`${y(e)?(0,r.t)("notificationItemSent"):(0,r.t)("notificationItemReceived")} ${e.data.token.symbol}`,date:(0,d.formatIsoDateString)(e.createdAt)}),body:{type:c.NotificationComponentType.OnChainBody,From:({notification:e})=>o.default.createElement(p.NotificationDetailAddress,{side:`${(0,r.t)("notificationItemFrom")}${y(e)?` (${(0,r.t)("you")})`:""}`,address:e.data.from}),To:({notification:e})=>o.default.createElement(p.NotificationDetailAddress,{side:`${(0,r.t)("notificationItemTo")}${y(e)?"":` (${(0,r.t)("you")})`}`,address:e.data.to}),Status:({notification:e})=>o.default.createElement(p.NotificationDetailInfo,{icon:{iconName:f.IconName.Check,color:m.TextColor.successDefault,backgroundColor:m.BackgroundColor.successMuted},label:(0,r.t)("notificationItemStatus")||"",detail:(0,r.t)("notificationItemConfirmed")||"",action:o.default.createElement(p.NotificationDetailCopyButton,{notification:e,text:e.tx_hash,displayText:(0,r.t)("notificationItemTransactionId")||""})}),Asset:({notification:e})=>{const{nativeCurrencyLogo:t}=(0,d.getNetworkDetailsByChainId)(e.chain_id);return o.default.createElement(p.NotificationDetailAsset,{icon:{src:e.data.token.image,badge:{src:t,position:f.BadgeWrapperPosition.topRight}},label:(0,r.t)("asset")||"",detail:e.data.token.symbol,fiatValue:`$${(0,d.getUsdAmount)(e.data.token.amount,e.data.token.decimals,e.data.token.usd)}`,value:`${(0,d.getAmount)(e.data.token.amount,e.data.token.decimals,{shouldEllipse:!0})} ${e.data.token.symbol}`})},Network:({notification:e})=>{const{nativeCurrencyLogo:t,nativeCurrencyName:n}=(0,d.getNetworkDetailsByChainId)(e.chain_id);return o.default.createElement(p.NotificationDetailAsset,{icon:{src:t},label:(0,r.t)("notificationDetailNetwork")||"",detail:n})},NetworkFee:({notification:e})=>o.default.createElement(p.NotificationDetailNetworkFee,{notification:e})}},footer:{type:c.NotificationComponentType.OnChainFooter,ScanLink:({notification:e})=>o.default.createElement(p.NotificationDetailBlockExplorerButton,{notification:e,chainId:e.chain_id,txHash:e.tx_hash})}}}}},{package:"$root$",file:"ui/pages/notifications/notification-components/erc20-sent-received/erc20-sent-received.tsx"}],[7350,{"../../../../../shared/lib/translate":5551,"../../../../components/component-library":6123,"../../../../components/multichain":6356,"../../../../components/multichain/notification-list-item-icon/notification-list-item-icon":6424,"../../../../helpers/constants/design-system":6672,"../../../../helpers/utils/notification.util":6716,"../../../../helpers/utils/util":6728,"../node-guard":7357,"../types/notifications/notifications":7362,"@metamask/notification-services-controller":2277,react:4992},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.components=void 0;var a,o=(a=e("react"))&&a.__esModule?a:{default:a},i=e("@metamask/notification-services-controller"),r=e("../../../../../shared/lib/translate"),s=e("../node-guard"),c=e("../types/notifications/notifications"),l=e("../../../../helpers/utils/util"),u=e("../../../../helpers/utils/notification.util"),d=e("../../../../helpers/constants/design-system"),p=e("../../../../components/multichain"),m=e("../../../../components/multichain/notification-list-item-icon/notification-list-item-icon"),f=e("../../../../components/component-library");const{TRIGGER_TYPES:g}=i.NotificationServicesController.Constants,h=(0,s.isOfTypeNodeGuard)([g.ERC721_RECEIVED,g.ERC721_SENT]),y=e=>e.type===g.ERC721_SENT,b=e=>y(e)?(0,r.t)("notificationItemNFTSentTo"):(0,r.t)("notificationItemNFTReceivedFrom"),E=e=>{const t=(0,l.shortenAddress)(y(e)?e.data.to:e.data.from);return(0,u.createTextItems)([b(e)||"",t],d.TextVariant.bodySm)};n.components={guardFn:h,item:({notification:e,onClick:t})=>{return o.default.createElement(p.NotificationListItem,{id:e.id,isRead:e.isRead,icon:{type:m.NotificationListItemIconType.Nft,value:e.data.nft.image,badge:{icon:y(e)?f.IconName.Arrow2UpRight:f.IconName.Received,position:f.BadgeWrapperPosition.bottomRight}},title:E(e),description:(n=e,(0,u.createTextItems)([n.data.nft.collection.name],d.TextVariant.bodyMd)),createdAt:new Date(e.createdAt),amount:`#${e.data.nft.token_id}`,onClick:t});var n},details:{title:({notification:e})=>o.default.createElement(p.NotificationDetailTitle,{title:`${y(e)?(0,r.t)("notificationItemSent"):(0,r.t)("notificationItemReceived")} NFT`,date:(0,u.formatIsoDateString)(e.createdAt)}),body:{type:c.NotificationComponentType.OnChainBody,Image:({notification:e})=>{const{nativeCurrencyLogo:t,nativeCurrencyName:n}=(0,u.getNetworkDetailsByChainId)(e.chain_id);return o.default.createElement(p.NotificationDetailNft,{networkSrc:t,tokenId:e.data.nft.token_id,tokenName:e.data.nft.name,tokenSrc:e.data.nft.image,networkName:n})},From:({notification:e})=>o.default.createElement(p.NotificationDetailAddress,{side:`${(0,r.t)("notificationItemFrom")}${y(e)?` (${(0,r.t)("you")})`:""}`,address:e.data.from}),To:({notification:e})=>o.default.createElement(p.NotificationDetailAddress,{side:`${(0,r.t)("notificationItemTo")}${y(e)?"":` (${(0,r.t)("you")})`}`,address:e.data.to}),Status:()=>o.default.createElement(p.NotificationDetailInfo,{icon:{iconName:f.IconName.Check,color:d.TextColor.successDefault,backgroundColor:d.BackgroundColor.successMuted},label:(0,r.t)("notificationItemStatus")||"",detail:(0,r.t)("notificationItemConfirmed")||""}),Asset:({notification:e})=>{const{nativeCurrencyLogo:t}=(0,u.getNetworkDetailsByChainId)(e.chain_id);return o.default.createElement(p.NotificationDetailCollection,{icon:{src:e.data.nft.image,badgeSrc:t},label:(0,r.t)("notificationItemCollection")||"",collection:`${e.data.nft.collection.name} (${e.data.nft.token_id})`})},Network:({notification:e})=>{const{nativeCurrencyLogo:t,nativeCurrencyName:n}=(0,u.getNetworkDetailsByChainId)(e.chain_id);return o.default.createElement(p.NotificationDetailAsset,{icon:{src:t},label:(0,r.t)("notificationDetailNetwork")||"",detail:n})},NetworkFee:({notification:e})=>o.default.createElement(p.NotificationDetailNetworkFee,{notification:e})}},footer:{type:c.NotificationComponentType.OnChainFooter,ScanLink:({notification:e})=>o.default.createElement(p.NotificationDetailBlockExplorerButton,{notification:e,chainId:e.chain_id,txHash:e.tx_hash})}}}}},{package:"$root$",file:"ui/pages/notifications/notification-components/erc721-sent-received/erc721-sent-received.tsx"}],[7351,{"../../../../../shared/lib/translate":5551,"../../../../components/component-library":6123,"../../../../components/multichain":6356,"../../../../components/multichain/notification-list-item-icon/notification-list-item-icon":6424,"../../../../helpers/constants/design-system":6672,"../../../../helpers/utils/notification.util":6716,"../../../../helpers/utils/util":6728,"../node-guard":7357,"../types/notifications/notifications":7362,"@metamask/notification-services-controller":2277,react:4992},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.components=void 0;var a,o=(a=e("react"))&&a.__esModule?a:{default:a},i=e("@metamask/notification-services-controller"),r=e("../../../../../shared/lib/translate"),s=e("../node-guard"),c=e("../types/notifications/notifications"),l=e("../../../../helpers/utils/util"),u=e("../../../../helpers/utils/notification.util"),d=e("../../../../helpers/constants/design-system"),p=e("../../../../components/multichain"),m=e("../../../../components/multichain/notification-list-item-icon/notification-list-item-icon"),f=e("../../../../components/component-library");const{TRIGGER_TYPES:g}=i.NotificationServicesController.Constants,h=(0,s.isOfTypeNodeGuard)([g.ETH_RECEIVED,g.ETH_SENT]),y=e=>e.type===g.ETH_SENT,b=e=>y(e)?(0,r.t)("notificationItemSentTo"):(0,r.t)("notificationItemReceivedFrom"),E=e=>(0,u.getNetworkDetailsByChainId)(e.chain_id),k=e=>{const t=(0,l.shortenAddress)(y(e)?e.data.to:e.data.from);return(0,u.createTextItems)([b(e)||"",t],d.TextVariant.bodySm)},v=e=>{const{nativeCurrencySymbol:t}=E(e);return(0,u.createTextItems)([t],d.TextVariant.bodyMd)};n.components={guardFn:h,item:({notification:e,onClick:t})=>{const{nativeCurrencySymbol:n,nativeCurrencyLogo:a}=E(e);return o.default.createElement(p.NotificationListItem,{id:e.id,isRead:e.isRead,icon:{type:m.NotificationListItemIconType.Token,value:a,badge:{icon:y(e)?f.IconName.Arrow2UpRight:f.IconName.Received,position:f.BadgeWrapperPosition.bottomRight}},title:k(e),description:v(e),createdAt:new Date(e.createdAt),amount:`${(0,u.formatAmount)(parseFloat(e.data.amount.eth),{shouldEllipse:!0})} ${n}`,onClick:t})},details:{title:({notification:e})=>{const{nativeCurrencySymbol:t}=(0,u.getNetworkDetailsByChainId)(e.chain_id);return o.default.createElement(p.NotificationDetailTitle,{title:`${y(e)?(0,r.t)("notificationItemSent"):(0,r.t)("notificationItemReceived")} ${t}`,date:(0,u.formatIsoDateString)(e.createdAt)})},body:{type:c.NotificationComponentType.OnChainBody,From:({notification:e})=>o.default.createElement(p.NotificationDetailAddress,{side:`${(0,r.t)("notificationItemFrom")}${y(e)?` (${(0,r.t)("you")})`:""}`,address:e.data.from}),To:({notification:e})=>o.default.createElement(p.NotificationDetailAddress,{side:`${(0,r.t)("notificationItemTo")}${y(e)?"":` (${(0,r.t)("you")})`}`,address:e.data.to}),Status:({notification:e})=>o.default.createElement(p.NotificationDetailInfo,{icon:{iconName:f.IconName.Check,color:d.TextColor.successDefault,backgroundColor:d.BackgroundColor.successMuted},label:(0,r.t)("notificationItemStatus")||"",detail:(0,r.t)("notificationItemConfirmed")||"",action:o.default.createElement(p.NotificationDetailCopyButton,{notification:e,text:e.tx_hash,displayText:(0,r.t)("notificationItemTransactionId")||""})}),Asset:({notification:e})=>{const{nativeCurrencyLogo:t,nativeCurrencySymbol:n}=(0,u.getNetworkDetailsByChainId)(e.chain_id);return o.default.createElement(p.NotificationDetailAsset,{icon:{src:t,badge:{src:t,position:f.BadgeWrapperPosition.topRight}},label:(0,r.t)("asset")||"",detail:n,fiatValue:`$${(0,u.formatAmount)(parseFloat(e.data.amount.usd),{shouldEllipse:!0})}`,value:`${(0,u.formatAmount)(parseFloat(e.data.amount.eth),{shouldEllipse:!0})} ${n}`})},Network:({notification:e})=>{const{nativeCurrencyLogo:t,nativeCurrencyName:n}=(0,u.getNetworkDetailsByChainId)(e.chain_id);return o.default.createElement(p.NotificationDetailAsset,{icon:{src:t},label:(0,r.t)("notificationDetailNetwork")||"",detail:n})},NetworkFee:({notification:e})=>o.default.createElement(p.NotificationDetailNetworkFee,{notification:e})}},footer:{type:c.NotificationComponentType.OnChainFooter,ScanLink:({notification:e})=>o.default.createElement(p.NotificationDetailBlockExplorerButton,{notification:e,chainId:e.chain_id,txHash:e.tx_hash})}}}}},{package:"$root$",file:"ui/pages/notifications/notification-components/eth-sent-received/eth-sent-received.tsx"}],[7352,{"../../../../../shared/constants/metametrics":5462,"../../../../components/component-library":6123,"../../../../components/multichain":6356,"../../../../contexts/metametrics":6635,react:4992},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ExternalLinkButton=n.ExtensionLinkButton=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(a,i,r):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("../../../../../shared/constants/metametrics"),i=e("../../../../contexts/metametrics"),r=e("../../../../components/multichain"),s=e("../../../../components/component-library");function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}const l=e=>{const t=(0,a.useContext)(i.MetaMetricsContext);return(0,a.useCallback)(()=>{t({category:o.MetaMetricsEventCategory.NotificationInteraction,event:o.MetaMetricsEventName.NotificationDetailClicked,properties:{notification_id:e.id,notification_type:e.type,clicked_item:e.clickType}})},[e.clickType,e.id,e.type,t])};n.ExtensionLinkButton=e=>{const{notification:t}=e,n=l({id:t.id,type:t.type,clickType:"internal_link"});return t.data.extensionLink?a.default.createElement(r.NotificationDetailButton,{variant:s.ButtonVariant.Primary,text:t.data.extensionLink.extensionLinkText,href:`/${t.data.extensionLink.extensionLinkRoute}`,isExternal:!0,onClick:n}):null};n.ExternalLinkButton=e=>{const{notification:t}=e,n=l({id:t.id,type:t.type,clickType:"external_link"});return t.data.externalLink?a.default.createElement(r.NotificationDetailButton,{variant:s.ButtonVariant.Secondary,text:t.data.externalLink.externalLinkText,href:`${t.data.externalLink.externalLinkUrl}`,isExternal:!0,onClick:n}):null}}}},{package:"$root$",file:"ui/pages/notifications/notification-components/feature-announcement/annonucement-footer-buttons.tsx"}],[7353,{"../../../../components/component-library":6123,"../../../../components/multichain":6356,"../../../../components/multichain/notification-list-item-icon/notification-list-item-icon":6424,"../../../../helpers/constants/design-system":6672,"../../../../helpers/utils/notification.util":6716,"../node-guard":7357,"../types/notifications/notifications":7362,"./annonucement-footer-buttons":7352,"@metamask/notification-services-controller":2277,dompurify:3965,react:4992},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.components=void 0;var a=f(e("react")),o=e("@metamask/notification-services-controller"),i=f(e("dompurify")),r=e("../node-guard"),s=e("../types/notifications/notifications"),c=e("../../../../components/multichain/notification-list-item-icon/notification-list-item-icon"),l=e("../../../../helpers/utils/notification.util"),u=e("../../../../components/component-library"),d=e("../../../../components/multichain"),p=e("../../../../helpers/constants/design-system"),m=e("./annonucement-footer-buttons");function f(e){return e&&e.__esModule?e:{default:e}}const g=(0,i.default)(window),{TRIGGER_TYPES:h}=o.NotificationServicesController.Constants,y=(0,r.isOfTypeNodeGuard)([h.FEATURES_ANNOUNCEMENT]),b=e=>(0,l.createTextItems)([e.data.shortDescription],p.TextVariant.bodyMd);n.components={guardFn:y,item:({notification:e,onClick:t})=>{return a.default.createElement(d.NotificationListItem,{id:e.id,isRead:e.isRead,icon:{type:c.NotificationListItemIconType.Token,value:"./images/product-announcement-logo.svg"},title:(n=e,(0,l.createTextItems)([n.data.title],p.TextVariant.bodySm)),description:b(e),createdAt:new Date(e.createdAt),onClick:t});var n},details:{title:({notification:e})=>a.default.createElement(d.NotificationDetailTitle,{title:e.data.title,date:(0,l.formatIsoDateString)(e.createdAt)}),body:{type:s.NotificationComponentType.AnnouncementBody,Image:({notification:e})=>a.default.createElement(u.Box,{display:p.Display.Block,width:p.BlockSize.Full,paddingLeft:4,paddingRight:4,paddingBottom:4},a.default.createElement(u.Box,{as:"img",src:`https:${e.data.image.url}?fm=jpg&fl=progressive&w=1000&q=80`,alt:e.data.title,title:e.data.title,display:p.Display.Block,justifyContent:p.JustifyContent.center,borderRadius:p.BorderRadius.XL,width:p.BlockSize.Full})),Description:({notification:e})=>a.default.createElement(u.Box,{paddingLeft:4,paddingRight:4},a.default.createElement(u.Text,{variant:p.TextVariant.bodyMd,as:"div",dangerouslySetInnerHTML:{__html:g.sanitize(e.data.longDescription)}}))}},footer:{type:s.NotificationComponentType.AnnouncementFooter,ExtensionLink:m.ExtensionLinkButton,ExternalLink:m.ExternalLinkButton}}}}},{package:"$root$",file:"ui/pages/notifications/notification-components/feature-announcement/feature-announcement.tsx"}],[7354,{"./erc1155-sent-received/erc1155-sent-received":7348,"./erc20-sent-received/erc20-sent-received":7349,"./erc721-sent-received/erc721-sent-received":7350,"./eth-sent-received/eth-sent-received":7351,"./feature-announcement/feature-announcement":7353,"./lido-stake-ready-to-be-withdrawn/lido-stake-ready-to-be-withdrawn":7355,"./lido-withdrawal-requested/lido-withdrawal-requested":7356,"./snap/snap":7359,"./stake/stake":7360,"./swap-completed/swap-completed":7361,"@metamask/notification-services-controller":2277},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.hasNotificationComponents=n.TRIGGER_TYPES=n.NotificationComponents=void 0;var a=e("@metamask/notification-services-controller"),o=e("./erc20-sent-received/erc20-sent-received"),i=e("./erc721-sent-received/erc721-sent-received"),r=e("./erc1155-sent-received/erc1155-sent-received"),s=e("./eth-sent-received/eth-sent-received"),c=e("./feature-announcement/feature-announcement"),l=e("./stake/stake"),u=e("./swap-completed/swap-completed"),d=e("./lido-withdrawal-requested/lido-withdrawal-requested"),p=e("./lido-stake-ready-to-be-withdrawn/lido-stake-ready-to-be-withdrawn"),m=e("./snap/snap");const{TRIGGER_TYPES:f}=a.NotificationServicesController.Constants;n.TRIGGER_TYPES=f;const g=n.NotificationComponents={[f.ERC20_SENT]:o.components,[f.ERC20_RECEIVED]:o.components,[f.ERC721_SENT]:i.components,[f.ERC721_RECEIVED]:i.components,[f.ERC1155_SENT]:r.components,[f.ERC1155_RECEIVED]:r.components,[f.ETH_SENT]:s.components,[f.ETH_RECEIVED]:s.components,[f.FEATURES_ANNOUNCEMENT]:c.components,[f.ROCKETPOOL_STAKE_COMPLETED]:l.components,[f.ROCKETPOOL_UNSTAKE_COMPLETED]:l.components,[f.LIDO_STAKE_COMPLETED]:l.components,[f.LIDO_WITHDRAWAL_COMPLETED]:l.components,[f.LIDO_WITHDRAWAL_REQUESTED]:d.components,[f.METAMASK_SWAP_COMPLETED]:u.components,[f.LIDO_STAKE_READY_TO_BE_WITHDRAWN]:p.components,[f.SNAP]:m.components};n.hasNotificationComponents=e=>e in g}}},{package:"$root$",file:"ui/pages/notifications/notification-components/index.ts"}],[7355,{"../../../../../shared/lib/translate":5551,"../../../../components/component-library":6123,"../../../../components/multichain":6356,"../../../../components/multichain/notification-list-item-icon/notification-list-item-icon":6424,"../../../../helpers/constants/design-system":6672,"../../../../helpers/utils/notification.util":6716,"../node-guard":7357,"../types/notifications/notifications":7362,"@metamask/notification-services-controller":2277,react:4992},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.components=void 0;var a,o=(a=e("react"))&&a.__esModule?a:{default:a},i=e("@metamask/notification-services-controller"),r=e("../node-guard"),s=e("../types/notifications/notifications"),c=e("../../../../components/multichain"),l=e("../../../../../shared/lib/translate"),u=e("../../../../helpers/utils/notification.util"),d=e("../../../../helpers/constants/design-system"),p=e("../../../../components/multichain/notification-list-item-icon/notification-list-item-icon"),m=e("../../../../components/component-library");const{TRIGGER_TYPES:f}=i.NotificationServicesController.Constants,g=(0,r.isOfTypeNodeGuard)([f.LIDO_STAKE_READY_TO_BE_WITHDRAWN]),h=e=>{const t=(0,u.formatAmount)(parseFloat(e.data.staked_eth.amount),{shouldEllipse:!0}),n=(0,l.t)("notificationItemLidoStakeReadyToBeWithdrawnMessage",[`${t} ${e.data.staked_eth.symbol}`])||"";return(0,u.createTextItems)([n],d.TextVariant.bodyMd)};n.components={guardFn:g,item:({notification:e,onClick:t})=>o.default.createElement(c.NotificationListItem,{id:e.trigger_id,isRead:e.isRead,icon:{type:p.NotificationListItemIconType.Token,value:e.data.staked_eth.image,badge:{icon:m.IconName.Stake,position:m.BadgeWrapperPosition.bottomRight}},title:(0,u.createTextItems)([(0,l.t)("notificationItemLidoStakeReadyToBeWithdrawn")||""],d.TextVariant.bodySm),description:h(e),createdAt:new Date(e.createdAt),onClick:t}),details:{title:({notification:e})=>o.default.createElement(c.NotificationDetailTitle,{title:(0,l.t)("notificationItemLidoStakeReadyToBeWithdrawn")||"",date:(0,u.formatIsoDateString)(e.createdAt)}),body:{type:s.NotificationComponentType.OnChainBody,Account:({notification:e})=>e.address?o.default.createElement(c.NotificationDetailAddress,{side:(0,l.t)("account")||"",address:e.address}):null,Status:()=>o.default.createElement(c.NotificationDetailInfo,{icon:{iconName:m.IconName.Check,color:d.TextColor.successDefault,backgroundColor:d.BackgroundColor.successMuted},label:(0,l.t)("notificationItemStatus")||"",detail:(0,l.t)("notificationItemConfirmed")||""}),Asset:({notification:e})=>{const{nativeCurrencyLogo:t}=(0,u.getNetworkDetailsByChainId)(e.chain_id);return o.default.createElement(c.NotificationDetailAsset,{icon:{src:e.data.staked_eth.image,badge:{src:t,position:m.BadgeWrapperPosition.topRight}},label:(0,l.t)("notificationItemLidoStakeReadyToBeWithdrawn")||"",detail:e.data.staked_eth.symbol,fiatValue:`$${(0,u.formatAmount)(parseFloat(e.data.staked_eth.usd),{shouldEllipse:!0})}`,value:`${(0,u.formatAmount)(parseFloat(e.data.staked_eth.amount),{shouldEllipse:!0})} ${e.data.staked_eth.symbol}`})},AssetReceived:({notification:e})=>{const{nativeCurrencyLogo:t}=(0,u.getNetworkDetailsByChainId)(e.chain_id);return o.default.createElement(c.NotificationDetailAsset,{icon:{src:e.data.staked_eth.image,badge:{src:t,position:m.BadgeWrapperPosition.topRight}},label:(0,l.t)("notificationItemStakingProvider")||"",detail:e.data.staked_eth.symbol})}}},footer:{type:s.NotificationComponentType.OnChainFooter,ScanLink:({notification:e})=>o.default.createElement(c.NotificationDetailBlockExplorerButton,{notification:e,chainId:e.chain_id,txHash:e.tx_hash})}}}}},{package:"$root$",file:"ui/pages/notifications/notification-components/lido-stake-ready-to-be-withdrawn/lido-stake-ready-to-be-withdrawn.tsx"}],[7356,{"../../../../../shared/lib/translate":5551,"../../../../components/component-library":6123,"../../../../components/multichain":6356,"../../../../components/multichain/notification-list-item-icon/notification-list-item-icon":6424,"../../../../helpers/constants/design-system":6672,"../../../../helpers/utils/notification.util":6716,"../node-guard":7357,"../types/notifications/notifications":7362,"@metamask/notification-services-controller":2277,react:4992},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.components=void 0;var a,o=(a=e("react"))&&a.__esModule?a:{default:a},i=e("@metamask/notification-services-controller"),r=e("../node-guard"),s=e("../types/notifications/notifications"),c=e("../../../../components/multichain/notification-list-item-icon/notification-list-item-icon"),l=e("../../../../components/multichain"),u=e("../../../../helpers/utils/notification.util"),d=e("../../../../../shared/lib/translate"),p=e("../../../../helpers/constants/design-system"),m=e("../../../../components/component-library");const{TRIGGER_TYPES:f}=i.NotificationServicesController.Constants,g=(0,r.isOfTypeNodeGuard)([f.LIDO_WITHDRAWAL_REQUESTED]),h=e=>{const t=(0,u.getAmount)(e.data.stake_in.amount,e.data.stake_in.decimals,{shouldEllipse:!0}),n=(0,d.t)("notificationItemLidoWithdrawalRequestedMessage",[`${t} ${e.data.stake_in.symbol}`])||"";return(0,u.createTextItems)([n],p.TextVariant.bodyMd)};n.components={guardFn:g,item:({notification:e,onClick:t})=>o.default.createElement(l.NotificationListItem,{id:e.id,isRead:e.isRead,icon:{type:c.NotificationListItemIconType.Token,value:e.data.stake_in.image,badge:{icon:m.IconName.Stake,position:m.BadgeWrapperPosition.bottomRight}},title:(0,u.createTextItems)([(0,d.t)("notificationItemUnStakingRequested")||""],p.TextVariant.bodySm),description:h(e),createdAt:new Date(e.createdAt),amount:`${(0,u.getAmount)(e.data.stake_in.amount,e.data.stake_in.decimals,{shouldEllipse:!0})} ${e.data.stake_in.symbol}`,onClick:t}),details:{title:({notification:e})=>o.default.createElement(l.NotificationDetailTitle,{title:(0,d.t)("notificationItemUnStakingRequested")||"",date:(0,u.formatIsoDateString)(e.createdAt)}),body:{type:s.NotificationComponentType.OnChainBody,Account:({notification:e})=>e.address?o.default.createElement(l.NotificationDetailAddress,{side:(0,d.t)("account")||"",address:e.address}):null,Status:({notification:e})=>o.default.createElement(l.NotificationDetailInfo,{icon:{iconName:m.IconName.Check,color:p.TextColor.successDefault,backgroundColor:p.BackgroundColor.successMuted},label:(0,d.t)("notificationItemStatus")||"",detail:(0,d.t)("notificationItemConfirmed")||"",action:o.default.createElement(l.NotificationDetailCopyButton,{notification:e,text:e.tx_hash,displayText:(0,d.t)("notificationItemTransactionId")||""})}),Asset:({notification:e})=>{const{nativeCurrencyLogo:t}=(0,u.getNetworkDetailsByChainId)(e.chain_id);return o.default.createElement(l.NotificationDetailAsset,{icon:{src:e.data.stake_in.image,badge:{src:t,position:m.BadgeWrapperPosition.topRight}},label:(0,d.t)("notificationItemUnStakingRequested")||"",detail:e.data.stake_in.symbol,fiatValue:`$${(0,u.getUsdAmount)(e.data.stake_in.amount,e.data.stake_in.decimals,e.data.stake_in.usd)}`,value:`${(0,u.getAmount)(e.data.stake_in.amount,e.data.stake_in.decimals,{shouldEllipse:!0})} ${e.data.stake_in.symbol}`})},AssetReceived:({notification:e})=>{const{nativeCurrencyLogo:t}=(0,u.getNetworkDetailsByChainId)(e.chain_id);return o.default.createElement(l.NotificationDetailAsset,{icon:{src:e.data.stake_in.image,badge:{src:t,position:m.BadgeWrapperPosition.topRight}},label:(0,d.t)("notificationItemStakingProvider")||"",detail:"Lido-staked ETH"})}}},footer:{type:s.NotificationComponentType.OnChainFooter,ScanLink:({notification:e})=>o.default.createElement(l.NotificationDetailBlockExplorerButton,{notification:e,chainId:e.chain_id,txHash:e.tx_hash})}}}}},{package:"$root$",file:"ui/pages/notifications/notification-components/lido-withdrawal-requested/lido-withdrawal-requested.tsx"}],[7357,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.isOfTypeNodeGuard=void 0;n.isOfTypeNodeGuard=e=>t=>e.includes(t.type)}}},{package:"$root$",file:"ui/pages/notifications/notification-components/node-guard.ts"}],[7358,{"../../../../../shared/constants/metametrics":5462,"../../../../components/app/snaps/snap-link-warning":5890,"../../../../components/component-library":6123,"../../../../components/multichain":6356,"../../../../contexts/metametrics":6635,"../../../../hooks/snaps/useSnapNavigation":6772,react:4992},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SnapFooterButton=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(a,i,r):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=u(e("../../../../hooks/snaps/useSnapNavigation")),i=u(e("../../../../components/app/snaps/snap-link-warning")),r=e("../../../../components/multichain"),s=e("../../../../components/component-library"),c=e("../../../../contexts/metametrics"),l=e("../../../../../shared/constants/metametrics");function u(e){return e&&e.__esModule?e:{default:e}}function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}n.SnapFooterButton=e=>{var t;const n=(0,a.useContext)(c.MetaMetricsContext),{useSnapNavigate:u}=(0,o.default)(),[d,p]=(0,a.useState)(!1),m=e.notification.data,f=null==m||null===(t=m.detailedView)||void 0===t?void 0:t.footerLink,g=(0,a.useCallback)(()=>{p(!1)},[]),h=(0,a.useCallback)((t,a)=>{n({category:l.MetaMetricsEventCategory.NotificationInteraction,event:l.MetaMetricsEventName.NotificationDetailClicked,properties:{notification_id:e.notification.id,notification_type:e.notification.type,clicked_item:a?"external_link":"internal_link"}}),a?p(!0):u(t)},[u,e.notification.id,e.notification.type,n]);if(!f)return null;const{href:y,text:b}=f,E=!y.startsWith("metamask:");return a.default.createElement(a.default.Fragment,null,a.default.createElement(i.default,{isOpen:d,onClose:g,url:y}),a.default.createElement(r.NotificationDetailButton,{variant:s.ButtonVariant.Secondary,isExternal:E,text:b,onClick:()=>h(y,E)}))}}}},{package:"$root$",file:"ui/pages/notifications/notification-components/snap/snap-footer-button.tsx"}],[7359,{"../../../../components/app/snaps/snap-icon":5886,"../../../../components/app/snaps/snap-ui-markdown":5943,"../../../../components/app/snaps/snap-ui-renderer":5982,"../../../../components/component-library":6123,"../../../../components/multichain":6356,"../../../../helpers/constants/design-system":6672,"../../../../helpers/utils/notification.util":6716,"../../../../helpers/utils/util":6728,"../../../../hooks/metamask-notifications/useNotifications":6759,"../../../../selectors":7568,"../node-guard":7357,"../types/notifications/notifications":7362,"./snap-footer-button":7358,"@metamask/notification-services-controller/notification-services":2249,react:4992,"react-redux":4936,"react-router-dom-v5-compat":4955},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.components=void 0;var a,o=(a=e("react"))&&a.__esModule?a:{default:a},i=e("react-redux"),r=e("react-router-dom-v5-compat"),s=e("@metamask/notification-services-controller/notification-services"),c=e("../../../../components/multichain"),l=e("../../../../selectors"),u=e("../../../../helpers/utils/util"),d=e("../types/notifications/notifications"),p=e("../../../../helpers/utils/notification.util"),m=e("../../../../components/app/snaps/snap-ui-renderer"),f=e("../../../../helpers/constants/design-system"),g=e("../../../../components/component-library"),h=e("../node-guard"),y=e("../../../../components/app/snaps/snap-icon"),b=e("../../../../hooks/metamask-notifications/useNotifications"),E=e("../../../../components/app/snaps/snap-ui-markdown"),k=e("./snap-footer-button");n.components={guardFn:(0,h.isOfTypeNodeGuard)([s.TRIGGER_TYPES.SNAP]),item:({notification:e,onClick:t})=>{const n=(0,r.useNavigate)(),a=(0,i.useSelector)(l.getSnapsMetadata),s=(0,u.getSnapName)(a),{markNotificationAsRead:d}=(0,b.useMarkNotificationAsRead)();return o.default.createElement(c.NotificationListItemSnap,{id:e.id,snapId:e.data.origin,isRead:e.isRead,createdAt:new Date(e.createdAt),title:{items:[{text:s(e.data.origin)}]},snapMessage:e.data.message,handleSnapClick:t,handleSnapButton:()=>{e.isRead||d([{id:e.id,type:e.type,isRead:e.isRead}]),n((0,u.getSnapRoute)(e.data.origin))}})},details:{title:({notification:e})=>o.default.createElement(c.NotificationDetailTitle,{title:e.data.detailedView.title,date:(0,p.formatIsoDateString)(e.createdAt)}),body:{type:d.NotificationComponentType.SnapBody,Content:({notification:e})=>{const t=(0,i.useSelector)(l.getSnapsMetadata),n=(0,u.getSnapName)(t),a=e.data.origin;return o.default.createElement(o.default.Fragment,null,o.default.createElement(g.Box,{display:f.Display.Flex,style:{borderBottom:"1px solid var(--color-border-muted)"},flexDirection:f.FlexDirection.Column,padding:[4,2,4,4]},o.default.createElement(g.Box,{display:f.Display.Flex,alignItems:f.AlignItems.center,paddingBottom:2},o.default.createElement(y.SnapIcon,{snapId:a,avatarSize:g.IconSize.Xl}),o.default.createElement(g.Text,{paddingLeft:4,fontWeight:f.FontWeight.Medium},n(a))),o.default.createElement(E.SnapUIMarkdown,{markdown:!0},e.data.message)),o.default.createElement(g.Box,{paddingLeft:1,paddingRight:1},o.default.createElement(m.SnapUIRenderer,{snapId:e.data.origin,interfaceId:e.data.detailedView.interfaceId,contentBackgroundColor:f.BackgroundColor.backgroundDefault})))}}},footer:{type:d.NotificationComponentType.SnapFooter,Link:k.SnapFooterButton}}}}},{package:"$root$",file:"ui/pages/notifications/notification-components/snap/snap.tsx"}],[7360,{"../../../../../shared/lib/translate":5551,"../../../../components/component-library":6123,"../../../../components/multichain":6356,"../../../../components/multichain/notification-list-item-icon/notification-list-item-icon":6424,"../../../../helpers/constants/design-system":6672,"../../../../helpers/utils/notification.util":6716,"../node-guard":7357,"../types/notifications/notifications":7362,"@metamask/notification-services-controller":2277,react:4992},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.components=void 0;var a,o=(a=e("react"))&&a.__esModule?a:{default:a},i=e("@metamask/notification-services-controller"),r=e("../../../../../shared/lib/translate"),s=e("../node-guard"),c=e("../types/notifications/notifications"),l=e("../../../../components/multichain"),u=e("../../../../components/multichain/notification-list-item-icon/notification-list-item-icon"),d=e("../../../../components/component-library"),p=e("../../../../helpers/utils/notification.util"),m=e("../../../../helpers/constants/design-system");const{TRIGGER_TYPES:f}=i.NotificationServicesController.Constants,g=(0,s.isOfTypeNodeGuard)([f.ROCKETPOOL_STAKE_COMPLETED,f.ROCKETPOOL_UNSTAKE_COMPLETED,f.LIDO_STAKE_COMPLETED,f.LIDO_WITHDRAWAL_COMPLETED]),h={[f.LIDO_STAKE_COMPLETED]:(0,r.t)("notificationItemStaked"),[f.LIDO_WITHDRAWAL_COMPLETED]:(0,r.t)("notificationItemUnStakeCompleted"),[f.ROCKETPOOL_STAKE_COMPLETED]:(0,r.t)("notificationItemStakeCompleted"),[f.ROCKETPOOL_UNSTAKE_COMPLETED]:(0,r.t)("notificationItemUnStakeCompleted")},y={[f.ROCKETPOOL_STAKE_COMPLETED]:"staked",[f.ROCKETPOOL_UNSTAKE_COMPLETED]:"unstaked",[f.LIDO_STAKE_COMPLETED]:"staked",[f.LIDO_WITHDRAWAL_COMPLETED]:"unstaked"},b={[f.LIDO_STAKE_COMPLETED]:"Lido-staked ETH",[f.LIDO_WITHDRAWAL_COMPLETED]:"Lido-staked ETH",[f.ROCKETPOOL_STAKE_COMPLETED]:"Rocket Pool-staked ETH",[f.ROCKETPOOL_UNSTAKE_COMPLETED]:"Rocket Pool-staked ETH"},E=e=>{const t=y[e.type];return(0,p.createTextItems)(["staked"===t?e.data.stake_out.symbol:e.data.stake_in.symbol],m.TextVariant.bodyMd)};n.components={guardFn:g,item:({notification:e,onClick:t})=>{const n=y[e.type],a="staked"===n?e.data.stake_in:e.data.stake_out,i=(0,p.getAmount)(a.amount,a.decimals,{shouldEllipse:!0});return o.default.createElement(l.NotificationListItem,{id:e.id,isRead:e.isRead,icon:{type:u.NotificationListItemIconType.Token,value:e.data.stake_out.image,badge:{icon:d.IconName.Stake,position:d.BadgeWrapperPosition.bottomRight}},title:(r=e,(0,p.createTextItems)([h[r.type]||""],m.TextVariant.bodySm)),description:E(e),createdAt:new Date(e.createdAt),amount:`${i} ${"staked"===n?e.data.stake_in.symbol:e.data.stake_out.symbol}`,onClick:t});var r},details:{title:({notification:e})=>{const t="staked"===y[e.type]?`${(0,r.t)("notificationItemStaked")} ${e.data.stake_in.symbol}`:`${(0,r.t)("notificationItemUnStaked")} ${e.data.stake_in.symbol}`;return o.default.createElement(l.NotificationDetailTitle,{title:t,date:(0,p.formatIsoDateString)(e.createdAt)})},body:{type:c.NotificationComponentType.OnChainBody,Account:({notification:e})=>e.address?o.default.createElement(l.NotificationDetailAddress,{side:(0,r.t)("account")||"",address:e.address}):null,Asset:({notification:e})=>{const t=y[e.type],{nativeCurrencyLogo:n}=(0,p.getNetworkDetailsByChainId)(e.chain_id);return o.default.createElement(l.NotificationDetailAsset,{icon:{src:e.data.stake_in.image,badge:{src:n,position:d.BadgeWrapperPosition.topRight}},label:"staked"===t?(0,r.t)("notificationItemStaked")||"":(0,r.t)("notificationItemUnStaked")||"",detail:e.data.stake_in.symbol,fiatValue:`$${(0,p.getUsdAmount)(e.data.stake_in.amount,e.data.stake_in.decimals,e.data.stake_in.usd)}`,value:`${(0,p.getAmount)(e.data.stake_in.amount,e.data.stake_in.decimals,{shouldEllipse:!0})} ${e.data.stake_in.symbol}`})},AssetReceived:({notification:e})=>{const{nativeCurrencyLogo:t}=(0,p.getNetworkDetailsByChainId)(e.chain_id);return o.default.createElement(l.NotificationDetailAsset,{icon:{src:e.data.stake_out.image,badge:{src:t,position:d.BadgeWrapperPosition.topRight}},label:(0,r.t)("notificationItemReceived")||"",detail:e.data.stake_out.symbol,fiatValue:`$${(0,p.getUsdAmount)(e.data.stake_out.amount,e.data.stake_out.decimals,e.data.stake_out.usd)}`,value:`${(0,p.getAmount)(e.data.stake_out.amount,e.data.stake_out.decimals,{shouldEllipse:!0})} ${e.data.stake_out.symbol}`})},Status:({notification:e})=>o.default.createElement(l.NotificationDetailInfo,{icon:{iconName:d.IconName.Check,color:m.TextColor.successDefault,backgroundColor:m.BackgroundColor.successMuted},label:(0,r.t)("notificationItemStatus")||"",detail:(0,r.t)("notificationItemConfirmed")||"",action:o.default.createElement(l.NotificationDetailCopyButton,{notification:e,text:e.tx_hash,displayText:(0,r.t)("notificationItemTransactionId")||""})}),Provider:({notification:e})=>{const t=y[e.type],n=b[e.type];return o.default.createElement(l.NotificationDetailAsset,{icon:{src:e.data.stake_out.image,badge:{src:"staked"===t?e.data.stake_out.image:e.data.stake_in.image}},label:(0,r.t)("notificationItemStakingProvider")||"",detail:n})},NetworkFee:({notification:e})=>o.default.createElement(l.NotificationDetailNetworkFee,{notification:e})}},footer:{type:c.NotificationComponentType.OnChainFooter,ScanLink:({notification:e})=>o.default.createElement(l.NotificationDetailBlockExplorerButton,{notification:e,chainId:e.chain_id,txHash:e.tx_hash})}}}}},{package:"$root$",file:"ui/pages/notifications/notification-components/stake/stake.tsx"}],[7361,{"../../../../../shared/lib/translate":5551,"../../../../components/component-library":6123,"../../../../components/multichain":6356,"../../../../components/multichain/notification-list-item-icon/notification-list-item-icon":6424,"../../../../helpers/constants/design-system":6672,"../../../../helpers/utils/notification.util":6716,"../node-guard":7357,"../types/notifications/notifications":7362,"@metamask/notification-services-controller":2277,react:4992},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.components=void 0;var a,o=(a=e("react"))&&a.__esModule?a:{default:a},i=e("@metamask/notification-services-controller"),r=e("../node-guard"),s=e("../types/notifications/notifications"),c=e("../../../../../shared/lib/translate"),l=e("../../../../components/multichain"),u=e("../../../../components/multichain/notification-list-item-icon/notification-list-item-icon"),d=e("../../../../components/component-library"),p=e("../../../../helpers/utils/notification.util"),m=e("../../../../helpers/constants/design-system");const{TRIGGER_TYPES:f}=i.NotificationServicesController.Constants,g=(0,r.isOfTypeNodeGuard)([f.METAMASK_SWAP_COMPLETED]),h=e=>(0,p.createTextItems)([e.data.token_out.symbol],m.TextVariant.bodyMd);n.components={guardFn:g,item:({notification:e,onClick:t})=>{return o.default.createElement(l.NotificationListItem,{id:e.id,isRead:e.isRead,icon:{type:u.NotificationListItemIconType.Token,value:e.data.token_out.image,badge:{icon:d.IconName.SwapHorizontal,position:d.BadgeWrapperPosition.bottomRight}},title:(n=e,(0,p.createTextItems)([(0,c.t)("notificationItemSwapped")||"",n.data.token_in.symbol,(0,c.t)("notificationItemSwappedFor")||""],m.TextVariant.bodySm)),description:h(e),createdAt:new Date(e.createdAt),amount:`${(0,p.getAmount)(e.data.token_out.amount,e.data.token_out.decimals,{shouldEllipse:!0})} ${e.data.token_out.symbol}`,onClick:t});var n},details:{title:({notification:e})=>o.default.createElement(l.NotificationDetailTitle,{title:`${(0,c.t)("notificationItemSwapped")||""} ${e.data.token_out.symbol}`,date:(0,p.formatIsoDateString)(e.createdAt)}),body:{type:s.NotificationComponentType.OnChainBody,Account:({notification:e})=>e.address?o.default.createElement(l.NotificationDetailAddress,{side:(0,c.t)("account")||"",address:e.address}):null,Asset:({notification:e})=>{const{nativeCurrencyLogo:t}=(0,p.getNetworkDetailsByChainId)(e.chain_id);return o.default.createElement(l.NotificationDetailAsset,{icon:{src:e.data.token_in.image,badge:{src:t,position:d.BadgeWrapperPosition.topRight}},label:(0,c.t)("notificationItemSwapped")||"",detail:e.data.token_in.symbol,fiatValue:`$${(0,p.getUsdAmount)(e.data.token_in.amount,e.data.token_in.decimals,e.data.token_in.usd)}`,value:`${(0,p.getAmount)(e.data.token_in.amount,e.data.token_in.decimals,{shouldEllipse:!0})} ${e.data.token_in.symbol}`})},AssetReceived:({notification:e})=>{const{nativeCurrencyLogo:t}=(0,p.getNetworkDetailsByChainId)(e.chain_id);return o.default.createElement(l.NotificationDetailAsset,{icon:{src:e.data.token_out.image,badge:{src:t,position:d.BadgeWrapperPosition.topRight}},label:(0,c.t)("notificationItemTo")||"",detail:e.data.token_out.symbol,fiatValue:`$${(0,p.getUsdAmount)(e.data.token_out.amount,e.data.token_out.decimals,e.data.token_out.usd)}`,value:`${(0,p.getAmount)(e.data.token_out.amount,e.data.token_out.decimals,{shouldEllipse:!0})} ${e.data.token_out.symbol}`})},Status:({notification:e})=>o.default.createElement(l.NotificationDetailInfo,{icon:{iconName:d.IconName.Check,color:m.TextColor.successDefault,backgroundColor:m.BackgroundColor.successMuted},label:(0,c.t)("notificationItemStatus")||"",detail:(0,c.t)("notificationItemConfirmed")||"",action:o.default.createElement(l.NotificationDetailCopyButton,{notification:e,text:e.tx_hash,displayText:(0,c.t)("notificationItemTransactionId")||""})}),Network:({notification:e})=>{const{nativeCurrencyName:t,nativeCurrencyLogo:n}=(0,p.getNetworkDetailsByChainId)(e.chain_id);return o.default.createElement(l.NotificationDetailAsset,{icon:{src:n},label:(0,c.t)("notificationItemNetwork")||"",detail:t})},Rate:({notification:e})=>o.default.createElement(l.NotificationDetailInfo,{icon:{iconName:d.IconName.SwapHorizontal,color:m.TextColor.infoDefault,backgroundColor:m.BackgroundColor.infoMuted},label:(0,c.t)("notificationItemRate")||"",detail:`1 ${e.data.token_out.symbol} ≈ ${(1/parseFloat(e.data.rate)).toFixed(5)} ${e.data.token_in.symbol}`}),NetworkFee:({notification:e})=>o.default.createElement(l.NotificationDetailNetworkFee,{notification:e})}},footer:{type:s.NotificationComponentType.OnChainFooter,ScanLink:({notification:e})=>o.default.createElement(l.NotificationDetailBlockExplorerButton,{notification:e,chainId:e.chain_id,txHash:e.tx_hash})}}}}},{package:"$root$",file:"ui/pages/notifications/notification-components/swap-completed/swap-completed.tsx"}],[7362,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.NotificationComponentType=void 0;n.NotificationComponentType=function(e){return e.AnnouncementBody="body_feature_announcement",e.AnnouncementFooter="footer_feature_announcement",e.OnChainBody="body_onchain_notification",e.OnChainFooter="footer_onchain_notification",e.SnapBody="body_snap_notification",e.SnapFooter="footer_snap_notification",e}({})}}},{package:"$root$",file:"ui/pages/notifications/notification-components/types/notifications/notifications.ts"}],[7363,{"../../../shared/constants/metametrics":5462,"../../components/component-library":6123,"../../contexts/metametrics":6635,"../../helpers/constants/design-system":6672,"../../helpers/constants/routes":6677,"../../hooks/metamask-notifications/useNotifications":6759,"../../hooks/useNotificationTimeouts":6813,"./notification-components":7354,"@metamask/utils":2835,react:4992,"react-router-dom-v5-compat":4955},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.NotificationsListItem=function({notification:e}){const t=(0,o.useNavigate)(),n=(0,a.useContext)(r.MetaMetricsContext),{setNotificationTimeout:f}=(0,p.useSnapNotificationTimeouts)(),{markNotificationAsRead:g}=(0,d.useMarkNotificationAsRead)(),h=(0,a.useCallback)(()=>{n({category:s.MetaMetricsEventCategory.NotificationInteraction,event:s.MetaMetricsEventName.NotificationClicked,properties:{notification_id:e.id,notification_type:e.type,..."chain_id"in e&&{chain_id:e.chain_id},previously_read:e.isRead}}),g([{id:e.id,type:e.type,isRead:e.isRead}]),e.type!==m.TRIGGER_TYPES.SNAP||(0,i.hasProperty)(e.data,"detailedView")?t(`${u.NOTIFICATIONS_ROUTE}/${e.id}`):f(e.id)},[e,g,t]);if(!(0,m.hasNotificationComponents)(e.type))return null;const y=m.NotificationComponents[e.type];return a.default.createElement(c.Box,{display:l.Display.Flex,flexDirection:l.FlexDirection.Row,width:l.BlockSize.Full,"data-testid":`notification-list-item-${e.id}`},a.default.createElement(y.item,{notification:e,onClick:h}))};var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(a,i,r):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-router-dom-v5-compat"),i=e("@metamask/utils"),r=e("../../contexts/metametrics"),s=e("../../../shared/constants/metametrics"),c=e("../../components/component-library"),l=e("../../helpers/constants/design-system"),u=e("../../helpers/constants/routes"),d=e("../../hooks/metamask-notifications/useNotifications"),p=e("../../hooks/useNotificationTimeouts"),m=e("./notification-components");function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}}}},{package:"$root$",file:"ui/pages/notifications/notifications-list-item.tsx"}],[7364,{"../../components/component-library":6123,"../../helpers/constants/design-system":6672,react:4992},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.NotificationsPlaceholder=function({title:e,text:t}){return o.default.createElement(i.Box,{height:r.BlockSize.Full,width:r.BlockSize.Full,display:r.Display.Flex,justifyContent:r.JustifyContent.center,alignItems:r.AlignItems.center,flexDirection:r.FlexDirection.Column,gap:2,"data-testid":"notifications-list-placeholder"},o.default.createElement(i.Icon,{name:i.IconName.Notification,size:i.IconSize.Xl}),o.default.createElement(i.Text,{variant:r.TextVariant.headingSm},e),o.default.createElement(i.Text,{variant:r.TextVariant.bodyMd,textAlign:r.TextAlign.Center},t))};var a,o=(a=e("react"))&&a.__esModule?a:{default:a},i=e("../../components/component-library"),r=e("../../helpers/constants/design-system")}}},{package:"$root$",file:"ui/pages/notifications/notifications-list-placeholder.tsx"}],[7365,{"../../../shared/constants/metametrics":5462,"../../components/component-library":6123,"../../contexts/metametrics":6635,"../../helpers/constants/design-system":6672,"../../hooks/metamask-notifications/useNotifications":6759,"../../hooks/useI18nContext":6799,"../../hooks/useNotificationTimeouts":6813,"@metamask/notification-services-controller/notification-services":2249,react:4992},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.NotificationsListReadAllButton=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(a,i,r):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("@metamask/notification-services-controller/notification-services"),i=e("../../contexts/metametrics"),r=e("../../../shared/constants/metametrics"),s=e("../../hooks/useI18nContext"),c=e("../../hooks/metamask-notifications/useNotifications"),l=e("../../components/component-library"),u=e("../../helpers/constants/design-system"),d=e("../../hooks/useNotificationTimeouts");function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}n.NotificationsListReadAllButton=({notifications:e})=>{const t=(0,s.useI18nContext)(),{markNotificationAsRead:n}=(0,c.useMarkNotificationAsRead)(),p=(0,a.useContext)(i.MetaMetricsContext),{setNotificationTimeout:m}=(0,d.useSnapNotificationTimeouts)();return a.default.createElement(l.Box,{paddingLeft:4,paddingRight:4,paddingTop:4,paddingBottom:4,className:"notifications__list__read__all__button"},a.default.createElement(l.Button,{onClick:()=>{let t=[];e&&e.length>0&&(t=e.filter(e=>(null==e?void 0:e.id)!==undefined&&!e.isRead).map(e=>({id:e.id,type:e.type,isRead:e.isRead})),t.filter(e=>e.type===o.TRIGGER_TYPES.SNAP).forEach(e=>m(e.id))),p({category:r.MetaMetricsEventCategory.NotificationInteraction,event:r.MetaMetricsEventName.MarkAllNotificationsRead}),n(t)},variant:l.ButtonVariant.Primary,width:u.BlockSize.Full,"data-testid":"notifications-list-read-all-button"},t("notificationsMarkAllAsRead")))}}}},{package:"$root$",file:"ui/pages/notifications/notifications-list-read-all-button.tsx"}],[7366,{"../../../shared/constants/metametrics":5462,"../../components/component-library":6123,"../../contexts/metamask-notifications/metamask-notifications":6633,"../../contexts/metametrics":6635,"../../helpers/constants/design-system":6672,"../../hooks/metamask-notifications/useNotifications":6759,"../../hooks/useI18nContext":6799,"../../selectors/metamask-notifications/metamask-notifications":7569,react:4992,"react-redux":4936},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.NotificationsListTurnOnNotifications=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(a,i,r):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-redux"),i=e("../../hooks/useI18nContext"),r=e("../../contexts/metametrics"),s=e("../../../shared/constants/metametrics"),c=e("../../hooks/metamask-notifications/useNotifications"),l=e("../../selectors/metamask-notifications/metamask-notifications"),u=e("../../contexts/metamask-notifications/metamask-notifications"),d=e("../../components/component-library"),p=e("../../helpers/constants/design-system");function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}n.NotificationsListTurnOnNotifications=()=>{const e=(0,i.useI18nContext)(),t=(0,a.useContext)(r.MetaMetricsContext),{listNotifications:n}=(0,u.useMetamaskNotificationsContext)(),{enableNotifications:m,error:f}=(0,c.useEnableNotifications)(),g=f,h=(0,o.useSelector)(l.getIsUpdatingMetamaskNotifications),[y,b]=(0,a.useState)(h||!1);(0,a.useEffect)(()=>{b(h)},[h]);const E=a.default.createElement(d.Text,{as:"a",href:"https://metamask.io/privacy.html",target:"_blank",rel:"noopener noreferrer",key:"privacy-link",color:p.TextColor.infoDefault},e("turnOnMetamaskNotificationsMessagePrivacyLink")),k=a.default.createElement(d.Text,{as:"span",fontWeight:p.FontWeight.Bold,key:"strong-text"},e("turnOnMetamaskNotificationsMessagePrivacyBold"));return a.default.createElement(d.Container,{maxWidth:d.ContainerMaxWidth.Sm,height:p.BlockSize.Full,margin:"auto",display:p.Display.Flex,justifyContent:p.JustifyContent.center,alignItems:p.AlignItems.center,flexDirection:p.FlexDirection.Column,gap:4,"data-testid":"notifications-list-turn-on-notifications",textAlign:p.TextAlign.Center,paddingLeft:4,paddingRight:4,paddingTop:4},a.default.createElement(d.Text,{variant:p.TextVariant.headingSm},e("metamaskNotificationsAreOff")),a.default.createElement(d.Box,{as:"img",src:"./images/turn-on-metamask-notifications.png",width:p.BlockSize.Full,borderRadius:p.BorderRadius.MD}),a.default.createElement(d.Text,{as:"p"},e("turnOnMetamaskNotificationsMessageSecond",[E])),a.default.createElement(d.Text,{as:"p"},e("turnOnMetamaskNotificationsMessageThird",[k])),a.default.createElement(d.Box,null,a.default.createElement(d.Button,{onClick:()=>(async()=>{await m(),t({category:s.MetaMetricsEventCategory.NotificationInteraction,event:s.MetaMetricsEventName.EnablingNotifications}),g||h||n()})(),size:d.ButtonSize.Md,disabled:y,loading:y},e("turnOnMetamaskNotificationsButton")),g&&a.default.createElement(d.Text,{as:"p",color:p.TextColor.errorDefault},e("turnOnMetamaskNotificationsError"))))}}}},{package:"$root$",file:"ui/pages/notifications/notifications-list-turn-on-notifications.tsx"}],[7367,{"../../components/component-library":6123,"../../components/ui/icon/preloader/preloader-icon.component":6550,"../../helpers/constants/design-system":6672,"../../hooks/useI18nContext":6799,"../../selectors/metamask-notifications/metamask-notifications":7569,"./notifications-list-item":7363,"./notifications-list-placeholder":7364,"./notifications-list-read-all-button":7365,"./notifications-list-turn-on-notifications":7366,react:4992,"react-redux":4936},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.NotificationsList=function(e){return a.default.createElement(i.Box,{"data-testid":"notifications-list",height:r.BlockSize.Full,width:r.BlockSize.Full,className:"notifications__list"},a.default.createElement(k,e),e.notifications.length>0&&e.notificationsCount>0?a.default.createElement(m.NotificationsListReadAllButton,{notifications:e.notifications}):null)},n.TAB_KEYS=void 0;var a=f(e("react")),o=e("react-redux"),i=e("../../components/component-library"),r=e("../../helpers/constants/design-system"),s=f(e("../../components/ui/icon/preloader/preloader-icon.component")),c=e("../../selectors/metamask-notifications/metamask-notifications"),l=e("../../hooks/useI18nContext"),u=e("./notifications-list-placeholder"),d=e("./notifications-list-turn-on-notifications"),p=e("./notifications-list-item"),m=e("./notifications-list-read-all-button");function f(e){return e&&e.__esModule?e:{default:e}}let g=n.TAB_KEYS=function(e){return e.ALL="notifications-all-tab",e.WALLET="notifications-wallet-tab",e.WEB3="notifications-other-tab",e}({});function h(){return a.default.createElement(i.Box,{height:r.BlockSize.Full,width:r.BlockSize.Full,display:r.Display.Flex,justifyContent:r.JustifyContent.center,alignItems:r.AlignItems.center,flexDirection:r.FlexDirection.Column,"data-testid":"notifications-list-loading"},a.default.createElement(s.default,{size:36}))}function y(){const e=(0,l.useI18nContext)();return a.default.createElement(u.NotificationsPlaceholder,{title:e("notificationsPageEmptyTitle"),text:e("notificationsPageNoNotificationsContent")})}function b(){const e=(0,l.useI18nContext)();return a.default.createElement(u.NotificationsPlaceholder,{title:e("notificationsPageErrorTitle"),text:e("notificationsPageErrorContent")})}function E(e){const{notification:t}=e;return a.default.createElement(p.NotificationsListItem,{notification:t})}function k({activeTab:e,notifications:t,isLoading:n,isError:i}){const r=(0,o.useSelector)(c.selectIsMetamaskNotificationsEnabled);return e!==g.WALLET||r?n?a.default.createElement(h,null):i?a.default.createElement(b,null):0===t.length?a.default.createElement(y,null):a.default.createElement(a.default.Fragment,null,t.map(e=>a.default.createElement(E,{key:e.id,notification:e}))):a.default.createElement(d.NotificationsListTurnOnNotifications,null)}}}},{package:"$root$",file:"ui/pages/notifications/notifications-list.tsx"}],[7368,{"../../components/component-library":6123,"../../components/multichain":6356,"../../components/multichain/pages/page":6451,"../../components/ui/tabs":6604,"../../contexts/metamask-notifications/metamask-notifications":6633,"../../helpers/constants/design-system":6672,"../../helpers/constants/routes":6677,"../../hooks/metamask-notifications/useCounter":6758,"../../hooks/useI18nContext":6799,"../../selectors":7568,"../../selectors/metamask-notifications/metamask-notifications":7569,"../../store/actions":7594,"./NewFeatureTag":7346,"./notifications-list":7367,"@metamask/notification-services-controller":2277,react:4992,"react-redux":4936,"react-router-dom-v5-compat":4955},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){const e=(0,i.useNavigate)(),t=(0,s.useI18nContext)(),n=(0,o.useDispatch)(),{isLoading:r,error:h}=(0,m.useMetamaskNotificationsContext)(),[v,C]=(0,a.useState)(E.TAB_KEYS.ALL),x=_(),{notificationsUnreadCount:w}=(0,f.useUnreadNotificationsCounter)(),S=(0,a.useMemo)(()=>T(v,x),[v,x]);let I=!1;return I=(0,o.useSelector)(g.getNotifySnaps).length>0,(0,a.useEffect)(()=>{n((0,b.deleteExpiredNotifications)())},[n]),a.default.createElement(d.NotificationsPage,null,a.default.createElement(p.Header,{startAccessory:a.default.createElement(c.ButtonIcon,{ariaLabel:"Back",iconName:c.IconName.ArrowLeft,size:c.ButtonIconSize.Sm,onClick:()=>{e(u.DEFAULT_ROUTE)},"data-testid":"back-button"}),endAccessory:a.default.createElement(c.ButtonIcon,{ariaLabel:"Notifications Settings",iconName:c.IconName.Setting,size:c.ButtonIconSize.Sm,onClick:()=>{e(u.NOTIFICATIONS_SETTINGS_ROUTE)},"data-testid":"notifications-settings-button"}),marginBottom:0},t("notifications")),a.default.createElement(p.Content,{padding:0},I&&a.default.createElement(l.Tabs,{defaultActiveTabKey:v,onTabClick:e=>C(e),tabListProps:{className:"px-4"}},a.default.createElement(l.Tab,{"data-testid":E.TAB_KEYS.ALL,name:t("all"),tabKey:E.TAB_KEYS.ALL}),a.default.createElement(l.Tab,{"data-testid":E.TAB_KEYS.WALLET,name:a.default.createElement(c.Box,{display:y.Display.Flex,justifyContent:y.JustifyContent.center,alignItems:y.AlignItems.center,gap:2},t("wallet"),a.default.createElement(k.NewFeatureTag,null)),tabKey:E.TAB_KEYS.WALLET}),a.default.createElement(l.Tab,{"data-testid":E.TAB_KEYS.WEB3,name:t("web3"),tabKey:E.TAB_KEYS.WEB3})),a.default.createElement(E.NotificationsList,{activeTab:v,notifications:S,isLoading:r,isError:Boolean(h),notificationsCount:w})))},n.filterNotifications=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=v(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(a,i,r):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-redux"),i=e("react-router-dom-v5-compat"),r=e("@metamask/notification-services-controller"),s=e("../../hooks/useI18nContext"),c=e("../../components/component-library"),l=e("../../components/ui/tabs"),u=e("../../helpers/constants/routes"),d=e("../../components/multichain"),p=e("../../components/multichain/pages/page"),m=e("../../contexts/metamask-notifications/metamask-notifications"),f=e("../../hooks/metamask-notifications/useCounter"),g=e("../../selectors"),h=e("../../selectors/metamask-notifications/metamask-notifications"),y=e("../../helpers/constants/design-system"),b=e("../../store/actions"),E=e("./notifications-list"),k=e("./NewFeatureTag");function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(v=function(e){return e?n:t})(e)}const{TRIGGER_TYPES:C,TRIGGER_TYPES_WALLET_SET:x}=r.NotificationServicesController.Constants,_=()=>{const{featureAnnouncementNotifications:e,walletNotifications:t,snapNotifications:n}=(()=>{const e=(0,o.useSelector)(h.selectIsFeatureAnnouncementsEnabled),t=(0,o.useSelector)(h.selectIsMetamaskNotificationsEnabled),n=(0,o.useSelector)(h.getMetamaskNotifications);return{featureAnnouncementNotifications:(0,a.useMemo)(()=>e?(n??[]).filter(e=>e.type===C.FEATURES_ANNOUNCEMENT):[],[e,n]),walletNotifications:(0,a.useMemo)(()=>t?(n??[]).filter(e=>e.type!==C.FEATURES_ANNOUNCEMENT&&e.type!==C.SNAP):[],[t,n]),snapNotifications:(0,a.useMemo)(()=>(n??[]).filter(e=>e.type===C.SNAP),[n])}})();return(0,a.useMemo)(()=>[...n,...e,...t].sort((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()),[n,e,t])},T=(e,t)=>e===E.TAB_KEYS.ALL?t:e===E.TAB_KEYS.WALLET?t.filter(e=>x.has(e.type)||e.type===C.FEATURES_ANNOUNCEMENT):e===E.TAB_KEYS.WEB3?t.filter(e=>e.type===C.SNAP):t;n.filterNotifications=T}}},{package:"$root$",file:"ui/pages/notifications/notifications.tsx"}],[7369,{"../../../../shared/constants/metametrics":5462,"../../../../shared/constants/onboarding":5468,"../../../../shared/lib/trace":5546,"../../../components/component-library":6123,"../../../components/component-library/button":6104,"../../../contexts/metametrics":6635,"../../../helpers/constants/design-system":6672,"../../../helpers/constants/routes":6677,"../../../hooks/useI18nContext":6799,"../../../selectors":7568,"../../../store/actions":7594,react:4992,"react-redux":4936,"react-router-dom-v5-compat":4955},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){const e=(0,o.useNavigate)(),t=(0,i.useDispatch)(),n=(0,l.useI18nContext)(),y=(0,i.useSelector)(d.getFirstTimeFlowType),b=(0,i.useSelector)(d.getSocialLoginEmail),E=(0,i.useSelector)(d.getSocialLoginType),k=(0,a.useContext)(f.MetaMetricsContext),{bufferedTrace:v,bufferedEndTrace:C,onboardingParentContext:x}=k;return(0,a.useEffect)(()=>(y!==p.FirstTimeFlowType.socialCreate&&e(u.ONBOARDING_WELCOME_ROUTE,{replace:!0}),y===p.FirstTimeFlowType.socialCreate&&(k({category:g.MetaMetricsEventCategory.Onboarding,event:g.MetaMetricsEventName.AccountAlreadyExistsPageViewed}),null==v||v({name:h.TraceName.OnboardingNewSocialAccountExists,op:h.TraceOperation.OnboardingUserJourney,parentContext:null==x?void 0:x.current})),()=>{y===p.FirstTimeFlowType.socialCreate&&(null==C||C({name:h.TraceName.OnboardingNewSocialAccountExists}))}),[y,e,x,v,C,k]),a.default.createElement(c.Box,{className:"account-exist","data-testid":"account-exist",display:s.Display.Flex,flexDirection:s.FlexDirection.Column,justifyContent:s.JustifyContent.spaceBetween,alignItems:s.AlignItems.center,height:s.BlockSize.Full,gap:6},a.default.createElement(c.Box,null,a.default.createElement(c.Box,{display:s.Display.Flex,flexDirection:s.FlexDirection.Column,justifyContent:s.JustifyContent.center,alignItems:s.AlignItems.flexStart},a.default.createElement(c.Text,{variant:s.TextVariant.headingLg,as:"h2",justifyContent:s.JustifyContent.center,style:{alignSelf:s.AlignItems.flexStart},marginBottom:4},n("accountAlreadyExistsTitle")),a.default.createElement(c.Box,{width:s.BlockSize.Full,display:s.Display.Flex,justifyContent:s.JustifyContent.center,alignItems:s.AlignItems.center,marginBottom:6},a.default.createElement("img",{src:"images/account-status.png",width:276,height:276,alt:n("accountAlreadyExistsTitle"),style:{alignSelf:"center"}})),a.default.createElement(c.Text,{variant:s.TextVariant.bodyMd,marginBottom:6},n("accountAlreadyExistsLoginDescription",[b||"-"])))),a.default.createElement(c.Box,{display:s.Display.Flex,flexDirection:s.FlexDirection.Column,justifyContent:s.JustifyContent.center,alignItems:s.AlignItems.center,width:s.BlockSize.Full,gap:4},a.default.createElement(r.Button,{"data-testid":"onboarding-complete-done",variant:r.ButtonVariant.Primary,size:r.ButtonSize.Lg,width:s.BlockSize.Full,onClick:async()=>{k({category:g.MetaMetricsEventCategory.Onboarding,event:g.MetaMetricsEventName.WalletImportStarted,properties:{account_type:`${g.MetaMetricsEventAccountType.Imported}_${E}`}}),null==v||v({name:h.TraceName.OnboardingExistingSocialLogin,op:h.TraceOperation.OnboardingUserJourney,tags:{source:"account_status_redirect"},parentContext:null==x?void 0:x.current}),await t((0,m.setFirstTimeFlowType)(p.FirstTimeFlowType.socialImport)),e(u.ONBOARDING_UNLOCK_ROUTE,{replace:!0})}},n("accountAlreadyExistsLogin")),a.default.createElement(r.Button,{"data-testid":"account-exist-login-with-different-method",variant:r.ButtonVariant.Secondary,size:r.ButtonSize.Lg,width:s.BlockSize.Full,onClick:async n=>{n.preventDefault(),await t((0,m.resetOnboarding)()),await(0,m.forceUpdateMetamaskState)(t),e(u.ONBOARDING_WELCOME_ROUTE,{replace:!0})}},n("useDifferentLoginMethod"))))};var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=y(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(a,i,r):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-router-dom-v5-compat"),i=e("react-redux"),r=e("../../../components/component-library/button"),s=e("../../../helpers/constants/design-system"),c=e("../../../components/component-library"),l=e("../../../hooks/useI18nContext"),u=e("../../../helpers/constants/routes"),d=e("../../../selectors"),p=e("../../../../shared/constants/onboarding"),m=e("../../../store/actions"),f=e("../../../contexts/metametrics"),g=e("../../../../shared/constants/metametrics"),h=e("../../../../shared/lib/trace");function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(y=function(e){return e?n:t})(e)}}}},{package:"$root$",file:"ui/pages/onboarding-flow/account-exist/account-exist.tsx"}],[7370,{"../../../../shared/constants/metametrics":5462,"../../../../shared/constants/onboarding":5468,"../../../../shared/lib/trace":5546,"../../../components/component-library":6123,"../../../components/component-library/button":6104,"../../../contexts/metametrics":6635,"../../../helpers/constants/design-system":6672,"../../../helpers/constants/routes":6677,"../../../hooks/useI18nContext":6799,"../../../selectors":7568,"../../../store/actions":7594,react:4992,"react-redux":4936,"react-router-dom-v5-compat":4955},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){const e=(0,o.useNavigate)(),t=(0,i.useDispatch)(),n=(0,l.useI18nContext)(),y=(0,i.useSelector)(d.getFirstTimeFlowType),b=(0,i.useSelector)(d.getSocialLoginEmail),E=(0,i.useSelector)(d.getSocialLoginType),k=(0,a.useContext)(h.MetaMetricsContext),{bufferedTrace:v,bufferedEndTrace:C,onboardingParentContext:x}=k;return(0,a.useEffect)(()=>(y!==p.FirstTimeFlowType.socialImport&&e(u.ONBOARDING_WELCOME_ROUTE,{replace:!0}),y===p.FirstTimeFlowType.socialImport&&(k({category:f.MetaMetricsEventCategory.Onboarding,event:f.MetaMetricsEventName.AccountNotFoundPageViewed}),null==v||v({name:g.TraceName.OnboardingExistingSocialAccountNotFound,op:g.TraceOperation.OnboardingUserJourney,parentContext:null==x?void 0:x.current})),()=>{y===p.FirstTimeFlowType.socialImport&&(null==C||C({name:g.TraceName.OnboardingExistingSocialAccountNotFound}))}),[y,e,x,v,C,k]),a.default.createElement(c.Box,{className:"account-not-found","data-testid":"account-not-found",display:s.Display.Flex,flexDirection:s.FlexDirection.Column,justifyContent:s.JustifyContent.spaceBetween,alignItems:s.AlignItems.center,gap:6,height:s.BlockSize.Full},a.default.createElement(c.Box,null,a.default.createElement(c.Box,{display:s.Display.Flex,flexDirection:s.FlexDirection.Column,justifyContent:s.JustifyContent.center,alignItems:s.AlignItems.flexStart},a.default.createElement(c.Text,{variant:s.TextVariant.headingLg,as:"h2",justifyContent:s.JustifyContent.center,style:{alignSelf:s.AlignItems.flexStart},marginBottom:4},n("accountNotFoundTitle")),a.default.createElement(c.Box,{width:s.BlockSize.Full,display:s.Display.Flex,justifyContent:s.JustifyContent.center,alignItems:s.AlignItems.center,marginBottom:6},a.default.createElement("img",{src:"images/account-status.png",width:276,height:276,alt:n("accountNotFoundTitle"),style:{alignSelf:"center"}})),a.default.createElement(c.Text,{variant:s.TextVariant.bodyMd,marginBottom:6},n("accountNotFoundDescription",[b||"-"])))),a.default.createElement(c.Box,{display:s.Display.Flex,flexDirection:s.FlexDirection.Column,justifyContent:s.JustifyContent.center,alignItems:s.AlignItems.center,width:s.BlockSize.Full,gap:4},a.default.createElement(r.Button,{"data-testid":"onboarding-complete-done",variant:r.ButtonVariant.Primary,size:r.ButtonSize.Lg,width:s.BlockSize.Full,onClick:()=>{k({category:f.MetaMetricsEventCategory.Onboarding,event:f.MetaMetricsEventName.WalletSetupStarted,properties:{account_type:`${f.MetaMetricsEventAccountType.Default}_${E}`}}),null==v||v({name:g.TraceName.OnboardingNewSocialCreateWallet,op:g.TraceOperation.OnboardingUserJourney,tags:{source:"account_status_redirect"},parentContext:null==x?void 0:x.current}),t((0,m.setFirstTimeFlowType)(p.FirstTimeFlowType.socialCreate)),e(u.ONBOARDING_CREATE_PASSWORD_ROUTE,{replace:!0})}},n("accountNotFoundCreateOne")),a.default.createElement(r.Button,{"data-testid":"account-exist-login-with-different-method",variant:r.ButtonVariant.Secondary,size:r.ButtonSize.Lg,width:s.BlockSize.Full,onClick:async()=>{await t((0,m.resetOnboarding)()),await(0,m.forceUpdateMetamaskState)(t),e(u.ONBOARDING_WELCOME_ROUTE,{replace:!0})}},n("useDifferentLoginMethod"))))};var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=y(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(a,i,r):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-router-dom-v5-compat"),i=e("react-redux"),r=e("../../../components/component-library/button"),s=e("../../../helpers/constants/design-system"),c=e("../../../components/component-library"),l=e("../../../hooks/useI18nContext"),u=e("../../../helpers/constants/routes"),d=e("../../../selectors"),p=e("../../../../shared/constants/onboarding"),m=e("../../../store/actions"),f=e("../../../../shared/constants/metametrics"),g=e("../../../../shared/lib/trace"),h=e("../../../contexts/metametrics");function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(y=function(e){return e?n:t})(e)}}}},{package:"$root$",file:"ui/pages/onboarding-flow/account-not-found/account-not-found.tsx"}],[7371,{"../../../../shared/constants/app":5447,"../../../../shared/constants/metametrics":5462,"../../../../shared/constants/onboarding":5468,"../../../../shared/lib/trace":5546,"../../../../shared/modules/browser-runtime.utils":5555,"../../../../shared/modules/environment":5559,"../../../components/app/password-form/password-form":5830,"../../../components/component-library":6123,"../../../contexts/metametrics":6635,"../../../helpers/constants/design-system":6672,"../../../helpers/constants/routes":6677,"../../../helpers/constants/zendesk-url":6684,"../../../hooks/useI18nContext":6799,"../../../selectors":7568,"../../../store/actions":7594,buffer:3793,"prop-types":4808,react:4992,"react-redux":4936,"react-router-dom-v5-compat":4955},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){Object.defineProperty(n,"__esModule",{value:!0}),n.default=T;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=x(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(a,i,r):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=C(e("prop-types")),i=e("react-router-dom-v5-compat"),r=e("react-redux"),s=e("../../../hooks/useI18nContext"),c=e("../../../helpers/constants/design-system"),l=e("../../../helpers/constants/routes"),u=C(e("../../../helpers/constants/zendesk-url")),d=e("../../../selectors"),p=e("../../../contexts/metametrics"),m=e("../../../../shared/constants/metametrics"),f=e("../../../components/component-library"),g=e("../../../../shared/constants/onboarding"),h=C(e("../../../components/app/password-form/password-form")),y=e("../../../../shared/constants/app"),b=e("../../../../shared/modules/browser-runtime.utils"),E=e("../../../store/actions"),k=e("../../../../shared/modules/environment"),v=e("../../../../shared/lib/trace");function C(e){return e&&e.__esModule?e:{default:e}}function x(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(x=function(e){return e?n:t})(e)}const _=(0,b.getBrowserName)()===y.PLATFORM_FIREFOX;function T({createNewAccount:e,importWithRecoveryPhrase:n,secretRecoveryPhrase:o}){const y=(0,s.useI18nContext)(),[b,C]=(0,a.useState)(""),[x,T]=(0,a.useState)(!1),[w,S]=(0,a.useState)(!1),I=(0,i.useNavigate)(),N=(0,r.useDispatch)(),O=(0,r.useSelector)(d.getFirstTimeFlowType),M=(0,a.useContext)(p.MetaMetricsContext),{bufferedTrace:A,bufferedEndTrace:B,onboardingParentContext:R}=M,P=(0,r.useSelector)(d.getCurrentKeyring),D=(0,k.getIsSeedlessOnboardingFeatureEnabled)(),F=(0,r.useSelector)(d.getIsSocialLoginFlow),L=(0,r.useSelector)(d.getSocialLoginType),j=(0,r.useSelector)(d.getParticipateInMetaMetrics),W=(0,r.useSelector)(d.getIsParticipateInMetaMetricsSet),$=(0,r.useSelector)(d.getMetaMetricsId),U=t.from($??"").toString("base64"),z=Boolean(j&&U),G=`https://start.metamask.io/?${new URLSearchParams({mmi:U,env:"production"})}`;(0,a.useEffect)(()=>{P&&!w?O===g.FirstTimeFlowType.import||O===g.FirstTimeFlowType.socialImport?I(W?l.ONBOARDING_COMPLETION_ROUTE:l.ONBOARDING_METAMETRICS,{replace:!0}):O===g.FirstTimeFlowType.socialCreate?I(_?l.ONBOARDING_COMPLETION_ROUTE:l.ONBOARDING_METAMETRICS,{replace:!0}):I(l.ONBOARDING_SECURE_YOUR_WALLET_ROUTE,{replace:!0}):O!==g.FirstTimeFlowType.import||o||I(l.ONBOARDING_IMPORT_WITH_SRP_ROUTE,{replace:!0})},[P,I,O,w,o,W]);const V=(e,t=!1)=>{if(t&&L){return`${e}_${String(L).toLowerCase()}`}return e};(0,a.useEffect)(()=>(null==A||A({name:v.TraceName.OnboardingPasswordSetupAttempt,op:v.TraceOperation.OnboardingUserJourney,parentContext:null==R?void 0:R.current}),()=>{null==B||B({name:v.TraceName.OnboardingPasswordSetupAttempt})}),[R,A,B]);const q=a.default.createElement("a",{onClick:e=>{e.stopPropagation(),M({category:m.MetaMetricsEventCategory.Onboarding,event:m.MetaMetricsEventName.ExternalLinkClicked,properties:{text:"Learn More",location:"create_password",url:u.default.PASSWORD_ARTICLE}})},key:"create-password__link-text",href:u.default.PASSWORD_ARTICLE,target:"_blank",rel:"noopener noreferrer"},a.default.createElement("span",{className:"create-password__link-text"},y("learnMoreUpperCaseWithDot"))),J=y(F?"createPasswordMarketing":"passwordTermsWarning");return a.default.createElement(f.Box,{display:c.Display.Flex,flexDirection:c.FlexDirection.Column,justifyContent:c.JustifyContent.spaceBetween,height:c.BlockSize.Full,gap:4,as:"form",className:"create-password","data-testid":"create-password",onSubmit:async t=>{if(null==t||t.preventDefault(),b)try{o&&O===g.FirstTimeFlowType.import?await(async()=>{M({category:m.MetaMetricsEventCategory.Onboarding,event:m.MetaMetricsEventName.WalletImportAttempted}),await n(b,o),null==B||B({name:v.TraceName.OnboardingExistingSrpImport}),null==B||B({name:v.TraceName.OnboardingJourneyOverall}),M({category:m.MetaMetricsEventCategory.Onboarding,event:m.MetaMetricsEventName.WalletImported,properties:{biometrics_enabled:!1}}),M({category:m.MetaMetricsEventCategory.Onboarding,event:m.MetaMetricsEventName.WalletSetupCompleted,properties:{wallet_setup_type:"import",new_wallet:!1,account_type:V(m.MetaMetricsEventAccountType.Imported,F)}}),I(_?l.ONBOARDING_COMPLETION_ROUTE:l.ONBOARDING_METAMETRICS,{replace:!0})})():await(async()=>{M({category:m.MetaMetricsEventCategory.Onboarding,event:m.MetaMetricsEventName.WalletCreationAttempted,properties:{account_type:V(m.MetaMetricsEventAccountType.Default,F)}}),e&&(S(!0),await e(b)),F&&(null==B||B({name:v.TraceName.OnboardingNewSocialCreateWallet}),null==B||B({name:v.TraceName.OnboardingJourneyOverall})),M({category:m.MetaMetricsEventCategory.Onboarding,event:m.MetaMetricsEventName.WalletCreated,properties:{biometrics_enabled:!1,account_type:V(m.MetaMetricsEventAccountType.Default,F)}}),M({category:m.MetaMetricsEventCategory.Onboarding,event:m.MetaMetricsEventName.WalletSetupCompleted,properties:{wallet_setup_type:"new",new_wallet:!0,account_type:V(m.MetaMetricsEventAccountType.Default,F)}}),D&&F?(x&&await N((0,E.setMarketingConsent)(!0)),I(l.ONBOARDING_COMPLETION_ROUTE,{replace:!0})):I(l.ONBOARDING_SECURE_YOUR_WALLET_ROUTE,{replace:!0})})()}catch(e){(e=>{const t=e instanceof Error?e.message:"Unknown error";null==A||A({name:v.TraceName.OnboardingPasswordSetupError,op:v.TraceOperation.OnboardingUserJourney,parentContext:R.current,tags:{errorMessage:t}}),null==B||B({name:v.TraceName.OnboardingPasswordSetupError}),console.error(e)})(e),M({category:m.MetaMetricsEventCategory.Onboarding,event:m.MetaMetricsEventName.WalletSetupFailure})}}},a.default.createElement(f.Box,null,a.default.createElement(f.Box,{justifyContent:c.JustifyContent.flexStart,marginBottom:4,width:c.BlockSize.Full},a.default.createElement(f.ButtonIcon,{iconName:f.IconName.ArrowLeft,color:c.IconColor.iconDefault,size:f.ButtonIconSize.Md,"data-testid":"create-password-back-button",type:"button",onClick:async e=>{e.preventDefault(),await N((0,E.resetOnboarding)()),await(0,E.forceUpdateMetamaskState)(N),O===g.FirstTimeFlowType.import?I(l.ONBOARDING_IMPORT_WITH_SRP_ROUTE,{replace:!0}):I(l.ONBOARDING_WELCOME_ROUTE,{replace:!0})},ariaLabel:y("back")})),a.default.createElement(f.Box,{justifyContent:c.JustifyContent.flexStart,marginBottom:4,width:c.BlockSize.Full},!F&&a.default.createElement(f.Text,{variant:c.TextVariant.bodyMd,color:c.TextColor.textAlternative},y("stepOf",[O===g.FirstTimeFlowType.import?2:1,O===g.FirstTimeFlowType.import?2:3])),a.default.createElement(f.Text,{variant:c.TextVariant.headingLg,as:"h2"},y("createPassword")),F?a.default.createElement(f.Text,{variant:c.TextVariant.bodyMd,color:c.TextColor.textAlternative,as:"h2"},y("createPasswordDetailsSocial"),a.default.createElement(f.Text,{variant:c.TextVariant.bodyMd,color:c.TextColor.warningDefault,as:"span"},y("createPasswordDetailsSocialReset"))):a.default.createElement(f.Text,{variant:c.TextVariant.bodyMd,color:c.TextColor.textAlternative,as:"h2"},y("createPasswordDetails"))),a.default.createElement(h.default,{onChange:e=>C(e)}),a.default.createElement(f.Box,{className:"create-password__terms-container",alignItems:F?c.AlignItems.center:c.AlignItems.flexStart,justifyContent:c.JustifyContent.spaceBetween,marginTop:6,backgroundColor:F?c.BackgroundColor.backgroundMuted:c.BackgroundColor.backgroundDefault,padding:F?3:0,borderRadius:c.BorderRadius.LG},a.default.createElement(f.Checkbox,{inputProps:{"data-testid":"create-password-terms"},alignItems:c.AlignItems.flexStart,isChecked:x,onChange:()=>{T(!x)},label:a.default.createElement(f.Text,{variant:c.TextVariant.bodySm,color:c.TextColor.textDefault},J,"  ",!F&&q)}))),a.default.createElement(f.Box,null,a.default.createElement(f.Button,{"data-testid":"create-password-submit",variant:f.ButtonVariant.Primary,width:c.BlockSize.Full,size:f.ButtonSize.Lg,className:"create-password__form--submit-button",disabled:!b||!F&&!x},y("createPasswordCreate"))),z?a.default.createElement("iframe",{src:G,className:"create-password__analytics-iframe","data-testid":"create-password-iframe"}):null)}T.propTypes={createNewAccount:o.default.func,importWithRecoveryPhrase:o.default.func,secretRecoveryPhrase:o.default.string}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"$root$",file:"ui/pages/onboarding-flow/create-password/create-password.js"}],[7372,{"../../../components/component-library":6123,"../../../components/component-library/button":6104,"../../../components/component-library/lottie-animation":6129,"../../../ducks/metamask/metamask":6659,"../../../helpers/constants/design-system":6672,"../../../helpers/constants/routes":6677,"../../../hooks/useI18nContext":6799,"../../../selectors":7568,lodash:4565,react:4992,"react-redux":4936,"react-router-dom-v5-compat":4955},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){const e=(0,o.useNavigate)(),t=(0,u.useI18nContext)(),{search:n}=(0,o.useLocation)(),g=(0,i.useSelector)(m.getIsPrimarySeedPhraseBackedUp),h=(0,i.useSelector)(p.getSocialLoginType),y=new URLSearchParams(n),b=y.get("isFromReminder"),E=y.get("isFromSettingsSecurity"),k=(0,a.useMemo)(()=>t(g?b?"yourWalletIsReadyFromReminder":"yourWalletIsReady":"yourWalletIsReadyRemind"),[b,g,t]),v=(0,a.useMemo)(()=>h?t("walletReadySocialDetails1",[(0,r.capitalize)(h)]):t(g?b?"walletReadyLoseSrpFromReminder":"walletReadyLoseSrp":"walletReadyLoseSrpRemind"),[h,g,t,b]),C=(0,a.useMemo)(()=>h?t("walletReadySocialDetails2"):g||b?t("walletReadyLearn",[a.default.createElement(l.ButtonLink,{key:"walletReadyLearn",size:l.ButtonLinkSize.Inherit,textProps:{variant:c.TextVariant.bodyMd,alignItems:c.AlignItems.flexStart},as:"a",href:"https://support.metamask.io/stay-safe/safety-in-web3/basic-safety-and-security-tips-for-metamask/",target:"_blank",rel:"noopener noreferrer"},t("learnHow"))]):t("walletReadyLearnRemind"),[h,g,b,t]),x=(0,a.useMemo)(()=>a.default.createElement(f.LottieAnimation,{path:"images/animations/fox/celebrating.lottie.json",loop:!0,autoplay:!0}),[g,b]),_=(0,a.useCallback)(()=>{e(b?E?d.SECURITY_ROUTE:d.DEFAULT_ROUTE:d.ONBOARDING_DOWNLOAD_APP_ROUTE)},[e,b,E]);return a.default.createElement(l.Box,{display:c.Display.Flex,flexDirection:c.FlexDirection.Column,justifyContent:c.JustifyContent.spaceBetween,height:c.BlockSize.Full,gap:6,className:"creation-successful","data-testid":"wallet-ready"},a.default.createElement(l.Box,null,a.default.createElement(l.Box,{display:c.Display.Flex,flexDirection:c.FlexDirection.Column,justifyContent:c.JustifyContent.center,alignItems:c.AlignItems.flexStart},a.default.createElement(l.Text,{variant:c.TextVariant.headingLg,as:"h2",justifyContent:c.JustifyContent.center,style:{alignSelf:c.AlignItems.flexStart},marginBottom:4},k),a.default.createElement(l.Box,{width:c.BlockSize.Full,display:c.Display.Flex,justifyContent:c.JustifyContent.center,alignItems:c.AlignItems.center,marginBottom:6},a.default.createElement(l.Box,{display:c.Display.Flex,style:{width:"144px",height:"144px"}},x)),a.default.createElement(l.Text,{variant:c.TextVariant.bodyMd,color:c.TextColor.textAlternative,marginBottom:6},v),a.default.createElement(l.Text,{variant:c.TextVariant.bodyMd,color:c.TextColor.textAlternative,marginBottom:6},C)),!b&&a.default.createElement(l.Box,{display:c.Display.Flex,flexDirection:c.FlexDirection.Column,alignItems:c.AlignItems.flexStart,className:"creation-successful__settings-actions",gap:4},a.default.createElement(s.Button,{variant:s.ButtonVariant.Secondary,"data-testid":"manage-default-settings",borderRadius:c.BorderRadius.LG,width:c.BlockSize.Full,onClick:()=>e(d.ONBOARDING_PRIVACY_SETTINGS_ROUTE)},a.default.createElement(l.Box,{display:c.Display.Flex,alignItems:c.AlignItems.center},a.default.createElement(l.Icon,{name:l.IconName.Setting,size:l.IconSize.Md,marginInlineEnd:3}),a.default.createElement(l.Text,{variant:c.TextVariant.bodyMd,fontWeight:c.FontWeight.Medium},t("manageDefaultSettings"))),a.default.createElement(l.Icon,{name:l.IconName.ArrowRight,color:c.IconColor.iconAlternative,size:l.IconSize.Sm})))),a.default.createElement(l.Box,{display:c.Display.Flex,flexDirection:c.FlexDirection.Column,justifyContent:c.JustifyContent.center,alignItems:c.AlignItems.center},a.default.createElement(s.Button,{"data-testid":"onboarding-complete-done",variant:s.ButtonVariant.Primary,size:s.ButtonSize.Lg,width:c.BlockSize.Full,onClick:_},t("done"))))};var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(a,i,r):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-router-dom-v5-compat"),i=e("react-redux"),r=e("lodash"),s=e("../../../components/component-library/button"),c=e("../../../helpers/constants/design-system"),l=e("../../../components/component-library"),u=e("../../../hooks/useI18nContext"),d=e("../../../helpers/constants/routes"),p=e("../../../selectors"),m=e("../../../ducks/metamask/metamask"),f=e("../../../components/component-library/lottie-animation");function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}}}},{package:"$root$",file:"ui/pages/onboarding-flow/creation-successful/creation-successful.js"}],[7373,{"../../../components/component-library":6123,"../../../helpers/constants/design-system":6672,"../../../helpers/constants/routes":6677,"../../../hooks/useI18nContext":6799,"../../../selectors":7568,react:4992,"react-redux":4936,"react-router-dom-v5-compat":4955},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){const e=(0,r.useI18nContext)(),t=(0,o.useNavigate)(),n=(0,i.useSelector)(u.getCurrentKeyring);return(0,a.useEffect)(()=>{n||t(c.ONBOARDING_WELCOME_ROUTE,{replace:!0})},[n,t]),a.default.createElement(l.Box,{display:s.Display.Flex,flexDirection:s.FlexDirection.Column,justifyContent:s.JustifyContent.spaceBetween,height:s.BlockSize.Full,gap:6,className:"onboarding-download-app","data-testid":"onboarding-download-app"},a.default.createElement(l.Box,null,a.default.createElement(l.Text,{variant:s.TextVariant.headingLg,marginBottom:4},e("downloadAppTitle")),a.default.createElement(l.Box,{display:s.Display.Flex,alignItems:s.AlignItems.flexStart,justifyContent:s.JustifyContent.center,marginBottom:4},a.default.createElement("img",{src:"/images/onboarding-download-app.png",alt:"Download the app"})),a.default.createElement(l.Text,{variant:s.TextVariant.bodyMd},e("downloadAppDescription"))),a.default.createElement(l.Box,null,a.default.createElement(l.Button,{variant:l.ButtonVariant.Primary,size:l.ButtonSize.Lg,block:!0,"data-testid":"download-app-continue",onClick:async()=>{t(c.ONBOARDING_PIN_EXTENSION_ROUTE)}},e("continue"))))};var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(a,i,r):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-router-dom-v5-compat"),i=e("react-redux"),r=e("../../../hooks/useI18nContext"),s=e("../../../helpers/constants/design-system"),c=e("../../../helpers/constants/routes"),l=e("../../../components/component-library"),u=e("../../../selectors");function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}}}},{package:"$root$",file:"ui/pages/onboarding-flow/download-app/download-app.tsx"}],[7374,{"../../../../shared/constants/metametrics":5462,"../../../components/app/srp-details-modal":5994,"../../../components/app/srp-input-import":5996,"../../../components/component-library":6123,"../../../contexts/metametrics":6635,"../../../helpers/constants/design-system":6672,"../../../helpers/constants/routes":6677,"../../../hooks/useI18nContext":6799,"../../../selectors":7568,"../../../selectors/selectors":7584,"@ethersproject/hdnode":646,"prop-types":4808,react:4992,"react-redux":4936,"react-router-dom-v5-compat":4955},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=v;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=E(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(a,i,r):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-router-dom-v5-compat"),i=e("react-redux"),r=b(e("prop-types")),s=e("@ethersproject/hdnode"),c=e("../../../helpers/constants/design-system"),l=e("../../../helpers/constants/routes"),u=e("../../../hooks/useI18nContext"),d=b(e("../../../components/app/srp-input-import")),p=e("../../../selectors"),m=e("../../../contexts/metametrics"),f=e("../../../../shared/constants/metametrics"),g=e("../../../selectors/selectors"),h=e("../../../components/component-library"),y=b(e("../../../components/app/srp-details-modal"));function b(e){return e&&e.__esModule?e:{default:e}}function E(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(E=function(e){return e?n:t})(e)}const k=e=>e!==e.toLowerCase();function v({submitSecretRecoveryPhrase:e}){const[t,n]=(0,a.useState)(""),[r,b]=(0,a.useState)(!1),[E,v]=(0,a.useState)(""),C=(0,o.useNavigate)(),x=(0,i.useSelector)(g.getHDEntropyIndex),_=(0,u.useI18nContext)(),T=(0,i.useSelector)(p.getCurrentKeyring);(0,a.useEffect)(()=>{T&&C(l.ONBOARDING_CREATE_PASSWORD_ROUTE,{replace:!0})},[T,C]);const w=(0,a.useContext)(m.MetaMetricsContext),S=(0,a.useCallback)(()=>{w({category:f.MetaMetricsEventCategory.Onboarding,event:f.MetaMetricsEventName.SrpDefinitionClicked,properties:{location:"import_srp"}}),b(!0)},[w]),I=(0,a.useCallback)(()=>{let n="";!k(t)&&(0,s.isValidMnemonic)(t)||(n=_("invalidSeedPhraseNotFound")),v(n),n||(e(t),w({category:f.MetaMetricsEventCategory.Onboarding,event:f.MetaMetricsEventName.OnboardingWalletSecurityPhraseConfirmed,properties:{hd_entropy_index:x}}),C(l.ONBOARDING_CREATE_PASSWORD_ROUTE))},[t,_,x,w,C,e]);return(0,a.useEffect)(()=>{v("")},[t]),a.default.createElement(h.Box,{display:c.Display.Flex,flexDirection:c.FlexDirection.Column,justifyContent:c.JustifyContent.spaceBetween,height:c.BlockSize.Full,gap:4,className:"import-srp","data-testid":"import-srp"},r&&a.default.createElement(y.default,{onClose:()=>b(!1)}),a.default.createElement(h.Box,null,a.default.createElement(h.Box,{marginBottom:4},a.default.createElement(h.ButtonIcon,{iconName:h.IconName.ArrowLeft,color:c.IconColor.iconDefault,size:h.ButtonIconSize.Md,"data-testid":"import-srp-back-button",onClick:()=>{C(l.ONBOARDING_WELCOME_ROUTE,{replace:!0})},ariaLabel:_("back")})),a.default.createElement(h.Box,{textAlign:c.TextAlign.Left},a.default.createElement(h.Text,{variant:c.TextVariant.bodyMd,color:c.TextColor.textAlternative},_("stepOf",[1,2]))),a.default.createElement(h.Box,{textAlign:c.TextAlign.Left,marginBottom:2},a.default.createElement(h.Text,{variant:c.TextVariant.headingLg},_("importAWallet"))),a.default.createElement(h.Box,{display:c.Display.Flex,alignItems:c.AlignItems.center,marginBottom:4},a.default.createElement(h.Text,{variant:c.TextVariant.bodyMd,color:c.TextColor.textAlternative},_("typeYourSRP")),a.default.createElement(h.ButtonIcon,{iconName:h.IconName.Info,size:h.ButtonIconSize.Sm,color:c.IconColor.iconAlternative,onClick:S,ariaLabel:"info"})),a.default.createElement(h.Box,{width:c.BlockSize.Full},a.default.createElement("form",{onSubmit:e=>e.preventDefault()},a.default.createElement(d.default,{onChange:n}),E&&a.default.createElement(h.Box,{marginTop:2},a.default.createElement(h.Text,{"data-testid":"import-srp-error",variant:c.TextVariant.bodySm,color:c.TextColor.errorDefault},E))))),a.default.createElement(h.Box,{display:c.Display.Flex,flexDirection:c.FlexDirection.Column,justifyContent:c.JustifyContent.center,alignItems:c.AlignItems.center,width:c.BlockSize.Full,textAlign:c.TextAlign.Left},a.default.createElement(h.Button,{width:c.BlockSize.Full,size:h.ButtonSize.Lg,type:"primary","data-testid":"import-srp-confirm",onClick:I,disabled:!t.trim()||Boolean(E)},_("continue"))))}v.propTypes={submitSecretRecoveryPhrase:r.default.func}}}},{package:"$root$",file:"ui/pages/onboarding-flow/import-srp/import-srp.js"}],[7375,{"../../../../shared/constants/app":5447,"../../../../shared/constants/metametrics":5462,"../../../../shared/constants/onboarding":5468,"../../../../shared/modules/browser-runtime.utils":5555,"../../../components/component-library":6123,"../../../contexts/metametrics":6635,"../../../helpers/constants/design-system":6672,"../../../helpers/constants/routes":6677,"../../../hooks/useI18nContext":6799,"../../../selectors":7568,"../../../store/actions":7594,loglevel:4573,react:4992,"react-redux":4936,"react-router-dom-v5-compat":4955},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){const e=(0,l.useI18nContext)(),t=(0,i.useDispatch)(),n=(0,r.useNavigate)(),a=(0,i.useSelector)(d.getFirstTimeFlowType),m=(0,i.useSelector)(d.getDataCollectionForMarketing),b=(0,i.useSelector)(d.getCurrentKeyring),k=(0,o.useContext)(g.MetaMetricsContext);let v=(0,i.useSelector)(d.getFirstTimeFlowTypeRouteAfterMetaMetricsOptIn);E&&a!==y.FirstTimeFlowType.restore&&(v=b&&a===y.FirstTimeFlowType.socialCreate?f.ONBOARDING_COMPLETION_ROUTE:f.ONBOARDING_WELCOME_ROUTE);return o.default.createElement("div",{className:"onboarding-metametrics","data-testid":"onboarding-metametrics"},o.default.createElement(h.Text,{variant:c.TextVariant.headingLg,textAlign:c.TextAlign.Left,fontWeight:c.FontWeight.Bold,marginBottom:4},e("onboardingMetametricsTitle")),o.default.createElement(h.Text,{className:"onboarding-metametrics__desc",textAlign:c.TextAlign.Left},e("onboardingMetametricsDescription")),o.default.createElement("ul",null,o.default.createElement("li",null,o.default.createElement(h.Box,{display:c.Display.Flex,flexDirection:c.FlexDirection.Row,paddingBottom:4},o.default.createElement(h.Icon,{marginInlineEnd:2,name:h.IconName.Check,size:h.IconSize.Sm,color:c.IconColor.successDefault}),o.default.createElement(h.Text,{color:c.TextColor.textAlternative},e("onboardingMetametricsNeverCollect",[o.default.createElement(h.Text,{variant:c.TextVariant.inherit,key:"never",fontWeight:c.FontWeight.Bold,color:c.TextColor.textDefault,marginTop:0},e("onboardingMetametricsNeverCollectEmphasis"))])))),o.default.createElement("li",null,o.default.createElement(h.Box,{display:c.Display.Flex,flexDirection:c.FlexDirection.Row,paddingBottom:4},o.default.createElement(h.Icon,{marginInlineEnd:2,name:h.IconName.Check,size:h.IconSize.Sm,color:c.IconColor.successDefault}),o.default.createElement(h.Text,{color:c.TextColor.textAlternative},e("onboardingMetametricsNeverCollectIP",[o.default.createElement(h.Text,{variant:c.TextVariant.inherit,key:"never-collect",fontWeight:c.FontWeight.Bold,color:c.TextColor.textDefault},e("onboardingMetametricsNeverCollectIPEmphasis"))])))),o.default.createElement("li",null,o.default.createElement(h.Box,{display:c.Display.Flex,flexDirection:c.FlexDirection.Row,paddingBottom:4},o.default.createElement(h.Icon,{marginInlineEnd:2,name:h.IconName.Check,size:h.IconSize.Sm,color:c.IconColor.successDefault}),o.default.createElement(h.Text,{color:c.TextColor.textAlternative},e("onboardingMetametricsNeverSellData",[o.default.createElement(h.Text,{variant:c.TextVariant.inherit,key:"never-sell",fontWeight:c.FontWeight.Bold,color:c.TextColor.textDefault},e("onboardingMetametricsNeverSellDataEmphasis"))]))))),o.default.createElement(h.Checkbox,{id:"metametrics-opt-in","data-testid":"metametrics-data-collection-checkbox",isChecked:m,onClick:()=>t((0,u.setDataCollectionForMarketing)(!m)),label:o.default.createElement(h.Text,{fontWeight:c.FontWeight.Medium},e("onboardingMetametricsUseDataCheckbox")),paddingBottom:3,alignItems:c.AlignItems.flexStart}),o.default.createElement(h.Text,{color:c.TextColor.textAlternative,textAlign:c.TextAlign.Left,variant:c.TextVariant.bodySm,paddingTop:4,className:"onboarding-metametrics__terms"},e("onboardingMetametricsInfuraTerms",[o.default.createElement("a",{href:E?"https://addons.mozilla.org/en-CA/firefox/addon/ether-metamask/privacy/":"https://metamask.io/privacy.html",target:"_blank",rel:"noopener noreferrer",key:"privacy-link"},e("onboardingMetametricsInfuraTermsPolicy"))])),o.default.createElement(h.Box,{display:c.Display.Flex,flexDirection:c.FlexDirection.Row,width:c.BlockSize.Full,className:"onboarding-metametrics__buttons",marginTop:6,gap:4},o.default.createElement(h.Button,{"data-testid":"metametrics-no-thanks",variant:h.ButtonVariant.Secondary,size:h.ButtonSize.Lg,width:c.BlockSize.Full,onClick:async e=>{e.preventDefault(),await t((0,u.setParticipateInMetaMetrics)(!1)),await t((0,u.setDataCollectionForMarketing)(!1)),n(v)}},e("noThanks")),o.default.createElement(h.Button,{"data-testid":"metametrics-i-agree",size:h.ButtonSize.Lg,width:c.BlockSize.Full,onClick:async e=>{e.preventDefault(),await t((0,u.setDataCollectionForMarketing)(Boolean(m))),await t((0,u.setParticipateInMetaMetrics)(!0));try{await k({category:p.MetaMetricsEventCategory.Onboarding,event:p.MetaMetricsEventName.AppInstalled}),await k({category:p.MetaMetricsEventCategory.Onboarding,event:p.MetaMetricsEventName.AnalyticsPreferenceSelected,properties:{is_metrics_opted_in:!0,has_marketing_consent:Boolean(m),location:"onboarding_metametrics"}})}catch(e){s.default.error("onConfirm::error",e)}finally{n(v)}}},e("onboardingMetametricsAgree"))))};var a,o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=b(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(a,i,r):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(e("react")),i=e("react-redux"),r=e("react-router-dom-v5-compat"),s=(a=e("loglevel"))&&a.__esModule?a:{default:a},c=e("../../../helpers/constants/design-system"),l=e("../../../hooks/useI18nContext"),u=e("../../../store/actions"),d=e("../../../selectors"),p=e("../../../../shared/constants/metametrics"),m=e("../../../../shared/constants/app"),f=e("../../../helpers/constants/routes"),g=e("../../../contexts/metametrics"),h=e("../../../components/component-library"),y=e("../../../../shared/constants/onboarding");function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(b=function(e){return e?n:t})(e)}const E=(0,e("../../../../shared/modules/browser-runtime.utils").getBrowserName)()===m.PLATFORM_FIREFOX}}},{package:"$root$",file:"ui/pages/onboarding-flow/metametrics/metametrics.js"}],[7376,{"../../../../app/_locales/index.json":2,"../../../../shared/constants/preferences":5470,"../../../components/component-library":6123,"../../../components/ui/dropdown":6530,"../../../components/ui/metafox-logo":6575,"../../../ducks/locale/locale":6658,"../../../helpers/constants/design-system":6672,"../../../helpers/constants/routes":6677,"../../../store/actions":7594,classnames:3826,"prop-types":4808,react:4992,"react-redux":4936,"react-router-dom-v5-compat":4955},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=b;var a=y(e("react")),o=y(e("prop-types")),i=e("react-redux"),r=e("react-router-dom-v5-compat"),s=y(e("classnames")),c=y(e("../../../components/ui/metafox-logo")),l=y(e("../../../components/ui/dropdown")),u=e("../../../ducks/locale/locale"),d=e("../../../store/actions"),p=y(e("../../../../app/_locales/index.json")),m=e("../../../helpers/constants/routes"),f=e("../../../components/component-library"),g=e("../../../helpers/constants/design-system"),h=e("../../../../shared/constants/preferences");function y(e){return e&&e.__esModule?e:{default:e}}function b({isWelcomePage:e}){const t=(0,i.useDispatch)(),{pathname:n}=(0,r.useLocation)(),o=(0,i.useSelector)(u.getCurrentLocale),y=p.default.map(e=>({name:e.name,value:e.code}));return a.default.createElement(f.Box,{display:g.Display.Flex,alignItems:g.AlignItems.center,backgroundColor:g.BackgroundColor.backgroundDefault,width:g.BlockSize.Full,padding:4,className:(0,s.default)("onboarding-app-header",{"onboarding-app-header--welcome":e})},a.default.createElement(f.Box,{display:g.Display.Flex,width:g.BlockSize.Full,justifyContent:g.JustifyContent.spaceBetween,className:"onboarding-app-header__contents"},a.default.createElement(c.default,{theme:n===m.ONBOARDING_WELCOME_ROUTE?h.ThemeType.light:undefined,unsetIconHeight:!0,isOnboarding:!0}),a.default.createElement(l.default,{"data-testid":"select-locale",className:(0,s.default)("onboarding-app-header__dropdown",{"onboarding-app-header__dropdown--welcome--login":e}),options:y,selectedOption:o,onChange:async e=>t((0,d.updateCurrentLocale)(e))})))}b.propTypes={isWelcomePage:o.default.bool}}}},{package:"$root$",file:"ui/pages/onboarding-flow/onboarding-app-header/onboarding-app-header.js"}],[7377,{"../../../../shared/constants/app":5447,"../../../../shared/constants/onboarding":5468,"../../../../shared/modules/browser-runtime.utils":5555,"../../../ducks/metamask/metamask":6659,"../../../helpers/constants/routes":6677,"../../../selectors":7568,react:4992,"react-redux":4936,"react-router-dom-v5-compat":4955},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){const e=(0,i.useSelector)(c.getCompletedOnboarding),t=(0,i.useSelector)(c.getIsInitialized),n=(0,i.useSelector)(d.getIsSocialLoginUserAuthenticated),a=(0,i.useSelector)(c.getSeedPhraseBackedUp),m=(0,i.useSelector)(d.getFirstTimeFlowType),f=(0,i.useSelector)(d.getIsSocialLoginFlow),g=(0,i.useSelector)(c.getIsUnlocked),h=(0,i.useSelector)(d.getIsParticipateInMetaMetricsSet),y=(0,u.getBrowserName)()===l.PLATFORM_FIREFOX;if(e)return o.default.createElement(r.Navigate,{to:s.DEFAULT_ROUTE,replace:!0});if(null!==a||g&&f)return o.default.createElement(r.Navigate,{to:h||!y?s.ONBOARDING_COMPLETION_ROUTE:s.ONBOARDING_METAMETRICS,replace:!0});if(g)return o.default.createElement(r.Navigate,{to:s.LOCK_ROUTE,replace:!0});if(!t&&!n){let e;return e=(0,u.getBrowserName)()===l.PLATFORM_FIREFOX?o.default.createElement(r.Navigate,{to:s.ONBOARDING_METAMETRICS,replace:!0}):o.default.createElement(r.Navigate,{to:s.ONBOARDING_WELCOME_ROUTE,replace:!0}),e}if(!t&&n&&m===p.FirstTimeFlowType.socialCreate)return o.default.createElement(r.Navigate,{to:s.ONBOARDING_CREATE_PASSWORD_ROUTE,replace:!0});return o.default.createElement(r.Navigate,{to:s.ONBOARDING_UNLOCK_ROUTE,replace:!0})};var a,o=(a=e("react"))&&a.__esModule?a:{default:a},i=e("react-redux"),r=e("react-router-dom-v5-compat"),s=e("../../../helpers/constants/routes"),c=e("../../../ducks/metamask/metamask"),l=e("../../../../shared/constants/app"),u=e("../../../../shared/modules/browser-runtime.utils"),d=e("../../../selectors"),p=e("../../../../shared/constants/onboarding")}}},{package:"$root$",file:"ui/pages/onboarding-flow/onboarding-flow-switch/onboarding-flow-switch.js"}],[7378,{"../../../app/scripts/lib/util":276,"../../../shared/constants/app":5447,"../../../shared/constants/onboarding":5468,"../../../shared/lib/trace":5546,"../../../shared/modules/environment":5559,"../../components/app/toast-master/utils":6014,"../../components/component-library":6123,"../../components/ui/loading-screen":6563,"../../contexts/metametrics":6635,"../../ducks/metamask/metamask":6659,"../../helpers/constants/design-system":6672,"../../helpers/constants/routes":6677,"../../selectors":7568,"../../store/actions":7594,"../unlock-page":7552,"./account-exist/account-exist":7369,"./account-not-found/account-not-found":7370,"./create-password/create-password":7371,"./creation-successful/creation-successful":7372,"./download-app/download-app":7373,"./import-srp/import-srp":7374,"./metametrics/metametrics":7375,"./onboarding-app-header/onboarding-app-header":7376,"./onboarding-flow-switch/onboarding-flow-switch":7377,"./pin-extension/pin-extension":7379,"./privacy-settings/privacy-settings":7380,"./recovery-phrase/confirm-recovery-phrase":7382,"./recovery-phrase/reveal-recovery-phrase":7385,"./recovery-phrase/review-recovery-phrase":7386,"./secure-your-wallet/secure-your-wallet":7387,"./welcome/welcome":7393,classnames:3826,react:4992,"react-redux":4936,"react-router-dom-v5-compat":4955},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){const[e,t]=(0,a.useState)(""),[n,L]=(0,a.useState)(!1),j=(0,i.useDispatch)(),{pathname:W,search:$}=(0,o.useLocation)(),U=(0,o.useNavigate)(),z=(0,i.useSelector)(l.getCompletedOnboarding),G=(0,i.useSelector)(d.getFirstTimeFlowTypeRouteAfterUnlock),V=new URLSearchParams($).get("isFromReminder"),q=new URLSearchParams($).get("isFromSettingsSecurity"),J=(0,a.useContext)(p.MetaMetricsContext),{bufferedTrace:K,onboardingParentContext:H}=J,Y=(0,i.useSelector)(l.getIsUnlocked),X=(0,i.useSelector)(d.getFirstTimeFlowType),Q=(0,E.getIsSeedlessOnboardingFeatureEnabled)(),Z=(0,i.useSelector)(l.getIsPrimarySeedPhraseBackedUp),ee=(0,h.getEnvironmentType)()===y.ENVIRONMENT_TYPE_POPUP,te=(0,a.useMemo)(()=>W===c.ONBOARDING_WELCOME_ROUTE,[W]);(0,a.useEffect)(()=>{(0,m.submitRequestToBackgroundAndCatch)("setOnboardingDate")},[]),(0,a.useEffect)(()=>{z&&!V&&U(c.DEFAULT_ROUTE)},[U,z,V]),(0,a.useEffect)(()=>{const t=[c.ONBOARDING_SECURE_YOUR_WALLET_ROUTE,c.ONBOARDING_REVIEW_SRP_ROUTE,c.ONBOARDING_CONFIRM_SRP_ROUTE].some(e=>null==W?void 0:W.startsWith(e));!Y||z||e||t&&U(c.ONBOARDING_UNLOCK_ROUTE),Z&&t&&z&&U(q?c.SECURITY_ROUTE:c.DEFAULT_ROUTE,{replace:!0})},[Y,z,e,W,U,Z,q]),(0,a.useEffect)(()=>{const e=null==K?void 0:K({name:k.TraceName.OnboardingJourneyOverall,op:k.TraceOperation.OnboardingUserJourney});H&&(H.current=e)},[H,K]);let ne=W===c.ONBOARDING_WELCOME_ROUTE||W===c.ONBOARDING_UNLOCK_ROUTE;return a.default.createElement(f.Box,{backgroundColor:g.BackgroundColor.backgroundDefault,width:g.BlockSize.Full,height:g.BlockSize.Full,display:g.Display.Flex,flexDirection:g.FlexDirection.Column,alignItems:W===c.ONBOARDING_WELCOME_ROUTE?g.AlignItems.flexStart:g.AlignItems.center,justifyContent:g.JustifyContent.flexStart,className:(0,r.default)("onboarding-flow",{"onboarding-flow--welcome-login":te})},!ee&&a.default.createElement(B.default,{isWelcomePage:te}),a.default.createElement(f.Box,{className:(0,r.default)("onboarding-flow__container",{"onboarding-flow__container--full":ne,"onboarding-flow__container--popup":ee}),width:g.BlockSize.Full,borderStyle:ne||ee?g.BorderStyle.none:g.BorderStyle.solid,borderRadius:g.BorderRadius.LG,marginTop:W===c.ONBOARDING_WELCOME_ROUTE||ee?0:3,marginInline:"auto",borderColor:g.BorderColor.borderMuted},a.default.createElement(o.Routes,null,a.default.createElement(o.Route,{path:c.ONBOARDING_ACCOUNT_EXIST,element:a.default.createElement(R.default,null)}),a.default.createElement(o.Route,{path:c.ONBOARDING_ACCOUNT_NOT_FOUND,element:a.default.createElement(P.default,null)}),a.default.createElement(o.Route,{path:c.ONBOARDING_CREATE_PASSWORD_ROUTE,element:a.default.createElement(x.default,{createNewAccount:async e=>{try{let n;L(!0),Q&&X===b.FirstTimeFlowType.socialCreate?n=await j((0,u.createNewVaultAndSyncWithSocial)(e)):X===b.FirstTimeFlowType.create&&(n=await j((0,u.createNewVaultAndGetSeedPhrase)(e))),t(n)}finally{L(!1)}},importWithRecoveryPhrase:async(e,t)=>await j((0,u.createNewVaultAndRestore)(e,t)),secretRecoveryPhrase:e})}),a.default.createElement(o.Route,{path:c.ONBOARDING_SECURE_YOUR_WALLET_ROUTE,element:a.default.createElement(T.default,null)}),a.default.createElement(o.Route,{path:c.ONBOARDING_REVEAL_SRP_ROUTE,element:a.default.createElement(D.default,{setSecretRecoveryPhrase:t})}),a.default.createElement(o.Route,{path:c.ONBOARDING_REVIEW_SRP_ROUTE,element:a.default.createElement(_.default,{secretRecoveryPhrase:e})}),a.default.createElement(o.Route,{path:c.ONBOARDING_CONFIRM_SRP_ROUTE,element:a.default.createElement(w.default,{secretRecoveryPhrase:e})}),a.default.createElement(o.Route,{path:c.ONBOARDING_IMPORT_WITH_SRP_ROUTE,element:a.default.createElement(O.default,{submitSecretRecoveryPhrase:t})}),a.default.createElement(o.Route,{path:c.ONBOARDING_UNLOCK_ROUTE,element:a.default.createElement(s.default,{onSubmit:async e=>{try{let n;L(!0),n=Q&&X===b.FirstTimeFlowType.socialImport?await j((0,u.restoreSocialBackupAndGetSeedPhrase)(e)):await j((0,u.unlockAndGetSeedPhrase)(e)),t(n),U(G,{replace:!0})}finally{L(!1)}}})}),a.default.createElement(o.Route,{path:c.ONBOARDING_PRIVACY_SETTINGS_ROUTE,element:a.default.createElement(S.default,null)}),a.default.createElement(o.Route,{path:c.ONBOARDING_COMPLETION_ROUTE,element:a.default.createElement(I.default,null)}),a.default.createElement(o.Route,{path:c.ONBOARDING_WELCOME_ROUTE,element:a.default.createElement(N.default,null)}),a.default.createElement(o.Route,{path:c.ONBOARDING_PIN_EXTENSION_ROUTE,element:a.default.createElement(M.default,null)}),a.default.createElement(o.Route,{path:c.ONBOARDING_METAMETRICS,element:a.default.createElement(A.default,null)}),a.default.createElement(o.Route,{path:c.ONBOARDING_DOWNLOAD_APP_ROUTE,element:a.default.createElement(F.default,null)}),a.default.createElement(o.Route,{path:"*",element:a.default.createElement(C.default,null)}))),n&&a.default.createElement(v.default,null))};var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=j(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(a,i,r):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-router-dom-v5-compat"),i=e("react-redux"),r=L(e("classnames")),s=L(e("../unlock-page")),c=e("../../helpers/constants/routes"),l=e("../../ducks/metamask/metamask"),u=e("../../store/actions"),d=e("../../selectors"),p=e("../../contexts/metametrics"),m=e("../../components/app/toast-master/utils"),f=e("../../components/component-library"),g=e("../../helpers/constants/design-system"),h=e("../../../app/scripts/lib/util"),y=e("../../../shared/constants/app"),b=e("../../../shared/constants/onboarding"),E=e("../../../shared/modules/environment"),k=e("../../../shared/lib/trace"),v=L(e("../../components/ui/loading-screen")),C=L(e("./onboarding-flow-switch/onboarding-flow-switch")),x=L(e("./create-password/create-password")),_=L(e("./recovery-phrase/review-recovery-phrase")),T=L(e("./secure-your-wallet/secure-your-wallet")),w=L(e("./recovery-phrase/confirm-recovery-phrase")),S=L(e("./privacy-settings/privacy-settings")),I=L(e("./creation-successful/creation-successful")),N=L(e("./welcome/welcome")),O=L(e("./import-srp/import-srp")),M=L(e("./pin-extension/pin-extension")),A=L(e("./metametrics/metametrics")),B=L(e("./onboarding-app-header/onboarding-app-header")),R=L(e("./account-exist/account-exist")),P=L(e("./account-not-found/account-not-found")),D=L(e("./recovery-phrase/reveal-recovery-phrase")),F=L(e("./download-app/download-app"));function L(e){return e&&e.__esModule?e:{default:e}}function j(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(j=function(e){return e?n:t})(e)}}}},{package:"$root$",file:"ui/pages/onboarding-flow/onboarding-flow.js"}],[7379,{"../../../../shared/constants/metametrics":5462,"../../../../shared/constants/onboarding":5468,"../../../../shared/modules/browser-runtime.utils":5555,"../../../components/component-library":6123,"../../../contexts/metametrics":6635,"../../../helpers/constants/design-system":6672,"../../../helpers/constants/routes":6677,"../../../hooks/useI18nContext":6799,"../../../selectors":7568,"../../../store/actions":7594,classnames:3826,react:4992,"react-redux":4936,"react-responsive-carousel":4952,"react-router-dom-v5-compat":4955},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){const e=(0,u.useI18nContext)(),t=(0,i.useNavigate)(),[n,a]=(0,o.useState)(0),E=(0,r.useDispatch)(),k=(0,o.useContext)(f.MetaMetricsContext),v=(0,r.useSelector)(g.getFirstTimeFlowType),C=(0,r.useSelector)(g.getCurrentKeyring),x=(0,r.useSelector)(g.getExternalServicesOnboardingToggleState);return(0,o.useEffect)(()=>{C||t(p.ONBOARDING_WELCOME_ROUTE,{replace:!0})},[C,t]),o.default.createElement(m.Box,{display:d.Display.Flex,flexDirection:d.FlexDirection.Column,justifyContent:d.JustifyContent.spaceBetween,height:d.BlockSize.Full,gap:6,className:"onboarding-pin-extension","data-testid":"onboarding-pin-extension"},o.default.createElement(m.Box,null,o.default.createElement(s.Carousel,{selectedItem:n,showThumbs:!1,showStatus:!1,dynamicHeight:!0,renderArrowPrev:(t,n,a)=>o.default.createElement(m.ButtonIcon,{iconName:m.IconName.Arrow2Left,size:m.ButtonIconSize.Lg,borderRadius:d.BorderRadius.full,borderWidth:2,borderColor:d.IconColor.iconDefault,className:(0,c.default)("onboarding-pin-extension__arrow",{"onboarding-pin-extension__arrow--disabled":!n}),disabled:!n,title:a,onClick:t,ariaLabel:e("prev")}),renderArrowNext:(t,n,a)=>o.default.createElement(m.ButtonIcon,{iconName:m.IconName.Arrow2Right,size:m.ButtonIconSize.Lg,borderRadius:d.BorderRadius.full,borderWidth:2,borderColor:d.IconColor.iconDefault,className:(0,c.default)("onboarding-pin-extension__arrow","onboarding-pin-extension__arrow--next",{"onboarding-pin-extension__arrow--disabled":!n}),disabled:!n,title:a,onClick:t,ariaLabel:e("next"),"data-testid":"pin-extension-next"}),onChange:e=>a(e)},o.default.createElement(m.Box,{display:d.Display.Flex,alignItems:d.AlignItems.flexStart,justifyContent:d.JustifyContent.center,className:"onboarding-pin-extension__image-container"},o.default.createElement("img",{src:"/images/onboarding-extension-pin.svg",alt:e("onboardingPinExtensionAltPin")})),o.default.createElement(m.Box,{display:d.Display.Flex,alignItems:d.AlignItems.flexStart,justifyContent:d.JustifyContent.center,className:"onboarding-pin-extension__image-container"},o.default.createElement("img",{src:"/images/onboarding-extension-launch.svg",alt:e("onboardingPinExtensionAltLaunch")}))),o.default.createElement(m.Box,{display:d.Display.Flex,flexDirection:d.FlexDirection.Column,justifyContent:d.JustifyContent.flexStart,width:d.BlockSize.Full,marginTop:4,gap:4},o.default.createElement(m.Text,{variant:d.TextVariant.headingLg,fontWeight:d.FontWeight.Medium,as:"h2"},e("onboardingPinExtensionTitle")),0===n?o.default.createElement(m.Box,null,o.default.createElement(m.Text,{variant:d.TextVariant.bodyMd},e("onboardingPinExtensionDescription"))):o.default.createElement(m.Box,{display:d.Display.Flex,flexDirection:d.FlexDirection.Column,gap:4},o.default.createElement(m.Text,{variant:d.TextVariant.bodyMd},e("onboardingPinExtensionDescription2")),o.default.createElement(m.Text,{variant:d.TextVariant.bodyMd},e("onboardingPinExtensionDescription3",[(0,b.getBrowserName)()]))))),o.default.createElement(m.Box,null,o.default.createElement(m.Button,{variant:m.ButtonVariant.Primary,size:m.ButtonSize.Lg,block:!0,"data-testid":"pin-extension-done",onClick:async()=>{await E((0,l.toggleExternalServices)(x)),await E((0,l.setCompletedOnboarding)()),k({category:h.MetaMetricsEventCategory.Onboarding,event:h.MetaMetricsEventName.ExtensionPinned,properties:{wallet_setup_type:v===y.FirstTimeFlowType.import?"import":"new",new_wallet:v===y.FirstTimeFlowType.create}}),t(p.DEFAULT_ROUTE)}},e("done"))))};var a,o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=E(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(a,i,r):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(e("react")),i=e("react-router-dom-v5-compat"),r=e("react-redux"),s=e("react-responsive-carousel"),c=(a=e("classnames"))&&a.__esModule?a:{default:a},l=e("../../../store/actions"),u=e("../../../hooks/useI18nContext"),d=e("../../../helpers/constants/design-system"),p=e("../../../helpers/constants/routes"),m=e("../../../components/component-library"),f=e("../../../contexts/metametrics"),g=e("../../../selectors"),h=e("../../../../shared/constants/metametrics"),y=e("../../../../shared/constants/onboarding"),b=e("../../../../shared/modules/browser-runtime.utils");function E(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(E=function(e){return e?n:t})(e)}}}},{package:"$root$",file:"ui/pages/onboarding-flow/pin-extension/pin-extension.js"}],[7380,{"../../../../app/scripts/lib/util":276,"../../../../shared/constants/metametrics":5462,"../../../../shared/constants/network":5465,"../../../../shared/lib/ui-utils":5552,"../../../../shared/modules/selectors/networks":5575,"../../../components/app/identity/backup-and-sync-toggle/backup-and-sync-toggle":5738,"../../../components/component-library":6123,"../../../components/ui/button":6506,"../../../contexts/metametrics":6635,"../../../ducks/app/app":6644,"../../../helpers/constants/design-system":6672,"../../../helpers/constants/routes":6677,"../../../helpers/constants/zendesk-url":6684,"../../../hooks/identity/useBackupAndSync":6754,"../../../hooks/useI18nContext":6799,"../../../selectors":7568,"../../../selectors/identity/backup-and-sync":7567,"../../../store/actions":7594,"./setting":7381,"@metamask/profile-sync-controller/user-storage":2343,"@metamask/snaps-sdk":2599,classnames:3826,react:4992,"react-redux":4936,"react-router-dom-v5-compat":4955},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){const e=(0,E.useI18nContext)(),t=(0,o.useDispatch)(),n=(0,i.useNavigate)(),[I,N]=(0,a.useState)(!1),[M,A]=(0,a.useState)(null),[B,R]=(0,a.useState)(!0),P=(0,o.useSelector)(e=>e.metamask),{use4ByteResolution:D,useTokenDetection:F,useCurrencyRateCheck:L,useMultiAccountBalanceChecker:j,ipfsGateway:W,useAddressBarEnsResolution:$,useTransactionSimulations:U}=P,z=(0,o.useSelector)(k.getUseExternalNameSources),[G,V]=(0,a.useState)(D),[q,J]=(0,a.useState)(F),[K,H]=(0,a.useState)(L),[Y,X]=(0,a.useState)(j),[Q,Z]=(0,a.useState)(U),[ee,te]=(0,a.useState)(W),[ne,ae]=(0,a.useState)(null),[oe,ie]=(0,a.useState)($),[re,se]=(0,a.useState)(z),ce=(0,a.useContext)(h.MetaMetricsContext),le=(0,o.useSelector)(v.getNetworkConfigurationsByChainId),ue=(0,o.useSelector)(k.getExternalServicesOnboardingToggleState),de=(0,o.useSelector)(T.selectIsBackupAndSyncEnabled),{setIsBackupAndSyncFeatureEnabled:pe,error:me}=(0,u.useBackupAndSync)();(0,a.useEffect)(()=>{pe(c.BACKUPANDSYNC_FEATURES.main,!!ue)},[ue,pe]);const fe=e=>{A(e),N(!0),setTimeout(()=>{R(!1)},O)},ge=[{id:1,title:e("general"),subtitle:e("generalDescription")},{id:2,title:e("assets"),subtitle:e("assetsDescription")},{id:3,title:e("security"),subtitle:e("securityDescription")}];return a.default.createElement(a.default.Fragment,null,a.default.createElement("div",{className:"privacy-settings","data-testid":"privacy-settings"},a.default.createElement("div",{className:(0,r.default)("container",{"show-detail":I,"show-list":!I})},a.default.createElement("div",{className:"list-view"},a.default.createElement(g.Box,{className:"privacy-settings__header",marginTop:6,marginBottom:6,display:y.Display.Flex,flexDirection:y.FlexDirection.Column,justifyContent:y.JustifyContent.flexStart},a.default.createElement(g.Box,{display:y.Display.Flex,alignItems:y.AlignItems.center,flexDirection:y.FlexDirection.Row,justifyContent:y.JustifyContent.flexStart},a.default.createElement(f.default,{type:"inline",icon:a.default.createElement(g.Icon,{name:g.IconName.ArrowLeft,size:g.IconSize.Lg,color:y.IconColor.iconDefault}),"data-testid":"privacy-settings-back-button",onClick:()=>{if(t((0,C.setUse4ByteResolution)(G)),t((0,C.setUseTokenDetection)(q)),t((0,C.setUseMultiAccountBalanceChecker)(Y)),t((0,C.setUseCurrencyRateCheck)(K)),t((0,C.setUseAddressBarEnsResolution)(oe)),(0,C.setUseTransactionSimulations)(Q),(0,C.setUseExternalNameSources)(re),ue||pe(c.BACKUPANDSYNC_FEATURES.main,!1),ee&&!ne){const{host:e}=new URL((0,l.addUrlProtocolPrefix)(ee));t((0,C.setIpfsGateway)(e))}ce({category:d.MetaMetricsEventCategory.Onboarding,event:d.MetaMetricsEventName.OnboardingWalletAdvancedSettings,properties:{settings_group:"onboarding_advanced_configuration",is_profile_syncing_enabled:de,is_basic_functionality_enabled:ue,turnon_token_detection:q}}),n(b.ONBOARDING_COMPLETION_ROUTE)}}),a.default.createElement(g.Box,{display:y.Display.Flex,alignItems:y.AlignItems.center,justifyContent:y.JustifyContent.center,width:y.BlockSize.Full},a.default.createElement(g.Text,{variant:y.TextVariant.headingLg,as:"h2"},e("defaultSettingsTitle")))),a.default.createElement(g.Text,{variant:y.TextVariant.bodyLgMedium,marginTop:5},e("defaultSettingsSubTitle")),a.default.createElement("a",{href:"https://support.metamask.io/privacy-and-security/privacy-best-practices",target:"_blank",rel:"noreferrer",key:"learnMoreAboutPrivacy",style:{fontSize:"var(--font-size-5)"}},e("learnMoreAboutPrivacy"))),a.default.createElement(g.Box,null,a.default.createElement(g.Box,{as:"ul",marginTop:4,marginBottom:4,style:{listStyleType:"none"},className:"privacy-settings__categories-list"},ge.map(e=>a.default.createElement(g.Box,{marginTop:5,marginBottom:5,key:e.id,className:"categories-item",onClick:()=>fe(e)},a.default.createElement(g.Box,{display:y.Display.Flex,alignItems:y.AlignItems.flexStart,justifyContent:y.JustifyContent.spaceBetween,"data-testid":`category-item-${e.title}`},a.default.createElement(g.Text,{variant:y.TextVariant.bodyLgMedium},e.title),a.default.createElement(f.default,{type:"inline",icon:a.default.createElement(g.Icon,{name:g.IconName.ArrowRight,color:y.IconColor.iconDefault}),onClick:()=>fe(e)})),a.default.createElement(g.Text,{className:"description",variant:y.TextVariant.bodyMd,color:y.TextColor.textAlternative},e.subtitle)))))),a.default.createElement("div",{className:(0,r.default)("detail-view",{hidden:!I&&B})},a.default.createElement(g.Box,{className:"privacy-settings__header",marginTop:6,marginBottom:5,display:y.Display.Flex,flexDirection:y.FlexDirection.Row,justifyContent:y.JustifyContent.flexStart},a.default.createElement(f.default,{"data-testid":"category-back-button",type:"inline",icon:a.default.createElement(g.Icon,{name:g.IconName.ArrowLeft,size:g.IconSize.Lg,color:y.IconColor.iconDefault}),onClick:()=>{N(!1),setTimeout(()=>{R(!0)},O)}}),a.default.createElement(g.Box,{display:y.Display.Flex,alignItems:y.AlignItems.center,justifyContent:y.JustifyContent.center,width:y.BlockSize.Full},a.default.createElement(g.Text,{variant:y.TextVariant.headingLg,as:"h2"},null==M?void 0:M.title))),a.default.createElement("div",{className:"privacy-settings__settings","data-testid":"privacy-settings-settings"},1===(null==M?void 0:M.id)?a.default.createElement(a.default.Fragment,null,a.default.createElement(S.Setting,{dataTestId:"basic-functionality-toggle",value:ue,setValue:e=>{e?(t((0,x.onboardingToggleBasicFunctionalityOn)()),ce({category:d.MetaMetricsEventCategory.Onboarding,event:d.MetaMetricsEventName.SettingsUpdated,properties:{settings_group:"onboarding_advanced_configuration",settings_type:"basic_functionality",old_value:!1,new_value:!0,was_profile_syncing_on:!1}})):t((0,x.openBasicFunctionalityModal)())},title:e("basicConfigurationLabel"),description:e("basicConfigurationDescription",[a.default.createElement("a",{href:"https://consensys.io/privacy-policy",key:"link",target:"_blank",rel:"noreferrer noopener"},e("privacyMsg"))])}),a.default.createElement(w.BackupAndSyncToggle,null),me&&a.default.createElement(g.Box,{paddingBottom:4},a.default.createElement(g.Text,{as:"p",color:y.TextColor.errorDefault,variant:y.TextVariant.bodySm},e("notificationsSettingsBoxError"))),a.default.createElement(S.Setting,{title:e("onboardingAdvancedPrivacyNetworkTitle"),showToggle:!1,description:a.default.createElement(a.default.Fragment,null,e("onboardingAdvancedPrivacyNetworkDescription",[a.default.createElement("a",{href:"https://consensys.io/privacy-policy/",key:"link",target:"_blank",rel:"noopener noreferrer"},e("privacyMsg")),a.default.createElement("a",{href:m.default.ADD_SOLANA_ACCOUNTS,key:"link",target:"_blank",rel:"noopener noreferrer"},e("onboardingAdvancedPrivacyNetworkDescriptionCallToAction"))]),a.default.createElement(g.Box,{paddingTop:4},a.default.createElement(g.Box,{display:y.Display.Flex,flexDirection:y.FlexDirection.Column,gap:5},Object.values(le).filter(({chainId:e})=>!_.TEST_CHAINS.includes(e)).map(e=>{var n,o;return a.default.createElement(g.Box,{key:e.chainId,className:"privacy-settings__customizable-network",onClick:()=>{t((0,C.setEditedNetwork)({chainId:e.chainId})),t((0,C.toggleNetworkMenu)())},display:y.Display.Flex,alignItems:y.AlignItems.center,justifyContent:y.JustifyContent.spaceBetween},a.default.createElement(g.Box,{display:y.Display.Flex,alignItems:y.AlignItems.center},a.default.createElement(g.AvatarNetwork,{src:_.CHAIN_ID_TO_NETWORK_IMAGE_URL_MAP[e.chainId]}),a.default.createElement(g.Box,{textAlign:y.TextAlign.Left,marginLeft:3},a.default.createElement(g.Text,{variant:y.TextVariant.bodySmMedium},e.name),a.default.createElement(g.Text,{variant:y.TextVariant.bodyXs,color:y.TextColor.textAlternative},null===(n=new URL(null==e||null===(o=e.rpcEndpoints[null==e?void 0:e.defaultRpcEndpointIndex])||void 0===o?void 0:o.url))||void 0===n?void 0:n.origin))),a.default.createElement(g.ButtonIcon,{iconName:g.IconName.ArrowRight,size:g.IconSize.Md}))}),a.default.createElement(g.ButtonLink,{onClick:()=>{t((0,C.toggleNetworkMenu)({isAddingNewNetwork:!0}))},justifyContent:y.JustifyContent.Left,variant:s.ButtonVariant.link},a.default.createElement(g.Box,{display:y.Display.Flex,alignItems:y.AlignItems.center},a.default.createElement(g.Icon,{name:g.IconName.Add,marginRight:3}),a.default.createElement(g.Text,{color:y.TextColor.primaryDefault},e("addANetwork")))))))})):null,2===(null==M?void 0:M.id)?a.default.createElement(a.default.Fragment,null,a.default.createElement(S.Setting,{value:q,setValue:J,title:e("turnOnTokenDetection"),description:e("useTokenDetectionPrivacyDesc")}),a.default.createElement(S.Setting,{value:Q,setValue:Z,title:e("simulationsSettingSubHeader"),description:e("simulationsSettingDescription",[a.default.createElement("a",{key:"learn_more_link",href:p.TRANSACTION_SIMULATIONS_LEARN_MORE_LINK,rel:"noreferrer",target:"_blank"},e("learnMoreUpperCase"))])}),a.default.createElement(S.Setting,{title:e("onboardingAdvancedPrivacyIPFSTitle"),showToggle:!1,description:a.default.createElement(a.default.Fragment,null,e("onboardingAdvancedPrivacyIPFSDescription"),a.default.createElement(g.Box,{paddingTop:2},a.default.createElement(g.TextField,{value:ee,style:{width:"100%"},inputProps:{"data-testid":"ipfs-input"},onChange:t=>{(t=>{te(t);try{const{host:e}=new URL((0,l.addUrlProtocolPrefix)(t));if(!e||"gateway.ipfs.io"===e)throw new Error;ae(null)}catch(t){ae(e("onboardingAdvancedPrivacyIPFSInvalid"))}})(t.target.value)}}),ee?a.default.createElement(g.Text,{variant:y.TextVariant.bodySm,color:ne?y.TextColor.errorDefault:y.TextColor.successDefault},ne||e("onboardingAdvancedPrivacyIPFSValid")):null))}),a.default.createElement(S.Setting,{value:K,setValue:H,title:e("currencyRateCheckToggle"),dataTestId:"currency-rate-check-toggle",description:e("currencyRateCheckToggleDescription",[a.default.createElement("a",{key:"coingecko_link",href:p.COINGECKO_LINK,rel:"noreferrer",target:"_blank"},e("coingecko")),a.default.createElement("a",{key:"cryptocompare_link",href:p.CRYPTOCOMPARE_LINK,rel:"noreferrer",target:"_blank"},e("cryptoCompare")),a.default.createElement("a",{key:"privacy_policy_link",href:p.PRIVACY_POLICY_LINK,rel:"noreferrer",target:"_blank"},e("privacyMsg"))])}),a.default.createElement(S.Setting,{value:oe,setValue:ie,title:e("ensDomainsSettingTitle"),description:a.default.createElement(a.default.Fragment,null,a.default.createElement(g.Text,{variant:y.TextVariant.inherit},e("ensDomainsSettingDescriptionIntroduction")),a.default.createElement(g.Box,{as:"ul",marginTop:4,marginBottom:4,paddingInlineStart:4,style:{listStyleType:"circle"}},a.default.createElement(g.Text,{variant:y.TextVariant.inherit,as:"li"},e("ensDomainsSettingDescriptionPart1")),a.default.createElement(g.Text,{variant:y.TextVariant.inherit,as:"li"},e("ensDomainsSettingDescriptionPart2"))),a.default.createElement(g.Text,{variant:y.TextVariant.inherit},e("ensDomainsSettingDescriptionOutroduction")))}),a.default.createElement(S.Setting,{value:Y,setValue:X,title:e("useMultiAccountBalanceChecker"),description:e("useMultiAccountBalanceCheckerSettingDescription")})):null,3===(null==M?void 0:M.id)?a.default.createElement(a.default.Fragment,null,a.default.createElement(S.Setting,{value:G,setValue:V,title:e("use4ByteResolution"),description:e("toggleDecodeDescription")}),a.default.createElement(S.Setting,{value:re,setValue:se,title:e("externalNameSourcesSetting"),description:e("externalNameSourcesSettingDescription")})):null)))))};var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=N(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(a,i,r):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-redux"),i=e("react-router-dom-v5-compat"),r=I(e("classnames")),s=e("@metamask/snaps-sdk"),c=e("@metamask/profile-sync-controller/user-storage"),l=e("../../../../app/scripts/lib/util"),u=e("../../../hooks/identity/useBackupAndSync"),d=e("../../../../shared/constants/metametrics"),p=e("../../../../shared/lib/ui-utils"),m=I(e("../../../helpers/constants/zendesk-url")),f=I(e("../../../components/ui/button")),g=e("../../../components/component-library"),h=e("../../../contexts/metametrics"),y=e("../../../helpers/constants/design-system"),b=e("../../../helpers/constants/routes"),E=e("../../../hooks/useI18nContext"),k=e("../../../selectors"),v=e("../../../../shared/modules/selectors/networks"),C=e("../../../store/actions"),x=e("../../../ducks/app/app"),_=e("../../../../shared/constants/network"),T=e("../../../selectors/identity/backup-and-sync"),w=e("../../../components/app/identity/backup-and-sync-toggle/backup-and-sync-toggle"),S=e("./setting");function I(e){return e&&e.__esModule?e:{default:e}}function N(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(N=function(e){return e?n:t})(e)}const O=500}}},{package:"$root$",file:"ui/pages/onboarding-flow/privacy-settings/privacy-settings.js"}],[7381,{"../../../components/component-library":6123,"../../../components/ui/toggle-button":6612,"../../../helpers/constants/design-system":6672,"../../../hooks/useI18nContext":6799,"prop-types":4808,react:4992},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.Setting=void 0;var a=l(e("react")),o=l(e("prop-types")),i=e("../../../components/component-library"),r=l(e("../../../components/ui/toggle-button")),s=e("../../../helpers/constants/design-system"),c=e("../../../hooks/useI18nContext");function l(e){return e&&e.__esModule?e:{default:e}}const u=({value:e,setValue:t,title:n,description:o,showToggle:l=!0,dataTestId:u,disabled:d=!1})=>{const p=(0,c.useI18nContext)();return a.default.createElement(i.Box,{display:s.Display.Flex,justifyContent:s.JustifyContent.spaceBetween,alignItems:s.AlignItems.flexStart,marginTop:3,marginBottom:3,className:"privacy-settings__setting__wrapper","data-testid":u},a.default.createElement("div",{className:"privacy-settings__setting"},a.default.createElement(i.Text,{variant:s.TextVariant.bodyMdMedium},n),a.default.createElement(i.Text,{variant:s.TextVariant.bodySm,color:s.TextColor.textAlternative,as:"div"},o)),l?a.default.createElement("div",{className:"privacy-settings__setting__toggle"},a.default.createElement(r.default,{value:e,onToggle:e=>t(!e),offLabel:p("off"),onLabel:p("on"),disabled:d})):null)};n.Setting=u,u.propTypes={value:o.default.bool,setValue:o.default.func,title:o.default.string,description:o.default.oneOfType([o.default.object,o.default.string]),showToggle:o.default.bool,dataTestId:o.default.string,disabled:o.default.bool}}}},{package:"$root$",file:"ui/pages/onboarding-flow/privacy-settings/setting.js"}],[7382,{"../../../../shared/constants/app":5447,"../../../../shared/constants/metametrics":5462,"../../../../shared/lib/trace":5546,"../../../../shared/modules/browser-runtime.utils":5555,"../../../components/component-library":6123,"../../../contexts/metametrics":6635,"../../../helpers/constants/design-system":6672,"../../../helpers/constants/routes":6677,"../../../hooks/useI18nContext":6799,"../../../selectors/selectors":7584,"../../../store/actions":7594,"./confirm-srp-modal":7383,"./recovery-phrase-chips":7384,"prop-types":4808,react:4992,"react-redux":4936,"react-router-dom-v5-compat":4955},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=x;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=v(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(a,i,r):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-router-dom-v5-compat"),i=e("react-redux"),r=k(e("prop-types")),s=e("../../../components/component-library"),c=e("../../../helpers/constants/design-system"),l=e("../../../hooks/useI18nContext"),u=e("../../../store/actions"),d=e("../../../contexts/metametrics"),p=e("../../../../shared/constants/metametrics"),m=e("../../../selectors/selectors"),f=e("../../../helpers/constants/routes"),g=e("../../../../shared/constants/app"),h=e("../../../../shared/lib/trace"),y=e("../../../../shared/modules/browser-runtime.utils"),b=k(e("./confirm-srp-modal")),E=k(e("./recovery-phrase-chips"));function k(e){return e&&e.__esModule?e:{default:e}}function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(v=function(e){return e?n:t})(e)}const C=e=>{const t=new Set,n=e.length;if(0===n)return[];for(;t.size<3;){const e=Math.floor(Math.random()*n);t.add(e)}return Array.from(t).map(t=>({index:t,word:e[t]}))};function x({secretRecoveryPhrase:e=""}){const t=(0,i.useDispatch)(),n=(0,o.useNavigate)(),{search:r}=(0,o.useLocation)(),k=(0,l.useI18nContext)(),v=(0,a.useContext)(d.MetaMetricsContext),{bufferedEndTrace:x}=v,_=(0,i.useSelector)(m.getHDEntropyIndex),T=(0,a.useMemo)(()=>e?e.split(" "):[],[e]),w=new URLSearchParams(r),S=w.get("isFromReminder"),I=w.get("isFromSettingsSecurity"),N=new URLSearchParams;S&&N.set("isFromReminder",S),I&&N.set("isFromSettingsSecurity",I);const O=N.toString(),[M,A]=(0,a.useState)(!1),[B,R]=(0,a.useState)(!1),[P,D]=(0,a.useState)(C(T)),[F,L]=(0,a.useState)("");(0,a.useEffect)(()=>{e||n(`${f.ONBOARDING_REVEAL_SRP_ROUTE}${O?`?${O}`:""}`,{replace:!0})},[n,e,O]);const j=(0,a.useCallback)(()=>{const e=C(T);D(e)},[T]),W=(0,a.useCallback)(e=>{if(e.some(e=>!e.word))L("");else{const t=[...T];e.forEach(e=>{t[e.index]=e.word}),L(t.join(" "))}},[T]),$=(0,a.useCallback)(()=>{R(F===e),A(!0)},[F,e]),U=(0,a.useCallback)(()=>{t((0,u.setSeedPhraseBackedUp)(!0)),v({category:p.MetaMetricsEventCategory.Onboarding,event:p.MetaMetricsEventName.OnboardingWalletSecurityPhraseConfirmed,properties:{hd_entropy_index:_}}),null==x||x({name:h.TraceName.OnboardingNewSrpCreateWallet}),null==x||x({name:h.TraceName.OnboardingJourneyOverall});const e=(0,y.getBrowserName)()===g.PLATFORM_FIREFOX||S?f.ONBOARDING_COMPLETION_ROUTE:f.ONBOARDING_METAMETRICS;n(`${e}${O?`?${O}`:""}`,{replace:!0})},[t,_,n,v,S,O,x]);return a.default.createElement(s.Box,{display:c.Display.Flex,flexDirection:c.FlexDirection.Column,justifyContent:c.JustifyContent.spaceBetween,height:c.BlockSize.Full,gap:6,className:"recovery-phrase recovery-phrase__confirm","data-testid":"confirm-recovery-phrase"},a.default.createElement(s.Box,null,M&&a.default.createElement(b.default,{isError:!B,onContinue:U,onClose:()=>{j(),A(!1)}}),a.default.createElement(s.Box,{justifyContent:c.JustifyContent.flexStart,marginBottom:4,width:c.BlockSize.Full},a.default.createElement(s.ButtonIcon,{iconName:s.IconName.ArrowLeft,color:c.IconColor.iconDefault,size:s.ButtonIconSize.Md,"data-testid":"confirm-recovery-phrase-back-button",onClick:()=>n(-1),ariaLabel:k("back")})),a.default.createElement(s.Box,{justifyContent:c.JustifyContent.flexStart,marginBottom:4,width:c.BlockSize.Full},!S&&a.default.createElement(s.Text,{variant:c.TextVariant.bodyMd,color:c.TextColor.textAlternative},k("stepOf",[3,3])),a.default.createElement(s.Text,{variant:c.TextVariant.headingLg,as:"h2"},k("confirmRecoveryPhraseTitle"))),a.default.createElement(s.Box,{marginBottom:6},a.default.createElement(s.Text,{variant:c.TextVariant.bodyMd,color:c.TextColor.textAlternative},k("confirmRecoveryPhraseDetails"))),T.length>0&&a.default.createElement(E.default,{secretRecoveryPhrase:T,quizWords:P,confirmPhase:!0,setInputValue:W})),a.default.createElement(s.Box,{width:c.BlockSize.Full},a.default.createElement(s.Button,{variant:s.ButtonVariant.Primary,width:c.BlockSize.Full,"data-testid":"recovery-phrase-confirm",size:s.ButtonSize.Lg,className:"recovery-phrase__footer__confirm--button",onClick:()=>$(),disabled:""===F.trim()},k("continue"))))}x.propTypes={secretRecoveryPhrase:r.default.string}}}},{package:"$root$",file:"ui/pages/onboarding-flow/recovery-phrase/confirm-recovery-phrase.js"}],[7383,{"../../../components/component-library":6123,"../../../helpers/constants/design-system":6672,"../../../hooks/useI18nContext":6799,react:4992},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function({onContinue:e,onClose:t,isError:n}){const a=(0,r.useI18nContext)();return o.default.createElement(s.Modal,{isOpen:!0,onClose:()=>null,className:"confirm-srp-modal","data-testid":"confirm-srp-modal"},o.default.createElement(s.ModalOverlay,null),o.default.createElement(s.ModalContent,{alignItems:i.AlignItems.center},o.default.createElement(s.ModalHeader,null,o.default.createElement(s.Box,{textAlign:i.TextAlign.Center},o.default.createElement(s.Icon,{name:n?s.IconName.CircleX:s.IconName.Confirmation,size:s.IconSize.Xl,className:"skip-srp-backup-popover__icon",color:n?i.IconColor.errorDefault:i.IconColor.successDefault}),o.default.createElement(s.Text,{variant:i.TextVariant.headingMd,textAlign:i.TextAlign.Center,marginTop:2,as:"h2"},a(n?"confirmSrpErrorTitle":"confirmSrpSuccessTitle")))),o.default.createElement(s.Box,{paddingLeft:4,paddingRight:4},o.default.createElement(s.Text,{variant:i.TextVariant.bodyMd},a(n?"confirmSrpErrorDescription":"confirmSrpSuccessDescription")),o.default.createElement(s.Box,{marginTop:6},o.default.createElement(s.Button,{"data-testid":"confirm-srp-modal-button",variant:s.ButtonVariant.Primary,size:s.ButtonSize.Lg,onClick:()=>{n?t():e()},block:!0},a(n?"tryAgain":"gotIt"))))))};var a,o=(a=e("react"))&&a.__esModule?a:{default:a},i=e("../../../helpers/constants/design-system"),r=e("../../../hooks/useI18nContext"),s=e("../../../components/component-library")}}},{package:"$root$",file:"ui/pages/onboarding-flow/recovery-phrase/confirm-srp-modal.tsx"}],[7384,{"../../../components/component-library":6123,"../../../helpers/constants/design-system":6672,"../../../hooks/useI18nContext":6799,classnames:3826,"prop-types":4808,react:4992},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=p,n.fakeSeedPhraseWords=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(a,i,r):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=l(e("classnames")),i=l(e("prop-types")),r=e("../../../components/component-library"),s=e("../../../hooks/useI18nContext"),c=e("../../../helpers/constants/design-system");function l(e){return e&&e.__esModule?e:{default:e}}function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}const d=n.fakeSeedPhraseWords=["candy","maple","cake","sugar","pudding","cream","honey","rich","smooth","crumble","sweet","treat"];function p({secretRecoveryPhrase:e,phraseRevealed:t=!0,revealPhrase:n,confirmPhase:i,quizWords:l=[],setInputValue:u}){const p=(0,s.useI18nContext)(),m=(0,a.useMemo)(()=>l.map(e=>e.index),[l]),[f,g]=(0,a.useState)(m.map(e=>({index:e,word:"",actualIndexInSrp:-1}))),h=e=>{const t=e.reduce((e,t)=>(""===t.word&&e.push(t.index),e),[]);return t.length?Math.min(...t):-1},[y,b]=(0,a.useState)(h(f)),E=(0,a.useCallback)((e,t)=>{const n=[...f],a=n.findIndex(e=>e.index===y);n[a]={index:y,word:e,actualIndexInSrp:t},g(n),b(h(n))},[f,y]),k=(0,a.useCallback)(e=>{const t=[...f],n=t.findIndex(t=>t.word===e);t[n]={...t[n],word:"",actualIndexInSrp:-1},g(t),b(t[n].index)},[f]);(0,a.useEffect)(()=>{null==u||u(f)},[f,u]),(0,a.useEffect)(()=>{if(l.length){const e=l.map(e=>({index:e.index,word:"",actualIndexInSrp:-1}));g(e),b(h(e))}},[l]);const v=t?e:e.map((e,t)=>d[t%d.length]);return a.default.createElement(r.Box,{display:c.Display.Flex,flexDirection:c.FlexDirection.Column,gap:4},a.default.createElement(r.Box,{padding:4,borderRadius:c.BorderRadius.LG,display:c.Display.Grid,width:c.BlockSize.Full,backgroundColor:c.BackgroundColor.backgroundSection,className:"recovery-phrase__secret"},a.default.createElement(r.Box,{key:"recovery-phrase-chips",display:c.Display.Grid,justifyContent:c.JustifyContent.center,alignItems:c.AlignItems.center,gap:2,"data-testid":"recovery-phrase-chips","data-recovery-phrase":e.join(":"),"data-quiz-words":JSON.stringify(l),className:(0,o.default)("recovery-phrase__chips",{"recovery-phrase__chips--hidden":!t})},v.map((e,t)=>{var n;const o=m.includes(t),s=o?(null===(n=f.find(e=>e.index===t))||void 0===n?void 0:n.word)||"":e,l=t===y;return o||!i?a.default.createElement(r.Box,{as:o?"button":"div","data-testid":`recovery-phrase-chip-${t}`,className:"recovery-phrase__text",display:c.Display.Flex,alignItems:c.AlignItems.center,backgroundColor:c.BackgroundColor.backgroundDefault,borderColor:l?c.BorderColor.primaryDefault:c.BorderColor.borderMuted,borderWidth:l?2:1,borderRadius:c.BorderRadius.LG,paddingInline:2,paddingTop:1,paddingBottom:1,gap:1,onClick:()=>{o&&(""===s?b(t):k(s))}},a.default.createElement(r.Text,{color:c.TextColor.textAlternative,className:"recovery-phrase__word-index"},t+1,"."),a.default.createElement(r.Text,null,o?s:e)):a.default.createElement(r.TextField,{testId:`recovery-phrase-chip-${t}`,key:t,value:s,startAccessory:a.default.createElement(r.Text,{color:c.TextColor.textAlternative,className:"recovery-phrase__word-index"},t+1,"."),type:"password",disabled:!0,readOnly:!0})})),!t&&a.default.createElement(r.Box,{key:"recovery-phrase__secret-blocker-container",width:c.BlockSize.Full,height:c.BlockSize.Full,className:"recovery-phrase__secret-blocker-container"},a.default.createElement(r.Box,{display:c.Display.Flex,alignItems:c.AlignItems.center,justifyContent:c.JustifyContent.center,borderRadius:c.BorderRadius.SM,width:c.BlockSize.Full,height:c.BlockSize.Full,paddingTop:2,paddingBottom:9,paddingInline:0,className:"recovery-phrase__secret-blocker"}),a.default.createElement(r.Box,{as:"button",display:c.Display.Flex,flexDirection:c.FlexDirection.Column,alignItems:c.AlignItems.center,justifyContent:c.JustifyContent.center,backgroundColor:c.BackgroundColor.transparent,height:c.BlockSize.Full,width:c.BlockSize.Full,gap:2,className:"recovery-phrase__secret-blocker-text",onClick:()=>{null==n||n()},"data-testid":"recovery-phrase-reveal"},a.default.createElement(r.Icon,{name:r.IconName.EyeSlash,color:c.IconColor.iconDefault,size:r.IconSize.Md}),a.default.createElement(r.Text,{variant:c.TextVariant.bodyMd,color:c.TextColor.textDefault,fontWeight:c.FontWeight.Medium},p("tapToReveal")),a.default.createElement(r.Text,{variant:c.TextVariant.bodySm,color:c.TextColor.textDefault},p("tapToRevealNote"))))),3===l.length&&a.default.createElement(r.Box,{display:c.Display.Flex,gap:2,width:c.BlockSize.Full},l.map(t=>{const n=t.index;return f.some(e=>e.actualIndexInSrp===n)?a.default.createElement(r.ButtonBase,{"data-testid":`recovery-phrase-quiz-answered-${n}`,key:t.index,color:c.TextColor.textAlternative,borderRadius:c.BorderRadius.LG,block:!0,onClick:()=>{k(t.word)}},e[n]):a.default.createElement(r.Button,{"data-testid":`recovery-phrase-quiz-unanswered-${n}`,key:t.index,variant:r.ButtonVariant.Secondary,borderRadius:c.BorderRadius.LG,block:!0,onClick:()=>{E(t.word,n)}},e[n])})))}p.propTypes={secretRecoveryPhrase:i.default.array,phraseRevealed:i.default.bool,revealPhrase:i.default.func,confirmPhase:i.default.bool,quizWords:i.default.array,setInputValue:i.default.func}}}},{package:"$root$",file:"ui/pages/onboarding-flow/recovery-phrase/recovery-phrase-chips.js"}],[7385,{"../../../components/component-library":6123,"../../../helpers/constants/design-system":6672,"../../../helpers/constants/routes":6677,"../../../hooks/useI18nContext":6799,"../../../store/actions":7594,react:4992,"react-router-dom-v5-compat":4955},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function({setSecretRecoveryPhrase:e}){const t=(0,o.useNavigate)(),n=(0,i.useI18nContext)(),{search:u}=(0,o.useLocation)(),d=new URLSearchParams(u),p=d.get("isFromReminder"),m=d.get("isFromSettingsSecurity"),f=new URLSearchParams;p&&f.set("isFromReminder",p);m&&f.set("isFromSettingsSecurity",m);const g=f.toString(),[h,y]=(0,a.useState)(""),[b,E]=(0,a.useState)(!1),k=(0,a.useCallback)(async n=>{try{const a=await(0,c.getSeedPhrase)(n);e(a),t(`${l.ONBOARDING_REVIEW_SRP_ROUTE}${g?`?${g}`:""}`,{replace:!0})}catch(e){E(!0)}},[e,t,g]),v=(0,a.useCallback)(()=>{t(m?l.REVEAL_SRP_LIST_ROUTE:l.DEFAULT_ROUTE,{replace:!0})},[t,m]);return a.default.createElement(r.Box,{display:s.Display.Flex,flexDirection:s.FlexDirection.Column,justifyContent:s.JustifyContent.spaceBetween,alignItems:s.AlignItems.center,height:s.BlockSize.Full,gap:6,className:"reveal-recovery-phrase","data-testid":"reveal-recovery-phrase"},a.default.createElement(r.Box,{width:s.BlockSize.Full},a.default.createElement(r.Box,{className:"recovery-phrase__header",display:s.Display.Grid,alignItems:s.AlignItems.center,gap:3,marginBottom:4,width:s.BlockSize.Full},a.default.createElement(r.ButtonIcon,{iconName:r.IconName.ArrowLeft,color:s.IconColor.iconDefault,size:r.ButtonIconSize.Md,"data-testid":"reveal-recovery-phrase-back-button",onClick:v,ariaLabel:n("back")}),a.default.createElement(r.Text,{variant:s.TextVariant.headingMd,textAlign:s.TextAlign.Center},n("revealSecretRecoveryPhrase")),a.default.createElement(r.ButtonIcon,{iconName:r.IconName.Close,color:s.IconColor.iconDefault,size:r.ButtonIconSize.Md,"data-testid":"reveal-recovery-phrase-close-button",onClick:v,ariaLabel:n("close")})),a.default.createElement(r.Box,{width:s.BlockSize.Full,as:"form",onSubmit:e=>{e.preventDefault(),k(h)}},a.default.createElement(r.FormTextField,{size:r.FormTextFieldSize.Lg,id:"account-details-authenticate",label:n("enterYourPasswordContinue"),onChange:e=>{y(e.target.value),E(!1)},value:h,error:b,helpText:b?n("unlockPageIncorrectPassword"):null,type:r.TextFieldType.Password,labelProps:{fontWeight:s.FontWeight.Medium},autoFocus:!0}))),a.default.createElement(r.Box,{width:s.BlockSize.Full},a.default.createElement(r.Button,{width:s.BlockSize.Full,variant:r.ButtonVariant.Primary,size:r.ButtonSize.Lg,"data-testid":"reveal-recovery-phrase-continue",className:"reveal-recovery-phrase__footer--button",onClick:()=>k(h)},n("continue"))))};var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(a,i,r):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-router-dom-v5-compat"),i=e("../../../hooks/useI18nContext"),r=e("../../../components/component-library"),s=e("../../../helpers/constants/design-system"),c=e("../../../store/actions"),l=e("../../../helpers/constants/routes");function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}}}},{package:"$root$",file:"ui/pages/onboarding-flow/recovery-phrase/reveal-recovery-phrase.tsx"}],[7386,{"../../../../shared/constants/metametrics":5462,"../../../components/app/srp-details-modal":5994,"../../../components/component-library":6123,"../../../contexts/metametrics":6635,"../../../helpers/constants/design-system":6672,"../../../helpers/constants/routes":6677,"../../../hooks/useI18nContext":6799,"../../../selectors/selectors":7584,"./recovery-phrase-chips":7384,"prop-types":4808,react:4992,"react-redux":4936,"react-router-dom-v5-compat":4955},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=b;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=y(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(a,i,r):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-router-dom-v5-compat"),i=e("react-redux"),r=h(e("prop-types")),s=e("../../../hooks/useI18nContext"),c=e("../../../helpers/constants/routes"),l=e("../../../components/component-library"),u=e("../../../helpers/constants/design-system"),d=e("../../../../shared/constants/metametrics"),p=e("../../../contexts/metametrics"),m=e("../../../selectors/selectors"),f=h(e("../../../components/app/srp-details-modal")),g=h(e("./recovery-phrase-chips"));function h(e){return e&&e.__esModule?e:{default:e}}function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(y=function(e){return e?n:t})(e)}function b({secretRecoveryPhrase:e}){const t=(0,o.useNavigate)(),n=(0,s.useI18nContext)(),{search:r}=(0,o.useLocation)(),h=(0,i.useSelector)(m.getHDEntropyIndex),[y,b]=(0,a.useState)(!1),[E,k]=(0,a.useState)(!1),v=new URLSearchParams(r),C=v.get("isFromReminder"),x=v.get("isFromSettingsSecurity"),_=new URLSearchParams;C&&_.set("isFromReminder",C),x&&_.set("isFromSettingsSecurity",x);const T=_.toString();(0,a.useEffect)(()=>{e||t({pathname:c.ONBOARDING_REVEAL_SRP_ROUTE,search:T?`?${T}`:""},{replace:!0})},[t,e,T]);const w=(0,a.useContext)(p.MetaMetricsContext),S=(0,a.useCallback)(()=>{w({category:d.MetaMetricsEventCategory.Onboarding,event:d.MetaMetricsEventName.OnboardingWalletSecurityPhraseWrittenDown,properties:{hd_entropy_index:h}}),t({pathname:c.ONBOARDING_CONFIRM_SRP_ROUTE,search:T?`?${T}`:""})},[h,t,w,T]),I=(0,a.useCallback)(()=>{w({category:d.MetaMetricsEventCategory.Onboarding,event:d.MetaMetricsEventName.SrpDefinitionClicked,properties:{location:"review_recovery_phrase"}}),k(!0)},[w]);return a.default.createElement(l.Box,{display:u.Display.Flex,flexDirection:u.FlexDirection.Column,justifyContent:u.JustifyContent.spaceBetween,alignItems:u.AlignItems.Center,height:u.BlockSize.Full,gap:6,className:"recovery-phrase","data-testid":"recovery-phrase"},a.default.createElement(l.Box,null,E&&a.default.createElement(f.default,{onClose:()=>k(!1)}),a.default.createElement(l.Box,{justifyContent:u.JustifyContent.flexStart,marginBottom:4,width:u.BlockSize.Full},a.default.createElement(l.ButtonIcon,{iconName:l.IconName.ArrowLeft,color:u.IconColor.iconDefault,size:l.ButtonIconSize.Md,"data-testid":"review-srp-back-button",onClick:()=>t(-1),ariaLabel:n("back")})),a.default.createElement(l.Box,{justifyContent:u.JustifyContent.flexStart,marginBottom:4,width:u.BlockSize.Full},!C&&a.default.createElement(l.Text,{variant:u.TextVariant.bodyMd,color:u.TextColor.textAlternative},n("stepOf",[2,3])),a.default.createElement(l.Text,{variant:u.TextVariant.headingLg,as:"h2"},n("seedPhraseReviewTitle"))),a.default.createElement(l.Box,{marginBottom:6},a.default.createElement(l.Text,{variant:u.TextVariant.bodyMd,color:u.TextColor.textAlternative,marginBottom:6},n("seedPhraseReviewDetails",[a.default.createElement(l.ButtonLink,{key:"seedPhraseReviewDetails",size:l.ButtonLinkSize.Inherit,onClick:I},n("secretRecoveryPhrase")),a.default.createElement(l.Text,{key:"seedPhraseReviewDetails2",fontWeight:u.FontWeight.Medium,color:u.TextColor.textAlternative},n("seedPhraseReviewDetails2"))]))),a.default.createElement(g.default,{secretRecoveryPhrase:e.split(" "),phraseRevealed:y,revealPhrase:()=>{w({category:d.MetaMetricsEventCategory.Onboarding,event:d.MetaMetricsEventName.OnboardingWalletSecurityPhraseRevealed,properties:{hd_entropy_index:h}}),b(!0)}})),a.default.createElement(l.Box,{width:u.BlockSize.Full},a.default.createElement(l.Button,{width:u.BlockSize.Full,variant:l.ButtonVariant.Primary,size:l.ButtonSize.Lg,"data-testid":"recovery-phrase-continue",className:"recovery-phrase__footer--button",disabled:!y,onClick:S},n("continue"))))}b.propTypes={secretRecoveryPhrase:r.default.string}}}},{package:"$root$",file:"ui/pages/onboarding-flow/recovery-phrase/review-recovery-phrase.js"}],[7387,{"../../../../shared/constants/metametrics":5462,"../../../components/app/srp-details-modal":5994,"../../../components/component-library":6123,"../../../contexts/metametrics":6635,"../../../ducks/metamask/metamask":6659,"../../../helpers/constants/design-system":6672,"../../../helpers/constants/routes":6677,"../../../hooks/useI18nContext":6799,"../../../selectors":7568,"./skip-srp-backup-popover":7388,react:4992,"react-redux":4936,"react-router-dom-v5-compat":4955},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){const e=(0,o.useNavigate)(),t=(0,s.useI18nContext)(),{search:n}=(0,o.useLocation)(),h=(0,i.useSelector)(p.getHDEntropyIndex),[y,b]=(0,a.useState)(!1),[E,k]=(0,a.useState)(!1),v=new URLSearchParams(n).get("isFromReminder")?"?isFromReminder=true":"",C=(0,i.useSelector)(p.getIsSocialLoginFlow),x=(0,i.useSelector)(f.getCompletedOnboarding),_=(0,a.useContext)(c.MetaMetricsContext),T=(0,a.useCallback)(()=>{_({category:u.MetaMetricsEventCategory.Onboarding,event:u.MetaMetricsEventName.SrpDefinitionClicked,properties:{location:"secure_your_wallet"}}),k(!0)},[_]),w=()=>{_({category:u.MetaMetricsEventCategory.Onboarding,event:u.MetaMetricsEventName.OnboardingWalletSecurityStarted,properties:{hd_entropy_index:h??0}}),e(`${l.ONBOARDING_REVIEW_SRP_ROUTE}${v}`)};return(0,a.useEffect)(()=>{!x&&C&&e(l.ONBOARDING_WELCOME_ROUTE,{replace:!0})},[x,e,C]),a.default.createElement(d.Box,{display:r.Display.Flex,justifyContent:r.JustifyContent.spaceBetween,alignItems:r.AlignItems.flexStart,flexDirection:r.FlexDirection.Column,gap:4,height:r.BlockSize.Full,className:"secure-your-wallet","data-testid":"secure-your-wallet"},a.default.createElement(d.Box,null,y&&a.default.createElement(g.default,{onClose:()=>b(!1),secureYourWallet:w}),E&&a.default.createElement(m.default,{onClose:()=>k(!1)}),a.default.createElement(d.Box,{justifyContent:r.JustifyContent.flexStart,marginBottom:4,width:r.BlockSize.Full},a.default.createElement(d.Text,{variant:r.TextVariant.bodyMd,color:r.TextColor.textAlternative},t("stepOf",[2,3])),a.default.createElement(d.Text,{variant:r.TextVariant.headingLg,as:"h2"},t("seedPhraseIntroTitle"))),a.default.createElement(d.Box,{className:"secure-your-wallet__srp-design-container",marginBottom:6,width:r.BlockSize.Full,textAlign:r.TextAlign.Center},a.default.createElement("img",{className:"secure-your-wallet__srp-design-image",src:"./images/srp-lock-design.png",alt:t("srpDesignImageAlt")})),a.default.createElement(d.Box,null,a.default.createElement(d.Text,{color:r.TextColor.textAlternative,marginBottom:6,as:"div"},t("secureWalletWalletSaveSrp",[[a.default.createElement(d.ButtonLink,{key:"secureWalletWalletSaveSrp",size:d.ButtonLinkSize.Inherit,onClick:T},t("secretRecoveryPhrase"))]])),a.default.createElement(d.Text,{color:r.TextColor.textAlternative},t("secureWalletWalletRecover")))),a.default.createElement(d.Box,{width:r.BlockSize.Full,display:r.Display.Flex,flexDirection:r.FlexDirection.Column,gap:4},a.default.createElement(d.Button,{"data-testid":"secure-wallet-recommended",size:d.ButtonSize.Lg,block:!0,onClick:w},t("secureWalletGetStartedButton")),a.default.createElement(d.Button,{"data-testid":"secure-wallet-later",variant:d.ButtonVariant.Secondary,size:d.ButtonSize.Lg,block:!0,onClick:()=>{_({category:u.MetaMetricsEventCategory.Onboarding,event:u.MetaMetricsEventName.OnboardingWalletSecuritySkipInitiated,properties:{hd_entropy_index:h??0}}),b(!0)}},t("secureWalletRemindLaterButton"))))};var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=y(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(a,i,r):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-router-dom-v5-compat"),i=e("react-redux"),r=e("../../../helpers/constants/design-system"),s=e("../../../hooks/useI18nContext"),c=e("../../../contexts/metametrics"),l=e("../../../helpers/constants/routes"),u=e("../../../../shared/constants/metametrics"),d=e("../../../components/component-library"),p=e("../../../selectors"),m=h(e("../../../components/app/srp-details-modal")),f=e("../../../ducks/metamask/metamask"),g=h(e("./skip-srp-backup-popover"));function h(e){return e&&e.__esModule?e:{default:e}}function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(y=function(e){return e?n:t})(e)}}}},{package:"$root$",file:"ui/pages/onboarding-flow/secure-your-wallet/secure-your-wallet.js"}],[7388,{"../../../../shared/constants/app":5447,"../../../../shared/constants/metametrics":5462,"../../../../shared/constants/onboarding":5468,"../../../../shared/lib/trace":5546,"../../../../shared/modules/browser-runtime.utils":5555,"../../../components/component-library":6123,"../../../contexts/metametrics":6635,"../../../helpers/constants/design-system":6672,"../../../helpers/constants/routes":6677,"../../../hooks/useI18nContext":6799,"../../../selectors":7568,"../../../selectors/selectors":7584,"../../../store/actions":7594,react:4992,"react-redux":4936,"react-router-dom-v5-compat":4955},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function({onClose:e,secureYourWallet:t}){const[n,E]=(0,i.useState)(!1),k=(0,r.useI18nContext)(),v=(0,o.useDispatch)(),C=(0,o.useSelector)(d.getHDEntropyIndex),x=(0,o.useSelector)(g.getFirstTimeFlowType),_=(0,i.useContext)(l.MetaMetricsContext),{bufferedEndTrace:T}=_,w=(0,a.useNavigate)(),S=(0,i.useCallback)(async()=>{await v((0,p.setSeedPhraseBackedUp)(!1)),_({category:u.MetaMetricsEventCategory.Onboarding,event:u.MetaMetricsEventName.OnboardingWalletSecuritySkipConfirmed,properties:{hd_entropy_index:C}}),null==T||T({name:b.TraceName.OnboardingNewSrpCreateWallet}),null==T||T({name:b.TraceName.OnboardingJourneyOverall}),(0,y.getBrowserName)()===f.PLATFORM_FIREFOX||x===h.FirstTimeFlowType.restore?w(m.ONBOARDING_COMPLETION_ROUTE):w(m.ONBOARDING_METAMETRICS)},[v,x,C,w,_,T]);return i.default.createElement(c.Modal,{isOpen:!0,onClose:e,className:"skip-srp-backup-modal","data-testid":"skip-srp-backup-modal"},i.default.createElement(c.ModalOverlay,null),i.default.createElement(c.ModalContent,{alignItems:s.AlignItems.center},i.default.createElement(c.ModalHeader,{onClose:e},i.default.createElement(c.Box,{textAlign:s.TextAlign.Center},i.default.createElement(c.Icon,{name:c.IconName.Danger,size:c.IconSize.Xl,className:"skip-srp-backup-popover__icon",color:s.IconColor.errorDefault}),i.default.createElement(c.Text,{variant:s.TextVariant.headingMd,textAlign:s.TextAlign.Center,marginTop:4,as:"h3"},k("skipAccountSecurity")))),i.default.createElement(c.Box,{paddingLeft:4,paddingRight:4},i.default.createElement(c.Checkbox,{id:"skip-srp-backup__checkbox",className:"skip-srp-backup__checkbox","data-testid":"skip-srp-backup-checkbox",isChecked:n,alignItems:s.AlignItems.flexStart,onChange:()=>{E(!n)},label:k("skipAccountSecurityDetails")}),i.default.createElement(c.Box,{display:s.Display.Flex,marginTop:6,gap:4},i.default.createElement(c.Button,{variant:c.ButtonVariant.Secondary,size:c.ButtonSize.Lg,onClick:()=>{_({category:u.MetaMetricsEventCategory.Onboarding,event:u.MetaMetricsEventName.OnboardingWalletSecuritySkipCanceled,properties:{hd_entropy_index:C}}),t()},block:!0},k("skipAccountSecuritySecureNow")),i.default.createElement(c.Button,{"data-testid":"skip-srp-backup-button",size:c.ButtonSize.Lg,disabled:!n,onClick:S,block:!0,danger:!0},k("skipAccountSecuritySkip"))))))};var a=e("react-router-dom-v5-compat"),o=e("react-redux"),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=E(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(a,i,r):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(e("react")),r=e("../../../hooks/useI18nContext"),s=e("../../../helpers/constants/design-system"),c=e("../../../components/component-library"),l=e("../../../contexts/metametrics"),u=e("../../../../shared/constants/metametrics"),d=e("../../../selectors/selectors"),p=e("../../../store/actions"),m=e("../../../helpers/constants/routes"),f=e("../../../../shared/constants/app"),g=e("../../../selectors"),h=e("../../../../shared/constants/onboarding"),y=e("../../../../shared/modules/browser-runtime.utils"),b=e("../../../../shared/lib/trace");function E(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(E=function(e){return e?n:t})(e)}}}},{package:"$root$",file:"ui/pages/onboarding-flow/secure-your-wallet/skip-srp-backup-popover.tsx"}],[7389,{"../../../../shared/constants/metametrics":5462,"../../../components/component-library":6123,"../../../contexts/metametrics":6635,"../../../helpers/constants/common":6670,"../../../helpers/constants/design-system":6672,"../../../hooks/useI18nContext":6799,"./types":7391,react:4992},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function({onClose:e,loginError:t}){const n=(0,i.useI18nContext)(),d=(0,a.useContext)(l.MetaMetricsContext);return a.default.createElement(r.Modal,{isOpen:!0,onClose:e,"data-testid":"login-error-modal"},a.default.createElement(r.ModalOverlay,null),a.default.createElement(r.ModalContent,{alignItems:o.AlignItems.center},a.default.createElement(r.ModalHeader,{onClose:e},a.default.createElement(r.Box,{textAlign:o.TextAlign.Center},a.default.createElement(r.Icon,{name:r.IconName.Danger,size:r.IconSize.Xl,color:o.IconColor.warningDefault}),a.default.createElement(r.Text,{variant:o.TextVariant.headingMd,textAlign:o.TextAlign.Center,marginTop:4},t===u.LOGIN_ERROR.UNABLE_TO_CONNECT?n("loginErrorConnectTitle"):t===u.LOGIN_ERROR.SESSION_EXPIRED?n("loginErrorSessionExpiredTitle"):n("loginErrorGenericTitle")))),a.default.createElement(r.Box,{paddingLeft:4,paddingRight:4},a.default.createElement(r.Text,{variant:o.TextVariant.bodyMd},t===u.LOGIN_ERROR.UNABLE_TO_CONNECT?n("loginErrorConnectDescription"):t===u.LOGIN_ERROR.SESSION_EXPIRED?n("loginErrorSessionExpiredDescription"):n("loginErrorGenericDescription",[a.default.createElement(r.ButtonLink,{key:"loginErrorGenericDescription",size:r.ButtonLinkSize.Inherit,externalLink:!0,href:c.SUPPORT_LINK,onClick:()=>{d({category:s.MetaMetricsEventCategory.Onboarding,event:s.MetaMetricsEventName.SupportLinkClicked,properties:{url:c.SUPPORT_LINK,location:"Welcome page"}},{contextPropsIntoEventProperties:[s.MetaMetricsContextProp.PageTitle]})}},n("loginErrorGenericSupport"))])),a.default.createElement(r.Box,{marginTop:6},a.default.createElement(r.Button,{"data-testid":"login-error-modal-button",variant:r.ButtonVariant.Primary,size:r.ButtonSize.Lg,onClick:e,block:!0},t===u.LOGIN_ERROR.UNABLE_TO_CONNECT?n("loginErrorConnectButton"):t===u.LOGIN_ERROR.SESSION_EXPIRED?n("loginErrorSessionExpiredButton"):n("loginErrorGenericButton"))))))};var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(a,i,r):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("../../../helpers/constants/design-system"),i=e("../../../hooks/useI18nContext"),r=e("../../../components/component-library"),s=e("../../../../shared/constants/metametrics"),c=e("../../../helpers/constants/common"),l=e("../../../contexts/metametrics"),u=e("./types");function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}}}},{package:"$root$",file:"ui/pages/onboarding-flow/welcome/login-error-modal.tsx"}],[7390,{"../../../components/component-library":6123,"../../../helpers/constants/design-system":6672,"../../../hooks/useI18nContext":6799,"./types":7391,react:4992},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SocialButton=void 0,n.default=function({onClose:e,loginOption:t,handleLogin:n}){const a=(0,s.useI18nContext)();return o.default.createElement(i.Modal,{isOpen:!0,onClose:e,className:"options-modal",isClosedOnOutsideClick:!1},o.default.createElement(i.ModalOverlay,null),o.default.createElement(i.ModalContent,{size:i.ModalContentSize.Sm,alignItems:r.AlignItems.center},o.default.createElement(i.ModalHeader,{onClose:e},a("onboardingOptionTitle")),o.default.createElement(i.Box,{paddingInline:4},o.default.createElement(u,{"data-testid":t===c.LOGIN_OPTION.EXISTING?"onboarding-import-with-google-button":"onboarding-create-with-google-button",icon:o.default.createElement("img",{src:"images/icons/google.svg",className:"options-modal__social-icon",alt:a("onboardingOptionIcon",["Google"])}),label:t===c.LOGIN_OPTION.EXISTING?a("onboardingSignInWith",["Google"]):a("onboardingContinueWith",["Google"]),marginBottom:4,onClick:()=>n(c.LOGIN_TYPE.GOOGLE)}),o.default.createElement(u,{"data-testid":t===c.LOGIN_OPTION.EXISTING?"onboarding-import-with-apple-button":"onboarding-create-with-apple-button",icon:o.default.createElement(i.Icon,{name:i.IconName.Apple,color:r.IconColor.iconDefault,size:i.IconSize.Lg}),label:t===c.LOGIN_OPTION.EXISTING?a("onboardingSignInWith",["Apple"]):a("onboardingContinueWith",["Apple"]),marginBottom:2,onClick:()=>n(c.LOGIN_TYPE.APPLE)}),o.default.createElement(i.Box,{alignItems:r.AlignItems.center,marginBottom:4,className:"options-modal__or"},o.default.createElement(i.Text,{width:r.BlockSize.Min,variant:r.TextVariant.bodyMd,fontWeight:r.FontWeight.Medium,color:r.TextColor.textMuted,backgroundColor:r.BackgroundColor.backgroundDefault,paddingInline:2,marginInline:"auto",textTransform:r.TextTransform.Lowercase,as:"div",style:{position:"relative",zIndex:1}},a("or"))),o.default.createElement(i.Button,{"data-testid":t===c.LOGIN_OPTION.EXISTING?"onboarding-import-with-srp-button":"onboarding-create-with-srp-button",variant:i.ButtonVariant.Secondary,width:r.BlockSize.Full,size:i.ButtonSize.Lg,onClick:()=>n(c.LOGIN_TYPE.SRP)},t===c.LOGIN_OPTION.EXISTING?a("onboardingSrpImport"):a("onboardingSrpCreate")),o.default.createElement(i.Text,{variant:r.TextVariant.bodySm,fontWeight:r.FontWeight.Medium,textAlign:r.TextAlign.Center,paddingTop:8,width:r.BlockSize.Full,margin:"auto"},a("onboardingLoginFooter",[o.default.createElement(i.Text,{as:"a",href:"https://consensys.io/terms-of-use",target:"_blank",rel:"noopener noreferrer",variant:r.TextVariant.bodySm,fontWeight:r.FontWeight.Medium,color:r.TextColor.primaryDefault,key:"onboardingLoginFooterTermsOfUse"},a("onboardingLoginFooterTermsOfUse")),o.default.createElement(i.Text,{as:"a",variant:r.TextVariant.bodySm,fontWeight:r.FontWeight.Medium,href:"https://consensys.io/privacy-notice",target:"_blank",rel:"noopener noreferrer",color:r.TextColor.primaryDefault,key:"onboardingLoginFooterPrivacyNotice"},a("onboardingLoginFooterPrivacyNotice"))])))))};var a,o=(a=e("react"))&&a.__esModule?a:{default:a},i=e("../../../components/component-library"),r=e("../../../helpers/constants/design-system"),s=e("../../../hooks/useI18nContext"),c=e("./types");function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},l.apply(null,arguments)}const u=n.SocialButton=o.default.forwardRef(({icon:e,label:t,...n},a)=>o.default.createElement(i.Text,l({ref:a,as:"button",className:"options-modal__plain-button",display:r.Display.Flex,alignItems:r.AlignItems.center,justifyContent:r.JustifyContent.center,width:r.BlockSize.Full,borderRadius:r.BorderRadius.XL,borderColor:r.BorderColor.borderMuted,backgroundColor:r.BackgroundColor.transparent,gap:2},n),e,o.default.createElement(i.Text,{variant:r.TextVariant.bodyMd,fontWeight:r.FontWeight.Medium},t)))}}},{package:"$root$",file:"ui/pages/onboarding-flow/welcome/login-options.tsx"}],[7391,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.LOGIN_TYPE=n.LOGIN_OPTION=n.LOGIN_ERROR=void 0;n.LOGIN_TYPE={GOOGLE:"google",APPLE:"apple",SRP:"srp"},n.LOGIN_OPTION={NEW:"new",EXISTING:"existing"},n.LOGIN_ERROR={UNABLE_TO_CONNECT:"unable_to_connect",GENERIC:"generic",SESSION_EXPIRED:"session_expired"}}}},{package:"$root$",file:"ui/pages/onboarding-flow/welcome/types.ts"}],[7392,{"../../../../shared/constants/preferences":5470,"../../../../shared/modules/environment":5559,"../../../components/component-library":6123,"../../../components/ui/mascot":6569,"../../../helpers/constants/design-system":6672,"../../../helpers/utils/build-types":6698,"../../../hooks/useI18nContext":6799,"../../../store/actions":7594,"./login-options":7390,"./types":7391,classnames:3826,events:4105,react:4992,"react-redux":4936},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function({onLogin:e}){const t=(0,u.useI18nContext)(),n=(0,o.useRef)(new a.default),[y,b]=(0,o.useState)(!1),[E,k]=(0,o.useState)(null),v=(0,p.getIsSeedlessOnboardingFeatureEnabled)(),C=(0,r.useDispatch)(),x=(0,o.useCallback)(async t=>{E&&(b(!1),await C((0,f.setTermsOfUseLastAgreed)((new Date).getTime())),await e(t,E))},[C,E,e]);return o.default.createElement(c.Box,{display:l.Display.Flex,flexDirection:l.FlexDirection.Column,justifyContent:l.JustifyContent.spaceBetween,gap:4,marginInline:"auto",marginTop:2,padding:6,className:"welcome-login","data-testid":"get-started"},o.default.createElement(c.Box,{display:l.Display.Flex,flexDirection:l.FlexDirection.Column,alignItems:l.AlignItems.center,justifyContent:l.JustifyContent.center,className:"welcome-login__content"},o.default.createElement(c.Box,{className:(0,i.default)("welcome-login__mascot",{"welcome-login__mascot--image":(0,d.isFlask)()||(0,d.isBeta)()})},(0,d.isFlask)()||(0,d.isBeta)()?o.default.createElement("img",{src:"./images/logo/metamask-fox.svg",width:"178",height:"178"}):o.default.createElement(s.default,{animationEventEmitter:n.current,width:"268",height:"268"})),o.default.createElement(c.Text,{marginInline:5,textAlign:l.TextAlign.Center,as:"h2",className:"welcome-login__title","data-testid":"onboarding-welcome"},t("welcomeToMetaMask"),"!")),o.default.createElement(c.Box,{"data-theme":m.ThemeType.light,display:l.Display.Flex,flexDirection:l.FlexDirection.Column,gap:4},o.default.createElement(c.Button,{"data-testid":"onboarding-create-wallet",variant:c.ButtonVariant.Primary,size:c.ButtonSize.Lg,block:!0,onClick:async()=>{b(!0),k(h.LOGIN_OPTION.NEW),v||await e(h.LOGIN_TYPE.SRP,h.LOGIN_OPTION.NEW)}},t("onboardingCreateWallet")),o.default.createElement(c.Button,{"data-testid":"onboarding-import-wallet",variant:c.ButtonVariant.Secondary,size:c.ButtonSize.Lg,block:!0,onClick:async()=>{b(!0),k(h.LOGIN_OPTION.EXISTING),v||await e(h.LOGIN_TYPE.SRP,h.LOGIN_OPTION.EXISTING)}},t(v?"onboardingImportWallet":"onboardingSrpImport"))),v&&y&&E&&o.default.createElement(g.default,{loginOption:E,onClose:()=>{k(null)},handleLogin:x}))};var a=b(e("events")),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=y(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(a,i,r):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(e("react")),i=b(e("classnames")),r=e("react-redux"),s=b(e("../../../components/ui/mascot")),c=e("../../../components/component-library"),l=e("../../../helpers/constants/design-system"),u=e("../../../hooks/useI18nContext"),d=e("../../../helpers/utils/build-types"),p=e("../../../../shared/modules/environment"),m=e("../../../../shared/constants/preferences"),f=e("../../../store/actions"),g=b(e("./login-options")),h=e("./types");function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(y=function(e){return e?n:t})(e)}function b(e){return e&&e.__esModule?e:{default:e}}}}},{package:"$root$",file:"ui/pages/onboarding-flow/welcome/welcome-login.tsx"}],[7393,{"../../../../shared/constants/app":5447,"../../../../shared/constants/metametrics":5462,"../../../../shared/constants/onboarding":5468,"../../../../shared/lib/trace":5546,"../../../../shared/modules/browser-runtime.utils":5555,"../../../../shared/modules/environment":5559,"../../../../shared/modules/error":5560,"../../../components/ui/loading-screen":6563,"../../../contexts/metametrics":6635,"../../../helpers/constants/routes":6677,"../../../selectors":7568,"../../../store/actions":7594,"./login-error-modal":7389,"./types":7391,"./welcome-login":7392,loglevel:4573,react:4992,"react-redux":4936,"react-router-dom-v5-compat":4955},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){const e=(0,o.useDispatch)(),t=(0,i.useNavigate)(),n=(0,o.useSelector)(c.getCurrentKeyring),C=(0,f.getIsSeedlessOnboardingFeatureEnabled)(),x=(0,o.useSelector)(c.getFirstTimeFlowType),_=(0,o.useSelector)(c.getIsSocialLoginUserAuthenticated),T=(0,o.useSelector)(c.getIsParticipateInMetaMetricsSet),[w,S]=(0,a.useState)(!1),[I,N]=(0,a.useState)(!1),[O,M]=(0,a.useState)(null),A=(0,g.getBrowserName)()===h.PLATFORM_FIREFOX;(0,a.useEffect)(()=>{n&&!w?x===l.FirstTimeFlowType.import||x===l.FirstTimeFlowType.socialImport||x===l.FirstTimeFlowType.restore?t(T?s.ONBOARDING_COMPLETION_ROUTE:s.ONBOARDING_METAMETRICS,{replace:!0}):x===l.FirstTimeFlowType.socialCreate?t(A?s.ONBOARDING_COMPLETION_ROUTE:s.ONBOARDING_METAMETRICS,{replace:!0}):t(s.ONBOARDING_SECURE_YOUR_WALLET_ROUTE,{replace:!0}):_&&(x===l.FirstTimeFlowType.socialCreate?t(s.ONBOARDING_CREATE_PASSWORD_ROUTE,{replace:!0}):t(s.ONBOARDING_UNLOCK_ROUTE,{replace:!0}))},[n,t,x,w,T,_,A]);const B=(0,a.useContext)(u.MetaMetricsContext),{bufferedTrace:R,bufferedEndTrace:P,onboardingParentContext:D}=B,F=(0,a.useCallback)(async()=>{N(!0),S(!0),await e((0,d.setFirstTimeFlowType)(l.FirstTimeFlowType.create)),B({category:m.MetaMetricsEventCategory.Onboarding,event:m.MetaMetricsEventName.WalletSetupStarted,properties:{account_type:m.MetaMetricsEventAccountType.Default}}),null==R||R({name:b.TraceName.OnboardingNewSrpCreateWallet,op:b.TraceOperation.OnboardingUserJourney,parentContext:null==D?void 0:D.current}),t(s.ONBOARDING_CREATE_PASSWORD_ROUTE)},[e,t,B,D,R]),L=(0,a.useCallback)(async()=>{N(!0),await e((0,d.setFirstTimeFlowType)(l.FirstTimeFlowType.import)),B({category:m.MetaMetricsEventCategory.Onboarding,event:m.MetaMetricsEventName.WalletImportStarted,properties:{account_type:m.MetaMetricsEventAccountType.Imported}}),null==R||R({name:b.TraceName.OnboardingExistingSrpImport,op:b.TraceOperation.OnboardingUserJourney,parentContext:null==D?void 0:D.current}),t(s.ONBOARDING_IMPORT_WITH_SRP_ROUTE)},[e,t,B,D,R]),j=(0,a.useCallback)(async t=>{if(C){null==R||R({name:b.TraceName.OnboardingSocialLoginAttempt,op:b.TraceOperation.OnboardingUserJourney,tags:{provider:t},parentContext:null==D?void 0:D.current});const n=await e((0,d.startOAuthLogin)(t,R,P));return null==P||P({name:b.TraceName.OnboardingSocialLoginAttempt}),n}return!0},[e,C,D,R,P]),W=(0,a.useCallback)((e,t)=>{const n=e instanceof Error?e.message:"Unknown error";n!==y.OAuthErrorMessages.USER_CANCELLED_LOGIN_ERROR?(null==R||R({name:b.TraceName.OnboardingSocialLoginError,op:b.TraceOperation.OnboardingError,tags:{provider:t,errorMessage:n},parentContext:D.current}),null==P||P({name:b.TraceName.OnboardingSocialLoginError}),null==P||P({name:b.TraceName.OnboardingSocialLoginAttempt,data:{success:!1}}),n!==y.OAuthErrorMessages.INVALID_OAUTH_STATE_ERROR?n!==y.OAuthErrorMessages.NO_REDIRECT_URL_FOUND_ERROR&&n!==y.OAuthErrorMessages.NO_AUTH_CODE_FOUND_ERROR?M(k.LOGIN_ERROR.GENERIC):M(k.LOGIN_ERROR.UNABLE_TO_CONNECT):M(k.LOGIN_ERROR.SESSION_EXPIRED)):M(null)},[D,R,P]),$=(0,a.useCallback)(async n=>{N(!0),S(!0),await e((0,d.setFirstTimeFlowType)(l.FirstTimeFlowType.socialCreate)),B({category:m.MetaMetricsEventCategory.Onboarding,event:m.MetaMetricsEventName.WalletSetupStarted,properties:{account_type:`${m.MetaMetricsEventAccountType.Default}_${n}`}});try{const e=await j(n);B({category:m.MetaMetricsEventCategory.Onboarding,event:m.MetaMetricsEventName.SocialLoginCompleted,properties:{account_type:`${m.MetaMetricsEventAccountType.Default}_${n}`}}),e?(null==R||R({name:b.TraceName.OnboardingNewSocialCreateWallet,op:b.TraceOperation.OnboardingUserJourney,parentContext:D.current}),t(s.ONBOARDING_CREATE_PASSWORD_ROUTE,{replace:!0})):t(s.ONBOARDING_ACCOUNT_EXIST,{replace:!0})}catch(e){W(e,n)}finally{N(!1)}},[e,j,B,t,D,W,R]),U=(0,a.useCallback)(async n=>{N(!0),e((0,d.setFirstTimeFlowType)(l.FirstTimeFlowType.socialImport)),B({category:m.MetaMetricsEventCategory.Onboarding,event:m.MetaMetricsEventName.WalletImportStarted,properties:{account_type:`${m.MetaMetricsEventAccountType.Imported}_${n}`}});try{const e=await j(n);B({category:m.MetaMetricsEventCategory.Onboarding,event:m.MetaMetricsEventName.SocialLoginCompleted,properties:{account_type:`${m.MetaMetricsEventAccountType.Imported}_${n}`}}),e?t(s.ONBOARDING_ACCOUNT_NOT_FOUND):(null==R||R({name:b.TraceName.OnboardingExistingSocialLogin,op:b.TraceOperation.OnboardingUserJourney,parentContext:D.current}),t(s.ONBOARDING_UNLOCK_ROUTE))}catch(e){W(e,n)}finally{N(!1)}},[e,j,B,t,D,W,R]),z=(0,a.useCallback)(e=>{r.default.error("handleLoginError::error",e);e.message===y.OAuthErrorMessages.USER_CANCELLED_LOGIN_ERROR?M(null):M(k.LOGIN_ERROR.GENERIC)},[]),G=(0,a.useCallback)(async(t,n)=>{try{if(t===k.LOGIN_TYPE.SRP)return e((0,d.setIsSocialLoginFlowEnabledForMetrics)(!1)),void(n===k.LOGIN_OPTION.NEW?await F():n===k.LOGIN_OPTION.EXISTING&&await L());if(!C)return;n===k.LOGIN_OPTION.NEW?(await $(t),e((0,d.setIsSocialLoginFlowEnabledForMetrics)(!A))):n===k.LOGIN_OPTION.EXISTING&&(await U(t),e((0,d.setIsSocialLoginFlowEnabledForMetrics)(!1)))}catch(e){z(e)}},[C,e,F,L,$,A,U,z]);return a.default.createElement(a.default.Fragment,null,a.default.createElement(E.default,{onLogin:G}),I&&a.default.createElement(p.default,null),null!==O&&a.default.createElement(v.default,{onClose:()=>M(null),loginError:O}))};var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=x(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(a,i,r):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-redux"),i=e("react-router-dom-v5-compat"),r=C(e("loglevel")),s=e("../../../helpers/constants/routes"),c=e("../../../selectors"),l=e("../../../../shared/constants/onboarding"),u=e("../../../contexts/metametrics"),d=e("../../../store/actions"),p=C(e("../../../components/ui/loading-screen")),m=e("../../../../shared/constants/metametrics"),f=e("../../../../shared/modules/environment"),g=e("../../../../shared/modules/browser-runtime.utils"),h=e("../../../../shared/constants/app"),y=e("../../../../shared/modules/error"),b=e("../../../../shared/lib/trace"),E=C(e("./welcome-login")),k=e("./types"),v=C(e("./login-error-modal"));function C(e){return e&&e.__esModule?e:{default:e}}function x(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(x=function(e){return e?n:t})(e)}}}},{package:"$root$",file:"ui/pages/onboarding-flow/welcome/welcome.js"}],[7394,{"../../../components/app/permissions-connect-footer":5845,"../../../components/component-library":6123,"../../../components/ui/account-list":6495,"../../../components/ui/page-container":6581,"../../../helpers/constants/design-system":6672,"../../../hooks/useI18nContext":6799,"@metamask/keyring-api":2012,"@metamask/permission-controller":2297,"prop-types":4808,react:4992},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=f(e("prop-types")),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(a,i,r):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(e("react")),i=e("@metamask/permission-controller"),r=e("@metamask/keyring-api"),s=e("../../../hooks/useI18nContext"),c=f(e("../../../components/app/permissions-connect-footer")),l=f(e("../../../components/ui/account-list")),u=e("../../../components/ui/page-container"),d=e("../../../helpers/constants/design-system"),p=e("../../../components/component-library");function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}function f(e){return e&&e.__esModule?e:{default:e}}const g=({selectedAccountAddresses:e,addressLastConnectedMap:t={},accounts:n,selectAccounts:a,selectNewAccountViaModal:m,cancelPermissionsRequest:f,permissionsRequestId:g,targetSubjectMetadata:h,nativeCurrency:y})=>{const[b,E]=(0,o.useState)(e),k=n.filter(e=>(0,r.isEvmAccountType)(e.type)),v=(0,s.useI18nContext)(),C=Object.keys(e).length>k.length,x=0===n.length?v("connectAccountOrCreate"):(null==h?void 0:h.subjectType)===i.SubjectType.Snap?v("selectAccountsForSnap"):v("selectAccounts");return o.default.createElement(o.default.Fragment,null,o.default.createElement(p.Box,{className:"permissions-connect-choose-account__content",display:d.Display.Flex,flexDirection:d.FlexDirection.Column,backgroundColor:d.BackgroundColor.backgroundAlternative,width:d.BlockSize.Full,height:d.BlockSize.Full,paddingLeft:6,paddingRight:6},o.default.createElement(p.Box,{display:d.Display.Flex,flexDirection:d.FlexDirection.Column,justifyContent:d.JustifyContent.center,alignItems:d.AlignItems.center,paddingTop:4,paddingBottom:4},o.default.createElement(p.Text,{variant:d.TextVariant.headingMd},v("connectWithMetaMask")),o.default.createElement(p.Text,{variant:d.TextVariant.bodyMd},x)),o.default.createElement(l.default,{accounts:n,selectNewAccountViaModal:m,addressLastConnectedMap:t,nativeCurrency:y,selectedAccounts:b,allAreSelected:()=>k.length===b.size,deselectAll:()=>{E(new Set)},selectAll:()=>{const e=new Set(k.map(e=>e.address));E(e)},handleAccountClick:e=>{const t=new Set(b);t.has(e)?t.delete(e):t.add(e),E(t)}})),o.default.createElement(p.Box,{backgroundColor:d.BackgroundColor.backgroundAlternative,className:"permissions-connect-choose-account__footer",paddingTop:4},(null==h?void 0:h.subjectType)!==i.SubjectType.Snap&&o.default.createElement(c.default,null),o.default.createElement(u.PageContainerFooter,{cancelButtonType:"default",onCancel:()=>f(g),cancelText:v("cancel"),onSubmit:()=>a(b),submitText:v("next"),disabled:C||0===b.size})))};g.propTypes={accounts:a.default.arrayOf(a.default.shape({address:a.default.string,addressLabel:a.default.string,lastConnectedDate:a.default.string,balance:a.default.string})).isRequired,selectAccounts:a.default.func.isRequired,selectNewAccountViaModal:a.default.func.isRequired,nativeCurrency:a.default.string.isRequired,addressLastConnectedMap:a.default.object,cancelPermissionsRequest:a.default.func.isRequired,permissionsRequestId:a.default.string.isRequired,selectedAccountAddresses:a.default.object.isRequired,targetSubjectMetadata:a.default.shape({extensionId:a.default.string,iconUrl:a.default.string,name:a.default.string,origin:a.default.string.isRequired,subjectType:a.default.string})};n.default=g}}},{package:"$root$",file:"ui/pages/permissions-connect/choose-account/choose-account.js"}],[7395,{"./choose-account":7394},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return o.default}});var a,o=(a=e("./choose-account"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"ui/pages/permissions-connect/choose-account/index.js"}],[7396,{"../../../../shared/constants/metametrics":5462,"../../../../shared/constants/network":5465,"../../../../shared/lib/caip25-caveat-merger":5493,"../../../../shared/modules/selectors/networks":5575,"../../../components/component-library":6123,"../../../components/multichain":6356,"../../../components/multichain/create-solana-account-modal/create-solana-account-modal":6330,"../../../components/multichain/pages/page":6451,"../../../components/multichain/pages/review-permissions-page/site-cell/site-cell":6458,"../../../components/ui/tabs":6604,"../../../contexts/metametrics":6635,"../../../helpers/constants/design-system":6672,"../../../helpers/utils/util":6728,"../../../hooks/useI18nContext":6799,"../../../hooks/useOriginTrustSignals":6815,"../../../hooks/useTrustSignals":6835,"../../../selectors":7568,"../../../selectors/multichain":7577,"./utils":7397,"@metamask/chain-agnostic-permission":1301,"@metamask/design-system-react":1674,"@metamask/utils":2835,lodash:4565,react:4992,"react-redux":4936,"react-tippy":4974},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ConnectPage=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=N(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(a,i,r):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-redux"),i=e("@metamask/chain-agnostic-permission"),r=e("@metamask/utils"),s=e("lodash"),c=e("react-tippy"),l=e("@metamask/design-system-react"),u=e("../../../hooks/useI18nContext"),d=e("../../../selectors"),p=e("../../../../shared/modules/selectors/networks"),m=e("../../../components/component-library"),f=e("../../../components/multichain/pages/page"),g=e("../../../components/multichain/pages/review-permissions-page/site-cell/site-cell"),h=e("../../../helpers/constants/design-system"),y=e("../../../../shared/constants/network"),b=e("../../../selectors/multichain"),E=e("../../../components/ui/tabs"),k=e("../../../components/multichain"),v=e("../../../helpers/utils/util"),C=e("../../../../shared/constants/metametrics"),x=e("../../../contexts/metametrics"),_=e("../../../components/multichain/create-solana-account-modal/create-solana-account-modal"),T=e("../../../../shared/lib/caip25-caveat-merger"),w=e("../../../hooks/useOriginTrustSignals"),S=e("../../../hooks/useTrustSignals"),I=e("./utils");function N(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(N=function(e){return e?n:t})(e)}n.ConnectPage=({request:e,permissionsRequestId:t,rejectPermissionsRequest:n,approveConnection:N,targetSubjectMetadata:O})=>{const M=(0,u.useI18nContext)(),A=(0,a.useContext)(x.MetaMetricsContext),B=(0,o.useSelector)(t=>{var n;return(0,d.getPermissions)(t,null===(n=e.metadata)||void 0===n?void 0:n.origin)}),R=(0,a.useMemo)(()=>B?(0,I.getCaip25CaveatValueFromPermissions)(B):null,[B]),P=(0,I.getCaip25CaveatValueFromPermissions)(e.permissions),D=R?(0,T.mergeCaip25CaveatValues)(P,R):P,F=(0,i.getCaipAccountIdsFromCaip25CaveatValue)(D),L=(0,i.getAllScopesFromCaip25CaveatValue)(D),{promptToCreateSolanaAccount:j,isEip1193Request:W}=e.metadata??{},$=(0,o.useSelector)(p.getAllNetworkConfigurationsByCaipChainId),[U,z]=(0,a.useMemo)(()=>Object.entries($).reduce(([e,t],[n,a])=>{const o=n;return(y.CAIP_FORMATTED_EVM_TEST_CHAINS.includes(o)?t:e).push({...a,caipChainId:o}),[e,t]},[[],[]]),[$]),G=(0,a.useMemo)(()=>[...U,...z].map(({caipChainId:e})=>e),[U,z]),[V,q]=(0,a.useState)(!1),[J,K]=(0,a.useState)(!1),[H,Y]=(0,a.useState)(!1),X=(0,o.useSelector)(b.getMultichainNetwork).chainId,Q=z.find(e=>e.caipChainId===X);let Z=Q?[...U,Q].map(({caipChainId:e})=>e):U.map(({caipChainId:e})=>e),ee=L.filter(e=>G.includes(e));if(W){Z=Z.filter(e=>{const{namespace:t}=(0,r.parseCaipChainId)(e);return t===r.KnownCaipNamespace.Eip155});!ee.some(e=>{const{namespace:t}=(0,r.parseCaipChainId)(e);return t===r.KnownCaipNamespace.Eip155})&&R&&(ee=Array.from(new Set([...Z,...ee])))}const te=ee.length>0?ee:Z,[ne,ae]=(0,a.useState)(te),oe=(0,a.useCallback)((e,{isUserModified:t=!0}={})=>{t&&q(!0),ae(e)},[q,ae]),ie=(0,o.useSelector)(d.getUpdatedAndSortedAccountsWithCaipAccountId),re=(0,i.getAllNamespacesFromCaip25CaveatValue)(D).filter(e=>e!==r.KnownCaipNamespace.Wallet),se=ie.filter(e=>{const{chain:{namespace:t}}=(0,r.parseCaipAccountId)(e.caipAccountId);return re.includes(t)}),ce=se.filter(e=>(0,i.isCaipAccountIdInPermittedAccountIds)(e.caipAccountId,F)),le=(0,I.getDefaultAccounts)(re,ce,se).map(({caipAccountId:e})=>e),[ue,de]=(0,a.useState)(le),pe=(0,a.useCallback)((e,{isUserModified:t=!0}={})=>{t&&q(!0);let n=[...ne];e.forEach(e=>{const{chain:{namespace:t}}=(0,r.parseCaipAccountId)(e);if(!n.some(e=>{try{const{namespace:n}=(0,r.parseCaipChainId)(e);return t===n}catch(e){return!1}})){const e=G.filter(e=>{try{const{namespace:n}=(0,r.parseCaipChainId)(e);return t===n}catch(e){return!1}});n=Array.from(new Set([...n,...e]))}}),oe(n,{isUserModified:t}),de(e)},[q,de,ne,oe,G]);(0,a.useEffect)(()=>{V||(0,s.isEqual)(le,ue)||pe(le,{isUserModified:!1})},[V,pe,ue,JSON.stringify(le)]);const me=ie.filter(({caipAccountId:e})=>ue.some(t=>t===e)),fe=(0,a.useMemo)(()=>ie.some(({caipAccountId:e})=>{const{chain:t}=(0,r.parseCaipAccountId)(e);return t.namespace===r.KnownCaipNamespace.Solana}),[ie]),ge=(0,a.useCallback)(()=>{K(!0),A({category:C.MetaMetricsEventCategory.Navigation,event:C.MetaMetricsEventName.ViewPermissionedAccounts,properties:{location:"Connect view (accounts tab), Permissions toast, Permissions (dapp)"}})},[A]),he=(0,a.useCallback)(()=>{Y(!0)},[]),ye=(0,a.useCallback)(()=>{Y(!1)},[]),be=(0,a.useCallback)(()=>{K(!1)},[]),Ee=(0,a.useCallback)(()=>{n(t)},[t,n]),ke=(0,a.useCallback)(()=>{const t={...e,permissions:{...e.permissions,...(0,i.generateCaip25Caveat)(D,ue,ne)}};N(t)},[e,D,ue,ne,N]),ve=(0,v.transformOriginToTitle)(O.origin),Ce=(0,w.useOriginTrustSignals)(O.origin);return a.default.createElement(f.Page,{"data-testid":"connect-page",className:"main-container connect-page",backgroundColor:h.BackgroundColor.backgroundDefault},a.default.createElement(f.Header,{paddingTop:8,paddingBottom:0},a.default.createElement(m.Box,{display:h.Display.Flex,justifyContent:h.JustifyContent.center,marginBottom:8},O.iconUrl?a.default.createElement(a.default.Fragment,null,a.default.createElement(m.Box,{style:{filter:"blur(16px) brightness(1.1)",position:"absolute"}},a.default.createElement(m.AvatarFavicon,{backgroundColor:h.BackgroundColor.backgroundMuted,size:m.AvatarFaviconSize.Xl,src:O.iconUrl,name:ve})),a.default.createElement(m.AvatarFavicon,{backgroundColor:h.BackgroundColor.backgroundMuted,size:m.AvatarFaviconSize.Lg,src:O.iconUrl,name:ve,style:{zIndex:1,background:"transparent"}})):a.default.createElement(m.AvatarBase,{size:m.AvatarBaseSize.Lg,display:h.Display.Flex,alignItems:h.AlignItems.center,justifyContent:h.JustifyContent.center,color:h.TextColor.textAlternative,style:{borderWidth:"0px"},backgroundColor:h.BackgroundColor.backgroundMuted},(0,v.isIpAddress)(ve)?"?":(0,v.getAvatarFallbackLetter)(ve))),a.default.createElement(m.Box,{display:h.Display.Flex,alignItems:h.AlignItems.center,justifyContent:h.JustifyContent.center,gap:2,marginBottom:1},a.default.createElement(m.Text,{variant:h.TextVariant.headingLg,style:{wordBreak:"break-word",whiteSpace:"normal"}},ve),Ce.state===S.TrustSignalDisplayState.Verified&&a.default.createElement(c.Tooltip,{title:M("alertReasonOriginTrustSignalVerified"),position:"bottom",style:{display:"flex"}},a.default.createElement(m.Icon,{name:m.IconName.VerifiedFilled,color:h.IconColor.infoDefault,size:m.IconSize.Sm}))),a.default.createElement(m.Box,{display:h.Display.Flex,justifyContent:h.JustifyContent.center},a.default.createElement(m.Text,{color:h.TextColor.textAlternative},M("connectionDescription")))),a.default.createElement(f.Content,{paddingLeft:4,paddingRight:4,backgroundColor:h.BackgroundColor.transparent},a.default.createElement(E.Tabs,{onTabClick:()=>null,backgroundColor:l.BoxBackgroundColor.Transparent,justifyContent:l.BoxJustifyContent.Center,defaultActiveTabKey:"accounts",tabListProps:{backgroundColor:l.BoxBackgroundColor.Transparent}},a.default.createElement(E.Tab,{name:M("accounts"),tabKey:"accounts","data-testid":"accounts-tab"},a.default.createElement(m.Box,{marginTop:4},a.default.createElement(m.Box,{backgroundColor:h.BackgroundColor.backgroundDefault,borderRadius:h.BorderRadius.XL,style:{overflow:"auto",maxHeight:"268px",scrollbarColor:"var(--color-icon-muted) transparent"}},me.map(e=>a.default.createElement(k.AccountListItem,{showConnectedStatus:!1,account:e,key:e.caipAccountId,selected:!1})),0===me.length&&!j&&a.default.createElement(m.Box,{className:"connect-page__accounts-empty",display:h.Display.Flex,justifyContent:h.JustifyContent.center,alignItems:h.AlignItems.center,borderRadius:h.BorderRadius.XL},a.default.createElement(m.ButtonLink,{onClick:ge,"data-testid":"edit"},M("selectAccountToConnect")))),me.length>0&&a.default.createElement(m.Box,{marginTop:4,display:h.Display.Flex,justifyContent:h.JustifyContent.center},a.default.createElement(m.ButtonLink,{onClick:ge,"data-testid":"edit"},M("editAccounts"))),j&&!fe&&a.default.createElement(m.Box,{display:h.Display.Flex,flexDirection:h.FlexDirection.Column,justifyContent:h.JustifyContent.center,alignItems:h.AlignItems.center,marginTop:4,gap:2},a.default.createElement(m.Text,{variant:h.TextVariant.bodyMd,color:h.TextColor.textAlternative,textAlign:h.TextAlign.Center},0===me.length?M("solanaAccountRequired"):M("solanaAccountRequested")),a.default.createElement(m.Button,{variant:m.ButtonVariant.Secondary,width:h.BlockSize.Full,size:m.ButtonSize.Lg,onClick:he,"data-testid":"create-solana-account"},M("createSolanaAccount"))),H&&a.default.createElement(_.CreateSolanaAccountModal,{onClose:ye}),J&&a.default.createElement(k.EditAccountsModal,{accounts:ie,defaultSelectedAccountAddresses:ue,onClose:be,onSubmit:pe}))),a.default.createElement(E.Tab,{name:M("permissions"),tabKey:"permissions","data-testid":"permissions-tab",disabled:j&&!fe&&0===me.length},a.default.createElement(m.Box,{marginTop:4},a.default.createElement(g.SiteCell,{nonTestNetworks:U,testNetworks:z,accounts:ie,onSelectAccountAddresses:pe,onSelectChainIds:oe,selectedAccountAddresses:ue,selectedChainIds:ne,isConnectFlow:!0}))))),a.default.createElement(f.Footer,null,a.default.createElement(m.Box,{display:h.Display.Flex,flexDirection:h.FlexDirection.Column,gap:4,width:h.BlockSize.Full},a.default.createElement(m.Box,{display:h.Display.Flex,gap:4,width:h.BlockSize.Full},a.default.createElement(m.Button,{block:!0,variant:m.ButtonVariant.Secondary,size:m.ButtonSize.Lg,"data-testid":"cancel-btn",onClick:Ee},M("cancel")),a.default.createElement(m.Button,{block:!0,"data-testid":"confirm-btn",size:m.ButtonSize.Lg,onClick:ke,disabled:0===ue.length||0===ne.length},M("connect"))))))}}}},{package:"$root$",file:"ui/pages/permissions-connect/connect-page/connect-page.tsx"}],[7397,{"../../../helpers/utils/util":6728,"@metamask/chain-agnostic-permission":1301,"@metamask/utils":2835},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getCaip25CaveatValueFromPermissions=function(e){var t;return(null==e||null===(t=e[o.Caip25EndowmentPermissionName])||void 0===t||null===(t=t.caveats)||void 0===t||null===(t=t.find(e=>e.type===o.Caip25CaveatType))||void 0===t?void 0:t.value)??{optionalScopes:{},requiredScopes:{},sessionProperties:{},isMultichainOrigin:!1}},n.getCaip25PermissionsResponse=function(e,t,n){const a=(0,o.setPermittedEthChainIds)(e,n),i=(0,o.setEthAccounts)(a,t);return{[o.Caip25EndowmentPermissionName]:{caveats:[{type:o.Caip25CaveatType,value:i}]}}},n.getDefaultAccounts=function(e,t,n){const o=[],r=new Set;t.forEach(t=>{const{chain:{namespace:n}}=(0,a.parseCaipAccountId)(t.caipAccountId);e.includes(n)&&(o.push(t),r.add(n))});const s=e.filter(e=>!r.has(e));if(s.length>0){const e=(0,i.sortSelectedInternalAccounts)(n);for(const t of s){const n=e.find(e=>{const{chain:{namespace:n}}=(0,a.parseCaipAccountId)(e.caipAccountId);return n===t});n&&o.push(n)}}return o};var a=e("@metamask/utils"),o=e("@metamask/chain-agnostic-permission"),i=e("../../../helpers/utils/util")}}},{package:"$root$",file:"ui/pages/permissions-connect/connect-page/utils.ts"}],[7398,{"./permissions-connect.container":7400},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return o.default}});var a,o=(a=e("./permissions-connect.container"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"ui/pages/permissions-connect/index.js"}],[7399,{"../../../app/scripts/lib/multichain/address":205,"../../../shared/constants/time":5480,"../../../shared/lib/multichain/scope-utils":5536,"../../components/app/permission-page-container":5839,"../../components/app/snaps/snap-authorship-header/snap-authorship-header":5876,"../../components/component-library":6123,"../../components/multichain-accounts/permissions/multichain-edit-accounts-page/multichain-edit-account-wrapper":6226,"../../components/multichain-accounts/state2-wrapper/state2-wrapper":6233,"../../helpers/constants/routes":6677,"../../hooks/useAccountGroupsForPermissions":6778,"../multichain-accounts/multichain-accounts-connect-page/multichain-accounts-connect-page":7327,"./choose-account":7395,"./connect-page/connect-page":7396,"./connect-page/utils":7397,"./redirect":7401,"./snaps/snap-install":7403,"./snaps/snap-result":7405,"./snaps/snap-update":7407,"./snaps/snaps-connect":7409,"@metamask/chain-agnostic-permission":1301,"@metamask/permission-controller":2297,"@metamask/rpc-errors":2421,"@metamask/snaps-utils":2713,"@metamask/utils":2835,"prop-types":4808,react:4992,"react-router-dom":4960},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=M(e("prop-types")),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=O(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(a,i,r):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(e("react")),i=e("react-router-dom"),r=e("@metamask/rpc-errors"),s=e("@metamask/permission-controller"),c=e("@metamask/snaps-utils"),l=e("@metamask/chain-agnostic-permission"),u=e("@metamask/utils"),d=e("../../../app/scripts/lib/multichain/address"),p=e("../../../shared/constants/time"),m=e("../../helpers/constants/routes"),f=M(e("../../components/app/permission-page-container")),g=e("../../components/component-library"),h=M(e("../../components/app/snaps/snap-authorship-header/snap-authorship-header")),y=e("../../components/multichain-accounts/state2-wrapper/state2-wrapper"),b=e("../multichain-accounts/multichain-accounts-connect-page/multichain-accounts-connect-page"),E=e("../../hooks/useAccountGroupsForPermissions"),k=e("../../../shared/lib/multichain/scope-utils"),v=e("../../components/multichain-accounts/permissions/multichain-edit-accounts-page/multichain-edit-account-wrapper"),C=M(e("./choose-account")),x=M(e("./redirect")),_=M(e("./snaps/snaps-connect")),T=M(e("./snaps/snap-install")),w=M(e("./snaps/snap-update")),S=M(e("./snaps/snap-result")),I=e("./connect-page/connect-page"),N=e("./connect-page/utils");function O(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(O=function(e){return e?n:t})(e)}function M(e){return e&&e.__esModule?e:{default:e}}function A(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const B=1200*p.MILLISECOND;function R(e,t){const n=(0,N.getCaip25CaveatValueFromPermissions)(t),a=(0,l.getEthAccounts)(n);return a.length>0?new Set(a.map(e=>e.toLowerCase()).filter(d.isEthAddress)):new Set((0,d.isEthAddress)(e)?[e]:[])}function P(e){const t=(0,N.getCaip25CaveatValueFromPermissions)(e);return(0,l.getPermittedEthChainIds)(t)}class D extends o.Component{constructor(...e){var t;super(...e),A(this,"state",{redirecting:!1,selectedAccountAddresses:R(this.props.currentAddress,null===(t=this.props.permissionsRequest)||void 0===t?void 0:t.permissions),permissionsApproved:null,origin:this.props.origin,targetSubjectMetadata:this.props.targetSubjectMetadata||{},snapsInstallPrivacyWarningShown:this.props.snapsInstallPrivacyWarningShown}),A(this,"selectAccounts",e=>{const{confirmPermissionPath:t,requestType:n,snapsConnectPath:a,snapInstallPath:o,snapUpdatePath:i,snapResultPath:r}=this.props;this.setState({selectedAccountAddresses:e},()=>{switch(n){case"wallet_installSnap":this.props.history.push(o);break;case"wallet_updateSnap":this.props.history.push(i);break;case"wallet_installSnapResult":this.props.history.push(r);break;case"wallet_connectSnaps":this.props.history.replace(a);break;default:this.props.history.push(t)}})}),A(this,"cancelPermissionsRequest",async e=>{const{rejectPermissionsRequest:t}=this.props;e&&(await t(e),this.redirect(!1))}),A(this,"renderSnapChooseAccountState1",()=>{const{accounts:e,nativeCurrency:t,showNewAccountModal:n,newAccountNumber:a,addressLastConnectedMap:i,permissionsRequestId:r,targetSubjectMetadata:s}=this.props,{selectedAccountAddresses:c}=this.state;return o.default.createElement(C.default,{accounts:e,nativeCurrency:t,selectAccounts:e=>this.selectAccounts(e),selectNewAccountViaModal:e=>{n({onCreateNewAccount:t=>e(t),newAccountNumber:a})},addressLastConnectedMap:i,cancelPermissionsRequest:e=>this.cancelPermissionsRequest(e),permissionsRequestId:r,selectedAccountAddresses:c,targetSubjectMetadata:s})}),A(this,"renderSnapChooseAccountState2",()=>{const{permissionsRequestId:e,accountGroups:t,permissionsRequest:n}=this.props,{t:a}=this.context,i=(0,N.getCaip25CaveatValueFromPermissions)(null==n?void 0:n.permissions),r=[],s=(0,l.getAllScopesFromCaip25CaveatValue)(i).filter(e=>{const{namespace:t}=(0,u.parseCaipChainId)(e);return t!==u.KnownCaipNamespace.Wallet}),c=(0,l.getAllNamespacesFromCaip25CaveatValue)(i);return s.length>0&&s.forEach(e=>{r.push(e)}),c.includes(u.KnownCaipNamespace.Eip155)&&r.push(`${u.KnownCaipNamespace.Eip155}:0`),o.default.createElement(v.MultichainEditAccountsPageWrapper,{title:a("connectWithMetaMask"),permissions:null==n?void 0:n.permissions,onSubmit:e=>{const n=t.filter(t=>e.includes(t.id)&&(0,E.supportsChainIds)(t,r)),a=(0,k.getCaip25AccountFromAccountGroupAndScope)(n,r).map(e=>(0,u.parseCaipAccountId)(e).address);this.selectAccounts(new Set(a))},onClose:()=>this.cancelPermissionsRequest(e)})}),A(this,"renderConnectPageState1",()=>{const e={rejectPermissionsRequest:e=>this.cancelPermissionsRequest(e),activeTabOrigin:this.state.origin,request:this.props.permissionsRequest||{},permissionsRequestId:this.props.permissionsRequestId,approveConnection:this.approveConnection,targetSubjectMetadata:this.props.targetSubjectMetadata};return o.default.createElement(I.ConnectPage,e)}),A(this,"renderConnectPageState2",()=>{const e={rejectPermissionsRequest:e=>this.cancelPermissionsRequest(e),activeTabOrigin:this.state.origin,request:this.props.permissionsRequest||{},permissionsRequestId:this.props.permissionsRequestId,approveConnection:this.approveConnection,targetSubjectMetadata:this.props.targetSubjectMetadata};return o.default.createElement(b.MultichainAccountsConnectPage,e)}),A(this,"approveConnection",(...e)=>{const{approvePermissionsRequest:t}=this.props;t(...e),this.redirect(!0)})}componentDidMount(){const{connectPath:e,confirmPermissionPath:t,snapsConnectPath:n,snapInstallPath:a,snapUpdatePath:o,snapResultPath:i,requestType:r,getRequestAccountTabIds:s,permissionsRequest:c,history:l,isRequestingAccounts:u}=this.props;if(s(),c){if(l.location.pathname===e&&!u)switch(r){case"wallet_installSnap":l.replace(a);break;case"wallet_updateSnap":l.replace(o);break;case"wallet_installSnapResult":l.replace(i);break;case"wallet_connectSnaps":l.replace(n);break;default:l.replace(t)}}else l.replace(m.DEFAULT_ROUTE)}componentDidUpdate(e){var t;const{permissionsRequest:n,lastConnectedInfo:a,targetSubjectMetadata:o}=this.props,{redirecting:i,origin:r}=this.state;if(null!=o&&o.origin&&(null===(t=e.targetSubjectMetadata)||void 0===t?void 0:t.origin)!==(null==o?void 0:o.origin)&&this.setState({targetSubjectMetadata:o}),!n&&e.permissionsRequest&&!i){var s,c;const t=((null===(s=a[r])||void 0===s?void 0:s.lastApproved)||0)>((null===(c=e.lastConnectedInfo[r])||void 0===c?void 0:c.lastApproved)||0);this.redirect(t)}}redirect(e){const{history:t,permissionsRequest:n}=this.props;let a=!0;a=!((null==n?void 0:n.permissions)&&Object.keys(n.permissions).includes("wallet_snap")),this.setState({redirecting:a,permissionsApproved:e}),a&&e?setTimeout(()=>t.push(m.DEFAULT_ROUTE),B):t.push(m.DEFAULT_ROUTE)}goBack(){const{history:e,connectPath:t}=this.props;e.push(t)}renderTopBar(e){const{targetSubjectMetadata:t}=this.state;return o.default.createElement(g.Box,{style:{boxShadow:t.subjectType===s.SubjectType.Snap&&"var(--shadow-size-lg) var(--color-shadow-default)"}},t.subjectType===s.SubjectType.Snap&&o.default.createElement(h.default,{snapId:t.origin,boxShadow:"none",onCancel:()=>{this.cancelPermissionsRequest(e)}}))}render(){var e;const{accounts:t,permissionsRequest:n,permissionsRequestId:a,connectPath:s,confirmPermissionPath:l,hideTopBar:u,targetSubjectMetadata:d,snapsConnectPath:p,snapInstallPath:m,snapUpdatePath:g,snapResultPath:h,requestState:b,approvePendingApproval:E,rejectPendingApproval:k,setSnapsInstallPrivacyWarningShownStatus:v,approvePermissionsRequest:C,history:I}=this.props,{selectedAccountAddresses:N,permissionsApproved:O,redirecting:M,snapsInstallPrivacyWarningShown:A}=this.state,B=(0,c.isSnapId)(null==n||null===(e=n.metadata)||void 0===e?void 0:e.origin);return o.default.createElement("div",{className:"permissions-connect"},!u&&this.renderTopBar(a),M&&O?o.default.createElement(x.default,{subjectMetadata:d}):o.default.createElement(i.Switch,null,o.default.createElement(i.Route,{path:s,exact:!0,render:()=>B?o.default.createElement(y.State2Wrapper,{state1Component:this.renderSnapChooseAccountState1,state2Component:this.renderSnapChooseAccountState2}):o.default.createElement(y.State2Wrapper,{state1Component:this.renderConnectPageState1,state2Component:this.renderConnectPageState2})}),o.default.createElement(i.Route,{path:l,exact:!0,render:()=>o.default.createElement(f.default,{request:n||{},approvePermissionsRequest:(...e)=>{C(...e),this.redirect(!0)},rejectPermissionsRequest:e=>this.cancelPermissionsRequest(e),selectedAccounts:t.filter(e=>N.has(e.address)),requestedChainIds:P(null==n?void 0:n.permissions),targetSubjectMetadata:d,history:I,connectPath:s,snapsInstallPrivacyWarningShown:A,setSnapsInstallPrivacyWarningShownStatus:v})}),o.default.createElement(i.Route,{path:p,exact:!0,render:()=>o.default.createElement(_.default,{request:n||{},approveConnection:this.approveConnection,rejectConnection:e=>this.cancelPermissionsRequest(e),targetSubjectMetadata:d,snapsInstallPrivacyWarningShown:A,setSnapsInstallPrivacyWarningShownStatus:v})}),o.default.createElement(i.Route,{path:m,exact:!0,render:()=>o.default.createElement(T.default,{request:n||{},requestState:b||{},approveSnapInstall:e=>{E(e,{...n,permissions:b.permissions,approvedAccounts:[...N]}),this.setState({permissionsApproved:!0})},rejectSnapInstall:e=>{k(e,(0,r.serializeError)(r.providerErrors.userRejectedRequest())),this.setState({permissionsApproved:!0})},targetSubjectMetadata:d})}),o.default.createElement(i.Route,{path:g,exact:!0,render:()=>o.default.createElement(w.default,{request:n||{},requestState:b||{},approveSnapUpdate:e=>{E(e,{...n,permissions:b.permissions,approvedAccounts:[...N]}),this.setState({permissionsApproved:!0})},rejectSnapUpdate:e=>{k(e,(0,r.serializeError)(r.providerErrors.userRejectedRequest())),this.setState({permissionsApproved:!1})},targetSubjectMetadata:d})}),o.default.createElement(i.Route,{path:h,exact:!0,render:()=>o.default.createElement(S.default,{request:n||{},requestState:b||{},approveSnapResult:e=>{E(e),this.setState({permissionsApproved:!0})},targetSubjectMetadata:d})})))}}n.default=D,A(D,"propTypes",{approvePermissionsRequest:a.default.func.isRequired,rejectPermissionsRequest:a.default.func.isRequired,getRequestAccountTabIds:a.default.func.isRequired,accounts:a.default.arrayOf(a.default.shape({id:a.default.string.isRequired,address:a.default.string.isRequired,metadata:a.default.shape({name:a.default.string.isRequired,snap:a.default.shape({id:a.default.string.isRequired,name:a.default.string,enabled:a.default.bool}),keyring:a.default.shape({type:a.default.string.isRequired}).isRequired}).isRequired,addressLabel:a.default.string.isRequired,label:a.default.string.isRequired,balance:a.default.string.isRequired})).isRequired,accountGroups:a.default.arrayOf(a.default.shape({id:a.default.string.isRequired,accounts:a.default.arrayOf(a.default.object.isRequired)})).isRequired,currentAddress:a.default.string.isRequired,origin:a.default.string,showNewAccountModal:a.default.func.isRequired,newAccountNumber:a.default.number.isRequired,nativeCurrency:a.default.string,permissionsRequest:a.default.object,addressLastConnectedMap:a.default.object.isRequired,lastConnectedInfo:a.default.object.isRequired,permissionsRequestId:a.default.string,history:a.default.object.isRequired,connectPath:a.default.string.isRequired,confirmPermissionPath:a.default.string.isRequired,requestType:a.default.string.isRequired,snapsConnectPath:a.default.string.isRequired,snapInstallPath:a.default.string.isRequired,snapUpdatePath:a.default.string.isRequired,snapResultPath:a.default.string.isRequired,requestState:a.default.object.isRequired,approvePendingApproval:a.default.func.isRequired,rejectPendingApproval:a.default.func.isRequired,setSnapsInstallPrivacyWarningShownStatus:a.default.func.isRequired,snapsInstallPrivacyWarningShown:a.default.bool.isRequired,hideTopBar:a.default.bool,targetSubjectMetadata:a.default.shape({extensionId:a.default.string,iconUrl:a.default.string,name:a.default.string,origin:a.default.string,subjectType:a.default.string}),isRequestingAccounts:a.default.bool.isRequired}),A(D,"defaultProps",{origin:"",nativeCurrency:"",permissionsRequest:undefined,permissionsRequestId:""}),A(D,"contextTypes",{t:a.default.func})}}},{package:"$root$",file:"ui/pages/permissions-connect/permissions-connect.component.js"}],[7400,{"../../ducks/metamask/metamask":6659,"../../helpers/constants/routes":6677,"../../helpers/utils/util":6728,"../../selectors":7568,"../../selectors/multichain-accounts/account-tree":7572,"../../store/actions":7594,"./permissions-connect.component":7399,"@metamask/chain-agnostic-permission":1301,"@metamask/keyring-api":2012,"@metamask/permission-controller":2297,"@metamask/snaps-rpc-methods":2543,"prop-types":4808,"react-redux":4936},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=e("@metamask/permission-controller"),o=e("@metamask/snaps-rpc-methods"),i=e("react-redux"),r=h(e("prop-types")),s=e("@metamask/keyring-api"),c=e("@metamask/chain-agnostic-permission"),l=e("../../selectors"),u=e("../../ducks/metamask/metamask"),d=e("../../helpers/utils/util"),p=e("../../store/actions"),m=e("../../helpers/constants/routes"),f=e("../../selectors/multichain-accounts/account-tree"),g=h(e("./permissions-connect.component"));function h(e){return e&&e.__esModule?e:{default:e}}const y=(0,i.connect)((e,t)=>{var n,i,r;const{match:{params:{id:p}},location:{pathname:g}}=t;let h=(0,l.getPermissionsRequests)(e);h=[...h,...(0,l.getSnapInstallOrUpdateRequests)(e)];const{address:y}=(0,l.getSelectedInternalAccount)(e),b=h.find(e=>e.metadata.id===p),{metadata:E={},diff:k={}}=b||{},{origin:v}=E,C=(0,u.getNativeCurrency)(e),x=Boolean(null==k?void 0:k.permissionDiffMap),_=Boolean((null==b||null===(n=b.permissions)||void 0===n?void 0:n[c.Caip25EndowmentPermissionName])&&!x),T=(0,l.getTargetSubjectMetadata)(e,v)??{name:(0,d.getURLHostName)(v)||v,origin:v,iconUrl:null,extensionId:null,subjectType:a.SubjectType.Unknown};let w=(0,l.getRequestType)(e,p);b&&1===Object.keys(b.permissions||{}).length&&null!==(i=b.permissions)&&void 0!==i&&i[o.WALLET_SNAP_PERMISSION_KEY]&&(w="wallet_connectSnaps");const S=(0,l.getRequestState)(e,p)||{},I=(0,l.getAccountsWithLabels)(e).filter(e=>(0,s.isEvmAccountType)(e.type)),N=(0,l.getLastConnectedInfo)(e)||{},O=(null===(r=N[v])||void 0===r?void 0:r.accounts)||{};Object.keys(O).forEach(e=>{O[e]=(0,d.formatDate)(O[e],"yyyy-MM-dd")});const M=`${m.CONNECT_ROUTE}/${p}`,A=`${m.CONNECT_ROUTE}/${p}${m.CONNECT_CONFIRM_PERMISSIONS_ROUTE}`,B=`${m.CONNECT_ROUTE}/${p}${m.CONNECT_SNAPS_CONNECT_ROUTE}`,R=`${m.CONNECT_ROUTE}/${p}${m.CONNECT_SNAP_INSTALL_ROUTE}`,P=`${m.CONNECT_ROUTE}/${p}${m.CONNECT_SNAP_UPDATE_ROUTE}`,D=`${m.CONNECT_ROUTE}/${p}${m.CONNECT_SNAP_RESULT_ROUTE}`,F=g===R||g===P||g===D;let L=1+_;L+=F,L=L.toString();let j="";if(g===M)j="1";else if(g===A)j=_?"2":"1";else if(F)j=_?"3":"2";else{if(g!==B)throw new Error("Incorrect path for permissions-connect component");j=1}return{isRequestingAccounts:_,requestType:w,snapsConnectPath:B,snapInstallPath:R,snapUpdatePath:P,snapResultPath:D,requestState:S,hideTopBar:F,snapsInstallPrivacyWarningShown:(0,l.getSnapsInstallPrivacyWarningShown)(e),permissionsRequest:b,permissionsRequestId:p,accounts:I,accountGroups:(0,f.getAccountGroupWithInternalAccounts)(e),currentAddress:y,origin:v,newAccountNumber:I.length+1,nativeCurrency:C,addressLastConnectedMap:O,lastConnectedInfo:N,connectPath:M,confirmPermissionPath:A,totalPages:L,page:j,targetSubjectMetadata:T}},e=>({approvePermissionsRequest:t=>e((0,p.approvePermissionsRequest)(t)),rejectPermissionsRequest:t=>e((0,p.rejectPermissionsRequest)(t)),approvePendingApproval:(t,n)=>e((0,p.resolvePendingApproval)(t,n)),rejectPendingApproval:(t,n)=>e((0,p.rejectPendingApproval)(t,n)),setSnapsInstallPrivacyWarningShownStatus:t=>{e((0,p.setSnapsInstallPrivacyWarningShownStatus)(t))},showNewAccountModal:({onCreateNewAccount:t,newAccountNumber:n})=>e((0,p.showModal)({name:"NEW_ACCOUNT",onCreateNewAccount:t,newAccountNumber:n})),getRequestAccountTabIds:()=>e((0,p.getRequestAccountTabIds)())}))(g.default);y.propTypes={history:r.default.object.isRequired,match:r.default.shape({params:r.default.shape({id:r.default.string}).isRequired}).isRequired};n.default=y}}},{package:"$root$",file:"ui/pages/permissions-connect/permissions-connect.container.js"}],[7401,{"./permissions-redirect.component":7402},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return o.default}});var a,o=(a=e("./permissions-redirect.component"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"ui/pages/permissions-connect/redirect/index.js"}],[7402,{"../../../components/app/permissions-connect-footer":5845,"../../../components/component-library":6123,"../../../contexts/i18n":6630,"../../../helpers/constants/design-system":6672,"prop-types":4808,react:4992},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=d;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(a,i,r):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=l(e("prop-types")),i=e("../../../helpers/constants/design-system"),r=e("../../../contexts/i18n"),s=e("../../../components/component-library"),c=l(e("../../../components/app/permissions-connect-footer"));function l(e){return e&&e.__esModule?e:{default:e}}function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}function d({subjectMetadata:e}){const t=(0,a.useContext)(r.I18nContext),[n,o]=(0,a.useState)(e);return(0,a.useEffect)(()=>{e&&e.origin&&o(e)},[e]),a.default.createElement(s.Box,{display:i.Display.Flex,flexDirection:i.FlexDirection.Column,width:i.BlockSize.Full,height:i.BlockSize.Full,justifyContent:i.JustifyContent.spaceBetween},a.default.createElement(s.Box,{display:i.Display.Flex,flexDirection:i.FlexDirection.Column,alignItems:i.AlignItems.center,justifyContent:i.JustifyContent.center,width:i.BlockSize.Full,height:i.BlockSize.Full,backgroundColor:i.BackgroundColor.backgroundDefault,borderRadius:i.BorderRadius.XS,border:`1px solid ${i.BorderColor.borderMuted}`,boxShadow:"var(--shadow-size-lg) var(--color-shadow-default)"},a.default.createElement(s.Box,{display:i.Display.Flex,marginBottom:4},a.default.createElement(s.Text,{variant:i.TextVariant.headingMd},t("connecting"))),a.default.createElement(s.Box,{display:i.Display.Flex,backgroundColor:i.BackgroundColor.infoMuted,borderRadius:i.BorderRadius.pill,padding:2},a.default.createElement(s.AvatarToken,{src:n.iconUrl,name:n.name,size:s.AvatarTokenSize.Lg}),a.default.createElement(s.Box,{display:i.Display.Flex,alignItems:i.AlignItems.center,justifyContent:i.JustifyContent.center,paddingLeft:4,paddingRight:4},a.default.createElement(s.Icon,{name:s.IconName.Confirmation,size:s.IconSize.Xl,color:i.IconColor.infoDefault})),a.default.createElement(s.AvatarToken,{src:"/images/logo/metamask-fox.svg",size:s.AvatarTokenSize.Lg,name:"metamask-fox"}))),a.default.createElement(s.Box,{backgroundColor:i.BackgroundColor.backgroundDefault,padding:4},a.default.createElement(s.Box,{display:i.Display.Flex,flexDirection:i.FlexDirection.Column},a.default.createElement(c.default,null),a.default.createElement(s.Box,{display:i.Display.Flex,paddingTop:4,width:i.BlockSize.Full,justifyContent:i.JustifyContent.center,alignItems:i.AlignItems.center},a.default.createElement(s.Button,{variant:s.ButtonVariant.Secondary,size:s.ButtonSize.Lg,width:i.BlockSize.Full,marginRight:2,disabled:!0},t("back")),a.default.createElement(s.Button,{variant:s.ButtonVariant.Primary,size:s.ButtonSize.Lg,width:i.BlockSize.Full,marginLeft:2,disabled:!0,loading:!0},a.default.createElement(s.Icon,{name:s.IconName.Loading,size:s.IconSize.Lg,color:i.IconColor.infoDefault}))))))}d.propTypes={subjectMetadata:o.default.shape({extensionId:o.default.string,iconUrl:o.default.string,subjectType:o.default.string,name:o.default.string.isRequired,origin:o.default.string.isRequired})}}}},{package:"$root$",file:"ui/pages/permissions-connect/redirect/permissions-redirect.component.js"}],[7403,{"./snap-install":7404},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return o.default}});var a,o=(a=e("./snap-install"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"ui/pages/permissions-connect/snaps/snap-install/index.js"}],[7404,{"../../../../components/app/permission-connect-header":5837,"../../../../components/app/snaps/install-error/install-error":5867,"../../../../components/app/snaps/snap-authorship-header":5875,"../../../../components/app/snaps/snap-install-warning":5888,"../../../../components/app/snaps/snap-permissions-list":5900,"../../../../components/component-library":6123,"../../../../components/ui/page-container":6581,"../../../../components/ui/pulse-loader/pulse-loader":6590,"../../../../helpers/constants/design-system":6672,"../../../../helpers/utils/util":6728,"../../../../hooks/useI18nContext":6799,"../../../../hooks/useOriginMetadata":6814,"../../../../hooks/useScrollRequired":6818,"../../../../selectors":7568,"../util":7411,"@metamask/snaps-utils":2713,"prop-types":4808,react:4992,"react-redux":4936},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=_;var a=x(e("prop-types")),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=C(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(a,i,r):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(e("react")),i=e("react-redux"),r=e("@metamask/snaps-utils"),s=e("../../../../components/ui/page-container"),c=e("../../../../hooks/useI18nContext"),l=x(e("../../../../components/app/snaps/snap-install-warning")),u=e("../../../../helpers/constants/design-system"),d=e("../util"),p=x(e("../../../../components/ui/pulse-loader/pulse-loader")),m=x(e("../../../../components/app/snaps/snap-authorship-header")),f=e("../../../../components/component-library"),g=x(e("../../../../components/app/snaps/snap-permissions-list")),h=e("../../../../hooks/useScrollRequired"),y=x(e("../../../../components/app/snaps/install-error/install-error")),b=e("../../../../hooks/useOriginMetadata"),E=e("../../../../selectors"),k=e("../../../../helpers/utils/util"),v=x(e("../../../../components/app/permission-connect-header"));function C(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(C=function(e){return e?n:t})(e)}function x(e){return e&&e.__esModule?e:{default:e}}function _({request:e,requestState:t,approveSnapInstall:n,rejectSnapInstall:a,targetSubjectMetadata:C}){var x,_,T;const w=(0,c.useI18nContext)(),S=(0,b.useOriginMetadata)(null==e||null===(x=e.metadata)||void 0===x?void 0:x.dappOrigin)||{},{origin:I,iconUrl:N}=S,[O,M]=(0,o.useState)(!1),A=(0,i.useSelector)(E.getSnapsMetadata),[B,R]=(0,o.useState)(!1),{isScrollable:P,hasScrolledToBottom:D,scrollToBottom:F,ref:L,onScroll:j}=(0,h.useScrollRequired)([t]),W=(0,o.useCallback)(()=>a(e.metadata.id),[e,a]),$=(0,o.useCallback)(()=>n(e.metadata.id),[e,n]),{name:U}=(0,i.useSelector)(e=>(0,E.getSnapMetadata)(e,C.origin)),z=!t.loading&&t.error,G=t.loading,V=(0,r.isSnapId)(null==e||null===(_=e.metadata)||void 0===_?void 0:_.dappOrigin),q=(0,d.getSnapInstallWarnings)((null==t?void 0:t.permissions)??{},w,U,(0,k.getSnapName)(A)),J=q.length>0;return o.default.createElement(f.Box,{className:"snap-install",display:u.Display.Flex,justifyContent:u.JustifyContent.spaceBetween,height:u.BlockSize.Full,borderStyle:u.BorderStyle.none,flexDirection:u.FlexDirection.Column,backgroundColor:u.BackgroundColor.backgroundAlternative},!G&&!z||V?o.default.createElement(m.default,{snapId:G&&V?null==e||null===(T=e.metadata)||void 0===T?void 0:T.dappOrigin:C.origin,onCancel:W}):o.default.createElement(v.default,{origin:I,iconUrl:N}),o.default.createElement(f.Box,{ref:G||z?undefined:L,onScroll:j,className:"snap-install__content",style:{overflowY:"auto",flex:!G&&!z&&"1"},paddingLeft:4,paddingRight:4},G&&o.default.createElement(f.Box,{display:u.Display.Flex,className:"snap-install__content__loader-container",flexDirection:u.FlexDirection.Column,alignItems:u.AlignItems.center,justifyContent:u.JustifyContent.center},o.default.createElement(p.default,null)),z&&o.default.createElement(y.default,{iconName:f.IconName.Warning,title:w("connectionFailed"),description:w("connectionFailedDescription",[o.default.createElement(f.Text,{as:"span",key:"1",fontWeight:u.FontWeight.Medium},U)]),error:t.error}),!z&&!G&&o.default.createElement(o.default.Fragment,null,o.default.createElement(f.Text,{variant:u.TextVariant.headingMd,paddingTop:4,paddingBottom:2,textAlign:"center"},w("installRequest")),o.default.createElement(f.Text,{className:"snap-install__content__permission-description",paddingBottom:4,paddingLeft:4,paddingRight:4,textAlign:u.TextAlign.Center},w("snapInstallRequest",[o.default.createElement(f.Text,{as:"span",key:"2",variant:u.TextVariant.bodyMd,fontWeight:u.FontWeight.Medium},U)])),o.default.createElement(f.Box,{display:u.Display.Flex,backgroundColor:u.BackgroundColor.backgroundDefault,paddingLeft:4,paddingRight:4,paddingTop:2,paddingBottom:2,borderRadius:u.BorderRadius.XL},o.default.createElement(g.default,{snapId:C.origin,snapName:U,permissions:t.permissions||{},connections:t.connections||{},onShowAllPermissions:()=>{R(!0)}})),o.default.createElement(f.Box,{className:"snap-install__scroll-button-area"},!P||D||B?null:o.default.createElement(f.AvatarIcon,{className:"snap-install__scroll-button","data-testid":"snap-install-scroll",iconName:f.IconName.Arrow2Down,backgroundColor:u.BackgroundColor.infoDefault,color:u.IconColor.primaryInverse,onClick:F,style:{cursor:"pointer"}})))),o.default.createElement(f.Box,{className:"snap-install__footer",display:u.Display.Flex,alignItems:u.AlignItems.center,flexDirection:u.FlexDirection.Column,backgroundColor:u.BackgroundColor.backgroundAlternative},o.default.createElement(s.PageContainerFooter,{cancelButtonType:"default",hideCancel:z,disabled:G||!z&&P&&!D,onCancel:W,cancelText:w("cancel"),onSubmit:()=>{!z&&J?M(!0):z?W():$()},submitText:w(z?"ok":G?"connect":"confirm")})),O&&o.default.createElement(l.default,{onCancel:()=>M(!1),onSubmit:$,warnings:q,snapName:U}))}_.propTypes={request:a.default.object.isRequired,requestState:a.default.object.isRequired,approveSnapInstall:a.default.func.isRequired,rejectSnapInstall:a.default.func.isRequired,targetSubjectMetadata:a.default.shape({iconUrl:a.default.string,name:a.default.string,origin:a.default.string.isRequired,sourceCode:a.default.string,version:a.default.string}).isRequired}}}},{package:"$root$",file:"ui/pages/permissions-connect/snaps/snap-install/snap-install.js"}],[7405,{"./snap-result":7406},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return o.default}});var a,o=(a=e("./snap-result"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"ui/pages/permissions-connect/snaps/snap-result/index.js"}],[7406,{"../../../../components/app/snaps/install-error/install-error":5867,"../../../../components/app/snaps/snap-authorship-header":5875,"../../../../components/component-library":6123,"../../../../components/ui/box/box":6501,"../../../../components/ui/page-container":6581,"../../../../components/ui/pulse-loader/pulse-loader":6590,"../../../../helpers/constants/design-system":6672,"../../../../hooks/useI18nContext":6799,"../../../../selectors":7568,"prop-types":4808,react:4992,"react-redux":4936},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=y;var a=h(e("prop-types")),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(a,i,r):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(e("react")),i=e("react-redux"),r=e("../../../../components/ui/page-container"),s=e("../../../../hooks/useI18nContext"),c=h(e("../../../../components/ui/box/box")),l=e("../../../../helpers/constants/design-system"),u=e("../../../../components/component-library"),d=h(e("../../../../components/ui/pulse-loader/pulse-loader")),p=h(e("../../../../components/app/snaps/install-error/install-error")),m=h(e("../../../../components/app/snaps/snap-authorship-header")),f=e("../../../../selectors");function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}function h(e){return e&&e.__esModule?e:{default:e}}function y({request:e,requestState:t,approveSnapResult:n,targetSubjectMetadata:a}){const g=(0,s.useI18nContext)(),h=(0,o.useCallback)(()=>n(e.metadata.id),[e,n]),y=!t.loading&&t.error,b=t.loading,{name:E}=(0,i.useSelector)(e=>(0,f.getSnapMetadata)(e,a.origin));return o.default.createElement(c.default,{className:"page-container snap-result",justifyContent:l.JustifyContent.spaceBetween,height:l.BlockSize.Full,borderStyle:l.BorderStyle.none,flexDirection:l.FlexDirection.Column,backgroundColor:l.BackgroundColor.backgroundAlternative},o.default.createElement(m.default,{snapId:a.origin,onCancel:h}),o.default.createElement(c.default,{className:"snap-result__content",paddingLeft:4,paddingRight:4,alignItems:l.AlignItems.center,flexDirection:l.FlexDirection.Column,backgroundColor:l.BackgroundColor.backgroundAlternative,height:l.BlockSize.Full,justifyContent:l.JustifyContent.center},b&&o.default.createElement(c.default,{className:"snap-result__content__loader-container",display:l.Display.Flex,flexDirection:l.FlexDirection.Column,alignItems:l.AlignItems.center,justifyContent:l.JustifyContent.center,height:l.BlockSize.Full},o.default.createElement(d.default,null)),!b&&!y&&function(e,t){let n;switch(e){case"wallet_installSnap":n=g("snapInstallSuccess");break;case"wallet_updateSnap":n=g("snapUpdateSuccess");break;default:n=g("snapResultSuccess")}return o.default.createElement(c.default,{flexDirection:l.FlexDirection.Column,alignItems:l.AlignItems.center,justifyContent:l.JustifyContent.center,height:l.BlockSize.Full,paddingTop:2,paddingBottom:2,backgroundColor:l.BackgroundColor.backgroundAlternative},o.default.createElement(u.AvatarIcon,{className:"snap-result__header__icon",iconName:u.IconName.Confirmation,size:u.AvatarIconSize.Xl,color:l.IconColor.successDefault,backgroundColor:l.BackgroundColor.successMuted}),o.default.createElement(u.Text,{fontWeight:l.FontWeight.Bold,textAlign:l.TextAlign.Center,variant:l.TextVariant.headingLg,paddingBottom:2,marginTop:4},n),o.default.createElement(u.Text,{textAlign:l.TextAlign.Center},g("snapResultSuccessDescription",[o.default.createElement(u.Text,{as:"span",key:"1",fontWeight:l.FontWeight.Medium},t)])))}(t.type,E),y&&function(e,n){let a,i;switch(e){case"wallet_installSnap":a=g("snapInstallationErrorTitle"),i=g("snapInstallationErrorDescription",[o.default.createElement(u.Text,{as:"span",key:"1",fontWeight:l.FontWeight.Medium},n)]);break;case"wallet_updateSnap":a=g("snapUpdateErrorTitle"),i=g("snapUpdateErrorDescription",[o.default.createElement(u.Text,{as:"span",key:"1",fontWeight:l.FontWeight.Medium},n)]);break;default:a=g("snapResultError")}return o.default.createElement(p.default,{error:t.error,title:a,description:i,iconName:u.IconName.Warning})}(t.type,E)),o.default.createElement(c.default,{className:"snap-result__footer",alignItems:l.AlignItems.center,flexDirection:l.FlexDirection.Column,backgroundColor:l.BackgroundColor.backgroundAlternative},o.default.createElement(r.PageContainerFooter,{hideCancel:!0,disabled:b,onSubmit:h,submitText:g("ok").toUpperCase()})))}y.propTypes={request:a.default.object.isRequired,requestState:a.default.object.isRequired,approveSnapResult:a.default.func.isRequired,targetSubjectMetadata:a.default.shape({iconUrl:a.default.string,name:a.default.string,origin:a.default.string.isRequired,sourceCode:a.default.string,version:a.default.string}).isRequired}}}},{package:"$root$",file:"ui/pages/permissions-connect/snaps/snap-result/snap-result.js"}],[7407,{"./snap-update":7408},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return o.default}});var a,o=(a=e("./snap-update"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"ui/pages/permissions-connect/snaps/snap-update/index.js"}],[7408,{"../../../../components/app/snaps/install-error/install-error":5867,"../../../../components/app/snaps/snap-authorship-header":5875,"../../../../components/app/snaps/snap-install-warning":5888,"../../../../components/app/snaps/update-snap-permission-list":5992,"../../../../components/component-library":6123,"../../../../components/ui/page-container":6581,"../../../../components/ui/pulse-loader/pulse-loader":6590,"../../../../helpers/constants/design-system":6672,"../../../../helpers/utils/util":6728,"../../../../hooks/useI18nContext":6799,"../../../../hooks/useScrollRequired":6818,"../../../../selectors":7568,"../util":7411,"prop-types":4808,react:4992,"react-redux":4936},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=v;var a=k(e("prop-types")),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=E(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(a,i,r):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(e("react")),i=e("react-redux"),r=e("../../../../components/ui/page-container"),s=e("../../../../hooks/useI18nContext"),c=k(e("../../../../components/app/snaps/snap-install-warning")),l=e("../../../../helpers/constants/design-system"),u=k(e("../../../../components/app/snaps/update-snap-permission-list")),d=e("../util"),p=k(e("../../../../components/ui/pulse-loader/pulse-loader")),m=k(e("../../../../components/app/snaps/install-error/install-error")),f=k(e("../../../../components/app/snaps/snap-authorship-header")),g=e("../../../../components/component-library"),h=e("../../../../hooks/useScrollRequired"),y=e("../../../../selectors"),b=e("../../../../helpers/utils/util");function E(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(E=function(e){return e?n:t})(e)}function k(e){return e&&e.__esModule?e:{default:e}}function v({request:e,requestState:t,approveSnapUpdate:n,rejectSnapUpdate:a,targetSubjectMetadata:E}){const k=(0,s.useI18nContext)(),[v,C]=(0,o.useState)(!1),[x,_]=(0,o.useState)(!1),{isScrollable:T,hasScrolledToBottom:w,scrollToBottom:S,ref:I,onScroll:N}=(0,h.useScrollRequired)([t]),O=(0,i.useSelector)(y.getSnapsMetadata),M=(0,o.useCallback)(()=>a(e.metadata.id),[e,a]),A=(0,o.useCallback)(()=>n(e.metadata.id),[e,n]),{name:B}=(0,i.useSelector)(e=>(0,y.getSnapMetadata)(e,E.origin)),R=t.approvedPermissions??{},P=t.unusedPermissions??{},D=t.newPermissions??{},F=t.approvedConnections??{},L=t.unusedConnections??{},j=t.newConnections??{},{newVersion:W}=t,$=t.loading,U=!$&&t.error,z=(0,d.getSnapInstallWarnings)(D,k,B,(0,b.getSnapName)(O)),G=z.length>0;return o.default.createElement(g.Box,{className:"snap-update",display:l.Display.Flex,justifyContent:l.JustifyContent.spaceBetween,height:l.BlockSize.Full,borderStyle:l.BorderStyle.none,flexDirection:l.FlexDirection.Column,backgroundColor:l.BackgroundColor.backgroundAlternative},o.default.createElement(f.default,{snapId:E.origin,onCancel:M}),o.default.createElement(g.Box,{ref:I,onScroll:N,className:"snap-update__content",style:{overflowY:"auto",flex:!$&&"1"},paddingLeft:4,paddingRight:4},!$&&!U&&o.default.createElement(g.Text,{paddingTop:4,paddingBottom:2,variant:l.TextVariant.headingMd,textAlign:"center"},k("updateRequest")),$&&o.default.createElement(g.Box,{className:"snap-update__content__loader-container",display:l.Display.Flex,flexDirection:l.FlexDirection.Column,alignItems:l.AlignItems.center,justifyContent:l.JustifyContent.center},o.default.createElement(p.default,null)),U&&o.default.createElement(m.default,{iconName:g.IconName.Warning,error:t.error,title:k("snapUpdateErrorTitle"),description:k("snapUpdateErrorDescription",[o.default.createElement(g.Text,{as:"span",key:"1",fontWeight:l.FontWeight.Medium},B)])}),!U&&!$&&o.default.createElement(o.default.Fragment,null,o.default.createElement(g.Text,{className:"snap-update__content__permission-description",paddingBottom:4,paddingLeft:4,paddingRight:4,textAlign:l.TextAlign.Center},k("snapUpdateRequest",[o.default.createElement(g.Text,{as:"span",key:"2",variant:l.TextVariant.bodyMd,fontWeight:l.FontWeight.Medium},B),o.default.createElement(g.Text,{as:"span",key:"3",variant:l.TextVariant.bodyMd,fontWeight:l.FontWeight.Medium},W)])),o.default.createElement(g.Box,{display:l.Display.Flex,backgroundColor:l.BackgroundColor.backgroundDefault,paddingLeft:4,paddingRight:4,paddingTop:2,paddingBottom:2,borderRadius:l.BorderRadius.XL},o.default.createElement(u.default,{approvedPermissions:R,revokedPermissions:P,newPermissions:D,approvedConnections:F,revokedConnections:L,newConnections:j,targetSubjectMetadata:E,showAllPermissions:()=>{_(!0)}})),o.default.createElement(g.Box,{className:"snap-update__scroll-button-area"},!T||w||x?null:o.default.createElement(g.AvatarIcon,{className:"snap-install__scroll-button","data-testid":"snap-update-scroll",iconName:g.IconName.Arrow2Down,backgroundColor:l.BackgroundColor.infoDefault,color:l.IconColor.primaryInverse,onClick:S,style:{cursor:"pointer"}})))),o.default.createElement(g.Box,{className:"snap-update__footer",display:l.Display.Flex,alignItems:l.AlignItems.center,flexDirection:l.FlexDirection.Column,backgroundColor:l.BackgroundColor.backgroundAlternative},o.default.createElement(r.PageContainerFooter,{cancelButtonType:"default",hideCancel:U,disabled:$||!U&&T&&!w,onCancel:M,cancelText:k("cancel"),onSubmit:()=>{!U&&G?C(!0):U?M():A()},submitText:k(U?"ok":"confirm")})),v&&o.default.createElement(c.default,{onCancel:()=>C(!1),onSubmit:A,snapName:B,warnings:z}))}v.propTypes={request:a.default.object.isRequired,requestState:a.default.object.isRequired,approveSnapUpdate:a.default.func.isRequired,rejectSnapUpdate:a.default.func.isRequired,targetSubjectMetadata:a.default.shape({iconUrl:a.default.string,name:a.default.string,origin:a.default.string.isRequired,sourceCode:a.default.string,version:a.default.string}).isRequired}}}},{package:"$root$",file:"ui/pages/permissions-connect/snaps/snap-update/snap-update.js"}],[7409,{"./snaps-connect":7410},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return o.default}});var a,o=(a=e("./snaps-connect"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"ui/pages/permissions-connect/snaps/snaps-connect/index.js"}]],[],{});