LavaPack.loadBundle([[2759,{"./constants.cjs":2754,"@metamask/auth-network-utils":1195,"@noble/ciphers/aes":2863,"@noble/ciphers/webcrypto":2866,"@noble/curves/secp256k1":2876,"@noble/hashes/sha3":2889,"@noble/hashes/utils":2891,buffer:3793},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){var r,s,a,i,o,c,u,l,d,f,h,p,m,g,b,y=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},w=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(n,"__esModule",{value:!0}),n.MetadataStore=n.MetadataStoreError=n.MetadataLockStatus=void 0;const v=e("@metamask/auth-network-utils"),E=e("@noble/ciphers/aes"),T=e("@noble/ciphers/webcrypto"),S=e("@noble/curves/secp256k1"),x=e("@noble/hashes/sha3"),P=e("@noble/hashes/utils"),k=e("./constants.cjs");var I;!function(e){e[e.FAILED=0]="FAILED",e[e.SUCCESS=1]="SUCCESS"}(I||(n.MetadataLockStatus=I={}));class A extends Error{constructor(e){super(e),this.name="MetadataStoreError",Object.setPrototypeOf(this,A.prototype)}}n.MetadataStoreError=A;n.MetadataStore=class{constructor(e){r.add(this),s.set(this,"srp-backup"),a.set(this,void 0),i.set(this,void 0),y(this,a,e.metadataEndpoint,"f"),y(this,i,e.fetchMetadataAccessCreds,"f")}async addSecretDataItem(e){try{const{secretData:t,encKey:n,authKeyPair:s}=e;await w(this,r,"m",o).call(this,{secretData:t,encKey:n,authKeyPair:s,metadataEndpoint:w(this,a,"f")})}catch(e){throw new A(`failed to add metadata: ${e.message}`)}}async batchAddSecretData(e){try{const{secretData:t,encKey:n,authKeyPair:s}=e;await w(this,r,"m",c).call(this,{secretData:t,encKey:n,authKeyPair:s,metadataEndpoint:w(this,a,"f")})}catch(e){throw new A(`failed to add batch metadata: ${e.message}`)}}async fetchAllSecretDataItems(e,t,n){try{return await w(this,r,"m",u).call(this,{encKey:e,authKeyPair:t,metadataEndpoint:w(this,a,"f"),itemId:n})}catch(e){throw new A(`failed to fetch metadata: ${e.message}`)}}async acquireMetadataLock(e){const{status:t,id:n}=await w(this,r,"m",l).call(this,w(this,a,"f"),e);if(t!==I.SUCCESS)throw new A("Failed to acquire metadata lock");if(!n)throw new A("Failed to acquire metadata lock. Missing lock id");return n}async releaseMetadataLock(e,t){const n=await w(this,r,"m",d).call(this,w(this,a,"f"),e,t);if(n!==I.SUCCESS)throw new A(`Failed to release metadata lock with id ${t}`);return n}},s=new WeakMap,a=new WeakMap,i=new WeakMap,r=new WeakSet,o=async function(e){try{const t=`${e.metadataEndpoint}/enc_account_data/set`,n=w(this,r,"m",g).call(this,e.secretData.data,e.encKey),s=await w(this,r,"m",f).call(this,{itemId:e.secretData.itemId,data:n},e.authKeyPair),a=JSON.stringify(s),i=await fetch(t,{headers:{"Content-Type":"application/json"},method:"POST",body:a});if(!i.ok){const e=await i.json();throw new Error(`HTTP error message: ${e.error}`)}return(await i.json()).success}catch(e){const t=e.message||"Unknown error";throw new A(`failed to upsert metadata: ${t}`)}},c=async function(e){const t=Array.isArray(e.encKey)?e.encKey:e.secretData.map(()=>e.encKey);if(t.length!==e.secretData.length)throw new A("encKey must be of same length as secretData");try{const n=`${e.metadataEndpoint}/enc_account_data/batch_set`,s=e.secretData.map((e,n)=>({data:w(this,r,"m",g).call(this,e.data,t[n]),itemId:e.itemId})),a=await w(this,r,"m",f).call(this,s,e.authKeyPair),i=await fetch(n,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(a)});if(!i.ok){const e=await i.json();throw new Error(`HTTP error message: ${e.error}`)}return(await i.json()).success}catch(e){const t=e.message||"Unknown error";throw new A(`failed to upsert metadata: ${t}`)}},u=async function(e){try{const n=`${e.metadataEndpoint}/enc_account_data/get`,s=await w(this,r,"m",h).call(this,e.authKeyPair,e.itemId),a=await fetch(n,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(s)});if(!a.ok){const e=await a.json();throw new Error(`HTTP error message: ${e.error}`)}const i=await a.json();if(!i.data)throw new A("Failed to fetch metadata");return i.data.filter((t,n)=>e.itemId?i.ids[n]===e.itemId:i.ids[n]!==k.PW_BACKUP_ITEM_ID).map((n,s)=>{const a=new Uint8Array(t.from(n,"base64"));return{itemId:i.ids[s],data:w(this,r,"m",b).call(this,a,e.encKey)}}).filter(e=>e.data.length>0)}catch(e){const t=e.message||"Unknown error";throw new A(`failed to fetch metadata: ${t}`)}},l=async function(e,t){try{const n=w(this,r,"m",p).call(this,t),s=`${e}/acquireLock`,a=await fetch(s,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(n)});if(!a.ok){const e=await a.json();throw new Error(`HTTP error message: ${e.error}`)}const i=await a.json();return{status:i.status,id:i.id}}catch(e){const t=e.message||"Unknown error";throw new A(`failed to acquire metadata lock: ${t}`)}},d=async function(e,t,n){try{const s=w(this,r,"m",p).call(this,t,n),a=`${e}/releaseLock`,i=await fetch(a,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(s)});if(!i.ok){const e=await i.json();throw new Error(`HTTP error message: ${e.error}`)}return(await i.json()).status}catch(e){const t=e.message||"Unknown error";throw new A(`failed to release metadata lock: ${t}`)}},f=async function(e,n){const a=Date.now().toString(),o=w(this,s,"f"),{metadataAccessToken:c}=await w(this,i,"f").call(this),u={timestamp:a,feature:o,authToken:c};Array.isArray(e)?u.data=e.map(e=>{const n=e.data;return{data:t.from(n).toString("base64"),itemId:e.itemId}}):(u.data=t.from(e.data).toString("base64"),u.itemId=e.itemId);const{pk:l,sk:d}=n,f=w(this,r,"m",m).call(this,u,d),h=(0,P.bytesToHex)(l);return{...u,signature:f,pubKey:h}},h=async function(e,t){const n=Date.now().toString(),a=w(this,s,"f"),{pk:o,sk:c}=e,{metadataAccessToken:u}=await w(this,i,"f").call(this),l={feature:a,timestamp:n,itemId:t,authToken:u},d=w(this,r,"m",m).call(this,l,c),f=(0,P.bytesToHex)(o);return{...l,pubKey:f,signature:d}},p=function(e,t){const{pk:n,sk:s}=e,a={timestamp:Date.now()};return{data:a,signature:w(this,r,"m",m).call(this,a,s,!0),key:(0,P.bytesToHex)(n),id:t}},m=function(e,t,n=!1){const r=(0,v.safeStringify)(e),s=(0,x.keccak_256)(r),a=S.secp256k1.sign(s,t);return n?a.toDERHex():a.toCompactHex()},g=function(e,t){return(0,T.managedNonce)(E.gcm)(t).encrypt(e)},b=function(e,t){return(0,T.managedNonce)(E.gcm)(t).decrypt(e)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/seedless-onboarding-controller>@metamask/toprf-secure-backup",file:"node_modules/@metamask/toprf-secure-backup/dist/metadata.cjs"}],[276,{"../../../shared/constants/app":5447,"../../../shared/constants/network":5465,"../../../shared/lib/four-byte":5528,"../../../shared/lib/network-utils":5537,"../../../shared/modules/hexstring-utils":5564,"@metamask/transaction-controller":2790,"@metamask/utils":2835,"bn.js":3732,lodash:4565,url:5374},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.BnMultiplyByFraction=function(e,t,n){const r=new s.default(t),a=new s.default(n);return e.mul(r).div(a)},n.addHexPrefix=void 0,n.addUrlProtocolPrefix=function(e){let t=e.trim();t.length&&!r.default.parse(t).protocol&&(t=`https://${t}`);if(null!==b(t))return t;return null},n.checkAlarmExists=function(e,t){return e.some(e=>e.name===t)},n.extractRpcDomain=function(e,t){if(!e)return"invalid";try{let n;try{n=new URL(e)}catch(t){if(e.includes("://"))return"invalid";try{n=new URL(`https://${e}`)}catch(e){return"invalid"}}if(t){if(t.has(n.hostname.toLowerCase()))return n.hostname.toLowerCase()}else if(E(n.hostname))return n.hostname.toLowerCase();return"private"}catch(e){return"invalid"}},n.formatTxMetaForRpcResult=function(e){const{r:t,s:n,v:r,hash:s,txReceipt:a,txParams:o}=e,{to:c,data:u,nonce:l,gas:d,from:f,value:h,gasPrice:p,accessList:m,maxFeePerGas:g,maxPriorityFeePerGas:b}=o,y={v:r,r:t,s:n,to:c,gas:d,from:f,hash:s,nonce:`${l}`,input:u||"0x",value:h||"0x0",accessList:m||null,blockHash:(null==a?void 0:a.blockHash)||null,blockNumber:(null==a?void 0:a.blockNumber)||null,transactionIndex:(null==a?void 0:a.transactionIndex)||null,type:g&&b?i.TransactionEnvelopeType.feeMarket:i.TransactionEnvelopeType.legacy};g&&b?(y.gasPrice=g,y.maxFeePerGas=g,y.maxPriorityFeePerGas=b):y.gasPrice=p;return y},n.formatValue=function(e,t){if(!y(e))return"";const n=`${e>=0?"+":""}${e.toFixed(2)}%`;return t?`(${n})`:n},n.generateRandomId=void 0,n.getBooleanFlag=function(e){return!0===e||"true"===e},n.getChainType=function(e){if(e===u.CHAIN_IDS.MAINNET)return"mainnet";if(u.TEST_CHAINS.includes(e))return"testnet";return"custom"},n.getConversionRatesForNativeAsset=function({conversionRates:e,chainId:t}){if(!e)return null;let n=null;return Object.entries(e).forEach(([e,r])=>{const{assetNamespace:s,chainId:a}=(0,o.parseCaipAssetType)(e);"slip44"===s&&a===t&&(n=r)}),n},n.getPlatform=n.getMethodDataName=n.getEnvironmentType=void 0,n.getValidUrl=b,n.hexToBn=function(e){return new s.default((0,l.stripHexPrefix)(e),16)},n.initializeRpcProviderDomains=async function(){if(v)return v;return v=(async()=>{try{const e=await(0,f.getSafeChainsListFromCacheOnly)();w=new Set;for(const t of e)if(t.rpc&&Array.isArray(t.rpc))for(const e of t.rpc)try{const t=new URL(e);w.add(t.hostname)}catch(e){continue}}catch(e){console.error("Error initializing known domains:",e),w=new Set}})(),v},n.isKnownDomain=E,n.isValidDate=n.isValidAmount=void 0,n.isWebUrl=function(e){const t=b(e);return null!==t&&("https:"===t.protocol||"http:"===t.protocol)},n.previousValueComparator=function(e,t){let n,r=!0;return s=>{try{return r?(r=!1,e(t??s,s)):e(n,s)}finally{n=s}}},n.shouldEmitDappViewedEvent=function(e){const t=m()===c.PLATFORM_FIREFOX;if(null===e||t)return!1;const n=e.slice(-4);return parseInt(n,16)%100==0};var r=h(e("url")),s=h(e("bn.js")),a=e("lodash"),i=e("@metamask/transaction-controller"),o=e("@metamask/utils"),c=e("../../../shared/constants/app"),u=e("../../../shared/constants/network"),l=e("../../../shared/modules/hexstring-utils"),d=e("../../../shared/lib/four-byte"),f=e("../../../shared/lib/network-utils");function h(e){return e&&e.__esModule?e:{default:e}}const p=(0,a.memoize)(e=>{const t=new URL(e);return"/popup.html"===t.pathname?c.ENVIRONMENT_TYPE_POPUP:["/home.html"].includes(t.pathname)?c.ENVIRONMENT_TYPE_FULLSCREEN:"/notification.html"===t.pathname?c.ENVIRONMENT_TYPE_NOTIFICATION:c.ENVIRONMENT_TYPE_BACKGROUND});n.getEnvironmentType=(e=window.location.href)=>p(e);const m=()=>{const{navigator:e}=window,{userAgent:t}=e;return t.includes("Firefox")?c.PLATFORM_FIREFOX:"brave"in e?c.PLATFORM_BRAVE:t.includes("Edg/")?c.PLATFORM_EDGE:t.includes("OPR")?c.PLATFORM_OPERA:c.PLATFORM_CHROME};n.getPlatform=m;n.addHexPrefix=e=>"string"!=typeof e||e.match(/^-?0x/u)?e:e.match(/^-?0X/u)?e.replace("0X","0x"):e.startsWith("-")?e.replace("-","-0x"):`0x${e}`;const g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";n.generateRandomId=()=>{let e="";for(let t=0;t<20;t++)e+=g.charAt(Math.floor(62*Math.random()));return e};function b(e){try{const t=new URL(e);return 0===t.hostname.length||0===t.pathname.length||t.hostname!==decodeURIComponent(t.hostname)?null:t}catch(e){return null}}n.isValidDate=e=>e instanceof Date;const y=e=>null!==e&&e!==undefined&&!Number.isNaN(e);n.isValidAmount=y;n.getMethodDataName=async(e,t,n,r,s)=>{if(!n||!t)return null;const a=n.slice(0,10);if(null!=e&&e[a])return null==e?void 0:e[a];const i=await(0,d.getMethodDataAsync)(a,t,s);return null!=i&&i.name&&r(a,i),i};let w=null,v=null;function E(e){var t;return(null===(t=w)||void 0===t?void 0:t.has(null==e?void 0:e.toLowerCase()))??!1}}}},{package:"$root$",file:"app/scripts/lib/util.ts"}],[2760,{"@noble/curves/abstract/modular":2871,"@noble/curves/abstract/utils":2873,"@noble/curves/secp256k1":2876},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.OPRF=n.generateRandomScalar=void 0;const r=e("@noble/curves/abstract/modular"),s=e("@noble/curves/abstract/utils"),a=e("@noble/curves/secp256k1");function i(){return(0,s.bytesToNumberBE)(a.secp256k1.utils.randomPrivateKey())}n.generateRandomScalar=i;const o=(0,r.Field)(a.secp256k1.CURVE.n);n.OPRF=class{static blind(e){const t=i(),n=(0,a.hashToCurve)(e).multiply(t);return{a:a.secp256k1.ProjectivePoint.fromAffine(n.toAffine()),r:t}}static blindEval(e,t){return t.multiply(e)}static async unblindAndHash(e,t,n,r){const s=o.inv(n),i=t.multiply(s);let c=a.secp256k1.CURVE.hash(new Uint8Array([...e,...i.toRawBytes()]));if(r){const e=c.length;c=await r.deriveKey(c.slice(0,e/2),c.slice(e/2))}return c}static async localEval(e,t,n){const{a:r,r:s}=this.blind(t),a=r.multiply(e);return this.unblindAndHash(t,a,s,n)}}}}},{package:"@metamask/seedless-onboarding-controller>@metamask/toprf-secure-backup",file:"node_modules/@metamask/toprf-secure-backup/dist/oprf.cjs"}],[2761,{"./constants.cjs":2754,"./errors.cjs":2755,"./utils.cjs":2765,"@metamask/auth-network-utils":1195,"@noble/hashes/sha3":2889,"@toruslabs/http-helpers":2766},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.resetRateLimits=n.validateThresholdResetRateLimitResponses=n.sendResetRateLimitRequest=void 0;const r=e("@metamask/auth-network-utils"),s=e("@noble/hashes/sha3"),a=e("@toruslabs/http-helpers"),i=e("./constants.cjs"),o=e("./errors.cjs"),c=e("./utils.cjs");n.sendResetRateLimitRequest=async(e,t)=>{const n=(0,a.generateJsonRPCObject)(i.JRPC_METHODS.RESET_RATE_LIMIT_REQUEST,t);return(0,c.postJRPCRequest)(e,n)};n.validateThresholdResetRateLimitResponses=(e,t)=>{const n=(0,r.filterCompletedRequests)(e);if(n.length<t)throw o.TOPRFError.insufficientValidResponses(`invalid reset rate limit results, expected ${t} but got ${n.length}`);return!0};n.resetRateLimits=async e=>{const{authTokens:t,nodeEndpointsMap:a,authConnectionId:i,groupedAuthConnectionId:o,userId:u,authPrivKey:l}=e,d=(0,c.mergeEndpointsWithAuthTokens)(t,a).map(async({endpoint:e,authToken:t})=>{const a=(0,r.toSnakeCaseKeys)({timestamp:Date.now(),nodeIndex:t.nodeIndex,action:"reset_ratelimit"}),d=(0,r.safeStringify)(a,{cmp:c.preserveKeyOrder}),f=(0,s.keccak_256)(d),h=(0,c.createEthereumSignature)(f,l),p=((e,t,n,r,s,a)=>({authToken:e,signature:t,signedData:n,verifier:a??r,verifierId:s}))(t.authToken,h,d,i,u,o);return(0,n.sendResetRateLimitRequest)(e,p)});return(0,r.Some)(d,async e=>(0,n.validateThresholdResetRateLimitResponses)(e,t.length))}}}},{package:"@metamask/seedless-onboarding-controller>@metamask/toprf-secure-backup",file:"node_modules/@metamask/toprf-secure-backup/dist/resetRateLimits.cjs"}],[2762,{"./constants.cjs":2754,"./utils.cjs":2765,"@metamask/auth-network-utils":1195,"@toruslabs/http-helpers":2766},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.changeKeyShares=n.createKeyChangeRequestParams=n.storeKeyShares=n.sendStoreKeySharesRequest=n.createStoreKeySharesRequestParams=void 0;const r=e("@metamask/auth-network-utils"),s=e("@toruslabs/http-helpers"),a=e("./constants.cjs"),i=e("./utils.cjs");n.createStoreKeySharesRequestParams=async e=>{const{nodeEndpointsMap:t,authTokens:n,authConnectionId:s,groupedAuthConnectionId:a,userId:o,keyShareIndex:c,oprfKey:u,authPubKey:l}=e,d=await(0,i.generateShareImportItems)(t,n,u,c);return{verifier:a??s,verifierId:o,pubKey:(0,r.uint8ArrayToHex)(l),shareImportItems:d}};n.sendStoreKeySharesRequest=async(e,t)=>{const n=(0,s.generateJsonRPCObject)(a.JRPC_METHODS.STORE_KEY_SHARES_REQUEST,(0,r.toSnakeCaseKeys)(t));return(0,i.postJRPCRequest)(e,n)};n.storeKeyShares=async e=>{const{authTokens:t,nodeEndpointsMap:s,authConnectionId:a,groupedAuthConnectionId:o,userId:c,keyShareIndex:u,oprfKey:l,authPubKey:d}=e,f=await(0,n.createStoreKeySharesRequestParams)({nodeEndpointsMap:s,authTokens:t,authConnectionId:a,groupedAuthConnectionId:o,userId:c,keyShareIndex:u,oprfKey:l,authPubKey:d}),h=s[(0,r.getProxyCoordinatorNodeIndex)(t.map(e=>e.nodeIndex),o??a,c)],p=await(0,n.sendStoreKeySharesRequest)(h,f);if((0,r.isJSONRPCError)(p.error)){throw(0,i.parseJsonRpcError)(p.error)}return p};n.createKeyChangeRequestParams=async e=>{const{nodeEndpointsMap:t,authTokens:n,keyShareIndex:s,newOprfKey:a,newAuthPubKey:o,oldAuthPrivKey:c,authConnectionId:u,groupedAuthConnectionId:l,userId:d}=e,f=await(0,i.generateShareImportItems)(t,n,a,s,c);return{pubKey:(0,r.uint8ArrayToHex)(o),shareImportItems:f,verifier:l??u,verifierId:d}};n.changeKeyShares=async e=>{const{nodeEndpointsMap:t,authTokens:s,keyShareIndex:a,newOprfKey:o,newAuthPubKey:c,oldAuthPrivKey:u,authConnectionId:l,groupedAuthConnectionId:d,userId:f}=e,h=await(0,n.createKeyChangeRequestParams)({nodeEndpointsMap:t,authTokens:s,keyShareIndex:a,newOprfKey:o,newAuthPubKey:c,oldAuthPrivKey:u,authConnectionId:l,groupedAuthConnectionId:d,userId:f}),p=t[(0,r.getProxyCoordinatorNodeIndex)(s.map(e=>e.nodeIndex),l,f)],m=await(0,n.sendStoreKeySharesRequest)(p,h);if((0,r.isJSONRPCError)(m.error)){throw(0,i.parseJsonRpcError)(m.error)}return m}}}},{package:"@metamask/seedless-onboarding-controller>@metamask/toprf-secure-backup",file:"node_modules/@metamask/toprf-secure-backup/dist/storeSharesRequest.cjs"}],[2763,{"./constants.cjs":2754,"./errors.cjs":2755,"./keyDerivation.cjs":2758,"./oprf.cjs":2760,"./utils.cjs":2765,"@metamask/auth-network-utils":1195,"@noble/curves/secp256k1":2876,"@toruslabs/http-helpers":2766},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.recoverTOPRFSeed=n.validateSeed=void 0;const r=e("@metamask/auth-network-utils"),s=e("@noble/curves/secp256k1"),a=e("@toruslabs/http-helpers"),i=e("./constants.cjs"),o=e("./errors.cjs"),c=e("./keyDerivation.cjs"),u=e("./oprf.cjs"),l=e("./utils.cjs");n.validateSeed=async(e,t,n,a)=>{let d=(0,l.checkRateLimitErrors)(n);if(d)throw o.TOPRFError.rateLimitExceeded(d);const f=(0,r.filterCompletedRequests)(n);if(f.length<i.TOPRF_EVAL_THRESHOLD)throw o.TOPRFError.insufficientValidResponses(`Insufficient toprf eval request results, expected ${i.TOPRF_EVAL_THRESHOLD} but got ${f.length}`);const h=(0,r.thresholdSame)(f.map(e=>e.result?.pubKey),i.TOPRF_EVAL_THRESHOLD);if(!h)throw o.TOPRFError.couldNotDeriveThresholdAuthPubKey();const p=f.reduce((e,t)=>{const n=t.result;if(!("object"==typeof(r=n)&&null!==r&&"blindedOutputX"in r&&"string"==typeof r.blindedOutputX&&"blindedOutputY"in r&&"string"==typeof r.blindedOutputY&&"nodeIndex"in r&&"number"==typeof r.nodeIndex&&"keyShareIndex"in r&&"number"==typeof r.keyShareIndex&&"pubKey"in r&&"string"==typeof r.pubKey))return e;var r;const{blindedOutputX:a,blindedOutputY:i,nodeIndex:o,keyShareIndex:c}=n;return e.push({blindedOutput:s.secp256k1.ProjectivePoint.fromAffine({x:BigInt(`0x${a}`),y:BigInt(`0x${i}`)}),nodeIndex:o,keyShareIndex:c}),e},[]);if(p.length<i.TOPRF_EVAL_THRESHOLD)throw o.TOPRFError.insufficientValidResponses(`Insufficient valid blinded outputs, expected: ${i.TOPRF_EVAL_THRESHOLD}, received: ${p.length}`);const m=await(async(e,t,n,a,o)=>{const l=(0,r.kCombinations)(e.length,i.TOPRF_EVAL_THRESHOLD);for(const i of l){const l=e.filter((e,t)=>i.includes(t)),d=l.map(e=>e.blindedOutput),f=l.map(e=>BigInt(e.nodeIndex)),h=(0,r.lagrangeInterpolationForPoints)(s.secp256k1.CURVE.n,d,f),p=await u.OPRF.unblindAndHash(t,h,n,o),{pk:m}=(0,c.deriveAuthenticationKeyPair)(p),g=s.secp256k1.ProjectivePoint.fromHex(m),b=s.secp256k1.ProjectivePoint.fromHex(a);if(g.equals(b))return{seed:p,keyShareIndex:l[0].keyShareIndex}}return null})(p,e,t,h,a);if(!m){if(d=(0,l.extractRateLimitErrorFromResults)(n),d)throw o.TOPRFError.rateLimitExceeded(d);throw o.TOPRFError.couldNotDeriveEncryptionKey()}return m};n.recoverTOPRFSeed=async e=>{const{authTokens:t,nodeEndpointsMap:s,authConnectionId:c,groupedAuthConnectionId:d,userId:f,userInput:h,keyDeriver:p}=e;if(t.length<i.TOPRF_EVAL_THRESHOLD)throw o.TOPRFError.insufficientAuthTokens(`At least ${i.TOPRF_EVAL_THRESHOLD} auth tokens are required.`);const{a:m,r:g}=u.OPRF.blind(h),b=(0,l.mergeEndpointsWithAuthTokens)(t,s).map(async({endpoint:e,authToken:t})=>{const n=((e,t,n,r,s,a)=>({authToken:e,shareCoefficient:"1",blindedInputX:t,blindedInputY:n,verifier:a??r,verifierId:s}))(t.authToken,m.x.toString(16),m.y.toString(16),c,f,d);return(async(e,t)=>{const n=(0,a.generateJsonRPCObject)(i.JRPC_METHODS.TOPRF_EVAL_REQUEST,t);return(0,l.postJRPCRequest)(e,n)})(e,n)});try{return await(0,r.Some)(b,async e=>(0,n.validateSeed)(h,g,e,p))}catch(e){throw(0,l.getTOPRFError)(e)}}}}},{package:"@metamask/seedless-onboarding-controller>@metamask/toprf-secure-backup",file:"node_modules/@metamask/toprf-secure-backup/dist/toprfEvalRequest.cjs"}],[2764,{"./authenticateRequest.cjs":2752,"./commitRequest.cjs":2753,"./constants.cjs":2754,"./errors.cjs":2755,"./getPubKeyRequest.cjs":2756,"./keyDerivation.cjs":2758,"./metadata.cjs":2759,"./oprf.cjs":2760,"./resetRateLimits.cjs":2761,"./storeSharesRequest.cjs":2762,"./toprfEvalRequest.cjs":2763,"./utils.cjs":2765,"@metamask/auth-network-utils":1195,"@noble/ciphers/utils":2865,"@noble/curves/abstract/utils":2873,"@noble/curves/secp256k1":2876,"@noble/hashes/utils":2891,"@toruslabs/fetch-node-details":2933,buffer:3793},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){var r,s,a,i,o,c,u,l,d,f,h,p,m=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},g=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(n,"__esModule",{value:!0}),n.ToprfSecureBackup=void 0;const b=e("@metamask/auth-network-utils"),y=e("@noble/ciphers/utils"),w=e("@noble/curves/abstract/utils"),v=e("@noble/curves/secp256k1"),E=e("@noble/hashes/utils"),T=e("@toruslabs/fetch-node-details"),S=e("./authenticateRequest.cjs"),x=e("./commitRequest.cjs"),P=e("./constants.cjs"),k=e("./errors.cjs"),I=e("./getPubKeyRequest.cjs"),A=e("./keyDerivation.cjs"),_=e("./metadata.cjs"),C=e("./oprf.cjs"),j=e("./resetRateLimits.cjs"),R=e("./storeSharesRequest.cjs"),O=e("./toprfEvalRequest.cjs"),B=e("./utils.cjs");class F{constructor(e){r.add(this),a.set(this,void 0),i.set(this,void 0),o.set(this,void 0),c.set(this,void 0),u.set(this,void 0),m(this,a,new T.NodeDetailManager({network:e.network}),"f"),m(this,i,e.nodeDetailsOverride,"f"),m(this,o,e.keyDeriver,"f"),m(this,c,e.fetchMetadataAccessCreds,"f"),g(this,r,"m",l).call(this).catch(()=>{})}async authenticate(e){const{nodeEndpoints:n,nodeEndpointsMap:s}=await g(this,r,"m",l).call(this);let a=v.secp256k1.utils.randomPrivateKey();try{const r=v.secp256k1.ProjectivePoint.fromPrivateKey(a),i=r.x.toString(16),o=r.y.toString(16);let c;e.groupedAuthConnectionId&&(c=(0,b.remove0x)((0,b.keccak256AndHexify)(t.from(e.idTokens[0],"utf8"))));const u=await(0,x.commitIdToken)({idToken:c??e.idTokens[0],authConnectionId:e.groupedAuthConnectionId??e.authConnectionId,sessionPubKeyX:i,sessionPubKeyY:o,endpoints:n}),l=u.reduce((e,t)=>(e[t.nodeIndex]=s[t.nodeIndex],e),{}),{authTokensData:d,isNewUser:f}=await(0,S.authenticateUser)({idToken:e.idTokens[0],authConnectionId:e.authConnectionId,userId:e.userId,sessionPrivateKey:a,nodeEndpointsMap:l,commitmentSignatures:u,groupedAuthConnectionId:e.groupedAuthConnectionId,hashedIdToken:c});return{nodeAuthTokens:d.map(e=>({authToken:e.authToken,nodeIndex:e.nodeIndex,nodePubKey:e.nodePubKey})),isNewUser:f}}finally{a.fill(0),a=null}}async createLocalKey(e){const{password:t,oprfKey:n=(0,C.generateRandomScalar)()}=e;let r=null;try{r=(0,w.utf8ToBytes)(t);const e=await C.OPRF.localEval(n,r,g(this,o,"f")),s=(0,A.deriveAuthenticationKeyPair)(e),a=(0,A.deriveEncryptionKey)(e);return{oprfKey:n,seed:e,authKeyPair:s,encKey:a,pwEncKey:(0,A.derivePwEncKey)(e)}}finally{r&&(r.fill(0),r=null)}}async persistLocalKey(e){const{nodeAuthTokens:t,oprfKey:n,authPubKey:s,authConnectionId:a,groupedAuthConnectionId:i,userId:o,keyShareIndex:c=P.FIRST_KEY_INDEX,oldAuthKeyPair:u}=e,{nodeEndpointsMap:d}=await g(this,r,"m",l).call(this),f=t.reduce((e,t)=>(e[t.nodeIndex]=d[t.nodeIndex],e),{});u?await(0,R.changeKeyShares)({nodeEndpointsMap:f,authConnectionId:a,groupedAuthConnectionId:i,userId:o,authTokens:t,keyShareIndex:c,newOprfKey:n,newAuthPubKey:s,oldAuthPrivKey:u.sk}):await(0,R.storeKeyShares)({nodeEndpointsMap:f,authConnectionId:a,groupedAuthConnectionId:i,userId:o,authTokens:t,keyShareIndex:c,oprfKey:n,authPubKey:s})}async createAndPersistEncKey(e){const{nodeAuthTokens:t,password:n,authConnectionId:r,userId:s}=e,{oprfKey:a,authKeyPair:i,encKey:o,pwEncKey:c}=await this.createLocalKey({password:n});return await this.persistLocalKey({nodeAuthTokens:t,oprfKey:a,authPubKey:i.pk,authConnectionId:r,userId:s}),{authKeyPair:{sk:i.sk,pk:i.pk},encKey:o,pwEncKey:c}}async recoverEncKey(e){const{nodeAuthTokens:t,password:n,authConnectionId:s,groupedAuthConnectionId:a,userId:i}=e;let c=null,u=null;try{const{nodeEndpointsMap:e}=await g(this,r,"m",l).call(this);c=(0,w.utf8ToBytes)(n);const{seed:d,keyShareIndex:f}=await(0,O.recoverTOPRFSeed)({authTokens:t,nodeEndpointsMap:e,authConnectionId:s,groupedAuthConnectionId:a,userId:i,userInput:c,keyDeriver:g(this,o,"f")});u=d;const h=(0,A.deriveAuthenticationKeyPair)(u),p=(0,A.deriveEncryptionKey)(u),m=(0,A.derivePwEncKey)(u),b=new Promise((n,r)=>{(0,j.resetRateLimits)({authTokens:t,nodeEndpointsMap:e,authConnectionId:s,groupedAuthConnectionId:a,userId:i,authPrivKey:h.sk}).then(()=>n()).catch(e=>{r(e)})});return{authKeyPair:h,encKey:p,pwEncKey:m,keyShareIndex:f,rateLimitResetResult:b}}finally{c&&(c.fill(0),c=null),u&&(u.fill(0),u=null)}}async changeEncKey(e){const{nodeAuthTokens:t,authConnectionId:n,groupedAuthConnectionId:s,userId:a,oldEncKey:i,oldPwEncKey:o,oldAuthKeyPair:c,newPassword:u,newKeyShareIndex:l,pregeneratedOprfKey:f}=e;if(!f&&!u)throw new Error("Either newPassword or pregeneratedOprfKey is required");if(f&&u)throw new Error("Only one of newPassword or pregeneratedOprfKey is allowed");const{oprfKey:h,authKeyPair:p,encKey:m,pwEncKey:b}=u?await this.createLocalKey({password:u}):f;let y,w,v;try{y=await g(this,r,"m",d).call(this),[w,v]=await Promise.all([y.acquireMetadataLock(c),y.acquireMetadataLock(p)]);const e=(await y.fetchAllSecretDataItems(i,c)).map(e=>({data:e.data}));if(!e||0===e.length)throw new Error("No existing data found to change key");const u=[{data:L("",o,c),itemId:P.PW_BACKUP_ITEM_ID},...e],f=[b,...e.map(()=>m)];return await y.batchAddSecretData({secretData:u,encKey:f,authKeyPair:p}),await this.persistLocalKey({nodeAuthTokens:t,oprfKey:h,authPubKey:p.pk,authConnectionId:n,groupedAuthConnectionId:s,userId:a,keyShareIndex:l,oldAuthKeyPair:c}),{authKeyPair:p,encKey:m,pwEncKey:b}}finally{if(y&&w&&v)try{await Promise.all([y.releaseMetadataLock(c,w),y.releaseMetadataLock(p,v)])}catch(e){console.error("Failed to release metadata lock:",e)}}}async addSecretDataItem(e){const t=await g(this,r,"m",d).call(this);await t.addSecretDataItem({...e,secretData:{data:e.secretData}})}async batchAddSecretDataItems(e){const t=await g(this,r,"m",d).call(this);let n;try{n=await t.acquireMetadataLock(e.authKeyPair),await t.batchAddSecretData({...e,secretData:e.secretData.map(e=>({data:e}))})}finally{if(n)try{await t.releaseMetadataLock(e.authKeyPair,n)}catch(e){console.error("Failed to release metadata lock:",e)}}}async fetchAllSecretDataItems(e){const t=await g(this,r,"m",d).call(this);return(await t.fetchAllSecretDataItems(e.decKey,e.authKeyPair)).map(e=>e.data)}async fetchAuthPubKey(e){const{nodeAuthTokens:t,authConnectionId:n,userId:s,groupedAuthConnectionId:a}=e,{nodeEndpointsMap:i}=await g(this,r,"m",l).call(this);return(0,I.getPubKey)({authTokens:t,nodeEndpointsMap:i,authConnectionId:n,userId:s,groupedAuthConnectionId:a})}async recoverPwEncKey(e){const{targetAuthPubKey:t,curPwEncKey:n,curAuthKeyPair:s,maxPwChainLength:a=P.MAX_PASSWORD_CHAIN_LENGTH}=e;let i={password:"",encKey:n,authKeyPair:s};for(let e=0;e<a;e++)try{if(i=await g(this,r,"m",h).call(this,{encKey:i.encKey,authKeyPair:i.authKeyPair}),(0,y.equalBytes)(i.authKeyPair.pk,t))return{pwEncKey:i.encKey}}catch(e){throw k.TOPRFError.couldNotFetchPassword(e.message)}throw k.TOPRFError.maxKeyChainLengthExceeded()}}function L(e,t,n){return(0,w.utf8ToBytes)(JSON.stringify({pw:e,encKey:(0,E.bytesToHex)(t),authKeyPair:{sk:n.sk.toString(),pk:(0,E.bytesToHex)(n.pk)}}))}n.ToprfSecureBackup=F,s=F,a=new WeakMap,i=new WeakMap,o=new WeakMap,c=new WeakMap,u=new WeakMap,r=new WeakSet,l=async function(){let e=g(this,i,"f")?.indexes,t=g(this,i,"f")?.pubKeys,n=g(this,i,"f")?.endpoints;if(e&&t&&Array.isArray(n))return g(s,s,"m",p).call(s,e,t,n),{nodeEndpoints:n,nodeEndpointsMap:(0,B.createNodeEndpointsMap)(n,e),nodeIndexes:e,nodePubkeys:t};const{torusNodeSSSEndpoints:r,torusIndexes:o,torusNodePub:c}=await g(this,a,"f").getNodeDetails({verifier:"auth-connection-id",verifierId:"user-id"});if(e??(e=o),t??(t=c),!Array.isArray(n)){if(!r){throw new Error("Failed to get node details")}n=n?r.map(e=>{const t=new URL(e);return t.pathname=n,t.href}):r}return g(s,s,"m",p).call(s,e,t,n),{nodeEndpoints:n,nodeEndpointsMap:(0,B.createNodeEndpointsMap)(n,e),nodeIndexes:e,nodePubkeys:t}},d=async function(){if(g(this,u,"f"))return g(this,u,"f");const{nodeEndpointsMap:e}=await g(this,r,"m",l).call(this),t=(await g(this,r,"m",f).call(this,e))[1],n=new _.MetadataStore({metadataEndpoint:t,fetchMetadataAccessCreds:g(this,c,"f")});return m(this,u,n,"f"),n},f=async function(e){const t={};return Object.entries(e).forEach(([e,n])=>{const r=new URL(n);t[e]=`${r.origin}/metadata`}),t},h=async function(e){const t=await g(this,r,"m",d).call(this),n=await t.fetchAllSecretDataItems(e.encKey,e.authKeyPair,P.PW_BACKUP_ITEM_ID);if(0===n.length)throw new Error("Failed to get previous password and keys");const s=function(e){const t=JSON.parse((0,y.bytesToUtf8)(e));return{pw:t.pw,encKey:(0,E.hexToBytes)(t.encKey),authKeyPair:{sk:BigInt(t.authKeyPair.sk),pk:(0,E.hexToBytes)(t.authKeyPair.pk)}}}(n[0].data);return{password:s.pw,encKey:s.encKey,authKeyPair:s.authKeyPair}},p=function(e,t,n){if(e.length!==t.length||e.length!==n.length){throw new Error("Node details arrays (indexes, pubKeys, endpoints) must have equal lengths")}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/seedless-onboarding-controller>@metamask/toprf-secure-backup",file:"node_modules/@metamask/toprf-secure-backup/dist/toprfSecureBackup.cjs"}],[2765,{"./constants.cjs":2754,"./errors.cjs":2755,"@metamask/auth-network-utils":1195,"@noble/curves/secp256k1":2876,"@noble/hashes/sha3":2889,"@toruslabs/eccrypto":2932,"@toruslabs/http-helpers":2766,"bn.js":3732,buffer:3793},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.preserveKeyOrder=n.getTOPRFError=n.parseJsonRpcError=n.mergeEndpointsWithAuthTokens=n.checkRateLimitErrors=n.extractRateLimitErrorFromResults=n.getMaxRateLimitError=n.createNodeEndpointsMap=n.generateShareImportItems=n.createKeyChangeShareImportItems=n.createNewUserShareImportItems=n.createKeyChangeProof=n.createEthereumSignature=n.prepareNodeShares=n.decryptAuthToken=n.postJRPCRequest=n.bigIntToBN=void 0;const s=e("@metamask/auth-network-utils"),a=e("@noble/curves/secp256k1"),i=e("@noble/hashes/sha3"),o=e("@toruslabs/eccrypto"),c=e("@toruslabs/http-helpers"),u=r(e("bn.js")),l=e("./constants.cjs"),d=e("./errors.cjs");n.bigIntToBN=e=>new u.default(e.toString());n.postJRPCRequest=async(e,t)=>{const n={...t};return n.params=(0,s.toSnakeCaseKeys)(t.params),(0,c.post)(e,n,{},{logTracingHeader:!1}).then(e=>(e.result&&(e.result=(0,s.toCamelCaseKeys)(e.result)),e)).catch(e=>({id:t.id,jsonrpc:"2.0",error:{code:-32e3,message:"Internal error",data:e}}))};n.decryptAuthToken=async(e,n)=>{const r=JSON.parse(e),a=(0,s.encParamsHexToBuf)(r.metadata),i=await(0,o.decrypt)(t.from(n),{...a,ciphertext:t.from(r.data,"hex")});return t.from(i).toString("base64")};const f=async(e,n)=>{const r=await(0,o.encrypt)(n,e,{padding:!0}),a=(0,s.encryptedParamsBufToHex)(r);return{data:t.from(r.ciphertext).toString("hex"),metadata:{...a}}};n.prepareNodeShares=(e,t)=>{const r=(0,n.bigIntToBN)(t),a=(0,s.getSecp256K1Curve)(),i=Object.keys(e).map(e=>parseInt(e,10)),o=((e,t,n,r)=>{const a=t.map(e=>new u.default(e)),i=r-1;return(0,s.generateRandomPolynomial)(e,i,n).generateShares(a)})(a,i,r,l.GENERATE_SHARE_THRESHOLD);return{shares:o,nodeIndexes:i}};n.createEthereumSignature=(e,t)=>{const n=t.toString(16).padStart(64,"0"),r=a.secp256k1.sign(e,n);return r.toCompactHex()+(r.recovery+27).toString(16).padStart(2,"0")};n.createKeyChangeProof=(e,r,a,o)=>{const c=Math.floor(Date.now()/1e3),u=(e=>e.toArrayLike(t,"be",32).toString("base64"))(e),l=(0,s.toSnakeCaseKeys)({shareData:u,keyShareIndex:r,nodeIndex:a,timestamp:c}),d=JSON.stringify(l),f=(0,i.keccak_256)(d);return{oldKeySignature:(0,n.createEthereumSignature)(f,o),signatureTimestamp:c}};n.createNewUserShareImportItems=async(e,n,r,s)=>Promise.all(r.map(async r=>{const{nodePubKey:a,nodeIndex:i,authToken:o}=r,c=new u.default(i).toString("hex",64),l=e[c].toJSON(),d=await f(t.from(l.share,"hex"),t.from(a,"hex")),h=await f(t.from(o,"base64"),t.from(a,"hex"));return{encryptedShare:JSON.stringify(d),encryptedAuthToken:JSON.stringify(h),keyShareIndex:s,nodeIndex:i,sssEndpoint:n[i]}}));n.createKeyChangeShareImportItems=async(e,r,s,a,i)=>Promise.all(s.map(async s=>{const{nodePubKey:o,nodeIndex:c,authToken:l}=s,d=new u.default(c).toString("hex",64),h=e[d].toJSON(),p=new u.default(h.share,16),m=(0,n.createKeyChangeProof)(p,a,c,i),g=await f(t.from(h.share,"hex"),t.from(o,"hex")),b=await f(t.from(l,"base64"),t.from(o,"hex"));return{encryptedShare:JSON.stringify(g),encryptedAuthToken:JSON.stringify(b),keyShareIndex:a,nodeIndex:c,sssEndpoint:r[c],...m}}));n.generateShareImportItems=async(e,t,r,s,...a)=>{const{shares:i}=(0,n.prepareNodeShares)(e,r),o=a[0];return o!==undefined?(0,n.createKeyChangeShareImportItems)(i,e,t,s,o):(0,n.createNewUserShareImportItems)(i,e,t,s)};function h(e,t){return e.remainingTime>t.remainingTime?e:t}function p(e){if(!(0,s.isJSONRPCError)(e)||-32602!==e.code||"Rate limit exceeded"!==e.message||!e.data)return undefined;const t=(0,s.toCamelCaseKeys)(e.data);return"string"!=typeof t?.message||"number"!=typeof t?.remainingTime||"number"!=typeof t?.lockTime||"number"!=typeof t?.guessCount?undefined:{message:t.message,remainingTime:t.remainingTime,lockTime:t.lockTime,guessCount:t.guessCount}}n.createNodeEndpointsMap=(e,t)=>t.reduce((t,n)=>(t[n]=e[n-1],t),{}),n.getMaxRateLimitError=h,n.extractRateLimitErrorFromResults=function(e){let t;for(const n of e)if(n.result?.lockTimeSeconds&&n.result.lockTimeSeconds>0&&n.result.guessCount){const e={remainingTime:n.result.lockTimeSeconds,message:"Rate limit exceeded",lockTime:n.result.lockTimeSeconds,guessCount:n.result.guessCount};t=t?h(t,e):e}return t},n.checkRateLimitErrors=function(e){const t=(0,s.filterErrorResponses)(e);let n;for(const e of t){const t=p(e.error);t&&(n=n?h(n,t):t)}return n},n.mergeEndpointsWithAuthTokens=function(e,t){return e.map(e=>{const n=t[e.nodeIndex];if(!n)throw d.TOPRFError.endpointNotFound(`Endpoint not found for node index ${e.nodeIndex}`);return{endpoint:n,authToken:e}})},n.parseJsonRpcError=function(e){if(e.code===l.JsonRpcErrorCodes.ErrorCodeInvalidParams){if(e.message.toLowerCase().includes("auth token expired"))return d.TOPRFError.authTokenExpired();if(e.message.toLowerCase().includes("invalid auth token"))return d.TOPRFError.invalidAuthToken();let t=e.message;if("string"==typeof e.data)t=e.data;else if(e.data){const n=(0,s.toCamelCaseKeys)(e.data);t=JSON.stringify(n)}return d.TOPRFError.jsonRpcError(t)}if(e.code===l.JsonRpcErrorCodes.ErrorCodeInternal){const t=e.data??e.message;return d.TOPRFError.jsonRpcError(t)}return d.TOPRFError.default(e.message)},n.getTOPRFError=function(e){return e instanceof s.SomeError&&e.predicate&&e.predicate instanceof d.TOPRFError?e.predicate:e},n.preserveKeyOrder=function(e,t){return 0}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/seedless-onboarding-controller>@metamask/toprf-secure-backup",file:"node_modules/@metamask/toprf-secure-backup/dist/utils.cjs"}],[2766,{"@babel/runtime/helpers/objectSpread2":520,deepmerge:3947,loglevel:4573},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=e("@babel/runtime/helpers/objectSpread2"),s=e("deepmerge"),a=e("loglevel");const i=a.getLogger("http-helpers");i.setLevel(a.levels.INFO);let o="torus-default",c="";const u="x-api-key",l="x-embed-host";let d=null;const f=[],h=[];async function p(e,t){let n=null;try{n=new URL(e)}catch{}if(d&&n&&(f.includes(n.origin)||h.includes(n.pathname))){return await d.startSpan({name:e,op:"http.client"},async()=>await fetch(e,t))}return fetch(e,t)}function m(){const e={};return o&&(e[u]=o),c&&(e[l]=c),e}function g(e){i.info(`Response: ${e.status} ${e.statusText}`),i.info(`Url: ${e.url}`)}const b=async(e,t)=>{let n=null;try{const r=new Promise((t,r)=>{n=setTimeout(()=>{r(new Error(`Timed out in ${e}ms`))},e)}),s=await Promise.race([t,r]);return null!=n&&clearTimeout(n),s}catch(e){throw null!=n&&clearTimeout(n),e}},y=async(e,t={},n={})=>{const a={mode:"cors",headers:{}};n.useAPIKey&&(a.headers=r(r({},a.headers),m())),t.method="GET";const i=s(a,t),o=await p(e,i);if(o.ok){const e=o.headers.get("content-type");return null!=e&&e.includes("application/json")?o.json():o.text()}throw g(o),o};n.clearAPIKey=function(){o="torus-default"},n.clearEmbedHost=function(){c=""},n.enableSentryTracing=function(e,t,n){d=e,f.push(...t),h.push(...n)},n.gatewayAuthHeader=u,n.gatewayEmbedHostHeader=l,n.generateJsonRPCObject=(e,t)=>({jsonrpc:"2.0",method:e,id:10,params:t}),n.get=y,n.getAPIKey=function(){return o},n.getEmbedHost=function(){return c},n.patch=async(e,t={},n={},a={})=>{const i={mode:"cors",headers:{"Content-Type":"application/json; charset=utf-8"}};a.useAPIKey&&(i.headers=r(r({},i.headers),m())),n.method="PATCH";const o=s(i,n);a.isUrlEncodedData?(o.body=t,"application/json; charset=utf-8"===o.headers["Content-Type"]&&delete o.headers["Content-Type"]):o.body=JSON.stringify(t);const c=await p(e,o);if(c.ok){const e=c.headers.get("content-type");return null!=e&&e.includes("application/json")?c.json():c.text()}throw g(c),c},n.post=(e,t={},n={},a={})=>{const o={mode:"cors",headers:{"Content-Type":"application/json; charset=utf-8"}};a.useAPIKey&&(o.headers=r(r({},o.headers),m())),n.method="POST";const c=s(o,n);return a.isUrlEncodedData?(c.body=t,"application/json; charset=utf-8"===c.headers["Content-Type"]&&delete c.headers["Content-Type"]):c.body=JSON.stringify(t),b(a.timeout||6e4,p(e,c).then(e=>{if(a.logTracingHeader&&function(e){const t=e.headers.get("x-web3-correlation-id");t&&i.info(`Request tracing with traceID = ${t}`)}(e),e.ok){const t=e.headers.get("content-type");return null!=t&&t.includes("application/json")?e.json():e.text()}throw g(e),e}))},n.promiseRace=(e,t,n=6e4)=>Promise.race([y(e,t),new Promise((e,t)=>{setTimeout(()=>{t(new Error("timed out"))},n)})]),n.promiseTimeout=b,n.put=async(e,t={},n={},a={})=>{const i={mode:"cors",headers:{"Content-Type":"application/json; charset=utf-8"}};a.useAPIKey&&(i.headers=r(r({},i.headers),m())),n.method="PUT";const o=s(i,n);a.isUrlEncodedData?(o.body=t,"application/json; charset=utf-8"===o.headers["Content-Type"]&&delete o.headers["Content-Type"]):o.body=JSON.stringify(t);const c=await p(e,o);if(c.ok){const e=c.headers.get("content-type");return null!=e&&e.includes("application/json")?c.json():c.text()}throw g(c),c},n.remove=async(e,t={},n={},a={})=>{const i={mode:"cors",headers:{"Content-Type":"application/json; charset=utf-8"}};a.useAPIKey&&(i.headers=r(r({},i.headers),m())),n.method="DELETE";const o=s(i,n);a.isUrlEncodedData?(o.body=t,"application/json; charset=utf-8"===o.headers["Content-Type"]&&delete o.headers["Content-Type"]):o.body=JSON.stringify(t);const c=await p(e,o);if(c.ok){const e=c.headers.get("content-type");return null!=e&&e.includes("application/json")?c.json():c.text()}throw g(c),c},n.setAPIKey=function(e){o=e},n.setEmbedHost=function(e){c=e},n.setLogLevel=function(e){i.setLevel(e)}}}},{package:"@metamask/seedless-onboarding-controller>@metamask/toprf-secure-backup>@toruslabs/http-helpers",file:"node_modules/@metamask/toprf-secure-backup/node_modules/@toruslabs/http-helpers/dist/lib.cjs/index.js"}],[2767,{"./api/accounts-api.cjs":2768,"./gas-flows/DefaultGasFeeFlow.cjs":2772,"./gas-flows/LineaGasFeeFlow.cjs":2773,"./gas-flows/OptimismLayer1GasFeeFlow.cjs":2774,"./gas-flows/RandomisedEstimationsGasFeeFlow.cjs":2776,"./gas-flows/ScrollLayer1GasFeeFlow.cjs":2777,"./gas-flows/TestGasFeeFlow.cjs":2778,"./helpers/AccountsApiRemoteTransactionSource.cjs":2779,"./helpers/GasFeePoller.cjs":2780,"./helpers/IncomingTransactionHelper.cjs":2781,"./helpers/MethodDataHelper.cjs":2782,"./helpers/MultichainTrackingHelper.cjs":2783,"./helpers/PendingTransactionTracker.cjs":2784,"./helpers/ResimulateHelper.cjs":2785,"./hooks/ExtraTransactionsPublishHook.cjs":2788,"./logger.cjs":2791,"./types.cjs":2792,"./utils/balance-changes.cjs":2793,"./utils/batch.cjs":2794,"./utils/eip7702.cjs":2795,"./utils/external-transactions.cjs":2796,"./utils/gas-fee-tokens.cjs":2798,"./utils/gas-fees.cjs":2799,"./utils/gas-flow.cjs":2800,"./utils/gas.cjs":2801,"./utils/history.cjs":2802,"./utils/layer1-gas-fee-flow.cjs":2803,"./utils/nonce.cjs":2804,"./utils/prepare.cjs":2805,"./utils/retry.cjs":2806,"./utils/swaps.cjs":2808,"./utils/transaction-type.cjs":2809,"./utils/utils.cjs":2810,"./utils/validation.cjs":2811,"@metamask/base-controller":1203,"@metamask/controller-utils":1321,"@metamask/eth-query":1854,"@metamask/network-controller":2211,"@metamask/nonce-tracker":2239,"@metamask/rpc-errors":2421,"@metamask/utils":2835,events:4105,lodash:4565,uuid:5398},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,a,i,o,c,u,l,d,f,h,p,m,g,b,y,w,v,E,T,S,x,P,k,I,A,_,C,j,R,O,B,F,L,M,N,D,G,H,U,q,K,V,$,z,W,J,X,Y,Z,Q,ee,te,ne,re,se,ae,ie,oe,ce,ue,le,de,fe,he,pe,me,ge,be,ye,we,ve,Ee,Te,Se,xe,Pe,ke,Ie,Ae,_e,Ce,je,Re,Oe,Be,Fe,Le,Me,Ne,De,Ge,He,Ue,qe,Ke,Ve,$e,ze,We,Je,Xe,Ye,Ze,Qe,et,tt=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},nt=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},rt=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.TransactionController=n.ApprovalState=n.SPEED_UP_RATE=n.CANCEL_RATE=void 0;const st=e("@metamask/base-controller"),at=e("@metamask/controller-utils"),it=rt(e("@metamask/eth-query")),ot=e("@metamask/network-controller"),ct=e("@metamask/nonce-tracker"),ut=e("@metamask/rpc-errors"),lt=e("@metamask/utils"),dt=e("events"),ft=e("lodash"),ht=e("uuid"),pt=e("./api/accounts-api.cjs"),mt=e("./gas-flows/DefaultGasFeeFlow.cjs"),gt=e("./gas-flows/LineaGasFeeFlow.cjs"),bt=e("./gas-flows/OptimismLayer1GasFeeFlow.cjs"),yt=e("./gas-flows/RandomisedEstimationsGasFeeFlow.cjs"),wt=e("./gas-flows/ScrollLayer1GasFeeFlow.cjs"),vt=e("./gas-flows/TestGasFeeFlow.cjs"),Et=e("./helpers/AccountsApiRemoteTransactionSource.cjs"),Tt=e("./helpers/GasFeePoller.cjs"),St=e("./helpers/IncomingTransactionHelper.cjs"),xt=e("./helpers/MethodDataHelper.cjs"),Pt=e("./helpers/MultichainTrackingHelper.cjs"),kt=e("./helpers/PendingTransactionTracker.cjs"),It=e("./helpers/ResimulateHelper.cjs"),At=e("./hooks/ExtraTransactionsPublishHook.cjs"),_t=e("./logger.cjs"),Ct=e("./types.cjs"),jt=e("./utils/balance-changes.cjs"),Rt=e("./utils/batch.cjs"),Ot=e("./utils/eip7702.cjs"),Bt=e("./utils/external-transactions.cjs"),Ft=e("./utils/gas.cjs"),Lt=e("./utils/gas-fee-tokens.cjs"),Mt=e("./utils/gas-fees.cjs"),Nt=e("./utils/gas-flow.cjs"),Dt=e("./utils/history.cjs"),Gt=e("./utils/layer1-gas-fee-flow.cjs"),Ht=e("./utils/nonce.cjs"),Ut=e("./utils/prepare.cjs"),qt=e("./utils/retry.cjs"),Kt=e("./utils/swaps.cjs"),Vt=e("./utils/transaction-type.cjs"),$t=e("./utils/utils.cjs"),zt=e("./utils/validation.cjs"),Wt={transactions:{persist:!0,anonymous:!1},transactionBatches:{persist:!0,anonymous:!1},methodData:{persist:!0,anonymous:!1},lastFetchedBlockNumbers:{persist:!0,anonymous:!1},submitHistory:{persist:!0,anonymous:!1}};n.CANCEL_RATE=1.1,n.SPEED_UP_RATE=1.1;const Jt="TransactionController";var Xt;!function(e){e.Approved="approved",e.NotApproved="not-approved",e.SkippedViaBeforePublishHook="skipped-via-before-publish-hook"}(Xt||(n.ApprovalState=Xt={}));class Yt extends st.BaseController{constructor(e){const{disableHistory:t,disableSendFlowHistory:n,disableSwaps:V,getCurrentAccountEIP1559Compatibility:$,getCurrentNetworkEIP1559Compatibility:z,getExternalPendingTransactions:W,getGasFeeEstimates:X,getNetworkClientRegistry:Y,getNetworkState:Z,getPermittedAccounts:Q,getSavedGasFees:ee,getSimulationConfig:ne,hooks:re,incomingTransactions:se={},isAutomaticGasFeeUpdateEnabled:ae,isEIP7702GasFeeTokensEnabled:ie,isFirstTimeInteractionEnabled:oe,isSimulationEnabled:ce,messenger:ue,pendingTransactions:le={},publicKeyEIP7702:de,securityProviderRequest:he,sign:pe,state:me,testGasFeeFlows:ge,trace:be,transactionHistoryLimit:ye=40}=e;super({name:Jt,metadata:Wt,messenger:ue,state:{methodData:{},transactions:[],transactionBatches:[],lastFetchedBlockNumbers:{},submitHistory:[],...me}}),r.add(this),s.set(this,void 0),a.set(this,void 0),i.set(this,void 0),o.set(this,new Set),c.set(this,void 0),u.set(this,void 0),l.set(this,void 0),d.set(this,void 0),f.set(this,void 0),h.set(this,void 0),p.set(this,void 0),m.set(this,void 0),g.set(this,void 0),b.set(this,void 0),y.set(this,void 0),w.set(this,void 0),v.set(this,void 0),E.set(this,void 0),T.set(this,void 0),S.set(this,new dt.EventEmitter),x.set(this,void 0),P.set(this,void 0),k.set(this,void 0),I.set(this,void 0),A.set(this,void 0),_.set(this,void 0),C.set(this,void 0),j.set(this,void 0),R.set(this,void 0),O.set(this,void 0),B.set(this,void 0),F.set(this,void 0),L.set(this,void 0),M.set(this,void 0),N.set(this,void 0),D.set(this,void 0),G.set(this,new Map),H.set(this,new Set),U.set(this,void 0),q.set(this,void 0),K.set(this,void 0),_e.set(this,()=>{nt(this,O,"f").checkForPendingTransactionAndStartPolling()}),this.messagingSystem=ue,tt(this,s,re?.afterAdd??(()=>Promise.resolve({})),"f"),tt(this,a,re?.afterSign??(()=>!0),"f"),tt(this,i,re?.afterSimulate??(()=>Promise.resolve({})),"f"),tt(this,c,re?.beforeCheckPendingTransaction??(()=>Promise.resolve(!0)),"f"),tt(this,u,re?.beforePublish??(()=>Promise.resolve(!0)),"f"),tt(this,l,re?.beforeSign??(()=>Promise.resolve({})),"f"),tt(this,f,re?.getAdditionalSignArguments??(()=>[]),"f"),tt(this,h,$??(()=>Promise.resolve(!0)),"f"),tt(this,p,z,"f"),tt(this,m,W??(()=>[]),"f"),tt(this,g,X||(()=>Promise.resolve({})),"f"),tt(this,b,Z,"f"),tt(this,y,Q,"f"),tt(this,w,ee??(e=>undefined),"f"),tt(this,v,ne??(()=>Promise.resolve({})),"f"),tt(this,T,se,"f"),tt(this,x,ae??(e=>!1),"f"),tt(this,P,ie??(()=>Promise.resolve(!1)),"f"),tt(this,k,oe??(()=>!0),"f"),tt(this,I,t??!1,"f"),tt(this,A,n??!1,"f"),tt(this,_,ce??(()=>!0),"f"),tt(this,C,V??!1,"f"),tt(this,B,le,"f"),tt(this,F,de,"f"),tt(this,L,re?.publish??(()=>Promise.resolve({transactionHash:undefined})),"f"),tt(this,M,re?.publishBatch,"f"),tt(this,N,he,"f"),tt(this,D,pe,"f"),tt(this,U,!0===ge,"f"),tt(this,q,be??((e,t)=>t?.()),"f"),tt(this,K,ye,"f");const we=e=>this.messagingSystem.call("NetworkController:findNetworkClientIdByChainId",e);tt(this,O,new Pt.MultichainTrackingHelper({findNetworkClientIdByChainId:we,getNetworkClientById:e=>this.messagingSystem.call("NetworkController:getNetworkClientById",e),getNetworkClientRegistry:Y,removePendingTransactionTrackerListeners:nt(this,r,"m",Re).bind(this),createNonceTracker:nt(this,r,"m",Ie).bind(this),createPendingTransactionTracker:nt(this,r,"m",Ae).bind(this),onNetworkStateChange:e=>{this.messagingSystem.subscribe("NetworkController:stateChange",e)}}),"f"),nt(this,O,"f").initialize(),tt(this,d,nt(this,r,"m",Me).call(this),"f"),tt(this,j,nt(this,r,"m",Ne).call(this),"f");const ve=new Tt.GasFeePoller({findNetworkClientIdByChainId:we,gasFeeFlows:nt(this,d,"f"),getGasFeeControllerEstimates:nt(this,g,"f"),getProvider:e=>nt(this,r,"m",fe).call(this,{networkClientId:e}),getTransactions:()=>this.state.transactions,getTransactionBatches:()=>this.state.transactionBatches,layer1GasFeeFlows:nt(this,j,"f"),messenger:this.messagingSystem,onStateChange:e=>{this.messagingSystem.subscribe("TransactionController:stateChange",e)}});ve.hub.on("transaction-updated",nt(this,r,"m",Ue).bind(this)),ve.hub.on("transaction-batch-updated",nt(this,r,"m",qe).bind(this)),tt(this,R,new xt.MethodDataHelper({getProvider:e=>nt(this,r,"m",fe).call(this,{networkClientId:e}),getState:()=>this.state.methodData}),"f"),nt(this,R,"f").hub.on("update",({fourBytePrefix:e,methodData:t})=>{this.update(n=>{n.methodData[e]=t})}),tt(this,E,new St.IncomingTransactionHelper({client:nt(this,T,"f").client,getCurrentAccount:()=>nt(this,r,"m",Ve).call(this),getLocalTransactions:()=>this.state.transactions,includeTokenTransfers:nt(this,T,"f").includeTokenTransfers,isEnabled:nt(this,T,"f").isEnabled,messenger:this.messagingSystem,remoteTransactionSource:new Et.AccountsApiRemoteTransactionSource,trimTransactions:nt(this,r,"m",te).bind(this),updateTransactions:nt(this,T,"f").updateTransactions}),"f"),nt(this,r,"m",je).call(this,nt(this,E,"f")),this.messagingSystem.subscribe("TransactionController:stateChange",nt(this,_e,"f")),new It.ResimulateHelper({simulateTransaction:nt(this,r,"m",He).bind(this),onTransactionsUpdate:e=>{this.messagingSystem.subscribe("TransactionController:stateChange",e,e=>e.transactions)},getTransactions:()=>this.state.transactions}),nt(this,r,"m",J).call(this),nt(this,_e,"f").call(this),nt(this,r,"m",Je).call(this)}destroy(){nt(this,r,"m",Ce).call(this)}async handleMethodData(e,t){return nt(this,R,"f").lookup(e,t)}async addTransactionBatch(e){const{blockTracker:t}=this.messagingSystem.call("NetworkController:getNetworkClientById",e.networkClientId);return await(0,Rt.addTransactionBatch)({addTransaction:this.addTransaction.bind(this),getChainId:nt(this,r,"m",ue).bind(this),getEthQuery:e=>nt(this,r,"m",de).call(this,{networkClientId:e}),getGasFeeEstimates:nt(this,g,"f"),getInternalAccounts:nt(this,r,"m",$e).bind(this),getSimulationConfig:nt(this,v,"f").bind(this),getPendingTransactionTracker:e=>nt(this,r,"m",Ae).call(this,{provider:nt(this,r,"m",fe).call(this,{networkClientId:e}),blockTracker:t,chainId:nt(this,r,"m",ue).call(this,e),networkClientId:e}),getTransaction:e=>nt(this,r,"m",ie).call(this,e),isSimulationEnabled:nt(this,_,"f"),messenger:this.messagingSystem,publishBatchHook:nt(this,M,"f"),publicKeyEIP7702:nt(this,F,"f"),publishTransaction:(e,t)=>nt(this,r,"m",Q).call(this,e,t),request:e,update:this.update.bind(this),updateTransaction:nt(this,r,"m",De).bind(this)})}async isAtomicBatchSupported(e){return(0,Rt.isAtomicBatchSupported)({...e,getEthQuery:e=>nt(this,r,"m",de).call(this,{chainId:e}),messenger:this.messagingSystem,publicKeyEIP7702:nt(this,F,"f")})}async addTransaction(e,t){(0,_t.projectLogger)("Adding transaction",e,t);const{actionId:n,assetsFiatValues:a,batchId:i,deviceConfirmedOn:o,disableGasBuffer:c,isGasFeeIncluded:u,method:l,nestedTransactions:d,networkClientId:f,origin:h,publishHook:p,requireApproval:m,securityAlertResponse:g,sendFlowHistory:b,swaps:w={},traceContext:v,type:E}=t;if(e=(0,$t.normalizeTransactionParams)(e),!nt(this,O,"f").has(f))throw new Error(`Network client not found - ${f}`);const T=nt(this,r,"m",ue).call(this,f),S=nt(this,r,"m",de).call(this,{networkClientId:f}),x=h===undefined?undefined:await(nt(this,y,"f")?.call(this,h)),P=nt(this,r,"m",$e).call(this);await(0,zt.validateTransactionOrigin)({data:e.data,from:e.from,internalAccounts:P,origin:h,permittedAddresses:x,txParams:e,type:E});const k=(0,Ot.getDelegationAddress)(e.from,S).catch(()=>undefined),_=await nt(this,r,"m",Ee).call(this,f);(0,zt.validateTxParams)(e,_,T),e.type||(0,$t.setEnvelopeType)(e,_);if(i?.length&&this.state.transactions.some(e=>e.batchId?.toLowerCase()===i?.toLowerCase())&&h&&h!==at.ORIGIN_METAMASK)throw new ut.JsonRpcError(zt.ErrorCode.DuplicateBundleId,"Batch ID already exists");const j=nt(this,r,"m",pe).call(this,e,h),R=E??(await(0,Vt.determineTransactionType)(e,S)).type,B=await k,F=nt(this,r,"m",ye).call(this,n);let L=F?(0,ft.cloneDeep)(F):{actionId:n,assetsFiatValues:a,batchId:i,chainId:T,dappSuggestedGasFees:j,delegationAddress:B,deviceConfirmedOn:o,disableGasBuffer:c,id:(0,ht.v1)(),isGasFeeIncluded:u,isFirstTimeInteraction:undefined,nestedTransactions:d,networkClientId:f,origin:h,securityAlertResponse:g,status:Ct.TransactionStatus.unapproved,time:Date.now(),txParams:e,type:R,userEditedGasLimit:!1,verifiedOnBlockchain:!1};const{updateTransaction:M}=await nt(this,s,"f").call(this,{transactionMeta:L});if(M&&((0,_t.projectLogger)("Updating transaction using afterAdd hook"),L.txParamsOriginal=(0,ft.cloneDeep)(L.txParams),M(L)),await nt(this,q,"f").call(this,{name:"Estimate Gas Properties",parentContext:v},e=>nt(this,r,"m",W).call(this,L,{traceContext:e})),!F){if(l&&nt(this,N,"f")){const e=await nt(this,N,"f").call(this,L,l);L.securityProviderResponse=e}nt(this,A,"f")||(L.sendFlowHistory=b??[]),nt(this,I,"f")||(L=(0,Dt.addInitialHistorySnapshot)(L)),L=(0,Kt.updateSwapsTransaction)(L,R,w,{isSwapsDisabled:nt(this,C,"f"),cancelTransaction:nt(this,r,"m",ee).bind(this),messenger:this.messagingSystem}),nt(this,r,"m",z).call(this,L),!1!==m?(nt(this,r,"m",He).call(this,L,{traceContext:v}).catch(e=>{throw(0,_t.projectLogger)("Error while updating simulation data",e),e}),nt(this,r,"m",Ge).call(this,L,{traceContext:v}).catch(e=>{(0,_t.projectLogger)("Error while updating first interaction properties",e)})):(0,_t.projectLogger)("Skipping simulation & first interaction update as approval not required"),this.messagingSystem.publish(`${Jt}:unapprovedTransactionAdded`,L)}return{result:nt(this,r,"m",Y).call(this,L,{actionId:n,isExisting:Boolean(F),publishHook:p,requireApproval:m,traceContext:v}),transactionMeta:L}}startIncomingTransactionPolling(){nt(this,E,"f").start()}stopIncomingTransactionPolling(){nt(this,E,"f").stop()}async updateIncomingTransactions({tags:e}={}){await nt(this,E,"f").update({tags:e})}async stopTransaction(e,t,{estimatedBaseFee:s,actionId:a}={}){await nt(this,r,"m",V).call(this,{actionId:a,estimatedBaseFee:s,gasValues:t,label:"cancel",rate:n.CANCEL_RATE,transactionId:e,transactionType:Ct.TransactionType.cancel,prepareTransactionParams:e=>{delete e.data,e.to=e.from,e.value="0x0"},afterSubmit:e=>{this.messagingSystem.publish(`${Jt}:transactionFinished`,e),nt(this,S,"f").emit(`${e.id}:finished`,e)}})}async speedUpTransaction(e,t,{actionId:s,estimatedBaseFee:a}={}){await nt(this,r,"m",V).call(this,{actionId:s,estimatedBaseFee:a,gasValues:t,label:"speed up",rate:n.SPEED_UP_RATE,transactionId:e,transactionType:Ct.TransactionType.retry,afterSubmit:e=>{this.messagingSystem.publish(`${Jt}:speedupTransactionAdded`,e)}})}async estimateGas(e,t,{ignoreDelegationSignatures:n}={}){const s=nt(this,r,"m",de).call(this,{networkClientId:t}),{estimatedGas:a,simulationFails:i}=await(0,Ft.estimateGas)({chainId:nt(this,r,"m",ue).call(this,t),ethQuery:s,ignoreDelegationSignatures:n,isSimulationEnabled:nt(this,_,"f").call(this),getSimulationConfig:nt(this,v,"f"),messenger:this.messagingSystem,txParams:e});return{gas:a,simulationFails:i}}async estimateGasBuffered(e,t,n){const s=nt(this,r,"m",de).call(this,{networkClientId:n}),{blockGasLimit:a,estimatedGas:i,simulationFails:o}=await(0,Ft.estimateGas)({chainId:nt(this,r,"m",ue).call(this,n),ethQuery:s,isSimulationEnabled:nt(this,_,"f").call(this),getSimulationConfig:nt(this,v,"f"),messenger:this.messagingSystem,txParams:e});return{gas:(0,Ft.addGasBuffer)(i,a,t),simulationFails:o}}updateTransaction(e,t){const{id:n}=e;nt(this,r,"m",De).call(this,{transactionId:n,note:t},()=>({...e}))}updateSecurityAlertResponse(e,t){if(!t)throw new Error("updateSecurityAlertResponse: securityAlertResponse should not be null");const n=nt(this,r,"m",ae).call(this,e);if(!n)throw new Error("Cannot update security alert response as no transaction metadata found");const s={...n,securityAlertResponse:t};this.updateTransaction(s,`${Jt}:updatesecurityAlertResponse - securityAlertResponse updated`)}wipeTransactions({address:e,chainId:t}={}){if(!t&&!e)return void this.update(e=>{e.transactions=[]});const n=this.state.transactions.filter(({chainId:n,txParams:r,type:s})=>{if(!(!t||t===n))return!0;return!(!e||r.from?.toLowerCase()===e.toLowerCase()||s===Ct.TransactionType.incoming&&r.to?.toLowerCase()===e.toLowerCase())});this.update(e=>{e.transactions=nt(this,r,"m",te).call(this,n)})}async confirmExternalTransaction(e,t,n){const s=nt(this,r,"m",me).call(this,e);try{const e=s.id,a={...s,status:Ct.TransactionStatus.confirmed,txReceipt:t};n&&(a.baseFeePerGas=n),nt(this,r,"m",ge).call(this,e),this.updateTransaction(a,`${Jt}:confirmExternalTransaction - Add external transaction`),nt(this,r,"m",Se).call(this,a),nt(this,r,"m",ke).call(this,a).catch(e=>{throw(0,_t.projectLogger)("Error while updating post balance",e),e}),this.messagingSystem.publish(`${Jt}:transactionConfirmed`,a)}catch(e){console.error("Failed to confirm external transaction",e)}}updateTransactionSendFlowHistory(e,t,n){if(nt(this,A,"f"))throw new Error("Send flow history is disabled for the current transaction controller");const s=nt(this,r,"m",ae).call(this,e);if(!s)throw new Error("Cannot update send flow history as no transaction metadata found");(0,$t.validateIfTransactionUnapproved)(s,"updateTransactionSendFlowHistory");const a=s.sendFlowHistory??[];if(t===a.length){const e={...s,sendFlowHistory:[...a,...n]};this.updateTransaction(e,`${Jt}:updateTransactionSendFlowHistory - sendFlowHistory updated`)}return nt(this,r,"m",ae).call(this,e)}updateTransactionGasFees(e,{defaultGasEstimates:t,estimateUsed:n,estimateSuggested:s,gas:a,gasLimit:i,gasPrice:o,maxPriorityFeePerGas:c,maxFeePerGas:u,originalGasEstimate:l,userEditedGasLimit:d,userFeeLevel:f}){const h=nt(this,r,"m",ae).call(this,e);if(!h)throw new Error("Cannot update transaction as no transaction metadata found");(0,$t.validateIfTransactionUnapproved)(h,"updateTransactionGasFees");const p=(0,ft.cloneDeep)(h),m=h.gasFeeEstimates,g=nt(this,x,"f").call(this,h),b=f,y=Object.values(Ct.GasFeeEstimateLevel).includes(b),w=m&&g&&y;w&&(0,Tt.updateTransactionGasEstimates)({txMeta:p,userFeeLevel:b});const v={gas:a,gasLimit:i};w?Object.assign(v,{gasPrice:p.txParams.gasPrice,maxPriorityFeePerGas:p.txParams.maxPriorityFeePerGas,maxFeePerGas:p.txParams.maxFeePerGas}):Object.assign(v,{gasPrice:o,maxPriorityFeePerGas:c,maxFeePerGas:u});const E={txParams:(0,ft.pickBy)(v),defaultGasEstimates:t,estimateUsed:n,estimateSuggested:s,originalGasEstimate:l,userEditedGasLimit:d,userFeeLevel:b},T=(0,ft.pickBy)(E);return nt(this,r,"m",De).call(this,{transactionId:e,note:`${Jt}:updateTransactionGasFees - gas values updated`,skipResimulateCheck:!0},e=>{const{txParams:t,...n}=T;Object.assign(e,n),t&&Object.assign(e.txParams,t)}),nt(this,r,"m",ae).call(this,e)}updatePreviousGasParams(e,{gasLimit:t,maxFeePerGas:n,maxPriorityFeePerGas:s}){const a=nt(this,r,"m",ae).call(this,e);if(!a)throw new Error("Cannot update transaction as no transaction metadata found");(0,$t.validateIfTransactionUnapproved)(a,"updatePreviousGasParams");const i={previousGas:{gasLimit:t,maxFeePerGas:n,maxPriorityFeePerGas:s}};i.previousGas=(0,ft.pickBy)(i.previousGas);const o=(0,ft.merge)({},a,i);return this.updateTransaction(o,`${Jt}:updatePreviousGasParams - Previous gas values updated`),nt(this,r,"m",ae).call(this,e)}async getNonceLock(e,t){return nt(this,O,"f").getNonceLock(e,t)}async updateEditableParams(e,{containerTypes:t,data:n,from:s,gas:a,gasPrice:i,maxFeePerGas:o,maxPriorityFeePerGas:c,to:u,updateType:l,value:d}){const f=nt(this,r,"m",ae).call(this,e);if(!f)throw new Error("Cannot update editable params as no transaction metadata found");(0,$t.validateIfTransactionUnapproved)(f,"updateEditableParams");const h={txParams:{data:n,from:s,to:u,value:d,gas:a,gasPrice:i,maxFeePerGas:o,maxPriorityFeePerGas:c}};h.txParams=(0,ft.pickBy)(h.txParams);const p=(0,ft.merge)({},f,h),{networkClientId:m}=f,g=nt(this,r,"m",fe).call(this,{networkClientId:m}),b=new it.default(g);if(!1!==l){const{type:e}=await(0,Vt.determineTransactionType)(p.txParams,b);p.type=e}return t&&(p.containerTypes=t),await(0,Gt.updateTransactionLayer1GasFee)({layer1GasFeeFlows:nt(this,j,"f"),messenger:this.messagingSystem,provider:g,transactionMeta:p}),this.updateTransaction(p,`Update Editable Params for ${e}`),nt(this,r,"m",ae).call(this,e)}setTransactionActive(e,t){if(!nt(this,r,"m",ae).call(this,e))throw new Error(`Transaction with id ${e} not found`);nt(this,r,"m",De).call(this,{transactionId:e,note:"TransactionController#setTransactionActive - Transaction isActive updated",skipHistory:!0,skipValidation:!0,skipResimulateCheck:!0},e=>{e.isActive=t})}async approveTransactionsWithSameNonce(e=[],{hasNonce:t}={}){if((0,_t.projectLogger)("Approving transactions with same nonce",{transactions:e}),0===e.length)return"";const n=e[0],{chainId:s}=n,a=nt(this,r,"m",le).call(this,{chainId:s}),i=(0,Ut.prepareTransaction)(s,n),c=(0,Ut.serializeTransaction)(i);if(nt(this,o,"f").has(c))return"";let u,l;nt(this,o,"f").add(c);try{const s=n.from;l=!0!==t?await this.getNonceLock(s,a):undefined;const i=l?(0,lt.add0x)(l.nextNonce.toString(16)):n.nonce;l&&(0,_t.projectLogger)("Using nonce from nonce tracker",i,l.nonceDetails),u=await Promise.all(e.map(e=>(e.nonce=i,nt(this,r,"m",$).call(this,e.chainId,e))))}catch(e){throw(0,_t.projectLogger)("Error while signing transactions with same nonce",e),e}finally{l?.releaseLock(),nt(this,o,"f").delete(c)}return u}updateCustodialTransaction(e){const{transactionId:t,errorMessage:n,hash:s,status:a,gasLimit:i,gasPrice:o,maxFeePerGas:c,maxPriorityFeePerGas:u,nonce:l,type:d}=e,f=nt(this,r,"m",ae).call(this,t);if(!f)throw new Error("Cannot update custodial transaction as no transaction metadata found");if(a&&![Ct.TransactionStatus.submitted,Ct.TransactionStatus.signed,Ct.TransactionStatus.failed].includes(a))throw new Error(`Cannot update custodial transaction with status: ${a}`);const h=(0,ft.merge)({},f,(0,ft.pickBy)({hash:s,status:a}));return h.status===Ct.TransactionStatus.submitted&&(h.submittedTime=(new Date).getTime()),h.status===Ct.TransactionStatus.failed&&(h.error=(0,$t.normalizeTxError)(new Error(n))),h.txParams=(0,ft.merge)({},h.txParams,(0,ft.pickBy)({gasLimit:i,gasPrice:o,maxFeePerGas:c,maxPriorityFeePerGas:u,nonce:l,type:d})),d===Ct.TransactionEnvelopeType.legacy&&(delete h.txParams.maxFeePerGas,delete h.txParams.maxPriorityFeePerGas),this.updateTransaction(h,`${Jt}:updateCustodialTransaction - Custodial transaction updated`),a&&[Ct.TransactionStatus.submitted,Ct.TransactionStatus.failed].includes(a)&&(this.messagingSystem.publish(`${Jt}:transactionFinished`,h),nt(this,S,"f").emit(`${h.id}:finished`,h)),h}getTransactions({initialList:e,limit:t,searchCriteria:n={}}={}){const r=(0,ft.mapValues)(n,e=>"function"==typeof e?e:t=>t===e),s=e??this.state.transactions,a=(0,ft.sortBy)((0,ft.pickBy)(s,e=>{for(const[t,n]of Object.entries(r))if(t in e.txParams){if(!1===n(e.txParams[t]))return!1}else if(!1===n(e[t]))return!1;return!0}),"time");if(t!==undefined){const e=new Set,n=[];for(let r=a.length-1;r>-1;r--){const s=a[r],{nonce:i}=s.txParams;if(!e.has(i)){if(!(e.size<t))continue;e.add(i)}n.unshift(s)}return n}return a}async estimateGasFee({transactionParams:e,chainId:t,networkClientId:n}){const{id:r,provider:s}=nt(this,O,"f").getNetworkClient({chainId:t,networkClientId:n}),a={txParams:e,chainId:t,networkClientId:r},i=(0,Nt.getGasFeeFlow)(a,nt(this,d,"f"),this.messagingSystem),o=new it.default(s),c=await nt(this,g,"f").call(this,{networkClientId:r});return i.getGasFees({ethQuery:o,gasFeeControllerData:c,messenger:this.messagingSystem,transactionMeta:a})}async getLayer1GasFee({transactionParams:e,chainId:t,networkClientId:n}){const s=nt(this,r,"m",fe).call(this,{chainId:t,networkClientId:n});return await(0,Gt.getTransactionLayer1GasFee)({layer1GasFeeFlows:nt(this,j,"f"),messenger:this.messagingSystem,provider:s,transactionMeta:{txParams:e,chainId:t}})}clearUnapprovedTransactions(){const e=this.state.transactions.filter(({status:e})=>e!==Ct.TransactionStatus.unapproved);this.update(t=>{t.transactions=nt(this,r,"m",te).call(this,e)})}abortTransactionSigning(e){if(!nt(this,r,"m",ae).call(this,e))throw new Error("Cannot abort signing as no transaction metadata found");const t=nt(this,G,"f").get(e);if(!t)throw new Error("Cannot abort signing as transaction is not waiting for signing");t(),nt(this,G,"f").delete(e)}async updateAtomicBatchData({transactionId:e,transactionIndex:t,transactionData:n}){(0,_t.projectLogger)("Updating atomic batch data",{transactionId:e,transactionIndex:t,transactionData:n});const s=nt(this,r,"m",De).call(this,{transactionId:e,note:"TransactionController#updateAtomicBatchData - Atomic batch data updated"},e=>{const{nestedTransactions:r,txParams:s}=e,a=s.from,i=r?.[t];if(!i)throw new Error(`Nested transaction not found with index - ${t}`);i.data=n;const o=(0,Ot.generateEIP7702BatchTransaction)(a,r);e.txParams.data=o.data}),a=(0,ft.cloneDeep)({...s,txParams:{...s.txParams,gas:undefined}});return await nt(this,r,"m",We).call(this,a),nt(this,r,"m",De).call(this,{transactionId:e,note:"TransactionController#updateAtomicBatchData - Gas estimate updated"},e=>{e.txParams.gas=a.txParams.gas,e.simulationFails=a.simulationFails,e.gasLimitNoBuffer=a.gasLimitNoBuffer}),s.txParams.data}updateBatchTransactions({transactionId:e,batchTransactions:t}){(0,_t.projectLogger)("Updating batch transactions",{transactionId:e,batchTransactions:t}),nt(this,r,"m",De).call(this,{transactionId:e,note:"TransactionController#updateBatchTransactions - Batch transactions updated"},e=>{e.batchTransactions=t})}updateSelectedGasFeeToken(e,t){nt(this,r,"m",De).call(this,{transactionId:e},e=>{const n=e.gasFeeTokens?.some(e=>e.tokenAddress.toLowerCase()===t?.toLowerCase());if(t&&!n)throw new Error(`No matching gas fee token found with address - ${t}`);e.selectedGasFeeToken=t})}updateRequiredTransactionIds({transactionId:e,requiredTransactionIds:t,append:n}){nt(this,r,"m",De).call(this,{transactionId:e},e=>{const{requiredTransactionIds:r}=e;e.requiredTransactionIds=[...r&&!1!==n?r:[],...t]})}}n.TransactionController=Yt,s=new WeakMap,a=new WeakMap,i=new WeakMap,o=new WeakMap,c=new WeakMap,u=new WeakMap,l=new WeakMap,d=new WeakMap,f=new WeakMap,h=new WeakMap,p=new WeakMap,m=new WeakMap,g=new WeakMap,b=new WeakMap,y=new WeakMap,w=new WeakMap,v=new WeakMap,E=new WeakMap,T=new WeakMap,S=new WeakMap,x=new WeakMap,P=new WeakMap,k=new WeakMap,I=new WeakMap,A=new WeakMap,_=new WeakMap,C=new WeakMap,j=new WeakMap,R=new WeakMap,O=new WeakMap,B=new WeakMap,F=new WeakMap,L=new WeakMap,M=new WeakMap,N=new WeakMap,D=new WeakMap,G=new WeakMap,H=new WeakMap,U=new WeakMap,q=new WeakMap,K=new WeakMap,_e=new WeakMap,r=new WeakSet,V=async function({actionId:e,afterSubmit:t,estimatedBaseFee:n,gasValues:s,label:a,prepareTransactionParams:i,rate:o,transactionId:c,transactionType:u}){if(nt(this,r,"m",ye).call(this,e))return;s&&(s=(0,$t.normalizeGasFeeValues)(s),(0,$t.validateGasValues)(s)),(0,_t.projectLogger)(`Creating ${a} transaction`,c,s);const l=nt(this,r,"m",ae).call(this,c);if(!l)return;if(!nt(this,D,"f"))throw new Error("No sign method defined.");const d=(0,qt.getTransactionParamsWithIncreasedGasFee)(l.txParams,o,s);i?.(d);const f=(0,Ut.prepareTransaction)(l.chainId,d),h=await nt(this,D,"f").call(this,f,l.txParams.from),p=nt(this,r,"m",ve).call(this,l,h),m=(0,Ut.serializeTransaction)(h),g=d.maxFeePerGas??d.gasPrice,b=d.maxFeePerGas?p.txParams.maxFeePerGas:p.txParams.gasPrice;(0,_t.projectLogger)(`Submitting ${a} transaction`,{oldFee:b,newFee:g,txParams:d});const{networkClientId:y}=l,w=nt(this,r,"m",de).call(this,{networkClientId:y}),v={...p,actionId:e,estimatedBaseFee:n,id:(0,ht.v1)(),originalGasEstimate:l.txParams.gas,originalType:l.type,rawTx:m,time:Date.now(),txParams:d,type:u},E=await nt(this,r,"m",Fe).call(this,w,{...v,origin:a});v.hash=E,nt(this,r,"m",z).call(this,v),this.messagingSystem.publish(`${Jt}:transactionApproved`,{transactionMeta:v,actionId:e}),this.messagingSystem.publish(`${Jt}:transactionSubmitted`,{transactionMeta:v,actionId:e}),t?.(v)},$=async function(e,t){if(!nt(this,D,"f"))throw new Error("No sign method defined.");const n=(0,$t.normalizeTransactionParams)(t),r=(0,$t.isEIP1559Transaction)(n)?Ct.TransactionEnvelopeType.feeMarket:Ct.TransactionEnvelopeType.legacy,s={...n,type:r,gasLimit:n.gas,chainId:e},{from:a}=s,i=(0,Ut.prepareTransaction)(e,s),o=await nt(this,D,"f").call(this,i,a);return(0,Ut.serializeTransaction)(o)},z=function(e){(0,zt.validateTxParams)(e.txParams),this.update(t=>{t.transactions=nt(this,r,"m",te).call(this,[...t.transactions,e])})},W=async function(e,{traceContext:t}={}){const n=e.txParams.type!==Ct.TransactionEnvelopeType.legacy&&await nt(this,r,"m",Ee).call(this,e.networkClientId),{networkClientId:s}=e,a=nt(this,r,"m",de).call(this,{networkClientId:s}),i=nt(this,r,"m",fe).call(this,{networkClientId:s});await nt(this,q,"f").call(this,{name:"Update Gas",parentContext:t},async()=>{await nt(this,r,"m",We).call(this,e)}),await nt(this,q,"f").call(this,{name:"Update Gas Fees",parentContext:t},async()=>await(0,Mt.updateGasFees)({eip1559:n,ethQuery:a,gasFeeFlows:nt(this,d,"f"),getGasFeeEstimates:nt(this,g,"f"),getSavedGasFees:nt(this,w,"f").bind(this),messenger:this.messagingSystem,txMeta:e})),await nt(this,q,"f").call(this,{name:"Update Layer 1 Gas Fees",parentContext:t},async()=>await(0,Gt.updateTransactionLayer1GasFee)({layer1GasFeeFlows:nt(this,j,"f"),messenger:this.messagingSystem,provider:i,transactionMeta:e}))},J=function(){this.clearUnapprovedTransactions(),nt(this,r,"m",X).call(this)},X=function(){const e=this.state.transactions.filter(e=>[Ct.TransactionStatus.approved,Ct.TransactionStatus.signed].includes(e.status));for(const t of e)nt(this,r,"m",Qe).call(this,t,new Error("Transaction incomplete at startup"))},Y=async function(e,{actionId:t,isExisting:n=!1,publishHook:s,requireApproval:a,shouldShowRequest:i=!0,traceContext:o}){const c=e.id;let u;const{meta:l,isCompleted:d}=nt(this,r,"m",ce).call(this,c),f=d?Promise.resolve(l):nt(this,r,"m",we).call(this,c);if(l&&!n&&!d)try{if(!1!==a){const t=await nt(this,q,"f").call(this,{name:"Await Approval",parentContext:o},t=>nt(this,r,"m",se).call(this,e,{shouldShowRequest:i,traceContext:t}));u=t.resultCallbacks;const n=t.value,s=n?.txMeta;s&&((0,_t.projectLogger)("Updating transaction with approval data",{customNonce:s.customNonceValue,params:s.txParams}),this.updateTransaction(s,"TransactionController#processApproval - Updated with approval data"))}const{isCompleted:n}=nt(this,r,"m",ce).call(this,c);if(!n){await nt(this,r,"m",Z).call(this,c,o,s)===Xt.SkippedViaBeforePublishHook&&u&&u.success();const e=nt(this,r,"m",ae).call(this,c);this.messagingSystem.publish(`${Jt}:transactionApproved`,{transactionMeta:e,actionId:t})}}catch(e){const n=e,{isCompleted:s}=nt(this,r,"m",ce).call(this,c);s||(nt(this,r,"m",Ye).call(this,n)?nt(this,r,"m",Ze).call(this,c,t,n):nt(this,r,"m",Qe).call(this,l,n,t))}finally{nt(this,H,"f").delete(c)}const h=await f;switch(h?.status){case Ct.TransactionStatus.failed:const e=h.error;throw u?.error(e),ut.rpcErrors.internal(e.message);case Ct.TransactionStatus.submitted:return u?.success(),h.hash;default:const t=ut.rpcErrors.internal(`MetaMask Tx Signature: Unknown problem: ${JSON.stringify(h||c)}`);throw u?.error(t),t}},Z=async function(e,t,n){let s,a,i=nt(this,r,"m",ie).call(this,e);(0,_t.projectLogger)("Approving transaction",i);try{if(!nt(this,D,"f"))return nt(this,r,"m",Qe).call(this,i,new Error("No sign method defined.")),Xt.NotApproved;if(!i.chainId)return nt(this,r,"m",Qe).call(this,i,new Error("No chainId defined.")),Xt.NotApproved;if(nt(this,o,"f").has(e))return(0,_t.projectLogger)("Skipping approval as signing in progress",e),Xt.NotApproved;nt(this,o,"f").add(e),s=()=>nt(this,o,"f").delete(e);const[c,l]=await(0,Ht.getNextNonce)(i,e=>nt(this,O,"f").getNonceLock(e,i.networkClientId));a=l,i=nt(this,r,"m",De).call(this,{transactionId:e,note:"TransactionController#approveTransaction - Transaction approved"},e=>{const{chainId:t,txParams:n}=e,{gas:r,type:s}=n;e.status=Ct.TransactionStatus.approved,e.txParams.chainId=t,e.txParams.gasLimit=r,e.txParams.nonce=c,!s&&(0,$t.isEIP1559Transaction)(n)&&(e.txParams.type=Ct.TransactionEnvelopeType.feeMarket)}),nt(this,r,"m",Se).call(this,i);const d=await nt(this,q,"f").call(this,{name:"Sign",parentContext:t},()=>nt(this,r,"m",Te).call(this,i));if(!await nt(this,u,"f").call(this,i))return(0,_t.projectLogger)("Skipping publishing transaction based on hook"),this.messagingSystem.publish(`${Jt}:transactionPublishingSkipped`,i),Xt.SkippedViaBeforePublishHook;if(!d&&!i.isExternalSign)return Xt.NotApproved;const{networkClientId:f}=i,h=nt(this,r,"m",de).call(this,{networkClientId:f});let p;const m=i.type===Ct.TransactionType.swap;let g;if(m&&((0,_t.projectLogger)("Determining pre-transaction balance"),p=await(0,at.query)(h,"getBalance",[i.txParams.from])),(0,_t.projectLogger)("Publishing transaction",i.txParams),a?.(),a=undefined,i.batchTransactions?.length){(0,_t.projectLogger)("Found batch transactions",i.batchTransactions);const e=new At.ExtraTransactionsPublishHook({addTransactionBatch:this.addTransactionBatch.bind(this)});n=e.getHook()}return await nt(this,q,"f").call(this,{name:"Publish",parentContext:t},async()=>{const e=n??nt(this,L,"f");({transactionHash:g}=await e(i,d??"0x")),g===undefined&&(g=await nt(this,r,"m",Q).call(this,h,{...i,rawTx:d}))}),(0,_t.projectLogger)("Publish successful",g),i=nt(this,r,"m",De).call(this,{transactionId:e,note:"TransactionController#approveTransaction - Transaction submitted"},e=>{e.hash=g,e.status=Ct.TransactionStatus.submitted,e.submittedTime=(new Date).getTime(),m&&(e.preTxBalance=p,(0,_t.projectLogger)("Updated pre-transaction balance",p))}),this.messagingSystem.publish(`${Jt}:transactionSubmitted`,{transactionMeta:i}),this.messagingSystem.publish(`${Jt}:transactionFinished`,i),nt(this,S,"f").emit(`${e}:finished`,i),nt(this,r,"m",Se).call(this,i),Xt.Approved}catch(e){return nt(this,r,"m",Qe).call(this,i,e),Xt.NotApproved}finally{s?.(),a?.()}},Q=async function(e,t,{skipSubmitHistory:n}={}){const s=await(0,at.query)(e,"sendRawTransaction",[t.rawTx]);return!0!==n&&nt(this,r,"m",ze).call(this,t,s),s},ee=function(e,t,n){const s=nt(this,r,"m",ae).call(this,e);if(!s)return;nt(this,r,"m",Xe).call(this,e);const a={...s,status:Ct.TransactionStatus.rejected,error:(0,$t.normalizeTxError)(n??ut.providerErrors.userRejectedRequest())};this.messagingSystem.publish(`${Jt}:transactionFinished`,a),nt(this,S,"f").emit(`${s.id}:finished`,a),this.messagingSystem.publish(`${Jt}:transactionRejected`,{transactionMeta:a,actionId:t}),nt(this,r,"m",Se).call(this,a)},te=function(e){const t=new Set,n=[...e].sort((e,t)=>e.time>t.time?-1:1).filter(e=>{const{chainId:n,status:s,txParams:a,time:i}=e;if(a){const e=`${String(a.nonce)}-${(0,at.convertHexToDecimal)(n)}-${new Date(i).toDateString()}`;if(t.has(e))return!0;if(t.size<nt(this,K,"f")||!nt(this,r,"m",ne).call(this,s))return t.add(e),!0}return!1});return n.reverse(),n},ne=function(e){return e===Ct.TransactionStatus.rejected||e===Ct.TransactionStatus.confirmed||e===Ct.TransactionStatus.failed},re=function(e){return[Ct.TransactionStatus.confirmed,Ct.TransactionStatus.failed,Ct.TransactionStatus.rejected,Ct.TransactionStatus.submitted].includes(e)},se=async function(e,{shouldShowRequest:t,traceContext:n}){const s=nt(this,r,"m",oe).call(this,e),{origin:a}=e,i=at.ApprovalType.Transaction,o={txId:e.id};return await nt(this,q,"f").call(this,{name:"Notification Display",id:s,parentContext:n}),await this.messagingSystem.call("ApprovalController:addRequest",{id:s,origin:a||at.ORIGIN_METAMASK,type:i,requestData:o,expectsResult:!0},t)},ae=function(e){const{transactions:t}=this.state;return t.find(({id:t})=>t===e)},ie=function(e,t="TransactionController"){const n=nt(this,r,"m",ae).call(this,e);if(!n)throw new Error(`${t}: No transaction found with id ${e}`);return n},oe=function(e){return String(e.id)},ce=function(e){const t=nt(this,r,"m",ae).call(this,e);if(!t)return{meta:undefined,isCompleted:!1};return{meta:t,isCompleted:nt(this,r,"m",re).call(this,t.status)}},ue=function(e){return nt(this,O,"f").getNetworkClient({networkClientId:e}).configuration.chainId},le=function({chainId:e,networkClientId:t}){return t||nt(this,O,"f").getNetworkClient({chainId:e}).id},de=function({chainId:e,networkClientId:t}){return new it.default(nt(this,r,"m",fe).call(this,{chainId:e,networkClientId:t}))},fe=function({chainId:e,networkClientId:t}){return nt(this,O,"f").getNetworkClient({chainId:e,networkClientId:t}).provider},he=function(e){if(!e.length)return;const t=[];for(const n of e){const{chainId:e}=n;try{const s=nt(this,r,"m",le).call(this,{chainId:e});t.push({...n,networkClientId:s})}catch(t){(0,_t.projectLogger)("Failed to get network client ID for incoming transaction",{chainId:e,error:t})}}this.update(e=>{const{transactions:n}=e;e.transactions=nt(this,r,"m",te).call(this,[...t,...n]),(0,_t.projectLogger)("Added incoming transactions to state",t.length,t)}),this.messagingSystem.publish(`${Jt}:incomingTransactionsReceived`,t)},pe=function(e,t){if(!t||t===at.ORIGIN_METAMASK)return undefined;const{gasPrice:n,maxFeePerGas:r,maxPriorityFeePerGas:s,gas:a}=e;if(n===undefined&&r===undefined&&s===undefined&&a===undefined)return undefined;const i={};return n!==undefined?i.gasPrice=n:r===undefined&&s===undefined||(i.maxFeePerGas=r,i.maxPriorityFeePerGas=s),a!==undefined&&(i.gas=a),i},me=function(e){const{chainId:t}=e,{transactions:n}=this.state,s=e?.txParams?.from,a=n.filter(e=>e.txParams.from===s&&e.chainId===t),i=a.filter(e=>e.status===Ct.TransactionStatus.confirmed),o=a.filter(e=>e.status===Ct.TransactionStatus.submitted);(0,Bt.validateConfirmedExternalTransaction)(e,i,o);const c=0!==(e.history??[]).length||nt(this,I,"f")?e:(0,Dt.addInitialHistorySnapshot)(e);return this.update(e=>{e.transactions=nt(this,r,"m",te).call(this,[...e.transactions,c])}),c},ge=function(e){const t=nt(this,r,"m",ae).call(this,e);if(!t)return;const n=t.txParams?.nonce,s=t.txParams?.from,{chainId:a}=t,i=this.state.transactions.filter(t=>t.id!==e&&t.txParams.from===s&&n&&t.txParams.nonce===n&&t.chainId===a&&t.type!==Ct.TransactionType.incoming),o=i.map(e=>e.id);if(0!==i.length){this.update(e=>{for(const n of e.transactions)o.includes(n.id)&&(n.replacedBy=t?.hash,n.replacedById=t?.id)});for(const e of this.state.transactions)o.includes(e.id)&&e.status!==Ct.TransactionStatus.failed&&nt(this,r,"m",be).call(this,e)}},be=function(e){const t={...e,status:Ct.TransactionStatus.dropped};this.messagingSystem.publish(`${Jt}:transactionDropped`,{transactionMeta:t}),this.updateTransaction(t,"TransactionController#setTransactionStatusDropped - Transaction dropped"),nt(this,r,"m",Se).call(this,t)},ye=function(e){return this.state.transactions.find(t=>e&&t.actionId===e)},we=async function(e){return new Promise(t=>{nt(this,S,"f").once(`${e}:finished`,e=>{t(e)})})},ve=function(e,t){const n=(0,ft.cloneDeep)(e);for(const e of["r","s","v"]){const r=t[e];r!==undefined&&null!==r&&(n[e]=(0,lt.add0x)(r.toString(16)))}return n},Ee=async function(e){const t=await nt(this,p,"f").call(this,e),n=await nt(this,h,"f").call(this);return t&&n},Te=async function(e){const{chainId:t,id:n,isExternalSign:s,txParams:i}=e;if(s)return(0,_t.projectLogger)("Skipping sign as signed externally"),undefined;const{authorizationList:c,from:u}=i,d=await(0,Ot.signAuthorizationList)({authorizationList:c,messenger:this.messagingSystem,transactionMeta:e});d&&nt(this,r,"m",De).call(this,{transactionId:n},e=>{e.txParams.authorizationList=d}),(0,_t.projectLogger)("Calling before sign hook",e);const{updateTransaction:h}=await nt(this,l,"f").call(this,{transactionMeta:e})??{};h&&(nt(this,r,"m",De).call(this,{transactionId:n,skipResimulateCheck:!0,note:"beforeSign Hook"},h),(0,_t.projectLogger)("Updated transaction after before sign hook"));const p=nt(this,r,"m",ie).call(this,n),{txParams:m}=p,g=(0,Ut.prepareTransaction)(t,m);nt(this,o,"f").add(n),(0,_t.projectLogger)("Signing transaction",m);const b=await new Promise((e,t)=>{nt(this,D,"f")?.call(this,g,u,...nt(this,f,"f").call(this,p)).then(e,t),nt(this,G,"f").set(n,()=>t(new Error("Signing aborted by user")))});if(nt(this,G,"f").delete(n),!b)return(0,_t.projectLogger)("Skipping signed status as no signed transaction"),undefined;const y=(0,ft.cloneDeep)(p);if(!nt(this,a,"f").call(this,y,b))return this.updateTransaction(y,"TransactionController#signTransaction - Update after sign"),(0,_t.projectLogger)("Skipping signed status based on hook"),undefined;const w={...nt(this,r,"m",ve).call(this,y,b),status:Ct.TransactionStatus.signed,txParams:m};this.updateTransaction(w,"TransactionController#approveTransaction - Transaction signed"),nt(this,r,"m",Se).call(this,w);const v=(0,Ut.serializeTransaction)(b),E=(0,ft.merge)({},w,{rawTx:v});return this.updateTransaction(E,"TransactionController#approveTransaction - RawTransaction added"),v},Se=function(e){this.messagingSystem.publish(`${Jt}:transactionStatusUpdated`,{transactionMeta:e})},xe=function(e,t,n){return(0,Ht.getAndFormatTransactionsForNonceTracker)(n,t,e,this.state.transactions)},Pe=function(e){(0,_t.projectLogger)("Processing confirmed transaction",e.id),nt(this,r,"m",ge).call(this,e.id),this.messagingSystem.publish(`${Jt}:transactionConfirmed`,e),nt(this,r,"m",Se).call(this,e),nt(this,r,"m",ke).call(this,e).catch(e=>{throw(0,_t.projectLogger)("Error while updating post balance",e),e})},ke=async function(e){try{const{networkClientId:t,type:n}=e;if(n!==Ct.TransactionType.swap)return;const s=nt(this,r,"m",de).call(this,{networkClientId:t}),{updatedTransactionMeta:a,approvalTransactionMeta:i}=await(0,Kt.updatePostTransactionBalance)(e,{ethQuery:s,getTransaction:nt(this,r,"m",ae).bind(this),updateTransaction:this.updateTransaction.bind(this)});this.messagingSystem.publish(`${Jt}:postTransactionBalanceUpdated`,{transactionMeta:a,approvalTransactionMeta:i})}catch(e){(0,_t.projectLogger)("Error while updating post transaction balance",e)}},Ie=function({provider:e,blockTracker:t,chainId:n}){return new ct.NonceTracker({provider:e,blockTracker:t,getPendingTransactions:nt(this,r,"m",Be).bind(this,n),getConfirmedTransactions:nt(this,r,"m",xe).bind(this,[Ct.TransactionStatus.confirmed],n)})},Ae=function({provider:e,blockTracker:t,chainId:n,networkClientId:s}){const a=new it.default(e),i=new kt.PendingTransactionTracker({blockTracker:t,getChainId:()=>n,getEthQuery:()=>a,getNetworkClientId:()=>s,getTransactions:()=>this.state.transactions,isResubmitEnabled:nt(this,B,"f").isResubmitEnabled,getGlobalLock:()=>nt(this,O,"f").acquireNonceLockForChainIdKey({chainId:n}),messenger:this.messagingSystem,publishTransaction:(e,t)=>nt(this,r,"m",Q).call(this,e,t,{skipSubmitHistory:!0}),hooks:{beforeCheckPendingTransaction:nt(this,c,"f").bind(this)}});return nt(this,r,"m",Oe).call(this,i),i},Ce=function(){nt(this,O,"f").stopAllTracking()},je=function(e){e.hub.on("transactions",nt(this,r,"m",he).bind(this))},Re=function(e){e.hub.removeAllListeners("transaction-confirmed"),e.hub.removeAllListeners("transaction-dropped"),e.hub.removeAllListeners("transaction-failed"),e.hub.removeAllListeners("transaction-updated")},Oe=function(e){e.hub.on("transaction-confirmed",nt(this,r,"m",Pe).bind(this)),e.hub.on("transaction-dropped",nt(this,r,"m",be).bind(this)),e.hub.on("transaction-failed",nt(this,r,"m",Qe).bind(this)),e.hub.on("transaction-updated",this.updateTransaction.bind(this))},Be=function(e,t){return[...nt(this,r,"m",xe).call(this,[Ct.TransactionStatus.approved,Ct.TransactionStatus.signed,Ct.TransactionStatus.submitted],t,e),...nt(this,m,"f").call(this,t,e)]},Fe=async function(e,t){try{return await nt(this,r,"m",Q).call(this,e,t)}catch(e){if(nt(this,r,"m",Le).call(this,e))throw new Error("Previous transaction is already confirmed");throw e}},Le=function(e){return e?.message?.includes("nonce too low")||e?.data?.message?.includes("nonce too low")},Me=function(){return nt(this,U,"f")?[new vt.TestGasFeeFlow]:[new yt.RandomisedEstimationsGasFeeFlow,new gt.LineaGasFeeFlow,new mt.DefaultGasFeeFlow]},Ne=function(){return[new bt.OptimismLayer1GasFeeFlow,new wt.ScrollLayer1GasFeeFlow]},De=function({transactionId:e,note:t,skipHistory:n,skipValidation:s,skipResimulateCheck:a},i){let o;this.update(r=>{const c=r.transactions.findIndex(({id:t})=>t===e);if(-1===c)throw new Error(`Cannot update transaction as ID not found - ${e}`);let u=r.transactions[c];const l=(0,ft.cloneDeep)(u);u=i(u)??u,!0!==s&&(u.txParams=(0,$t.normalizeTransactionParams)(u.txParams),(0,zt.validateTxParams)(u.txParams)),!a&&nt(this,_,"f").call(this)&&(o=(0,It.shouldResimulate)(l,u));nt(this,I,"f")||n||(u=(0,Dt.updateTransactionHistory)(u,t??"Transaction updated")),r.transactions[c]=u});const c=nt(this,r,"m",ae).call(this,e);return o?.resimulate&&nt(this,r,"m",He).call(this,c,{blockTime:o.blockTime}).catch(e=>{throw(0,_t.projectLogger)("Error during re-simulation",e),e}),c},Ge=async function(e,{traceContext:t}={}){if(!nt(this,k,"f").call(this))return;const{chainId:n,id:s,txParams:{to:a,from:i}}=e,o={chainId:(0,lt.hexToNumber)(n),to:a,from:i};(0,zt.validateParamTo)(a);if(!this.state.transactions.find(e=>e.chainId===n&&e.txParams.from===i&&e.txParams.to===a&&e.id!==s))try{const{count:e}=await nt(this,q,"f").call(this,{name:"Account Address Relationship",parentContext:t},()=>(0,pt.getAccountAddressRelationship)(o)),n=e===undefined?undefined:0===e;if(!nt(this,r,"m",ae).call(this,s))return void(0,_t.projectLogger)("Cannot update first time interaction as transaction not found",s);nt(this,r,"m",De).call(this,{transactionId:s,note:"TransactionController#updateFirstInteraction - Update first time interaction"},e=>{e.isFirstTimeInteraction=n}),(0,_t.projectLogger)("Updated first time interaction",s,{isFirstTimeInteraction:n})}catch(e){(0,_t.projectLogger)("Error fetching account address relationship, skipping first time interaction update",e)}},He=async function(e,{blockTime:t,traceContext:n}={}){const{chainId:s,id:a,nestedTransactions:i,networkClientId:o,simulationData:c,txParams:u}=e;let l,d={error:{code:Ct.SimulationErrorCode.Disabled,message:"Simulation disabled"},tokenBalanceChanges:[]},f=[],h=!1;const p=nt(this,H,"f").has(a);if(nt(this,_,"f").call(this)&&!p){const a=await nt(this,q,"f").call(this,{name:"Simulate",parentContext:n},()=>(0,jt.getBalanceChanges)({blockTime:t,chainId:s,ethQuery:nt(this,r,"m",de).call(this,{networkClientId:o}),getSimulationConfig:nt(this,v,"f"),nestedTransactions:i,txParams:u}));d=a.simulationData,l=a.gasUsed,t&&c&&(0,It.hasSimulationDataChanged)(c,d)&&(d={...d,isUpdatedAfterSecurityCheck:!0});const p=await(0,Lt.getGasFeeTokens)({chainId:s,getSimulationConfig:nt(this,v,"f"),isEIP7702GasFeeTokensEnabled:nt(this,P,"f"),messenger:this.messagingSystem,publicKeyEIP7702:nt(this,F,"f"),transactionMeta:e});f=p?.gasFeeTokens??[],h=p?.isGasFeeSponsored??!1}if(!nt(this,r,"m",ae).call(this,a))return void(0,_t.projectLogger)("Cannot update simulation data as transaction not found",a,d);const m=nt(this,r,"m",De).call(this,{transactionId:a,note:"TransactionController#updateSimulationData - Update simulation data",skipResimulateCheck:Boolean(t)},e=>{e.gasFeeTokens=f,e.isGasFeeSponsored=h,e.gasUsed=l,p||(e.simulationData=d)});(0,_t.projectLogger)("Updated simulation data",a,m),await nt(this,r,"m",et).call(this,m)},Ue=function({transactionId:e,gasFeeEstimates:t,gasFeeEstimatesLoaded:n,layer1GasFee:s}){nt(this,r,"m",De).call(this,{transactionId:e,skipHistory:!0},e=>{(0,Tt.updateTransactionGasProperties)({txMeta:e,gasFeeEstimates:t,gasFeeEstimatesLoaded:n,isTxParamsGasFeeUpdatesEnabled:nt(this,x,"f"),layer1GasFee:s})})},qe=function({transactionBatchId:e,gasFeeEstimates:t}){nt(this,r,"m",Ke).call(this,e,e=>({...e,gasFeeEstimates:t}))},Ke=function(e,t){this.update(n=>{const r=n.transactionBatches.findIndex(t=>t.id===e);if(-1===r)throw new Error(`Cannot update batch, ID not found - ${e}`);const s=n.transactionBatches[r],a=t(s);n.transactionBatches[r]=a??s})},Ve=function(){return this.messagingSystem.call("AccountsController:getSelectedAccount")},$e=function(){const e=this.messagingSystem.call("AccountsController:getState");return Object.values(e.internalAccounts?.accounts??{}).filter(e=>"eip155:eoa"===e.type).map(e=>e.address)},ze=function(e,t){const{chainId:n,networkClientId:r,origin:s,rawTx:a,txParams:i}=e,{networkConfigurationsByChainId:o}=nt(this,b,"f").call(this),c=o[n],u=c?.rpcEndpoints.find(e=>e.networkClientId===r),l=u?.url,d={chainId:n,hash:t,networkType:u?.name??r,networkUrl:l,origin:s,rawTransaction:a,time:Date.now(),transaction:i};(0,_t.projectLogger)("Updating submit history",d),this.update(e=>{const{submitHistory:t}=e;100===t.length&&t.pop(),t.unshift(d)})},We=async function(e){const{chainId:t,networkClientId:n}=e,s=nt(this,O,"f").getNetworkClient({networkClientId:n}).configuration.type===ot.NetworkClientType.Custom,a=nt(this,r,"m",de).call(this,{networkClientId:n});await(0,Ft.updateGas)({chainId:t,ethQuery:a,isCustomNetwork:s,isSimulationEnabled:nt(this,_,"f").call(this),getSimulationConfig:nt(this,v,"f"),messenger:this.messagingSystem,txMeta:e})},Je=function(){this.messagingSystem.registerActionHandler(`${Jt}:estimateGas`,this.estimateGas.bind(this)),this.messagingSystem.registerActionHandler(`${Jt}:updateCustodialTransaction`,this.updateCustodialTransaction.bind(this))},Xe=function(e){this.update(t=>{const n=t.transactions.filter(({id:t})=>t!==e);t.transactions=nt(this,r,"m",te).call(this,n)})},Ye=function(e){return[ut.errorCodes.provider.userRejectedRequest,zt.ErrorCode.RejectedUpgrade].includes(e.code)},Ze=function(e,t,n){if(nt(this,r,"m",ee).call(this,e,t,n),n.code===ut.errorCodes.provider.userRejectedRequest)throw ut.providerErrors.userRejectedRequest({message:"MetaMask Tx Signature: User denied transaction signature.",data:n?.data});throw n},Qe=function(e,t,n){let s;try{s=nt(this,r,"m",De).call(this,{transactionId:e.id,note:"TransactionController#failTransaction - Add error message and set status to failed",skipValidation:!0},e=>{e.status=Ct.TransactionStatus.failed,e.error=(0,$t.normalizeTxError)(t)})}catch(n){(0,_t.projectLogger)("Failed to mark transaction as failed",n),s={...e,status:Ct.TransactionStatus.failed,error:(0,$t.normalizeTxError)(t)}}this.messagingSystem.publish(`${Jt}:transactionFailed`,{actionId:n,error:t.message,transactionMeta:s}),nt(this,r,"m",Se).call(this,s),this.messagingSystem.publish(`${Jt}:transactionFinished`,s),nt(this,S,"f").emit(`${e.id}:finished`,s)},et=async function(e){(0,_t.projectLogger)("Calling afterSimulate hook",e);const{id:t}=e,n=await nt(this,i,"f").call(this,{transactionMeta:e}),{skipSimulation:s,updateTransaction:a}=n||{};if(s?nt(this,H,"f").add(t):!1===s&&nt(this,H,"f").delete(t),!a)return;const o=nt(this,r,"m",De).call(this,{transactionId:t,skipResimulateCheck:!0,note:"afterSimulate Hook"},e=>{e.txParamsOriginal=(0,ft.cloneDeep)(e.txParams),a(e)});(0,_t.projectLogger)("Updated transaction with afterSimulate data",o)}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/TransactionController.cjs"}],[2768,{"../errors.cjs":2771,"../logger.cjs":2791,"@metamask/controller-utils":1321,"@metamask/utils":2835},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getAccountTransactions=n.getAccountAddressRelationship=void 0;const r=e("@metamask/controller-utils"),s=e("@metamask/utils"),a=e("../errors.cjs"),i=e("../logger.cjs"),o="https://accounts.api.cx.metamask.io",c=`${o}/v1/accounts/`,u="x-metamask-clientproduct",l="metamask-transaction-controller",d=[1,10,56,137,8453,42161,59144,534352,1329],f=(0,s.createModuleLogger)(i.projectLogger,"accounts-api");n.getAccountAddressRelationship=async function(e){const{chainId:t,from:n,to:s}=e;if(!d.includes(t))throw f("Unsupported chain ID for account relationship API",t),new a.FirstTimeInteractionError("Unsupported chain ID");const i=`${o}/v1/networks/${t}/accounts/${n}/relationships/${s}`;f("Getting account address relationship",{request:e,url:i});const c={[u]:l},h=await(0,r.successfulFetch)(i,{headers:c});if(204===h.status)return{count:0};const p=await h.json();if(f("Retrieved account address relationship",p),p.error){const{code:e,message:t}=p.error;throw new a.FirstTimeInteractionError(t,e)}return p},n.getAccountTransactions=async function(e){const{address:t,chainIds:n,cursor:s,endTimestamp:a,sortDirection:i,startTimestamp:o,tags:d}=e;let h=`${c}${t}/transactions`;const p=[];if(n){const e=n.join(",");p.push(`networks=${e}`)}o&&p.push(`startTimestamp=${o}`),a&&p.push(`endTimestamp=${a}`),s&&p.push(`cursor=${s}`),i&&p.push(`sortDirection=${i}`),p.length&&(h+=`?${p.join("&")}`),f("Getting account transactions",{request:e,url:h});const m=[l,...d||[]].join("__"),g={[u]:m},b=await(0,r.successfulFetch)(h,{headers:g}),y=await b.json();return f("Retrieved account transactions",y),y}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/api/accounts-api.cjs"}],[2769,{"../constants.cjs":2770,"../errors.cjs":2771,"../logger.cjs":2791,"@metamask/controller-utils":1321,"@metamask/utils":2835,lodash:4565},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.simulateTransactions=void 0;const r=e("@metamask/controller-utils"),s=e("@metamask/utils"),a=e("lodash"),i=e("../constants.cjs"),o=e("../errors.cjs"),c=e("../logger.cjs"),u=(0,s.createModuleLogger)(c.projectLogger,"simulation-api"),l="networks";let d=0;function f(e){return"https://tx-sentinel-{0}.api.cx.metamask.io/".replace("{0}",e)}n.simulateTransactions=async function(e,t){let n=await async function(e){const t=await async function(){const e=`${f("ethereum-mainnet")}${l}`,t=await fetch(e);return t.json()}(),n=(0,r.convertHexToDecimal)(e),s=t[n];if(!s?.confirmations)throw u("Chain is not supported",e),new o.SimulationChainNotSupportedError(e);return f(s.network)}(e);const{newUrl:s,authorization:c}=await t.getSimulationConfig(n)||{};s&&(n=s);const h=d;d+=1;const p=function(e){const t=(0,a.cloneDeep)(e);for(const e of t.transactions){const n=e.to?.toLowerCase();i.DELEGATION_MANAGER_ADDRESSES.includes(n)&&(t.overrides=t.overrides||{},t.overrides[n]={code:i.CODE_DELEGATION_MANAGER_NO_SIGNATURE_ERRORS})}return t}(t);u("Sending request",n,t);const m={"Content-Type":"application/json"};c&&(m.Authorization=c);const g=await fetch(n,{method:"POST",headers:m,body:JSON.stringify({id:String(h),jsonrpc:"2.0",method:"infura_simulateTransactions",params:[p]})}),b=await g.json();if(u("Received response",b),b.error){const{code:e,message:t}=b.error;throw new o.SimulationError(t,e)}return b?.result}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/api/simulation-api.cjs"}],[2770,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.CODE_DELEGATION_MANAGER_NO_SIGNATURE_ERRORS=n.DELEGATION_MANAGER_ADDRESSES=n.ABI_IERC7821=n.ABI_SIMULATION_ERC721_LEGACY=n.ABI_SIMULATION_ERC20_WRAPPED=n.CHAIN_IDS=void 0,n.CHAIN_IDS={MAINNET:"0x1",GOERLI:"0x5",BASE:"0x2105",BASE_TESTNET:"0x14a33",BSC:"0x38",BSC_TESTNET:"0x61",OPTIMISM:"0xa",OPTIMISM_TESTNET:"0x1a4",OPBNB:"0xcc",OPBNB_TESTNET:"0x15eb",OPTIMISM_SEPOLIA:"0xaa37dc",POLYGON:"0x89",POLYGON_TESTNET:"0x13881",AVALANCHE:"0xa86a",AVALANCHE_TESTNET:"0xa869",FANTOM:"0xfa",FANTOM_TESTNET:"0xfa2",SEPOLIA:"0xaa36a7",LINEA_GOERLI:"0xe704",LINEA_SEPOLIA:"0xe705",LINEA_MAINNET:"0xe708",MOONBEAM:"0x504",MOONBEAM_TESTNET:"0x507",MOONRIVER:"0x505",GNOSIS:"0x64",ARBITRUM:"0xa4b1",ZKSYNC_ERA:"0x144",ZORA:"0x76adf1",SCROLL:"0x82750",SCROLL_SEPOLIA:"0x8274f",MEGAETH_TESTNET:"0x18c6",SEI:"0x531"},n.ABI_SIMULATION_ERC20_WRAPPED=[{anonymous:!1,inputs:[{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"wad",type:"uint256"}],name:"Deposit",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!1,name:"wad",type:"uint256"}],name:"Withdrawal",type:"event"}],n.ABI_SIMULATION_ERC721_LEGACY=[{anonymous:!1,inputs:[{indexed:!1,name:"_from",type:"address"},{indexed:!1,name:"_to",type:"address"},{indexed:!1,name:"_tokenId",type:"uint256"}],name:"Transfer",type:"event"}],n.ABI_IERC7821=[{type:"function",name:"execute",inputs:[{name:"mode",type:"bytes32",internalType:"ModeCode"},{name:"executionData",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"payable"},{type:"function",name:"supportsExecutionMode",inputs:[{name:"mode",type:"bytes32",internalType:"ModeCode"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"}],n.DELEGATION_MANAGER_ADDRESSES=["0xdb9b1e94b5b69df7e401ddbede43491141047db3"],n.CODE_DELEGATION_MANAGER_NO_SIGNATURE_ERRORS="0x608060405234801561001057600080fd5b506004361061012c5760003560e01c806383ebb771116100ad578063acb8cc4911610071578063acb8cc491461027f578063cef6d2091461029f578063e30c3978146102b2578063f2fde38b146102c3578063ffa1ad74146102d657600080fd5b806383ebb771146102065780638456cb591461020e57806384b0196e146102165780638da5cb5b14610231578063a3f4df7e1461024257600080fd5b806358909ebc116100f457806358909ebc146101b05780635c975abb146101d157806366134607146101e3578063715018a6146101f657806379ba5097146101fe57600080fd5b80631b13cac2146101315780632d40d0521461014d5780633ed01015146101805780633f4ba83a14610195578063499340471461019d575b600080fd5b61013a60001981565b6040519081526020015b60405180910390f35b61017061015b36600461207e565b60046020526000908152604090205460ff1681565b6040519015158152602001610144565b61019361018e366004612097565b6102fa565b005b6101936103f4565b6101936101ab366004612097565b610406565b6101b9610a1181565b6040516001600160a01b039091168152602001610144565b600154600160a01b900460ff16610170565b61013a6101f1366004612097565b6104f6565b61019361050f565b610193610521565b61013a61056a565b610193610579565b61021e610589565b6040516101449796959493929190612128565b6000546001600160a01b03166101b9565b610272604051806040016040528060118152602001702232b632b3b0ba34b7b726b0b730b3b2b960791b81525081565b60405161014491906121c1565b610272604051806040016040528060018152602001603160f81b81525081565b6101936102ad36600461221f565b6105cf565b6001546001600160a01b03166101b9565b6101936102d13660046122d4565b611829565b610272604051806040016040528060058152602001640312e332e360dc1b81525081565b61030a60408201602083016122d4565b6001600160a01b03811633146103335760405163b9f0f17160e01b815260040160405180910390fd5b600061033e836104f6565b60008181526004602052604090205490915060ff1661037057604051637952fbad60e11b815260040160405180910390fd5b6000818152600460209081526040909120805460ff19169055610395908401846122d4565b6001600160a01b03166103ae60408501602086016122d4565b6001600160a01b0316827f3feadce88fc1b49db633a56fd5307ed6ee18734df83bcc4011daa720c9cd95f1866040516103e7919061241c565b60405180910390a4505050565b6103fc61189a565b6104046118c7565b565b61041660408201602083016122d4565b6001600160a01b038116331461043f5760405163b9f0f17160e01b815260040160405180910390fd5b600061044a836104f6565b60008181526004602052604090205490915060ff161561047c57604051625ecddb60e01b815260040160405180910390fd5b6000818152600460209081526040909120805460ff191660011790556104a4908401846122d4565b6001600160a01b03166104bd60408501602086016122d4565b6001600160a01b0316827fea589ba9473ee1fe77d352c7ed919747715a5d22931b972de9b02a907c66d5dd866040516103e7919061241c565b6000610509610504836127bb565b61191c565b92915050565b61051761189a565b61040460006119b7565b60015433906001600160a01b0316811461055e5760405163118cdaa760e01b81526001600160a01b03821660048201526024015b60405180910390fd5b610567816119b7565b50565b60006105746119d0565b905090565b61058161189a565b610404611afb565b60006060806000806000606061059d611b3e565b6105a5611b6b565b60408051600080825260208201909252600f60f81b9b939a50919850469750309650945092509050565b6105d7611b98565b8481811415806105e75750808414155b1561060557604051631bcaf69f60e01b815260040160405180910390fd5b6000816001600160401b0381111561061f5761061f6124ed565b60405190808252806020026020018201604052801561065257816020015b606081526020019060019003908161063d5790505b5090506000826001600160401b0381111561066f5761066f6124ed565b6040519080825280602002602001820160405280156106a257816020015b606081526020019060019003908161068d5790505b50905060005b83811015610c195760008a8a838181106106c4576106c46127c7565b90506020028101906106d691906127dd565b8101906106e39190612823565b905080516000036107d1576040805160008082526020820190925290610765565b6107526040518060c0016040528060006001600160a01b0316815260200160006001600160a01b03168152602001600080191681526020016060815260200160008152602001606081525090565b8152602001906001900390816107045790505b50848381518110610778576107786127c7565b602090810291909101015260006040519080825280602002602001820160405280156107ae578160200160208202803683370190505b508383815181106107c1576107c16127c7565b6020026020010181905250610c10565b808483815181106107e4576107e46127c7565b6020026020010181905250600081516001600160401b0381111561080a5761080a6124ed565b604051908082528060200260200182016040528015610833578160200160208202803683370190505b50905080848481518110610849576108496127c7565b6020026020010181905250336001600160a01b031682600081518110610871576108716127c7565b6020026020010151600001516001600160a01b0316141580156108c65750610a116001600160a01b0316826000815181106108ae576108ae6127c7565b6020026020010151600001516001600160a01b031614155b156108e457604051632d618d8160e21b815260040160405180910390fd5b60005b8251811015610a4d576000838281518110610904576109046127c7565b602002602001015190506109178161191c565b838381518110610929576109296127c7565b60200260200101818152505080602001516001600160a01b03163b6000036109a657600061099e61099461095b61056a565b86868151811061096d5761096d6127c7565b602002602001015160405161190160f01b8152600281019290925260228201526042902090565b8360a00151611bc3565b905050610a44565b60006109c56109b361056a565b85858151811061096d5761096d6127c7565b9050600082602001516001600160a01b0316631626ba7e838560a001516040518363ffffffff1660e01b81526004016109ff9291906128d3565b602060405180830381865afa158015610a1c573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610a4091906128f4565b5050505b506001016108e7565b5060005b8251811015610c0d5760046000838381518110610a7057610a706127c7565b60209081029190910181015182528101919091526040016000205460ff1615610aac576040516302dd502960e11b815260040160405180910390fd5b60018351610aba9190612934565b8114610bc35781610acc826001612947565b81518110610adc57610adc6127c7565b6020026020010151838281518110610af657610af66127c7565b60200260200101516040015114610b2057604051636f6a1b8760e11b815260040160405180910390fd5b600083610b2e836001612947565b81518110610b3e57610b3e6127c7565b6020026020010151600001519050610a116001600160a01b0316816001600160a01b031614158015610b9f5750806001600160a01b0316848381518110610b8757610b876127c7565b6020026020010151602001516001600160a01b031614155b15610bbd57604051632d618d8160e21b815260040160405180910390fd5b50610c05565b60001960001b838281518110610bdb57610bdb6127c7565b60200260200101516040015114610c0557604051636f6a1b8760e11b815260040160405180910390fd5b600101610a51565b50505b506001016106a8565b5060005b83811015610e3e576000838281518110610c3957610c396127c7565b6020026020010151511115610e365760005b838281518110610c5d57610c5d6127c7565b602002602001015151811015610e34576000848381518110610c8157610c816127c7565b60200260200101518281518110610c9a57610c9a6127c7565b602002602001015160600151905060005b8151811015610e2a576000828281518110610cc857610cc86127c7565b6020026020010151600001519050806001600160a01b031663414c3e33848481518110610cf757610cf76127c7565b602002602001015160200151858581518110610d1557610d156127c7565b6020026020010151604001518f8f8a818110610d3357610d336127c7565b905060200201358e8e8b818110610d4c57610d4c6127c7565b9050602002810190610d5e91906127dd565b8c8c81518110610d7057610d706127c7565b60200260200101518b81518110610d8957610d896127c7565b60200260200101518e8d81518110610da357610da36127c7565b60200260200101518c81518110610dbc57610dbc6127c7565b602002602001015160200151336040518963ffffffff1660e01b8152600401610dec98979695949392919061295a565b600060405180830381600087803b158015610e0657600080fd5b505af1158015610e1a573d6000803e3d6000fd5b5050505050806001019050610cab565b5050600101610c4b565b505b600101610c1d565b5060005b8381101561146257828181518110610e5c57610e5c6127c7565b602002602001015151600003610f1a573363d691c964898984818110610e8457610e846127c7565b90506020020135888885818110610e9d57610e9d6127c7565b9050602002810190610eaf91906127dd565b6040518463ffffffff1660e01b8152600401610ecd939291906129c5565b6000604051808303816000875af1158015610eec573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f19168201604052610f1491908101906129e8565b5061145a565b60005b838281518110610f2f57610f2f6127c7565b602002602001015151811015611106576000848381518110610f5357610f536127c7565b60200260200101518281518110610f6c57610f6c6127c7565b602002602001015160600151905060005b81518110156110fc576000828281518110610f9a57610f9a6127c7565b6020026020010151600001519050806001600160a01b031663a145832a848481518110610fc957610fc96127c7565b602002602001015160200151858581518110610fe757610fe76127c7565b6020026020010151604001518f8f8a818110611005576110056127c7565b905060200201358e8e8b81811061101e5761101e6127c7565b905060200281019061103091906127dd565b8c8c81518110611042576110426127c7565b60200260200101518b8151811061105b5761105b6127c7565b60200260200101518e8d81518110611075576110756127c7565b60200260200101518c8151811061108e5761108e6127c7565b602002602001015160200151336040518963ffffffff1660e01b81526004016110be98979695949392919061295a565b600060405180830381600087803b1580156110d857600080fd5b505af11580156110ec573d6000803e3d6000fd5b5050505050806001019050610f7d565b5050600101610f1d565b50828181518110611119576111196127c7565b60200260200101516001848381518110611135576111356127c7565b6020026020010151516111489190612934565b81518110611158576111586127c7565b6020026020010151602001516001600160a01b031663d691c964898984818110611184576111846127c7565b9050602002013588888581811061119d5761119d6127c7565b90506020028101906111af91906127dd565b6040518463ffffffff1660e01b81526004016111cd939291906129c5565b6000604051808303816000875af11580156111ec573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f1916820160405261121491908101906129e8565b506000838281518110611229576112296127c7565b60200260200101515190505b801561145857600084838151811061124f5761124f6127c7565b60200260200101516001836112649190612934565b81518110611274576112746127c7565b60200260200101516060015190506000815190505b80156114455760008261129d600184612934565b815181106112ad576112ad6127c7565b6020026020010151600001519050806001600160a01b031663d3eddcc5846001856112d89190612934565b815181106112e8576112e86127c7565b602002602001015160200151856001866113029190612934565b81518110611312576113126127c7565b6020026020010151604001518f8f8a818110611330576113306127c7565b905060200201358e8e8b818110611349576113496127c7565b905060200281019061135b91906127dd565b8c8c8151811061136d5761136d6127c7565b602002602001015160018c6113829190612934565b81518110611392576113926127c7565b60200260200101518e8d815181106113ac576113ac6127c7565b602002602001015160018d6113c19190612934565b815181106113d1576113d16127c7565b602002602001015160200151336040518963ffffffff1660e01b815260040161140198979695949392919061295a565b600060405180830381600087803b15801561141b57600080fd5b505af115801561142f573d6000803e3d6000fd5b50505050508061143e90612ac7565b9050611289565b50508061145190612ac7565b9050611235565b505b600101610e42565b5060005b838110156116de576000838281518110611482576114826127c7565b60200260200101515111156116d65760008382815181106114a5576114a56127c7565b60200260200101515190505b80156116d45760008483815181106114cb576114cb6127c7565b60200260200101516001836114e09190612934565b815181106114f0576114f06127c7565b60200260200101516060015190506000815190505b80156116c157600082611519600184612934565b81518110611529576115296127c7565b6020026020010151600001519050806001600160a01b031663ed463367846001856115549190612934565b81518110611564576115646127c7565b6020026020010151602001518560018661157e9190612934565b8151811061158e5761158e6127c7565b6020026020010151604001518f8f8a8181106115ac576115ac6127c7565b905060200201358e8e8b8181106115c5576115c56127c7565b90506020028101906115d791906127dd565b8c8c815181106115e9576115e96127c7565b602002602001015160018c6115fe9190612934565b8151811061160e5761160e6127c7565b60200260200101518e8d81518110611628576116286127c7565b602002602001015160018d61163d9190612934565b8151811061164d5761164d6127c7565b602002602001015160200151336040518963ffffffff1660e01b815260040161167d98979695949392919061295a565b600060405180830381600087803b15801561169757600080fd5b505af11580156116ab573d6000803e3d6000fd5b5050505050806116ba90612ac7565b9050611505565b5050806116cd90612ac7565b90506114b1565b505b600101611466565b5060005b8381101561181d5760008382815181106116fe576116fe6127c7565b60200260200101515111156118155760005b838281518110611722576117226127c7565b60200260200101515181101561181357336001600160a01b031684838151811061174e5761174e6127c7565b6020026020010151600186858151811061176a5761176a6127c7565b60200260200101515161177d9190612934565b8151811061178d5761178d6127c7565b6020026020010151602001516001600160a01b03167f40dadaa36c6c2e3d7317e24757451ffb2d603d875f0ad5e92c5dd156573b18738685815181106117d5576117d56127c7565b602002602001015184815181106117ee576117ee6127c7565b60200260200101516040516118039190612ade565b60405180910390a3600101611710565b505b6001016116e2565b50505050505050505050565b61183161189a565b600180546001600160a01b0383166001600160a01b031990911681179091556118626000546001600160a01b031690565b6001600160a01b03167f38d16b8cac22d99fc7c124b9cd0de2d3fa1faef420bfe791d8c362d765e2270060405160405180910390a350565b6000546001600160a01b031633146104045760405163118cdaa760e01b8152336004820152602401610555565b6118cf611bed565b6001805460ff60a01b191690557f5db9ee0a495bf2e6ff9c91a7834c1ba4fdd244a5e8aa4e537bd38aeae4b073aa335b6040516001600160a01b03909116815260200160405180910390a1565b6000807f88c1d2ecf185adf710588203a5f263f0ff61be0d33da39792cde19ba9aa4331e83600001518460200151856040015161195c8760600151611c17565b6080808901516040805160208101989098526001600160a01b03968716908801529490931660608601529184015260a083015260c082015260e0015b60408051601f1981840301815291905280516020909101209392505050565b600180546001600160a01b031916905561056781611ce2565b6000306001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016148015611a2957507f000000000000000000000000000000000000000000000000000000000000000046145b15611a5357507f000000000000000000000000000000000000000000000000000000000000000090565b610574604080517f8b73c3c69bb8fe3d512ecc4cf759cc79239f7b179b0ffacaa9a75d522b39400f60208201527f0000000000000000000000000000000000000000000000000000000000000000918101919091527f000000000000000000000000000000000000000000000000000000000000000060608201524660808201523060a082015260009060c00160405160208183030381529060405280519060200120905090565b611b03611b98565b6001805460ff60a01b1916600160a01b1790557f62e78cea01bee320cd4e420270b5ea74000d11b0c9f74754ebdbfc544b05a2586118ff3390565b60606105747f00000000000000000000000000000000000000000000000000000000000000006002611d32565b60606105747f00000000000000000000000000000000000000000000000000000000000000006003611d32565b600154600160a01b900460ff16156104045760405163d93c066560e01b815260040160405180910390fd5b600080600080611bd38686611ddd565b925092509250611be38282611e2a565b5090949350505050565b600154600160a01b900460ff1661040457604051638dfc202b60e01b815260040160405180910390fd5b60008082516001600160401b03811115611c3357611c336124ed565b604051908082528060200260200182016040528015611c5c578160200160208202803683370190505b50905060005b8351811015611cb257611c8d848281518110611c8057611c806127c7565b6020026020010151611ee7565b828281518110611c9f57611c9f6127c7565b6020908102919091010152600101611c62565b5080604051602001611cc49190612bcb565b60405160208183030381529060405280519060200120915050919050565b600080546001600160a01b038381166001600160a01b0319831681178455604051919092169283917f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e09190a35050565b606060ff8314611d4c57611d4583611f48565b9050610509565b818054611d5890612c01565b80601f0160208091040260200160405190810160405280929190818152602001828054611d8490612c01565b8015611dd15780601f10611da657610100808354040283529160200191611dd1565b820191906000526020600020905b815481529060010190602001808311611db457829003601f168201915b50505050509050610509565b60008060008351604103611e175760208401516040850151606086015160001a611e0988828585611f87565b955095509550505050611e23565b50508151600091506002905b9250925092565b6000826003811115611e3e57611e3e612c3b565b03611e47575050565b6001826003811115611e5b57611e5b612c3b565b03611e795760405163f645eedf60e01b815260040160405180910390fd5b6002826003811115611e8d57611e8d612c3b565b03611eae5760405163fce698f760e01b815260048101829052602401610555565b6003826003811115611ec257611ec2612c3b565b03611ee3576040516335e2f38360e21b815260048101829052602401610555565b5050565b6000807f80ad7e1b04ee6d994a125f4714ca0720908bd80ed16063ec8aee4b88e9253e2d8360000151846020015180519060200120604051602001611998939291909283526001600160a01b03919091166020830152604082015260600190565b60606000611f5583612056565b604080516020808252818301909252919250600091906020820181803683375050509182525060208101929092525090565b600080807f7fffffffffffffffffffffffffffffff5d576e7357a4501ddfe92f46681b20a0841115611fc2575060009150600390508261204c565b604080516000808252602082018084528a905260ff891692820192909252606081018790526080810186905260019060a0016020604051602081039080840390855afa158015612016573d6000803e3d6000fd5b5050604051601f1901519150506001600160a01b0381166120425750600092506001915082905061204c565b9250600091508190505b9450945094915050565b600060ff8216601f81111561050957604051632cd44ac360e21b815260040160405180910390fd5b60006020828403121561209057600080fd5b5035919050565b6000602082840312156120a957600080fd5b81356001600160401b038111156120bf57600080fd5b820160c081850312156120d157600080fd5b9392505050565b60005b838110156120f35781810151838201526020016120db565b50506000910152565b600081518084526121148160208601602086016120d8565b601f01601f19169290920160200192915050565b60ff60f81b881681526000602060e0602084015261214960e084018a6120fc565b838103604085015261215b818a6120fc565b606085018990526001600160a01b038816608086015260a0850187905284810360c08601528551808252602080880193509091019060005b818110156121af57835183529284019291840191600101612193565b50909c9b505050505050505050505050565b6020815260006120d160208301846120fc565b60008083601f8401126121e657600080fd5b5081356001600160401b038111156121fd57600080fd5b6020830191508360208260051b850101111561221857600080fd5b9250929050565b6000806000806000806060878903121561223857600080fd5b86356001600160401b038082111561224f57600080fd5b61225b8a838b016121d4565b9098509650602089013591508082111561227457600080fd5b6122808a838b016121d4565b9096509450604089013591508082111561229957600080fd5b506122a689828a016121d4565b979a9699509497509295939492505050565b80356001600160a01b03811681146122cf57600080fd5b919050565b6000602082840312156122e657600080fd5b6120d1826122b8565b6000808335601e1984360301811261230657600080fd5b83016020810192503590506001600160401b0381111561232557600080fd5b80360382131561221857600080fd5b81835281816020850137506000828201602090810191909152601f909101601f19169091010190565b60008383855260208086019550808560051b830101846000805b8881101561240e57858403601f19018a52823536899003605e1901811261239c578283fd5b880160606001600160a01b036123b1836122b8565b1686526123c0878301836122ef565b82898901526123d28389018284612334565b9250505060406123e4818401846122ef565b9350878303828901526123f8838583612334565b9d89019d97505050938601935050600101612377565b509198975050505050505050565b6020815260006001600160a01b0380612434856122b8565b16602084015280612447602086016122b8565b16604084015250604083013560608301526060830135601e1984360301811261246f57600080fd5b83016020810190356001600160401b0381111561248b57600080fd5b8060051b360382131561249d57600080fd5b60c060808501526124b260e08501828461235d565b915050608084013560a08401526124cc60a08501856122ef565b848303601f190160c08601526124e3838284612334565b9695505050505050565b634e487b7160e01b600052604160045260246000fd5b604051606081016001600160401b0381118282101715612525576125256124ed565b60405290565b60405160c081016001600160401b0381118282101715612525576125256124ed565b604051601f8201601f191681016001600160401b0381118282101715612575576125756124ed565b604052919050565b60006001600160401b03821115612596576125966124ed565b5060051b60200190565b60006001600160401b038211156125b9576125b96124ed565b50601f01601f191660200190565b600082601f8301126125d857600080fd5b81356125eb6125e6826125a0565b61254d565b81815284602083860101111561260057600080fd5b816020850160208301376000918101602001919091529392505050565b600082601f83011261262e57600080fd5b8135602061263e6125e68361257d565b82815260059290921b8401810191818101908684111561265d57600080fd5b8286015b8481101561270c5780356001600160401b03808211156126815760008081fd5b908801906060828b03601f190181131561269b5760008081fd5b6126a3612503565b6126ae8885016122b8565b8152604080850135848111156126c45760008081fd5b6126d28e8b838901016125c7565b838b0152509184013591838311156126ea5760008081fd5b6126f88d8a858801016125c7565b908201528652505050918301918301612661565b509695505050505050565b600060c0828403121561272957600080fd5b61273161252b565b905061273c826122b8565b815261274a602083016122b8565b60208201526040820135604082015260608201356001600160401b038082111561277357600080fd5b61277f8583860161261d565b60608401526080840135608084015260a08401359150808211156127a257600080fd5b506127af848285016125c7565b60a08301525092915050565b60006105093683612717565b634e487b7160e01b600052603260045260246000fd5b6000808335601e198436030181126127f457600080fd5b8301803591506001600160401b0382111561280e57600080fd5b60200191503681900382131561221857600080fd5b6000602080838503121561283657600080fd5b82356001600160401b038082111561284d57600080fd5b818501915085601f83011261286157600080fd5b813561286f6125e68261257d565b81815260059190911b8301840190848101908883111561288e57600080fd5b8585015b838110156128c6578035858111156128aa5760008081fd5b6128b88b89838a0101612717565b845250918601918601612892565b5098975050505050505050565b8281526040602082015260006128ec60408301846120fc565b949350505050565b60006020828403121561290657600080fd5b81516001600160e01b0319811681146120d157600080fd5b634e487b7160e01b600052601160045260246000fd5b818103818111156105095761050961291e565b808201808211156105095761050961291e565b60e08152600061296d60e083018b6120fc565b828103602084015261297f818b6120fc565b9050886040840152828103606084015261299a81888a612334565b608084019690965250506001600160a01b0392831660a0820152911660c09091015295945050505050565b8381526040602082015260006129df604083018486612334565b95945050505050565b600060208083850312156129fb57600080fd5b82516001600160401b0380821115612a1257600080fd5b818501915085601f830112612a2657600080fd5b8151612a346125e68261257d565b81815260059190911b83018401908481019088831115612a5357600080fd5b8585015b838110156128c657805185811115612a6f5760008081fd5b8601603f81018b13612a815760008081fd5b878101516040612a936125e6836125a0565b8281528d82848601011115612aa85760008081fd5b612ab7838c83018487016120d8565b8652505050918601918601612a57565b600081612ad657612ad661291e565b506000190190565b602080825282516001600160a01b0390811683830152838201518116604080850191909152808501516060808601919091528086015160c06080870152805160e0870181905260009594610100600583901b8901810195919493870193919290890190885b81811015612b9d5760ff198b8903018352855187815116895289810151858b8b0152612b71868b01826120fc565b918701518a83038b890152919050612b8981836120fc565b995050509488019491880191600101612b43565b50505050505050608085015160a085015260a08501519150601f198482030160c08501526129df81836120fc565b815160009082906020808601845b83811015612bf557815185529382019390820190600101612bd9565b50929695505050505050565b600181811c90821680612c1557607f821691505b602082108103612c3557634e487b7160e01b600052602260045260246000fd5b50919050565b634e487b7160e01b600052602160045260246000fdfea264697066735822122073f8fd2b36b643aff6f988638bc7c8ab2f41546c01a777524170b479e36618c564736f6c63430008170033"}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/constants.cjs"}],[2771,{"./types.cjs":2792},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SimulationRevertedError=n.SimulationInvalidResponseError=n.SimulationChainNotSupportedError=n.FirstTimeInteractionError=n.SimulationError=void 0;const r=e("./types.cjs");class s extends Error{constructor(e,t){super(e??"Simulation failed"),this.code=t}}n.SimulationError=s;class a extends Error{constructor(e,t){super(e??"Error checking first time interaction"),this.code=t}}n.FirstTimeInteractionError=a;n.SimulationChainNotSupportedError=class extends s{constructor(e){super(`Chain is not supported: ${e}`,r.SimulationErrorCode.ChainNotSupported)}};n.SimulationInvalidResponseError=class extends s{constructor(){super("Invalid response from simulation API",r.SimulationErrorCode.InvalidResponse)}};n.SimulationRevertedError=class extends s{constructor(){super("Transaction was reverted",r.SimulationErrorCode.Reverted)}}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/errors.cjs"}],[2772,{"../logger.cjs":2791,"../types.cjs":2792,"../utils/gas-fees.cjs":2799,"@metamask/gas-fee-controller":1941,"@metamask/utils":2835},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,a,i,o,c,u=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(n,"__esModule",{value:!0}),n.DefaultGasFeeFlow=void 0;const l=e("@metamask/gas-fee-controller"),d=e("@metamask/utils"),f=e("../logger.cjs"),h=e("../types.cjs"),p=e("../utils/gas-fees.cjs"),m=(0,d.createModuleLogger)(f.projectLogger,"default-gas-fee-flow");n.DefaultGasFeeFlow=class{constructor(){r.add(this)}matchesTransaction(){return!0}async getGasFees(e){const{gasFeeControllerData:t}=e,{gasEstimateType:n,gasFeeEstimates:o}=t;let c;switch(n){case l.GAS_ESTIMATE_TYPES.FEE_MARKET:m("Using fee market estimates",o),c=u(this,r,"m",s).call(this,o);break;case l.GAS_ESTIMATE_TYPES.LEGACY:m("Using legacy estimates",o),c=u(this,r,"m",a).call(this,o);break;case l.GAS_ESTIMATE_TYPES.ETH_GASPRICE:m("Using eth_gasPrice estimates",o),c=u(this,r,"m",i).call(this,o);break;default:throw new Error(`Unsupported gas estimate type: ${n}`)}return{estimates:c}}},r=new WeakSet,s=function(e){const t=Object.values(h.GasFeeEstimateLevel).reduce((t,n)=>({...t,[n]:u(this,r,"m",o).call(this,e,n)}),{});return{type:h.GasFeeEstimateType.FeeMarket,...t}},a=function(e){const t=Object.values(h.GasFeeEstimateLevel).reduce((t,n)=>({...t,[n]:u(this,r,"m",c).call(this,e,n)}),{});return{type:h.GasFeeEstimateType.Legacy,...t}},i=function(e){return{type:h.GasFeeEstimateType.GasPrice,gasPrice:(0,p.gweiDecimalToWeiHex)(e.gasPrice)}},o=function(e,t){return{maxFeePerGas:(0,p.gweiDecimalToWeiHex)(e[t].suggestedMaxFeePerGas),maxPriorityFeePerGas:(0,p.gweiDecimalToWeiHex)(e[t].suggestedMaxPriorityFeePerGas)}},c=function(e,t){return(0,p.gweiDecimalToWeiHex)(e[t])}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/gas-flows/DefaultGasFeeFlow.cjs"}],[2773,{"../logger.cjs":2791,"../types.cjs":2792,"./DefaultGasFeeFlow.cjs":2772,"@metamask/controller-utils":1321,"@metamask/utils":2835},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,a,i,o,c,u=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(n,"__esModule",{value:!0}),n.LineaGasFeeFlow=void 0;const l=e("@metamask/controller-utils"),d=e("@metamask/utils"),f=e("./DefaultGasFeeFlow.cjs"),h=e("../logger.cjs"),p=e("../types.cjs"),m=(0,d.createModuleLogger)(h.projectLogger,"linea-gas-fee-flow"),g=[l.ChainId["linea-mainnet"],l.ChainId["linea-goerli"],l.ChainId["linea-sepolia"]],b={low:1,medium:1.35,high:1.7},y={low:1,medium:1.05,high:1.1};n.LineaGasFeeFlow=class{constructor(){r.add(this)}matchesTransaction({transactionMeta:e}){return g.includes(e.chainId)}async getGasFees(e){try{return await u(this,r,"m",s).call(this,e)}catch(t){return m("Using default flow as fallback due to error",t),(new f.DefaultGasFeeFlow).getGasFees(e)}}},r=new WeakSet,s=async function(e){const{ethQuery:t,transactionMeta:n}=e,s=await u(this,r,"m",a).call(this,n,t);m("Received Linea response",s);const d=u(this,r,"m",i).call(this,s.baseFeePerGas,b);m("Generated base fees",u(this,r,"m",c).call(this,d));const f=u(this,r,"m",i).call(this,s.priorityFeePerGas,y);m("Generated priority fees",u(this,r,"m",c).call(this,f));const h=u(this,r,"m",o).call(this,d,f);m("Generated max fees",u(this,r,"m",c).call(this,h));return{estimates:Object.values(p.GasFeeEstimateLevel).reduce((e,t)=>({...e,[t]:{maxFeePerGas:(0,l.toHex)(h[t]),maxPriorityFeePerGas:(0,l.toHex)(f[t])}}),{type:p.GasFeeEstimateType.FeeMarket})}},a=function(e,t){return(0,l.query)(t,"linea_estimateGas",[{from:e.txParams.from,to:e.txParams.to,value:e.txParams.value,input:e.txParams.data}])},i=function(e,t){const n=(0,l.hexToBN)(e);return{low:n.muln(t.low),medium:n.muln(t.medium),high:n.muln(t.high)}},o=function(e,t){return{low:e.low.add(t.low),medium:e.medium.add(t.medium),high:e.high.add(t.high)}},c=function(e){return Object.values(p.GasFeeEstimateLevel).map(t=>e[t].toString(10))}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/gas-flows/LineaGasFeeFlow.cjs"}],[2774,{"../constants.cjs":2770,"./OracleLayer1GasFeeFlow.cjs":2775},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.OptimismLayer1GasFeeFlow=void 0;const r=e("./OracleLayer1GasFeeFlow.cjs"),s=e("../constants.cjs"),a=[s.CHAIN_IDS.OPTIMISM,s.CHAIN_IDS.OPTIMISM_TESTNET,s.CHAIN_IDS.BASE,s.CHAIN_IDS.BASE_TESTNET,s.CHAIN_IDS.OPBNB,s.CHAIN_IDS.OPBNB_TESTNET,s.CHAIN_IDS.ZORA];class i extends r.OracleLayer1GasFeeFlow{constructor(){super("0x420000000000000000000000000000000000000F")}matchesTransaction({transactionMeta:e}){return a.includes(e.chainId)}}n.OptimismLayer1GasFeeFlow=i}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/gas-flows/OptimismLayer1GasFeeFlow.cjs"}],[2775,{"../logger.cjs":2791,"../utils/prepare.cjs":2805,"@ethersproject/contracts":635,"@ethersproject/providers":673,"@metamask/utils":2835,buffer:3793},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){var r,s,a,i,o,c,u=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},l=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(n,"__esModule",{value:!0}),n.OracleLayer1GasFeeFlow=void 0;const d=e("@ethersproject/contracts"),f=e("@ethersproject/providers"),h=e("@metamask/utils"),p=e("../logger.cjs"),m=e("../utils/prepare.cjs"),g=(0,h.createModuleLogger)(p.projectLogger,"oracle-layer1-gas-fee-flow"),b=[{inputs:[{internalType:"bytes",name:"_data",type:"bytes"}],name:"getL1Fee",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}];n.OracleLayer1GasFeeFlow=class{constructor(e,t){r.add(this),s.set(this,void 0),a.set(this,void 0),u(this,s,e,"f"),u(this,a,t??!1,"f")}async getLayer1Fee(e){try{return await l(this,r,"m",i).call(this,e)}catch(e){throw g("Failed to get oracle layer 1 gas fee",e),new Error("Failed to get oracle layer 1 gas fee")}}},s=new WeakMap,a=new WeakMap,r=new WeakSet,i=async function(e){const{provider:t,transactionMeta:n}=e,i=new d.Contract(l(this,s,"f"),b,new f.Web3Provider(t)),c=l(this,r,"m",o).call(this,n,l(this,a,"f")).serialize(),u=await i.getL1Fee(c);if(u===undefined)throw new Error("No value returned from oracle contract");return{layer1Fee:u.toHexString()}},o=function(e,n){const s=l(this,r,"m",c).call(this,e),{chainId:a}=e;let i=(0,m.prepareTransaction)(a,s);if(n){const e=t.from("abcdef0123456789abcdef0123456789abcdef0123456789abcdef0123456789","hex");i=i.sign(e)}return i},c=function(e){return{...e.txParams,gasLimit:e.txParams.gas}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/gas-flows/OracleLayer1GasFeeFlow.cjs"}],[2776,{"../logger.cjs":2791,"../types.cjs":2792,"../utils/feature-flags.cjs":2797,"../utils/gas-fees.cjs":2799,"./DefaultGasFeeFlow.cjs":2772,"@metamask/gas-fee-controller":1941,"@metamask/utils":2835},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,a,i,o,c=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(n,"__esModule",{value:!0}),n.randomiseDecimalGWEIAndConvertToHex=n.RandomisedEstimationsGasFeeFlow=void 0;const u=e("@metamask/gas-fee-controller"),l=e("@metamask/utils"),d=e("./DefaultGasFeeFlow.cjs"),f=e("../logger.cjs"),h=e("../types.cjs"),p=e("../utils/feature-flags.cjs"),m=e("../utils/gas-fees.cjs"),g=(0,l.createModuleLogger)(f.projectLogger,"randomised-estimation-gas-fee-flow");function b(e,t,n){const r=(0,m.gweiDecimalToWeiDecimal)(e),s=r.length,a=Math.min(t,s-n);if(0===Number(r)||a<=0)return`0x${Number(r).toString(16)}`;const i=s-a,o=r.slice(0,i),c=r.slice(-a),u=function(e,t){const n=10**e;return t+Math.floor(Math.random()*(n-t))}(a,Number(c)),d=`0x${(BigInt(o+"0".repeat(a))+BigInt(u)).toString(16)}`;return(0,l.add0x)(d)}n.RandomisedEstimationsGasFeeFlow=class{constructor(){r.add(this)}matchesTransaction({transactionMeta:e,messenger:t}){const{chainId:n}=e;return(0,p.getGasFeeRandomisation)(t).randomisedGasFeeDigits[n]!==undefined}async getGasFees(e){try{return await c(this,r,"m",a).call(this,e)}catch(t){return g("Using default flow as fallback due to error",t),await c(this,r,"m",s).call(this,e)}}},r=new WeakSet,s=async function(e){return(new d.DefaultGasFeeFlow).getGasFees(e)},a=async function(e){const{messenger:t,gasFeeControllerData:n,transactionMeta:a}=e,{gasEstimateType:o,gasFeeEstimates:l}=n,d=(0,p.getGasFeeRandomisation)(t),f=d.randomisedGasFeeDigits[a.chainId],h=d.preservedNumberOfDigits??2;if(o===u.GAS_ESTIMATE_TYPES.FEE_MARKET){g("Randomising fee market estimates",l);const e=c(this,r,"m",i).call(this,l,f,h);return g("Added randomised fee market estimates",e),{estimates:e}}return await c(this,r,"m",s).call(this,e)},i=function(e,t,n){const s=Object.values(h.GasFeeEstimateLevel).reduce((s,a)=>({...s,[a]:c(this,r,"m",o).call(this,e,a,t,n)}),{});return{type:h.GasFeeEstimateType.FeeMarket,...s}},o=function(e,t,n,r){return{maxFeePerGas:(0,m.gweiDecimalToWeiHex)(e[t].suggestedMaxFeePerGas),maxPriorityFeePerGas:b(e[t].suggestedMaxPriorityFeePerGas,n,r)}},n.randomiseDecimalGWEIAndConvertToHex=b}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/gas-flows/RandomisedEstimationsGasFeeFlow.cjs"}],[2777,{"../constants.cjs":2770,"./OracleLayer1GasFeeFlow.cjs":2775},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ScrollLayer1GasFeeFlow=void 0;const r=e("./OracleLayer1GasFeeFlow.cjs"),s=e("../constants.cjs"),a=[s.CHAIN_IDS.SCROLL,s.CHAIN_IDS.SCROLL_SEPOLIA];class i extends r.OracleLayer1GasFeeFlow{constructor(){super("0x5300000000000000000000000000000000000002",!0)}matchesTransaction({transactionMeta:e}){return a.includes(e.chainId)}}n.ScrollLayer1GasFeeFlow=i}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/gas-flows/ScrollLayer1GasFeeFlow.cjs"}],[2778,{"../types.cjs":2792,"@metamask/controller-utils":1321},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,a,i=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},o=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n};Object.defineProperty(n,"__esModule",{value:!0}),n.TestGasFeeFlow=void 0;const c=e("@metamask/controller-utils"),u=e("../types.cjs"),l=1e15;n.TestGasFeeFlow=class{constructor(){r.add(this),s.set(this,1)}matchesTransaction(){return!0}async getGasFees(e){const{transactionMeta:t}=e,{txParams:n}=t,{gas:c}=n;if(!c)throw new Error("Cannot estimate fee without gas value");const d=parseInt(c,16),f=.5*l,h=(i(this,s,"f")+1)*l,p=i(this,s,"f")*l,m=h-f,g=p-f,b=h+f,y=p+f;return o(this,s,i(this,s,"f")+1,"f"),{estimates:{type:u.GasFeeEstimateType.FeeMarket,low:{maxFeePerGas:i(this,r,"m",a).call(this,m,d),maxPriorityFeePerGas:i(this,r,"m",a).call(this,g,d)},medium:{maxFeePerGas:i(this,r,"m",a).call(this,h,d),maxPriorityFeePerGas:i(this,r,"m",a).call(this,p,d)},high:{maxFeePerGas:i(this,r,"m",a).call(this,b,d),maxPriorityFeePerGas:i(this,r,"m",a).call(this,y,d)}}}}},s=new WeakMap,r=new WeakSet,a=function(e,t){const n=Math.ceil(e/t);return(0,c.toHex)(n)}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/gas-flows/TestGasFeeFlow.cjs"}],[2779,{"../api/accounts-api.cjs":2768,"../constants.cjs":2770,"../index.cjs":2790,"../logger.cjs":2791,"../types.cjs":2792,"@metamask/controller-utils":1321,"bn.js":3732,uuid:5398},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,a,i,o=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.AccountsApiRemoteTransactionSource=n.SUPPORTED_CHAIN_IDS=void 0;const u=e("@metamask/controller-utils"),l=c(e("bn.js")),d=e("uuid"),f=e("../index.cjs"),h=e("../api/accounts-api.cjs"),p=e("../constants.cjs"),m=e("../logger.cjs"),g=e("../types.cjs");n.SUPPORTED_CHAIN_IDS=[p.CHAIN_IDS.MAINNET,p.CHAIN_IDS.POLYGON,p.CHAIN_IDS.BSC,p.CHAIN_IDS.LINEA_MAINNET,p.CHAIN_IDS.BASE,p.CHAIN_IDS.OPTIMISM,p.CHAIN_IDS.ARBITRUM,p.CHAIN_IDS.SCROLL,p.CHAIN_IDS.SEI];const b=(0,m.createModuleLogger)(m.incomingTransactionsLogger,"accounts-api-source");n.AccountsApiRemoteTransactionSource=class{constructor(){r.add(this)}getSupportedChains(){return n.SUPPORTED_CHAIN_IDS}async fetchTransactions(e){const{address:t}=e,c=await o(this,r,"m",s).call(this,e,n.SUPPORTED_CHAIN_IDS);b("Fetched transactions",c.length,c);const u=await Promise.all(c.map(e=>o(this,r,"m",i).call(this,t,e)));b("Normalized transactions",u);const l=o(this,r,"m",a).call(this,e,u);return b("Filtered transactions",l.length,l),l}},r=new WeakSet,s=async function(e,t){const{address:n,tags:r}=e,s=[];try{const e=await(0,h.getAccountTransactions)({address:n,chainIds:t,sortDirection:"DESC",tags:r});e?.data&&s.push(...e.data)}catch(e){b("Error while fetching transactions",e)}return s},a=function(e,t){const{address:n,includeTokenTransfers:r,updateTransactions:s}=e;let a=t;return s||(a=a.filter(e=>e.txParams.to===n)),r||(a=a.filter(e=>!e.isTransfer)),a},i=async function(e,t){const n=String(t.blockNumber),r=`0x${t.chainId.toString(16)}`,{hash:s}=t,a=new Date(t.timestamp).getTime(),i=(0,d.v1)({msecs:a}),{from:o}=t,c=(0,u.BNToHex)(new l.default(t.gas)),h=(0,u.BNToHex)(new l.default(t.gasPrice)),p=(0,u.BNToHex)(new l.default(t.gasUsed)),m=(0,u.BNToHex)(new l.default(t.nonce)),b=t.methodId,y=g.TransactionType.incoming,w=t.isError?g.TransactionStatus.failed:g.TransactionStatus.confirmed,v=t.valueTransfers.find(t=>(t.to.toLowerCase()===e.toLowerCase()||t.from.toLowerCase()===e.toLowerCase())&&t.contractAddress),E=v?.to.toLowerCase()===e.toLowerCase()&&o.toLowerCase()!==e.toLowerCase(),T=o.toLowerCase()===e.toLowerCase(),S=v?.amount,x=v?.contractAddress,P=v?.decimal,k=v?.symbol,I=(0,u.BNToHex)(new l.default(E?v?.amount??t.value:t.value)),A=E?e:t.to,_={blockNumber:n,chainId:r,error:w===g.TransactionStatus.failed?new Error("Transaction failed"):undefined,hash:s,id:i,isTransfer:E,networkClientId:"",status:w,time:a,toSmartContract:!1,transferInformation:v?{amount:S,contractAddress:x,decimals:P,symbol:k}:undefined,txParams:{chainId:r,data:b,from:o,gas:c,gasPrice:h,gasUsed:p,nonce:m,to:A,value:I},type:y,verifiedOnBlockchain:!1};return T&&(_.type=(await(0,f.determineTransactionType)(_.txParams)).type),_}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/helpers/AccountsApiRemoteTransactionSource.cjs"}],[2780,{"../gas-flows/DefaultGasFeeFlow.cjs":2772,"../logger.cjs":2791,"../types.cjs":2792,"../utils/gas-flow.cjs":2800,"../utils/layer1-gas-fee-flow.cjs":2803,"@metamask/eth-query":1854,"@metamask/utils":2835,events:4105},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,a,i,o,c,u,l,d,f,h,p,m,g,b,y,w,v,E,T,S,x,P,k=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},I=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},A=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.updateTransactionGasEstimates=n.updateTransactionGasProperties=n.GasFeePoller=void 0;const _=A(e("@metamask/eth-query")),C=e("@metamask/utils"),j=A(e("events")),R=e("../gas-flows/DefaultGasFeeFlow.cjs"),O=e("../logger.cjs"),B=e("../types.cjs"),F=e("../utils/gas-flow.cjs"),L=e("../utils/layer1-gas-fee-flow.cjs"),M=(0,C.createModuleLogger)(O.projectLogger,"gas-fee-poller");function N(e,t,n,r){const{type:s}=t;if(r){if(s===B.GasFeeEstimateType.FeeMarket){const r=t;e.maxFeePerGas=r[n]?.maxFeePerGas,e.maxPriorityFeePerGas=r[n]?.maxPriorityFeePerGas}if(s===B.GasFeeEstimateType.GasPrice){const n=t;e.maxFeePerGas=n.gasPrice,e.maxPriorityFeePerGas=n.gasPrice}if(s===B.GasFeeEstimateType.Legacy){const r=t[n];e.maxFeePerGas=r,e.maxPriorityFeePerGas=r}delete e.gasPrice}else{if(s===B.GasFeeEstimateType.FeeMarket){const r=t;e.gasPrice=r[n]?.maxFeePerGas}if(s===B.GasFeeEstimateType.GasPrice){const n=t;e.gasPrice=n.gasPrice}if(s===B.GasFeeEstimateType.Legacy){const r=t;e.gasPrice=r[n]}delete e.maxFeePerGas,delete e.maxPriorityFeePerGas}}n.GasFeePoller=class{constructor({findNetworkClientIdByChainId:e,gasFeeFlows:t,getGasFeeControllerEstimates:n,getProvider:g,getTransactions:b,getTransactionBatches:y,layer1GasFeeFlows:w,messenger:v,onStateChange:E}){r.add(this),this.hub=new j.default,s.set(this,void 0),a.set(this,void 0),i.set(this,void 0),o.set(this,void 0),c.set(this,void 0),u.set(this,void 0),l.set(this,void 0),d.set(this,void 0),f.set(this,void 0),h.set(this,!1),k(this,s,e,"f"),k(this,a,t,"f"),k(this,l,w,"f"),k(this,i,n,"f"),k(this,o,g,"f"),k(this,c,b,"f"),k(this,u,y,"f"),k(this,d,v,"f"),E(()=>{const e=I(this,r,"m",S).call(this),t=I(this,r,"m",x).call(this);e.length||t.length?I(this,r,"m",p).call(this):I(this,r,"m",m).call(this)})}},s=new WeakMap,a=new WeakMap,i=new WeakMap,o=new WeakMap,c=new WeakMap,u=new WeakMap,l=new WeakMap,d=new WeakMap,f=new WeakMap,h=new WeakMap,r=new WeakSet,p=function(){I(this,h,"f")||(I(this,r,"m",g).call(this),k(this,h,!0,"f"),M("Started polling"))},m=function(){I(this,h,"f")&&(clearTimeout(I(this,f,"f")),k(this,f,undefined,"f"),k(this,h,!1,"f"),M("Stopped polling"))},g=async function e(){await I(this,r,"m",b).call(this),await I(this,r,"m",y).call(this),k(this,f,setTimeout(()=>I(this,r,"m",e).call(this),1e4),"f")},b=async function(){const e=I(this,r,"m",S).call(this);if(!e.length)return;M("Found unapproved transactions",e.length);const t=await I(this,r,"m",P).call(this,e);M("Retrieved gas fee controller data",t),await Promise.all(e.flatMap(e=>{const{chainId:n}=e,s=t.get(n);return I(this,r,"m",w).call(this,e,s)}))},y=async function(){const e=I(this,r,"m",x).call(this);if(!e.length)return;M("Found unapproved transaction batches",e.length);const t=await I(this,r,"m",P).call(this,e);M("Retrieved gas fee controller data",t),await Promise.all(e.flatMap(e=>{const{chainId:n}=e,s=t.get(n);return I(this,r,"m",v).call(this,e,s)}))},w=async function(e,t){const{id:n}=e,[s,a]=await Promise.all([I(this,r,"m",E).call(this,e,t),I(this,r,"m",T).call(this,e)]);(s||a)&&this.hub.emit("transaction-updated",{transactionId:n,gasFeeEstimates:s?.gasFeeEstimates,gasFeeEstimatesLoaded:s?.gasFeeEstimatesLoaded,layer1GasFee:a})},v=async function(e,t){const{id:n}=e,r=new _.default(I(this,o,"f").call(this,e.networkClientId)),s=new R.DefaultGasFeeFlow,a={ethQuery:r,gasFeeControllerData:t,messenger:I(this,d,"f"),transactionMeta:{...e,txParams:{...e.transactions?.[0],from:e.from,gas:e.gas},time:Date.now()}};let i;try{i=(await s.getGasFees(a)).estimates}catch(t){M("Failed to get gas fees for batch",e.id,t)}i&&this.hub.emit("transaction-batch-updated",{transactionBatchId:n,gasFeeEstimates:i,gasFeeEstimatesLoaded:!0})},E=async function(e,t){const{networkClientId:n}=e,r=new _.default(I(this,o,"f").call(this,n)),s=(0,F.getGasFeeFlow)(e,I(this,a,"f"),I(this,d,"f"));s&&M("Found gas fee flow",s.constructor.name,e.id);const i={ethQuery:r,gasFeeControllerData:t,messenger:I(this,d,"f"),transactionMeta:e};let c;if(s)try{c=(await s.getGasFees(i)).estimates}catch(t){M("Failed to get suggested gas fees",e.id,t)}return!c&&e.gasFeeEstimatesLoaded?undefined:(M("Updated gas fee estimates",{gasFeeEstimates:c,transaction:e.id}),{gasFeeEstimates:c,gasFeeEstimatesLoaded:!0})},T=async function(e){const{networkClientId:t}=e,n=I(this,o,"f").call(this,t),r=await(0,L.getTransactionLayer1GasFee)({layer1GasFeeFlows:I(this,l,"f"),messenger:I(this,d,"f"),provider:n,transactionMeta:e});return r&&M("Updated layer 1 gas fee",r,e.id),r},S=function(){return I(this,c,"f").call(this).filter(e=>e.status===B.TransactionStatus.unapproved)},x=function(){return I(this,u,"f").call(this).filter(e=>e.status===B.TransactionStatus.unapproved)},P=async function(e){const t=new Map;for(const n of e){const{chainId:e,networkClientId:r}=n;if(t.has(e))continue;const a=r??I(this,s,"f").call(this,e);t.set(e,a)}M("Extracted network client IDs by chain ID",t);const n=Array.from(t.entries()).map(async([e,t])=>[e,await I(this,i,"f").call(this,{networkClientId:t})]);return new Map(await Promise.all(n))},n.updateTransactionGasProperties=function({gasFeeEstimates:e,gasFeeEstimatesLoaded:t,isTxParamsGasFeeUpdatesEnabled:n,layer1GasFee:r,txMeta:s}){const a=s.userFeeLevel,i=Object.values(B.GasFeeEstimateLevel).includes(a);if(n(s)&&i&&e){const t=s.txParams.type!==B.TransactionEnvelopeType.legacy;N(s.txParams,e,a,t)}e&&(s.gasFeeEstimates=e),t!==undefined&&(s.gasFeeEstimatesLoaded=t),r&&(s.layer1GasFee=r)},n.updateTransactionGasEstimates=function({txMeta:e,userFeeLevel:t}){const{txParams:n,gasFeeEstimates:r}=e;if(!r)return;N(n,r,t,e.txParams.type!==B.TransactionEnvelopeType.legacy)}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/helpers/GasFeePoller.cjs"}],[2781,{"../logger.cjs":2791,"../utils/feature-flags.cjs":2797,events:4105},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,a,i,o,c,u,l,d,f,h,p,m,g,b,y,w,v=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},E=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},T=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.IncomingTransactionHelper=void 0;const S=T(e("events")),x=e("../logger.cjs"),P=e("../utils/feature-flags.cjs");n.IncomingTransactionHelper=class{constructor({client:e,getCurrentAccount:t,getLocalTransactions:n,includeTokenTransfers:m,isEnabled:g,messenger:b,remoteTransactionSource:y,trimTransactions:w,updateTransactions:E}){r.add(this),s.set(this,void 0),a.set(this,void 0),i.set(this,void 0),o.set(this,void 0),c.set(this,void 0),u.set(this,void 0),l.set(this,void 0),d.set(this,void 0),f.set(this,void 0),h.set(this,void 0),p.set(this,void 0),this.hub=new S.default,v(this,s,e,"f"),v(this,a,t,"f"),v(this,i,n,"f"),v(this,o,m,"f"),v(this,c,g??(()=>!0),"f"),v(this,u,!1,"f"),v(this,l,b,"f"),v(this,d,y,"f"),v(this,h,w,"f"),v(this,p,E,"f")}start(){if(E(this,u,"f"))return;if(!E(this,r,"m",b).call(this))return;const e=E(this,r,"m",y).call(this);(0,x.incomingTransactionsLogger)("Started polling",{interval:e}),v(this,u,!0,"f"),E(this,r,"m",m).call(this).catch(e=>{(0,x.incomingTransactionsLogger)("Initial polling failed",e)})}stop(){E(this,f,"f")&&clearTimeout(E(this,f,"f")),E(this,u,"f")&&(v(this,u,!1,"f"),(0,x.incomingTransactionsLogger)("Stopped polling"))}async update({isInterval:e,tags:t}={}){const n=E(this,r,"m",w).call(this,t,e);if((0,x.incomingTransactionsLogger)("Checking for incoming transactions",{isInterval:Boolean(e),tags:n}),!E(this,r,"m",b).call(this))return;const s=E(this,a,"f").call(this),c=E(this,o,"f")??!0,u=E(this,p,"f")??!1;let l=[];try{l=await E(this,d,"f").fetchTransactions({address:s.address,includeTokenTransfers:c,tags:n,updateTransactions:u})}catch(e){return void(0,x.incomingTransactionsLogger)("Error while fetching remote transactions",e)}if(!l.length)return;E(this,r,"m",g).call(this,l),(0,x.incomingTransactionsLogger)("Found potential transactions",l.length,l);const f=E(this,i,"f").call(this),m=l.filter(e=>!f.some(t=>t.hash?.toLowerCase()===e.hash?.toLowerCase()&&t.txParams.from?.toLowerCase()===e.txParams.from?.toLowerCase()&&t.type===e.type));if(!m.length)return void(0,x.incomingTransactionsLogger)("All transactions are already known");(0,x.incomingTransactionsLogger)("Found unique transactions",m.length,m);const y=E(this,h,"f").call(this,[...m,...f]),v=m.map(e=>e.id),T=y.filter(e=>v.includes(e.id));T.length?((0,x.incomingTransactionsLogger)("Adding new transactions",T.length,T),this.hub.emit("transactions",T)):(0,x.incomingTransactionsLogger)("All unique transactions truncated due to limit")}},s=new WeakMap,a=new WeakMap,i=new WeakMap,o=new WeakMap,c=new WeakMap,u=new WeakMap,l=new WeakMap,d=new WeakMap,f=new WeakMap,h=new WeakMap,p=new WeakMap,r=new WeakSet,m=async function e(){try{await this.update({isInterval:!0})}catch(e){console.error("Error while checking incoming transactions",e)}E(this,u,"f")&&v(this,f,setTimeout(()=>E(this,r,"m",e).call(this),E(this,r,"m",y).call(this)),"f")},g=function(e){e.sort((e,t)=>e.time<t.time?-1:1)},b=function(){return E(this,c,"f").call(this)},y=function(){return(0,P.getIncomingTransactionsPollingInterval)(E(this,l,"f"))},w=function(e,t){const n=[];return E(this,s,"f")&&n.push(E(this,s,"f")),e?.length?n.push(...e):t&&n.push("automatic-polling"),n?.length?n:undefined}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/helpers/IncomingTransactionHelper.cjs"}],[2782,{"../logger.cjs":2791,"@metamask/utils":2835,"async-mutex":3618,"eth-method-registry":4018,events:4105},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,a,i,o,c,u=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},l=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},d=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.MethodDataHelper=void 0;const f=e("@metamask/utils"),h=e("async-mutex"),p=e("eth-method-registry"),m=d(e("events")),g=e("../logger.cjs"),b=(0,f.createModuleLogger)(g.projectLogger,"method-data");n.MethodDataHelper=class{constructor({getProvider:e,getState:t}){r.add(this),s.set(this,void 0),a.set(this,void 0),i.set(this,void 0),o.set(this,new h.Mutex),this.hub=new m.default,u(this,s,e,"f"),u(this,a,t,"f"),u(this,i,new Map,"f")}async lookup(e,t){b("lookup",e,t);const n=await l(this,o,"f").acquire();try{const n=l(this,a,"f").call(this)[e];if(n)return b("Cached",n),n;let o=l(this,i,"f").get(t);if(!o){const e=l(this,s,"f").call(this,t);o=new p.MethodRegistry({provider:e}),l(this,i,"f").set(t,o),b("Created registry",t)}const u=await l(this,r,"m",c).call(this,e,o);return b("Result",u),this.hub.emit("update",{fourBytePrefix:e,methodData:u}),u}finally{n()}}},s=new WeakMap,a=new WeakMap,i=new WeakMap,o=new WeakMap,r=new WeakSet,c=async function(e,t){const n=await t.lookup(e);if(!n)return b("No method found",e),{registryMethod:"",parsedRegistryMethod:{name:undefined,args:undefined}};b("Parsing",n);return{registryMethod:n,parsedRegistryMethod:t.parse(n)}}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/helpers/MethodDataHelper.cjs"}],[2783,{"../logger.cjs":2791,"async-mutex":3618},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,a,i,o,c,u,l,d,f,h,p,m=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},g=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(n,"__esModule",{value:!0}),n.MultichainTrackingHelper=void 0;const b=e("async-mutex"),y=e("../logger.cjs"),w=(0,y.createModuleLogger)(y.projectLogger,"multichain-tracking");n.MultichainTrackingHelper=class{constructor({findNetworkClientIdByChainId:e,getNetworkClientById:t,getNetworkClientRegistry:n,removePendingTransactionTrackerListeners:b,createNonceTracker:y,createPendingTransactionTracker:v,onNetworkStateChange:E}){r.add(this),s.set(this,void 0),a.set(this,void 0),i.set(this,void 0),o.set(this,void 0),c.set(this,void 0),u.set(this,void 0),l.set(this,new Map),d.set(this,new Map),this.checkForPendingTransactionAndStartPolling=()=>{for(const[,e]of g(this,d,"f"))e.pendingTransactionTracker.startIfPendingTransactions()},f.set(this,e=>{const t=Object.keys(e),n=Array.from(g(this,d,"f").keys()),s=n.filter(e=>!t.includes(e));s.forEach(e=>{g(this,r,"m",h).call(this,e)});const a=t.filter(e=>!n.includes(e));a.forEach(e=>{g(this,r,"m",p).call(this,e)}),a.length&&w("Added trackers",a),s.length&&w("Removed trackers",s)}),m(this,s,e,"f"),m(this,a,t,"f"),m(this,i,n,"f"),m(this,o,b,"f"),m(this,c,y,"f"),m(this,u,v,"f"),E((e,t)=>{const n=g(this,i,"f").call(this);t.forEach(({op:e,path:t})=>{if("remove"===e&&"networkConfigurations"===t[0]){const e=t[1];delete n[e]}}),g(this,f,"f").call(this,n)})}initialize(){const e=g(this,i,"f").call(this);g(this,f,"f").call(this,e),w("Initialized")}has(e){return g(this,d,"f").has(e)}async acquireNonceLockForChainIdKey({chainId:e,key:t="global"}){let n=g(this,l,"f").get(e);n||(n=new Map,g(this,l,"f").set(e,n));let r=n.get(t);return r||(r=new b.Mutex,n.set(t,r)),await r.acquire()}async getNonceLock(e,t){const n=g(this,a,"f").call(this,t),r=await this.acquireNonceLockForChainIdKey({chainId:n.configuration.chainId,key:e}),s=g(this,d,"f").get(t)?.nonceTracker;if(!s)throw new Error(`Missing nonce tracker for network client ID - ${t}`);try{const t=await s.getNonceLock(e),n=()=>{t.releaseLock(),r?.()};return{...t,releaseLock:n}}catch(e){throw r?.(),e}}stopAllTracking(){for(const[e]of g(this,d,"f"))g(this,r,"m",h).call(this,e)}getNetworkClient({chainId:e,networkClientId:t}){if(!t&&!e)throw new Error("Cannot locate network client without networkClientId or chainId");let n,r=t;try{t&&(n=g(this,a,"f").call(this,t))}catch(n){if(w("No network client found with ID",t),!e)throw n}return!n&&e&&(r=g(this,s,"f").call(this,e),n=g(this,a,"f").call(this,r)),{...n,id:r}}},s=new WeakMap,a=new WeakMap,i=new WeakMap,o=new WeakMap,c=new WeakMap,u=new WeakMap,l=new WeakMap,d=new WeakMap,f=new WeakMap,r=new WeakSet,h=function(e){const t=g(this,d,"f").get(e);t&&(t.pendingTransactionTracker.stop(),g(this,o,"f").call(this,t.pendingTransactionTracker),g(this,d,"f").delete(e))},p=function(e){if(g(this,d,"f").get(e))return;const{provider:t,blockTracker:n,configuration:{chainId:r}}=g(this,a,"f").call(this,e),s=g(this,c,"f").call(this,{provider:t,blockTracker:n,chainId:r}),i=g(this,u,"f").call(this,{provider:t,blockTracker:n,chainId:r,networkClientId:e});g(this,d,"f").set(e,{nonceTracker:s,pendingTransactionTracker:i})}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/helpers/MultichainTrackingHelper.cjs"}],[2784,{"../logger.cjs":2791,"../types.cjs":2792,"./TransactionPoller.cjs":2786,"@metamask/controller-utils":1321,events:4105,lodash:4565},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,a,i,o,c,u,l,d,f,h,p,m,g,b,y,w,v,E,T,S,x,P,k,I,A,_,C,j,R,O,B,F,L,M,N,D,G=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},H=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},U=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.PendingTransactionTracker=void 0;const q=e("@metamask/controller-utils"),K=U(e("events")),V=e("lodash"),$=e("./TransactionPoller.cjs"),z=e("../logger.cjs"),W=e("../types.cjs"),J=["replacement transaction underpriced","known transaction","gas price too low to replace","transaction with the same hash was already imported","gateway timeout","nonce too low"],X=(0,z.createModuleLogger)(z.projectLogger,"pending-transactions");n.PendingTransactionTracker=class{constructor({blockTracker:e,getChainId:t,getEthQuery:n,getGlobalLock:v,getNetworkClientId:E,getTransactions:T,hooks:S,isResubmitEnabled:x,messenger:P,publishTransaction:k}){r.add(this),s.set(this,void 0),a.set(this,void 0),i.set(this,void 0),o.set(this,void 0),c.set(this,void 0),u.set(this,void 0),l.set(this,void 0),d.set(this,void 0),f.set(this,void 0),h.set(this,void 0),p.set(this,void 0),m.set(this,void 0),g.set(this,void 0),b.set(this,void 0),this.startIfPendingTransactions=()=>{const e=H(this,r,"m",C).call(this);e.length?H(this,r,"m",y).call(this,e):this.stop()},this.hub=new K.default,G(this,s,new Map,"f"),G(this,a,t,"f"),G(this,i,n,"f"),G(this,o,E,"f"),G(this,c,T,"f"),G(this,u,x??(()=>!0),"f"),G(this,l,H(this,r,"m",w).bind(this),"f"),G(this,f,v,"f"),G(this,h,k,"f"),G(this,p,!1,"f"),G(this,g,undefined,"f"),G(this,m,new $.TransactionPoller({blockTracker:e,chainId:t(),messenger:P}),"f"),G(this,b,S?.beforeCheckPendingTransaction??(()=>Promise.resolve(!0)),"f"),G(this,d,(0,z.createModuleLogger)(X,`${t()}:${E()}`),"f")}addTransactionToPoll(e){H(this,r,"m",y).call(this,[e]),G(this,g,e,"f")}async forceCheckTransaction(e){const t=await H(this,f,"f").call(this);try{await H(this,r,"m",k).call(this,e)}catch(e){H(this,d,"f").call(this,"Failed to check transaction",e)}finally{t()}}stop(){H(this,p,"f")&&(H(this,m,"f").stop(),G(this,p,!1,"f"),H(this,d,"f").call(this,"Stopped polling"))}},s=new WeakMap,a=new WeakMap,i=new WeakMap,o=new WeakMap,c=new WeakMap,u=new WeakMap,l=new WeakMap,d=new WeakMap,f=new WeakMap,h=new WeakMap,p=new WeakMap,m=new WeakMap,g=new WeakMap,b=new WeakMap,r=new WeakSet,y=function(e){H(this,m,"f").setPendingTransactions(e),H(this,p,"f")||(H(this,m,"f").start(H(this,l,"f")),G(this,p,!0,"f"),H(this,d,"f").call(this,"Started polling"))},w=async function(e){const t=await H(this,f,"f").call(this);try{await H(this,r,"m",v).call(this)}catch(e){H(this,d,"f").call(this,"Failed to check transactions",e)}finally{t()}try{await H(this,r,"m",E).call(this,e)}catch(e){H(this,d,"f").call(this,"Failed to resubmit transactions",e)}},v=async function(){H(this,d,"f").call(this,"Checking transactions");const e=[...H(this,r,"m",C).call(this),...H(this,g,"f")?[H(this,g,"f")]:[]];e.length?(H(this,d,"f").call(this,"Found pending transactions to check",{count:e.length,ids:e.map(e=>e.id)}),await Promise.all(e.map(e=>H(this,r,"m",k).call(this,e)))):H(this,d,"f").call(this,"No pending transactions to check")},E=async function(e){if(!H(this,u,"f").call(this)||!H(this,p,"f"))return;H(this,d,"f").call(this,"Resubmitting transactions");const t=H(this,r,"m",C).call(this);if(t.length){H(this,d,"f").call(this,"Found pending transactions to resubmit",{count:t.length,ids:t.map(e=>e.id)});for(const n of t)try{await H(this,r,"m",S).call(this,n,e)}catch(e){const t=e.value?.message?.toLowerCase()||e.message?.toLowerCase()||String(e);if(H(this,r,"m",T).call(this,t)){H(this,d,"f").call(this,"Ignoring known transaction error",t);continue}H(this,r,"m",j).call(this,n,e.message,"There was an error when resubmitting this transaction.")}}else H(this,d,"f").call(this,"No pending transactions to resubmit")},T=function(e){return J.some(t=>e.includes(t))},S=async function(e,t){if(!H(this,r,"m",x).call(this,e,t))return;if(!await H(this,b,"f").call(this,e))return;const n=H(this,i,"f").call(this,e.networkClientId);await H(this,h,"f").call(this,n,e);const s=(e.retryCount??0)+1;H(this,r,"m",B).call(this,(0,V.merge)({},e,{retryCount:s}),"PendingTransactionTracker:transaction-retry - Retry count increased")},x=function(e,t){const n=(0,V.cloneDeep)(e);n.firstRetryBlockNumber||(n.firstRetryBlockNumber=t,H(this,r,"m",B).call(this,n,"PendingTransactionTracker:#isResubmitDue - First retry block number set"));const{firstRetryBlockNumber:s}=n,a=Number.parseInt(t,16)-Number.parseInt(s,16),i=e.retryCount||0;return a>=Math.min(50,Math.pow(2,i))},P=function(e){H(this,g,"f")?.id===e&&G(this,g,undefined,"f")},k=async function(e){const{hash:t,id:n}=e;if(!t&&await H(this,b,"f").call(this,e)){const t=new Error("We had an error while submitting this transaction, please try again.");return t.name="NoTxHashError",void H(this,r,"m",R).call(this,e,t)}if(H(this,r,"m",_).call(this,e))return H(this,d,"f").call(this,"Nonce already taken",n),void H(this,r,"m",O).call(this,e);try{const n=await H(this,r,"m",F).call(this,t),s="0x1"===n?.status;if("0x0"===n?.status)return H(this,d,"f").call(this,"Transaction receipt has failed status"),void H(this,r,"m",R).call(this,e,new Error("Transaction dropped or replaced"));const{blockNumber:a,blockHash:i}=n||{};if(s&&a&&i)return void await H(this,r,"m",I).call(this,e,{...n,blockNumber:a,blockHash:i})}catch(t){return H(this,d,"f").call(this,"Failed to check transaction",n,t),void H(this,r,"m",j).call(this,e,t.message,"There was a problem loading this transaction.")}await H(this,r,"m",A).call(this,e)&&H(this,r,"m",O).call(this,e)},I=async function(e,t){const{id:n}=e,{blockHash:s}=t;if(H(this,d,"f").call(this,"Transaction confirmed",n),H(this,g,"f"))return H(this,r,"m",P).call(this,e.id),void this.hub.emit("transaction-confirmed",e);const{baseFeePerGas:a,timestamp:i}=await H(this,r,"m",L).call(this,s,!1),o=(0,V.cloneDeep)(e);o.baseFeePerGas=a,o.blockTimestamp=i,o.status=W.TransactionStatus.confirmed,o.txParams={...o.txParams,gasUsed:t.gasUsed},o.txReceipt=t,o.verifiedOnBlockchain=!0,H(this,r,"m",B).call(this,o,"PendingTransactionTracker:#onTransactionConfirmed - Transaction confirmed"),this.hub.emit("transaction-confirmed",o)},A=async function(e){const{hash:t,id:n,txParams:{nonce:a,from:i}}=e;if(!a||!t)return!1;const o=await H(this,r,"m",M).call(this,i),c=parseInt(o,16);if(parseInt(a,16)>=c)return!1;let u=H(this,s,"f").get(t);return u===undefined&&(u=0,H(this,s,"f").set(t,u)),u<3?(H(this,d,"f").call(this,"Incrementing dropped block count",{id:n,droppedBlockCount:u}),H(this,s,"f").set(t,u+1),!1):(H(this,d,"f").call(this,"Hit dropped block count",n),H(this,s,"f").delete(t),!0)},_=function(e){const{id:t,txParams:n}=e;return H(this,r,"m",N).call(this).some(e=>e.id!==t&&e.txParams.from===n.from&&e.status===W.TransactionStatus.confirmed&&e.txParams.nonce&&e.txParams.nonce===n.nonce&&e.type!==W.TransactionType.incoming)},C=function(){return H(this,r,"m",D).call(this).filter(e=>e.status===W.TransactionStatus.submitted&&!e.verifiedOnBlockchain&&!e.isUserOperation)},j=function(e,t,n){H(this,r,"m",B).call(this,{...e,warning:{error:t,message:n}},"PendingTransactionTracker:#warnTransaction - Warning added")},R=function(e,t){H(this,d,"f").call(this,"Transaction failed",e.id,t),H(this,r,"m",P).call(this,e.id),this.hub.emit("transaction-failed",e,t)},O=function(e){H(this,d,"f").call(this,"Transaction dropped",e.id),H(this,r,"m",P).call(this,e.id),this.hub.emit("transaction-dropped",e)},B=function(e,t){this.hub.emit("transaction-updated",e,t)},F=async function(e){return await(0,q.query)(H(this,i,"f").call(this),"getTransactionReceipt",[e])},L=async function(e,t){return await(0,q.query)(H(this,i,"f").call(this),"getBlockByHash",[e,t])},M=async function(e){return await(0,q.query)(H(this,i,"f").call(this),"getTransactionCount",[e])},N=function(){const e=H(this,a,"f").call(this);return H(this,c,"f").call(this).filter(t=>t.chainId===e)},D=function(){const e=H(this,o,"f").call(this);return H(this,c,"f").call(this).filter(t=>t.networkClientId===e)}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/helpers/PendingTransactionTracker.cjs"}],[2785,{"../logger.cjs":2791,"../types.cjs":2792,"../utils/utils.cjs":2810,"@metamask/utils":2835,"bn.js":3732,lodash:4565},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,a,i,o,c,u,l,d,f=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},h=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(n,"__esModule",{value:!0}),n.hasSimulationDataChanged=n.shouldResimulate=n.ResimulateHelper=n.RESIMULATE_INTERVAL_MS=n.BLOCK_TIME_ADDITIONAL_SECONDS=n.VALUE_COMPARISON_PERCENT_THRESHOLD=n.BLOCKAID_RESULT_TYPE_MALICIOUS=n.RESIMULATE_PARAMS=void 0;const p=e("@metamask/utils"),m=e("bn.js"),g=e("lodash"),b=e("../logger.cjs"),y=e("../types.cjs"),w=e("../utils/utils.cjs"),v=(0,b.createModuleLogger)(b.projectLogger,"resimulate-helper");n.RESIMULATE_PARAMS=["to","value","data"],n.BLOCKAID_RESULT_TYPE_MALICIOUS="Malicious",n.VALUE_COMPARISON_PERCENT_THRESHOLD=5,n.BLOCK_TIME_ADDITIONAL_SECONDS=60,n.RESIMULATE_INTERVAL_MS=3e3;function E(e,t){return!T(e?.difference??"0x0",t?.difference??"0x0",!1===e?.isDecrease,!1===t?.isDecrease)}function T(e,t,r,s){let a=new m.BN((0,p.remove0x)(e),"hex"),i=new m.BN((0,p.remove0x)(t),"hex");return r&&(a=a.neg()),s&&(i=i.neg()),(0,w.getPercentageChange)(a,i)<=n.VALUE_COMPARISON_PERCENT_THRESHOLD}n.ResimulateHelper=class{constructor({getTransactions:e,simulateTransaction:t,onTransactionsUpdate:n}){r.add(this),s.set(this,new Map),a.set(this,void 0),i.set(this,void 0),f(this,a,e,"f"),f(this,i,t,"f"),n(h(this,r,"m",o).bind(this))}},s=new WeakMap,a=new WeakMap,i=new WeakMap,r=new WeakSet,o=function(){const e=h(this,a,"f").call(this).filter(e=>e.status===y.TransactionStatus.unapproved),t=new Set(e.map(e=>e.id));new Set([...t,...h(this,s,"f").keys()]).forEach(t=>{const n=e.find(e=>e.id===t);n?.isActive?h(this,r,"m",c).call(this,n):h(this,r,"m",l).call(this,t)})},c=function(e){const{id:t}=e;if(h(this,s,"f").has(t))return;const a=()=>{h(this,i,"f").call(this,e).catch(e=>{v("Error during transaction resimulation",e)}).finally(()=>{h(this,s,"f").has(t)&&h(this,r,"m",u).call(this,t,a)})};h(this,r,"m",u).call(this,t,a),v(`Started resimulating transaction ${t} every ${n.RESIMULATE_INTERVAL_MS} milliseconds`)},u=function(e,t){const r=setTimeout(t,n.RESIMULATE_INTERVAL_MS);h(this,s,"f").set(e,r)},l=function(e){h(this,s,"f").has(e)&&(h(this,r,"m",d).call(this,e),v(`Stopped resimulating transaction ${e} every ${n.RESIMULATE_INTERVAL_MS} milliseconds`))},d=function(e){const t=h(this,s,"f").get(e);t&&(clearTimeout(t),h(this,s,"f").delete(e))},n.shouldResimulate=function(e,t){const{id:r}=t,s=function(e,t){const{id:r,txParams:s}=t,{txParams:a}=e;if(!a||(0,g.isEqual)(a,s))return!1;const i=Object.keys(s).filter(e=>s[e]!==a[e]);return v("Transaction parameters updated",{transactionId:r,updatedProperties:i,originalParams:a,newParams:s}),n.RESIMULATE_PARAMS.some(e=>i.includes(e))}(e,t),a=function(e,t){const{securityAlertResponse:r}=e,{id:s,securityAlertResponse:a}=t;if((0,g.isEqual)(r,a))return!1;return v("Security alert updated",{transactionId:s,originalSecurityAlertResponse:r,newSecurityAlertResponse:a}),a?.result_type===n.BLOCKAID_RESULT_TYPE_MALICIOUS}(e,t),i=function(e,t){const{simulationData:n}=e,{simulationData:r,txParams:s}=t;if(!r||(0,g.isEqual)(n,r))return!1;return!T(s?.value??"0x0",r?.nativeBalanceChange?.difference??"0x0",!1,!1===r?.nativeBalanceChange?.isDecrease)}(e,t),o=s||a||i;let c;if(a||i){c=Math.floor(Date.now()/1e3)+n.BLOCK_TIME_ADDITIONAL_SECONDS}return o&&v("Transaction should be resimulated",{transactionId:r,blockTime:c,parametersUpdated:s,securityAlert:a,valueAndNativeBalanceMismatch:i}),{blockTime:c,resimulate:o}},n.hasSimulationDataChanged=function(e,t){if((0,g.isEqual)(e,t))return!1;if(E(e?.nativeBalanceChange,t?.nativeBalanceChange))return v("Simulation data native balance changed"),!0;if(e.tokenBalanceChanges.length!==t.tokenBalanceChanges.length)return!0;for(const n of e.tokenBalanceChanges){const e=t.tokenBalanceChanges.find(({address:e,id:t})=>e===n.address&&t===n.id);if(!e)return v("Missing new token balance",{address:n.address,id:n.id}),!0;if(E(n,e))return v("Simulation data token balance changed",{originalTokenBalanceChange:n,newTokenBalanceChange:e}),!0}return!1}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/helpers/ResimulateHelper.cjs"}],[2786,{"../logger.cjs":2791,"../utils/feature-flags.cjs":2797,"@metamask/utils":2835,lodash:4565},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,a,i,o,c,u,l,d,f,h,p,m,g,b=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},y=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(n,"__esModule",{value:!0}),n.TransactionPoller=void 0;const w=e("@metamask/utils"),v=e("lodash"),E=e("../logger.cjs"),T=e("../utils/feature-flags.cjs"),S=(0,w.createModuleLogger)(E.projectLogger,"transaction-poller");n.TransactionPoller=class{constructor({blockTracker:e,chainId:t,messenger:n}){r.add(this),s.set(this,0),a.set(this,void 0),i.set(this,void 0),o.set(this,void 0),c.set(this,void 0),u.set(this,void 0),l.set(this,void 0),d.set(this,!1),f.set(this,void 0),b(this,a,e,"f"),b(this,i,t,"f"),b(this,o,n,"f")}start(e){y(this,d,"f")||(b(this,u,e,"f"),b(this,d,!0,"f"),y(this,r,"m",h).call(this),S("Started"))}stop(){y(this,d,"f")&&(b(this,d,!1,"f"),b(this,u,undefined,"f"),b(this,s,0,"f"),b(this,l,undefined,"f"),y(this,r,"m",m).call(this),y(this,r,"m",g).call(this),S("Stopped"))}setPendingTransactions(e){const t=(y(this,l,"f")??[]).map(e=>e.id);b(this,l,e,"f");const n=e.map(e=>e.id),a=!(0,v.isEqual)(t,n);y(this,d,"f")&&a&&(S("Detected new pending transactions",n),b(this,s,0,"f"),y(this,c,"f")&&(y(this,r,"m",g).call(this),y(this,r,"m",h).call(this)))}},s=new WeakMap,a=new WeakMap,i=new WeakMap,o=new WeakMap,c=new WeakMap,u=new WeakMap,l=new WeakMap,d=new WeakMap,f=new WeakMap,r=new WeakSet,h=function e(){if(!y(this,d,"f"))return;const{countMax:t,intervalMs:n}=(0,T.getAcceleratedPollingParams)(y(this,i,"f"),y(this,o,"f"));if(y(this,s,"f")>=t)return b(this,c,e=>y(this,r,"m",p).call(this,!1,e),"f"),y(this,a,"f").on("latest",y(this,c,"f")),void S("Added block tracker listener");y(this,r,"m",m).call(this),b(this,f,setTimeout(async()=>{await y(this,r,"m",p).call(this,!0),y(this,r,"m",e).call(this)},n),"f")},p=async function(e,t){e?S("Accelerated interval",y(this,s,"f")+1):S("Block tracker interval",t);const n=t??await y(this,a,"f").getLatestBlock();await(y(this,u,"f")?.call(this,n)),e&&y(this,d,"f")&&b(this,s,y(this,s,"f")+1,"f")},m=function(){y(this,f,"f")&&(clearTimeout(y(this,f,"f")),b(this,f,undefined,"f"))},g=function(){y(this,c,"f")&&(y(this,a,"f").removeListener("latest",y(this,c,"f")),b(this,c,undefined,"f"))}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/helpers/TransactionPoller.cjs"}],[2787,{"../logger.cjs":2791,"@metamask/utils":2835},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,a,i,o,c,u=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},l=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(n,"__esModule",{value:!0}),n.CollectPublishHook=void 0;const d=e("@metamask/utils"),f=e("../logger.cjs"),h=(0,d.createModuleLogger)(f.projectLogger,"collect-publish-hook");n.CollectPublishHook=class{constructor(e){r.add(this),s.set(this,void 0),a.set(this,void 0),i.set(this,void 0),o.set(this,void 0),u(this,s,[],"f"),u(this,o,(0,d.createDeferredPromise)(),"f"),u(this,a,[],"f"),u(this,i,e,"f")}getHook(){return l(this,r,"m",c).bind(this)}ready(){return l(this,o,"f").promise}success(e){if(h("Success",{transactionHashes:e}),e.length!==l(this,i,"f"))throw new Error("Transaction hash count mismatch");for(let t=0;t<l(this,s,"f").length;t++){const n=l(this,s,"f")[t],r=e[t];n.resolve({transactionHash:r})}}error(e){h("Error",{error:e});for(const t of l(this,s,"f"))t.reject(e)}},s=new WeakMap,a=new WeakMap,i=new WeakMap,o=new WeakMap,r=new WeakSet,c=function(e,t){l(this,a,"f").push(t),h("Processing transaction",{transactionMeta:e,signedTx:t});const n=(0,d.createDeferredPromise)();return l(this,s,"f").push(n),l(this,a,"f").length===l(this,i,"f")&&(h("All transactions signed"),l(this,o,"f").resolve({signedTransactions:l(this,a,"f")})),n.promise}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/hooks/CollectPublishHook.cjs"}],[2788,{"../logger.cjs":2791,"@metamask/utils":2835},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,a,i=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},o=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(n,"__esModule",{value:!0}),n.ExtraTransactionsPublishHook=void 0;const c=e("@metamask/utils"),u=e("../logger.cjs"),l=(0,c.createModuleLogger)(u.projectLogger,"extra-transactions-publish-hook");n.ExtraTransactionsPublishHook=class{constructor({addTransactionBatch:e}){r.add(this),s.set(this,void 0),i(this,s,e,"f")}getHook(){return o(this,r,"m",a).bind(this)}},s=new WeakMap,r=new WeakSet,a=async function(e,t){l("Publishing transaction as batch",{transactionMeta:e,signedTx:t});const{batchTransactions:n,batchTransactionsOptions:r,id:a,networkClientId:i,txParams:u}=e,d=u.from,f=u.to,h=u.data,p=u.value,m=u.gas,g=u.maxFeePerGas,b=u.maxPriorityFeePerGas,y=t,w=(0,c.createDeferredPromise)(),v={existingTransaction:{id:a,onPublish:({transactionHash:e})=>{w.resolve({transactionHash:e})},signedTransaction:y},params:{data:h,gas:m,maxFeePerGas:g,maxPriorityFeePerGas:b,to:f,value:p}},E=(n??[]).map(e=>{const{isAfter:t,type:n,...r}=e;return{isAfter:t,params:r,type:n}}),T=[...E.filter(e=>!1===e.isAfter).map(({isAfter:e,...t})=>({...t})),v,...E.filter(e=>e.isAfter===undefined||e.isAfter).map(({isAfter:e,...t})=>({...t}))];l("Adding transaction batch",{from:d,networkClientId:i,transactions:T});const S=r??{disable7702:!0,disableHook:!1,disableSequential:!0};return await o(this,s,"f").call(this,{from:d,networkClientId:i,requireApproval:!1,transactions:T,...S}),w.promise}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/hooks/ExtraTransactionsPublishHook.cjs"}],[2789,{"../logger.cjs":2791,"@metamask/rpc-errors":2421,"@metamask/utils":2835},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,a,i,o,c,u,l,d,f,h,p=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},m=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(n,"__esModule",{value:!0}),n.SequentialPublishBatchHook=void 0;const g=e("@metamask/rpc-errors"),b=e("@metamask/utils"),y=e("../logger.cjs"),w=(0,b.createModuleLogger)(y.projectLogger,"sequential-publish-batch-hook");n.SequentialPublishBatchHook=class{constructor({publishTransaction:e,getTransaction:t,getPendingTransactionTracker:n,getEthQuery:u}){r.add(this),s.set(this,void 0),a.set(this,void 0),i.set(this,void 0),o.set(this,void 0),c.set(this,{}),p(this,s,e,"f"),p(this,a,t,"f"),p(this,i,u,"f"),p(this,o,n,"f")}getHook(){return m(this,r,"m",u).bind(this)}},s=new WeakMap,a=new WeakMap,i=new WeakMap,o=new WeakMap,c=new WeakMap,r=new WeakSet,u=async function({from:e,networkClientId:t,transactions:n}){w("Starting sequential publish batch hook",{from:e,networkClientId:t});const c=m(this,o,"f").call(this,t),u=[];for(const e of n)try{const n=m(this,a,"f").call(this,String(e.id)),o=await m(this,s,"f").call(this,m(this,i,"f").call(this,t),n);w("Transaction published",{transactionHash:o});const d={...n,hash:o},f=m(this,r,"m",l).call(this,c,d.id,d.hash);c.addTransactionToPoll(d),await f,u.push({transactionHash:o})}catch(t){throw w("Batch transaction failed",{transaction:e,error:t}),c.stop(),g.rpcErrors.internal("Failed to publish batch transaction")}return w("Sequential publish batch hook completed",{results:u}),c.stop(),{results:u}},l=async function(e,t,n){return new Promise((s,a)=>{const i=m(this,r,"m",d).bind(this,t,n,s,e),o=m(this,r,"m",f).bind(this,t,n,a,e);m(this,c,"f")[t]={onConfirmed:i,onFailedOrDropped:o},e.hub.on("transaction-confirmed",i),e.hub.on("transaction-failed",o),e.hub.on("transaction-dropped",o)})},d=function(e,t,n,s,a){a.id===e&&(w("Transaction confirmed",{transactionHash:t}),m(this,r,"m",h).call(this,s,e),n(a))},f=function(e,t,n,s,a,i){a.id===e&&(w("Transaction failed or dropped",{transactionHash:t,error:i}),m(this,r,"m",h).call(this,s,e),n(new Error(`Transaction ${t} failed or dropped.`)))},h=function(e,t){const n=m(this,c,"f")[t];e.hub.off("transaction-confirmed",n.onConfirmed),e.hub.off("transaction-failed",n.onFailedOrDropped),e.hub.off("transaction-dropped",n.onFailedOrDropped),delete m(this,c,"f")[t]}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/hooks/SequentialPublishBatchHook.cjs"}],[2790,{"./TransactionController.cjs":2767,"./constants.cjs":2770,"./helpers/AccountsApiRemoteTransactionSource.cjs":2779,"./types.cjs":2792,"./utils/gas-flow.cjs":2800,"./utils/history.cjs":2802,"./utils/prepare.cjs":2805,"./utils/transaction-type.cjs":2809,"./utils/utils.cjs":2810},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.HARDFORK=n.INCOMING_TRANSACTIONS_SUPPORTED_CHAIN_IDS=n.CHAIN_IDS=n.normalizeTransactionParams=n.isEIP1559Transaction=n.mergeGasFeeEstimates=n.determineTransactionType=n.MAX_TRANSACTION_HISTORY_LENGTH=n.DISPLAYED_TRANSACTION_HISTORY_PATHS=n.WalletDevice=n.UserFeeLevel=n.TransactionType=n.TransactionStatus=n.TransactionEnvelopeType=n.TransactionContainerType=n.SimulationTokenStandard=n.SimulationErrorCode=n.GasFeeEstimateType=n.GasFeeEstimateLevel=n.TransactionController=n.SPEED_UP_RATE=n.CANCEL_RATE=void 0;var r=e("./TransactionController.cjs");Object.defineProperty(n,"CANCEL_RATE",{enumerable:!0,get:function(){return r.CANCEL_RATE}}),Object.defineProperty(n,"SPEED_UP_RATE",{enumerable:!0,get:function(){return r.SPEED_UP_RATE}}),Object.defineProperty(n,"TransactionController",{enumerable:!0,get:function(){return r.TransactionController}});var s=e("./types.cjs");Object.defineProperty(n,"GasFeeEstimateLevel",{enumerable:!0,get:function(){return s.GasFeeEstimateLevel}}),Object.defineProperty(n,"GasFeeEstimateType",{enumerable:!0,get:function(){return s.GasFeeEstimateType}}),Object.defineProperty(n,"SimulationErrorCode",{enumerable:!0,get:function(){return s.SimulationErrorCode}}),Object.defineProperty(n,"SimulationTokenStandard",{enumerable:!0,get:function(){return s.SimulationTokenStandard}}),Object.defineProperty(n,"TransactionContainerType",{enumerable:!0,get:function(){return s.TransactionContainerType}}),Object.defineProperty(n,"TransactionEnvelopeType",{enumerable:!0,get:function(){return s.TransactionEnvelopeType}}),Object.defineProperty(n,"TransactionStatus",{enumerable:!0,get:function(){return s.TransactionStatus}}),Object.defineProperty(n,"TransactionType",{enumerable:!0,get:function(){return s.TransactionType}}),Object.defineProperty(n,"UserFeeLevel",{enumerable:!0,get:function(){return s.UserFeeLevel}}),Object.defineProperty(n,"WalletDevice",{enumerable:!0,get:function(){return s.WalletDevice}});var a=e("./utils/history.cjs");Object.defineProperty(n,"DISPLAYED_TRANSACTION_HISTORY_PATHS",{enumerable:!0,get:function(){return a.DISPLAYED_TRANSACTION_HISTORY_PATHS}}),Object.defineProperty(n,"MAX_TRANSACTION_HISTORY_LENGTH",{enumerable:!0,get:function(){return a.MAX_TRANSACTION_HISTORY_LENGTH}});var i=e("./utils/transaction-type.cjs");Object.defineProperty(n,"determineTransactionType",{enumerable:!0,get:function(){return i.determineTransactionType}});var o=e("./utils/gas-flow.cjs");Object.defineProperty(n,"mergeGasFeeEstimates",{enumerable:!0,get:function(){return o.mergeGasFeeEstimates}});var c=e("./utils/utils.cjs");Object.defineProperty(n,"isEIP1559Transaction",{enumerable:!0,get:function(){return c.isEIP1559Transaction}}),Object.defineProperty(n,"normalizeTransactionParams",{enumerable:!0,get:function(){return c.normalizeTransactionParams}});var u=e("./constants.cjs");Object.defineProperty(n,"CHAIN_IDS",{enumerable:!0,get:function(){return u.CHAIN_IDS}});var l=e("./helpers/AccountsApiRemoteTransactionSource.cjs");Object.defineProperty(n,"INCOMING_TRANSACTIONS_SUPPORTED_CHAIN_IDS",{enumerable:!0,get:function(){return l.SUPPORTED_CHAIN_IDS}});var d=e("./utils/prepare.cjs");Object.defineProperty(n,"HARDFORK",{enumerable:!0,get:function(){return d.HARDFORK}})}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/index.cjs"}],[2791,{"@metamask/utils":2835},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.createModuleLogger=n.incomingTransactionsLogger=n.projectLogger=void 0;const r=e("@metamask/utils");Object.defineProperty(n,"createModuleLogger",{enumerable:!0,get:function(){return r.createModuleLogger}}),n.projectLogger=(0,r.createProjectLogger)("transaction-controller"),n.incomingTransactionsLogger=(0,r.createModuleLogger)(n.projectLogger,"incoming-transactions")}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/logger.cjs"}],[2792,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,a,i,o,c,u,l,d,f;Object.defineProperty(n,"__esModule",{value:!0}),n.SimulationErrorCode=n.SimulationTokenStandard=n.GasFeeEstimateType=n.GasFeeEstimateLevel=n.UserFeeLevel=n.TransactionEnvelopeType=n.TransactionContainerType=n.TransactionType=n.WalletDevice=n.TransactionStatus=void 0,function(e){e.unapproved="unapproved",e.approved="approved",e.signed="signed",e.submitted="submitted",e.confirmed="confirmed",e.failed="failed",e.dropped="dropped",e.rejected="rejected",e.cancelled="cancelled"}(r||(n.TransactionStatus=r={})),function(e){e.MM_MOBILE="metamask_mobile",e.MM_EXTENSION="metamask_extension",e.OTHER="other_device"}(s||(n.WalletDevice=s={})),function(e){e.batch="batch",e.bridge="bridge",e.bridgeApproval="bridgeApproval",e.cancel="cancel",e.contractInteraction="contractInteraction",e.deployContract="contractDeployment",e.ethDecrypt="eth_decrypt",e.ethGetEncryptionPublicKey="eth_getEncryptionPublicKey",e.gasPayment="gas_payment",e.incoming="incoming",e.lendingDeposit="lendingDeposit",e.lendingWithdraw="lendingWithdraw",e.perpsDeposit="perpsDeposit",e.personalSign="personal_sign",e.retry="retry",e.revokeDelegation="revokeDelegation",e.simpleSend="simpleSend",e.signTypedData="eth_signTypedData",e.smart="smart",e.stakingClaim="stakingClaim",e.stakingDeposit="stakingDeposit",e.stakingUnstake="stakingUnstake",e.swap="swap",e.swapAndSend="swapAndSend",e.swapApproval="swapApproval",e.tokenMethodApprove="approve",e.tokenMethodSafeTransferFrom="safetransferfrom",e.tokenMethodTransfer="transfer",e.tokenMethodTransferFrom="transferfrom",e.tokenMethodSetApprovalForAll="setapprovalforall",e.tokenMethodIncreaseAllowance="increaseAllowance"}(a||(n.TransactionType=a={})),function(e){e.EnforcedSimulations="enforcedSimulations"}(i||(n.TransactionContainerType=i={})),function(e){e.legacy="0x0",e.accessList="0x1",e.feeMarket="0x2",e.setCode="0x4"}(o||(n.TransactionEnvelopeType=o={})),function(e){e.CUSTOM="custom",e.DAPP_SUGGESTED="dappSuggested",e.MEDIUM="medium"}(c||(n.UserFeeLevel=c={})),function(e){e.Low="low",e.Medium="medium",e.High="high"}(u||(n.GasFeeEstimateLevel=u={})),function(e){e.FeeMarket="fee-market",e.Legacy="legacy",e.GasPrice="eth_gasPrice"}(l||(n.GasFeeEstimateType=l={})),function(e){e.erc20="erc20",e.erc721="erc721",e.erc1155="erc1155"}(d||(n.SimulationTokenStandard=d={})),function(e){e.ChainNotSupported="chain-not-supported",e.Disabled="disabled",e.InvalidResponse="invalid-response",e.Reverted="reverted"}(f||(n.SimulationErrorCode=f={}))}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/types.cjs"}],[2793,{"../api/simulation-api.cjs":2769,"../constants.cjs":2770,"../errors.cjs":2771,"../logger.cjs":2791,"../types.cjs":2792,"@ethersproject/abi":612,"@metamask/controller-utils":1321,"@metamask/metamask-eth-abis":2077,"@metamask/utils":2835,"bn.js":3732},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.getBalanceChanges=n.SupportedToken=void 0;const s=e("@ethersproject/abi"),a=e("@metamask/controller-utils"),i=e("@metamask/metamask-eth-abis"),o=e("@metamask/utils"),c=r(e("bn.js")),u=e("../api/simulation-api.cjs"),l=e("../constants.cjs"),d=e("../errors.cjs"),f=e("../logger.cjs"),h=e("../types.cjs");var p;!function(e){e.ERC20="erc20",e.ERC721="erc721",e.ERC1155="erc1155",e.ERC20_WRAPPED="erc20Wrapped",e.ERC721_LEGACY="erc721Legacy"}(p||(n.SupportedToken=p={}));const m=(0,o.createModuleLogger)(f.projectLogger,"balance-changes"),g=["Transfer","TransferSingle","TransferBatch","Deposit","Withdrawal"],b={[p.ERC20]:{abi:i.abiERC20,standard:h.SimulationTokenStandard.erc20},[p.ERC721]:{abi:i.abiERC721,standard:h.SimulationTokenStandard.erc721},[p.ERC1155]:{abi:i.abiERC1155,standard:h.SimulationTokenStandard.erc1155},[p.ERC20_WRAPPED]:{abi:l.ABI_SIMULATION_ERC20_WRAPPED,standard:h.SimulationTokenStandard.erc20},[p.ERC721_LEGACY]:{abi:l.ABI_SIMULATION_ERC721_LEGACY,standard:h.SimulationTokenStandard.erc721}},y=["execution reverted","insufficient funds for gas"];function w(e){if(Array.isArray(e))return e.map(w);let t=e;return t=t.toHexString?.()??t,t=t.toLowerCase?.()??t,t}function v(e){return"Transfer"===e.name&&e.tokenStandard===h.SimulationTokenStandard.erc721&&0===parseInt(e.args.from,16)}function E(e){return e.tokenStandard===h.SimulationTokenStandard.erc721?[e.args.tokenId]:e.tokenStandard===h.SimulationTokenStandard.erc1155&&"TransferSingle"===e.name?[e.args.id]:e.tokenStandard===h.SimulationTokenStandard.erc1155&&"TransferBatch"===e.name?e.args.ids:[undefined]}function T(e){switch(e){case h.SimulationTokenStandard.erc721:return new s.Interface(i.abiERC721);case h.SimulationTokenStandard.erc1155:return new s.Interface(i.abiERC1155);default:return new s.Interface(i.abiERC20)}}function S(e,t,n){const r=T(t.standard);try{if(t.standard===h.SimulationTokenStandard.erc721){const t=r.decodeFunctionResult("ownerOf",n.return);return t[0].toLowerCase()===e.toLowerCase()?"0x1":"0x0"}const s=r.decodeFunctionResult("balanceOf",n.return);return(0,a.toHex)(s[0])}catch(e){throw m("Failed to decode balance transaction",e,{token:t,response:n}),new d.SimulationError(`Failed to decode balance transaction for token ${t.address}: ${String(e)}`)}}function x(e,t,n){const r=T(e);switch(e){case h.SimulationTokenStandard.erc721:return r.encodeFunctionData("ownerOf",[n]);case h.SimulationTokenStandard.erc1155:return r.encodeFunctionData("balanceOf",[t,n]);default:return r.encodeFunctionData("balanceOf",[t])}}function P(e){return[...e.logs??[],...(e.calls??[]).map(e=>P(e)).flat()]}function k(e,t,n=0){const r=(0,a.hexToBN)(t).add(new c.default(n)),s=(0,a.hexToBN)(e),i=r.sub(s),o=i.isNeg(),u=(0,a.toHex)(i.abs());return i.isZero()?(m("Balance change is zero"),undefined):{previousBalance:e,newBalance:(0,a.toHex)(r),difference:u,isDecrease:o}}async function I({request:e,params:t,before:n=[],after:r=[]}){const{blockTime:s,chainId:i,ethQuery:o,getSimulationConfig:l,txParams:d}=e,{authorizationList:f}=d,h=d.from,p=f?.map(e=>({address:e.address,from:h})),g=[...n,{authorizationList:p,data:d.data,from:d.from,gas:d.gas,maxFeePerGas:d.maxFeePerGas??d.gasPrice,maxPriorityFeePerGas:d.maxPriorityFeePerGas??d.gasPrice,to:d.to,value:d.value},...r],b=function(e){const{txParams:t}=e,n=(0,a.hexToBN)(t.gas??"0x0"),r=(0,a.hexToBN)(t.maxFeePerGas??t.gasPrice??"0x0"),s=(0,a.hexToBN)(t.value??"0x0"),i=(e.nestedTransactions??[]).map(e=>(0,a.hexToBN)(e.value??"0x0")).reduce((e,t)=>e.add(t),new c.default(0));return n.mul(r).add(s).add(i)}(e),y=(0,a.toHex)(b);m("Required balance",y);const w=await(0,a.query)(o,"getBalance",[h,"latest"]),v=(0,a.hexToBN)(w);m("Current balance",w);const E=v.lt(b);return await(0,u.simulateTransactions)(i,{...t,getSimulationConfig:l,transactions:g,withGas:!0,withDefaultBlockOverrides:!0,...s&&{blockOverrides:{...t?.blockOverrides,time:(0,a.toHex)(s)}},...E&&{overrides:{...t?.overrides,[h]:{...t?.overrides?.[h],balance:y}}}})}n.getBalanceChanges=async function(e){m("Request",e);try{const t=await I({request:e,params:{withCallTrace:!0,withLogs:!0}}),n=t.transactions?.[0]?.error;if(n)throw new d.SimulationError(n);const r=function(e,t){const n=t.transactions[0];if(!n)return undefined;const{txParams:r}=e,s=r.from,{stateDiff:a}=n,i=a?.pre?.[s]?.balance,o=a?.post?.[s]?.balance;if(!i||!o)return undefined;return k(i,o,n.gasCost)}(e,t),a=function(e){const t=P(e.transactions[0]?.callTrace??{});m("Extracted logs",t);const n=function(){const e=Object.values(p);return new Map(e.map(e=>{const{abi:t}=b[e];return[e,new s.Interface(t)]}))}();return t.map(e=>{const t=function(e,t){const n=Object.values(p);for(const r of n)try{const n=t.get(r),{abi:s,standard:a}=b[r];return{...n.parseLog(e),abi:s,standard:a}}catch(e){continue}return undefined}(e,n);if(!t)return m("Failed to parse log",e),undefined;const r=t.abi.find(e=>e.name===t.name)?.inputs;if(!r)return m("Failed to find inputs for event",t),undefined;if(!g.includes(t.name))return m("Ignoring unsupported event",t.name,t),undefined;m("Normalizing event args",t.name,t);const s=function(e,t){return e.reduce((e,n,r)=>{const s=t[r].name.replace("_",""),a=w(n);return e[s]=a,e},{})}(t.args,r);return{contractAddress:e.address,tokenStandard:t.standard,name:t.name,args:s,abi:t.abi}}).filter(e=>e!==undefined)}(t);m("Parsed events",a);const i=await async function(e,t){const{txParams:n}=e,r=n.from,s=function(e,t){const n=new Set,r=new Map,s=new Map,a=e.txParams.from,i=t.filter(e=>[e.args.from,e.args.to].includes(a));m("Filtered user events",i);for(const e of i){const t=E(e);m("Extracted token IDs",t);for(const i of t){const t={address:e.contractAddress,standard:e.tokenStandard,id:i},o=JSON.stringify(t);if(n.has(o)){m("Ignoring additional event with same contract and token ID",t);continue}n.add(o);const c=x(e.tokenStandard,a,i),u={from:a,to:e.contractAddress,data:c};v(e)||r.set(t,u),s.set(t,u)}}return{before:r,after:s}}(e,t);m("Generated balance transactions",[...s.after.values()]);const a=s.before.size+s.after.size+1;if(1===a)return[];const i=await I({request:e,before:[...s.before.values()],after:[...s.after.values()]});if(m("Balance simulation response",i),i.transactions.length!==a)throw new d.SimulationInvalidResponseError;let o=0;return[...s.after.keys()].map((e,t)=>{const n=k(!s.before.get(e)?"0x0":S(r,e,i.transactions[o++]),S(r,e,i.transactions[t+s.before.size+1]));return n?{...e,...n}:undefined}).filter(e=>e!==undefined)}(e,a),o=t.transactions?.[0]?.gasUsed;return{simulationData:{nativeBalanceChange:r,tokenBalanceChanges:i},gasUsed:o}}catch(t){m("Failed to get balance changes",t,e);let n=t;y.some(e=>n.message?.includes(e))&&(n=new d.SimulationRevertedError);const{code:r,message:s}=n;return{simulationData:{tokenBalanceChanges:[],error:{code:r,message:s}},gasUsed:undefined}}}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/utils/balance-changes.cjs"}],[2794,{"../gas-flows/DefaultGasFeeFlow.cjs":2772,"../helpers/GasFeePoller.cjs":2780,"../hooks/CollectPublishHook.cjs":2787,"../hooks/SequentialPublishBatchHook.cjs":2789,"../index.cjs":2790,"../logger.cjs":2791,"../types.cjs":2792,"./eip7702.cjs":2795,"./feature-flags.cjs":2797,"./gas.cjs":2801,"./validation.cjs":2811,"@metamask/controller-utils":1321,"@metamask/rpc-errors":2421,"@metamask/utils":2835,uuid:5398},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.isAtomicBatchSupported=n.addTransactionBatch=n.ERROR_MESSAGE_NO_UPGRADE_CONTRACT=void 0;const r=e("@metamask/controller-utils"),s=e("@metamask/rpc-errors"),a=e("@metamask/utils"),i=e("uuid"),o=e("./eip7702.cjs"),c=e("./feature-flags.cjs"),u=e("./gas.cjs"),l=e("./validation.cjs"),d=e("../index.cjs"),f=e("../gas-flows/DefaultGasFeeFlow.cjs"),h=e("../helpers/GasFeePoller.cjs"),p=e("../hooks/CollectPublishHook.cjs"),m=e("../hooks/SequentialPublishBatchHook.cjs"),g=e("../logger.cjs"),b=e("../types.cjs"),y=(0,a.createModuleLogger)(g.projectLogger,"batch");function w(){const e=(0,i.v4)(),t=new Uint8Array((0,i.parse)(e));return(0,a.bytesToHex)(t)}async function v(e,t,n,r,s){const{assetsFiatValues:a,existingTransaction:i,params:o,type:c}=t,{addTransaction:u,getTransaction:l,request:f,updateTransaction:p}=r,{from:m,networkClientId:g,origin:b}=f;if(i){const{id:t,onPublish:r,signedTransaction:s}=i,a=l(t);return p({transactionId:t},t=>{t.batchId=e}),n(a,s).then(r).catch(()=>{}),y("Processed existing transaction with hook",{id:t,params:o}),{id:t,params:o}}const w={...s,txParams:{...o,from:m,gas:s?.gas??o.gas}};s&&(0,h.updateTransactionGasEstimates)({txMeta:w,userFeeLevel:d.GasFeeEstimateLevel.Medium});const{transactionMeta:v}=await u(w.txParams,{assetsFiatValues:a,batchId:e,disableGasBuffer:!0,networkClientId:g,origin:b,publishHook:n,requireApproval:!1,type:c}),{id:E,txParams:T}=v,S={data:T.data,gas:T.gas,maxFeePerGas:T.maxFeePerGas,maxPriorityFeePerGas:T.maxPriorityFeePerGas,to:T.to,value:T.value};return y("Processed new transaction with hook",{id:E,params:S,type:c}),{id:E,params:S,type:c}}n.ERROR_MESSAGE_NO_UPGRADE_CONTRACT="Upgrade contract address not found",n.addTransactionBatch=async function(e){const{getInternalAccounts:t,messenger:a,request:i}=e,h=(0,c.getBatchSizeLimit)(a);if((0,l.validateBatchRequest)({internalAccounts:t(),request:i,sizeLimit:h}),y("Adding",i),!i.disable7702)try{return await async function(e){const{addTransaction:t,getChainId:r,getTransaction:a,messenger:i,publicKeyEIP7702:u,request:l}=e,{batchId:f,from:h,networkClientId:p,origin:m,requireApproval:g,securityAlertId:v,transactions:E,validateSecurity:T}=l,S=r(p),x=e.getEthQuery(p),P=(0,o.doesChainSupportEIP7702)(S,i);if(!P)throw y("Chain does not support EIP-7702",S),s.rpcErrors.internal("Chain does not support EIP-7702");if(!u)throw s.rpcErrors.internal(o.ERROR_MESSGE_PUBLIC_KEY);const{delegationAddress:k,isSupported:I}=await(0,o.isAccountUpgradedToEIP7702)(h,S,u,i,x);if(y("Account",{delegationAddress:k,isSupported:I}),!I&&k)throw y("Account upgraded to unsupported contract",h,k),s.rpcErrors.internal("Account upgraded to unsupported contract");const A=await Promise.all(E.map(e=>async function(e,t,n){const{from:r}=e,{params:s,type:a}=t,{type:i}=await(0,d.determineTransactionType)({from:r,...s},n),o=a??i;return{...s,type:o}}(l,e,x))),_=E.find(e=>e.existingTransaction),C=_?a(_.existingTransaction?.id):undefined,j=(0,o.generateEIP7702BatchTransaction)(h,A),R={from:h,...j},O=C?.txParams?.nonce;O&&(R.nonce=O);if(!I){const e=(0,c.getEIP7702UpgradeContractAddress)(S,i,u);if(!e)throw s.rpcErrors.internal(n.ERROR_MESSAGE_NO_UPGRADE_CONTRACT);R.type=b.TransactionEnvelopeType.setCode,R.authorizationList=[{address:e}]}if(T){const e={method:"eth_sendTransaction",params:[{...R,authorizationList:undefined,type:b.TransactionEnvelopeType.feeMarket}],delegationMock:R.authorizationList?.[0]?.address,origin:m};y("Security request",e),T(e,S).catch(e=>{y("Security validation failed",e)})}y("Adding batch transaction",R,p);const B=f??w(),F=v?{securityAlertId:v}:undefined,{result:L}=await t(R,{batchId:B,isGasFeeIncluded:l.isGasFeeIncluded,nestedTransactions:A,networkClientId:p,origin:m,requireApproval:g,securityAlertResponse:F,type:b.TransactionType.batch}),M=await L;return _?.existingTransaction?.onPublish?.({transactionHash:M}),{batchId:B}}(e)}catch(e){if(!(e instanceof s.JsonRpcError&&"Chain does not support EIP-7702"===e.message))throw e}return await async function(e){const{messenger:t,publishBatchHook:n,request:a,update:i}=e,{from:o,networkClientId:c,origin:l,requireApproval:h,transactions:g}=a;let b,E=!1;y("Adding transaction batch using hook",a);const T=new m.SequentialPublishBatchHook({publishTransaction:e.publishTransaction,getTransaction:e.getTransaction,getEthQuery:e.getEthQuery,getPendingTransactionTracker:e.getPendingTransactionTracker});let{disable7702:S,disableSequential:x}=a;const{disableHook:P,useHook:k}=a;k&&(S=!0,x=!0);let I,A=null;!P&&n?A=n:x||(A=T.getHook(),E=!0);if(!A)throw y("No supported batch methods found",{disable7702:S,disableHook:P,disableSequential:x}),s.rpcErrors.internal("Can't process batch");const _=w(),C=g.map(e=>({...e,origin:l})),j=C.length,R=new p.CollectPublishHook(j);try{h&&(I=await async function({batchId:e,request:t}){const{messenger:n,request:r,isSimulationEnabled:s,getChainId:a,getEthQuery:i,getGasFeeEstimates:o,getSimulationConfig:c,update:l}=t,{from:h,origin:p,networkClientId:m,transactions:g}=r,b=i(m);if(!s())throw new Error("Cannot create transaction batch as simulation not supported");y("Preparing approval data for batch");const w=a(m),{gasLimit:v}=await(0,u.simulateGasBatch)({chainId:w,from:h,getSimulationConfig:c,transactions:g}),E=(P={chainId:w,from:h,gas:v,id:e,networkClientId:m,origin:p,transactions:g},{...P,status:d.TransactionStatus.unapproved}),T=new f.DefaultGasFeeFlow,S=await o({networkClientId:m}),x=await T.getGasFees({ethQuery:b,gasFeeControllerData:S,messenger:n,transactionMeta:{...E,txParams:{from:h,gas:v},time:Date.now()}});var P;return E.gasFeeEstimates=x.estimates,y("Saving transaction batch metadata",E),function(e,t){t(t=>{t.transactionBatches=[...t.transactionBatches,e]})}(E,l),E}({batchId:_,request:e}),b=(await async function(e,t){const n=String(e.id),{origin:s}=e,a=r.ApprovalType.TransactionBatch,i={txBatchId:n};return y("Requesting approval for transaction batch",n),await t.call("ApprovalController:addRequest",{id:n,origin:s||r.ORIGIN_METAMASK,requestData:i,expectsResult:!0,type:a},!0)}(I,t)).resultCallbacks);const n=R.getHook(),s=[];for(const t of C){const r=await v(_,t,n,e,I);s.push(r)}const{signedTransactions:a}=await R.ready(),i={from:o,networkClientId:c,transactions:s.map((e,t)=>({...e,signedTx:a[t]}))};y("Calling publish batch hook",i);let l=await A(i);if(y("Publish batch hook result",l),!l&&!E&&!x){y("Fallback to sequential publish batch hook due to empty results");const e=T.getHook();l=await e(i)}if(!l?.results?.length)throw new Error("Publish batch hook did not return a result");const p=l.results.map(({transactionHash:e})=>e);return R.success(p),b?.success(),y("Completed batch transaction with hook",p),{batchId:_}}catch(e){throw y("Publish batch hook failed",e),R.error(e),b?.error(e),e}finally{y("Cleaning up publish batch hook",_),function(e,t){e(e=>{e.transactionBatches=e.transactionBatches.filter(e=>e.id!==t)})}(i,_)}}(e)},n.isAtomicBatchSupported=async function(e){const{address:t,chainIds:n,getEthQuery:r,messenger:a,publicKeyEIP7702:i}=e;if(!i)throw s.rpcErrors.internal(o.ERROR_MESSGE_PUBLIC_KEY);const u=(0,c.getEIP7702SupportedChains)(a).filter(e=>!n||n.includes(e)),l=(await Promise.all(u.map(async e=>{try{const n=r(e),{isSupported:s,delegationAddress:u}=await(0,o.isAccountUpgradedToEIP7702)(t,e,i,a,n);return{chainId:e,delegationAddress:u,isSupported:s,upgradeContractAddress:(0,c.getEIP7702UpgradeContractAddress)(e,a,i)}}catch(t){return y("Error checking atomic batch support",e,t),undefined}}))).filter(e=>Boolean(e));return y("Atomic batch supported results",l),l}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/utils/batch.cjs"}],[2795,{"../constants.cjs":2770,"../logger.cjs":2791,"./feature-flags.cjs":2797,"@ethersproject/abi":612,"@ethersproject/contracts":635,"@metamask/controller-utils":1321,"@metamask/utils":2835},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.signAuthorizationList=n.generateEIP7702BatchTransaction=n.isAccountUpgradedToEIP7702=n.getDelegationAddress=n.doesChainSupportEIP7702=n.ERROR_MESSGE_PUBLIC_KEY=n.CALLS_SIGNATURE=n.BATCH_FUNCTION_NAME=n.DELEGATION_PREFIX=void 0;const r=e("@ethersproject/abi"),s=e("@ethersproject/contracts"),a=e("@metamask/controller-utils"),i=e("@metamask/utils"),o=e("./feature-flags.cjs"),c=e("../constants.cjs"),u=e("../logger.cjs");n.DELEGATION_PREFIX="0xef0100",n.BATCH_FUNCTION_NAME="execute",n.CALLS_SIGNATURE="(address,uint256,bytes)[]",n.ERROR_MESSGE_PUBLIC_KEY="EIP-7702 public key not specified";const l=(0,i.createModuleLogger)(u.projectLogger,"eip-7702");async function d(e,t){const r=await(0,a.query)(t,"eth_getCode",[e]),s=(0,i.add0x)(r?.toLowerCase?.()??"");return 48===r?.length&&s.startsWith(n.DELEGATION_PREFIX)?(0,i.add0x)(s.slice(n.DELEGATION_PREFIX.length)):undefined}async function f(e,t,n,r){const s=function(e,t,n){const{chainId:r,nonce:s}=e,{txParams:i,chainId:o}=t,{nonce:c}=i,u=r??o;let d=s;d===undefined&&(d=(0,a.toHex)(parseInt(c,16)+1+n));const f={...e,chainId:u,nonce:d};return l("Prepared authorization",f),f}(e,t,r),{txParams:o}=t,{from:c}=o,{address:u,chainId:d,nonce:f}=s,h=parseInt(d,16),p=parseInt(f,16),m=await n.call("KeyringController:signEip7702Authorization",{chainId:h,contractAddress:u,from:c,nonce:p}),g=m.slice(0,66),b=(0,i.add0x)(m.slice(66,130)),y=parseInt(m.slice(130,132),16),w={address:u,chainId:d,nonce:f,r:g,s:b,yParity:(0,a.toHex)(y-27==0?0:1)};return l("Signed authorization",w),w}n.doesChainSupportEIP7702=function(e,t){return(0,o.getEIP7702SupportedChains)(t).some(t=>t.toLowerCase()===e.toLowerCase())},n.getDelegationAddress=d,n.isAccountUpgradedToEIP7702=async function(e,t,n,r,s){const a=(0,o.getEIP7702ContractAddresses)(t,r,n),i=await d(e,s),c=Boolean(i&&a.some(e=>e.toLowerCase()===i.toLowerCase()));return{delegationAddress:i,isSupported:c}},n.generateEIP7702BatchTransaction=function(e,t){const a=s.Contract.getInterface(c.ABI_IERC7821),i=t.map(e=>{const{data:t,to:n,value:r}=e;return[n??"0x0000000000000000000000000000000000000000",r??"0x0",t??"0x"]}),o="0x01".padEnd(66,"0"),u=r.defaultAbiCoder.encode([n.CALLS_SIGNATURE],[i]),d=a.encodeFunctionData(n.BATCH_FUNCTION_NAME,[o,u]);return l("Transaction data",d),{data:d,to:e}},n.signAuthorizationList=async function({authorizationList:e,messenger:t,transactionMeta:n}){if(!e)return undefined;const r=[];let s=0;for(const a of e){const e=await f(a,n,t,s);r.push(e),s+=1}return r}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/utils/eip7702.cjs"}],[2796,{"../types.cjs":2792,"@metamask/rpc-errors":2421},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.validateConfirmedExternalTransaction=void 0;const r=e("@metamask/rpc-errors"),s=e("../types.cjs");n.validateConfirmedExternalTransaction=function(e,t,n){if(!e||!e.txParams)throw r.rpcErrors.invalidParams('"transactionMeta" or "transactionMeta.txParams" is missing');if(e.status!==s.TransactionStatus.confirmed)throw r.rpcErrors.invalidParams('External transaction status should be "confirmed"');const a=e.txParams.nonce;if(n&&n.length>0){if(n.find(e=>e.txParams?.nonce===a))throw r.rpcErrors.invalidParams("External transaction nonce should not be in pending txs")}if(t&&t.length>0){if(t.find(e=>e.txParams?.nonce===a))throw r.rpcErrors.invalidParams("External transaction nonce should not be in confirmed txs")}}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/utils/external-transactions.cjs"}],[2797,{"../logger.cjs":2791,"./signature.cjs":2807,"./utils.cjs":2810,"@metamask/utils":2835},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getIncomingTransactionsPollingInterval=n.getGasEstimateBuffer=n.getGasEstimateFallback=n.getGasFeeRandomisation=n.getAcceleratedPollingParams=n.getBatchSizeLimit=n.getEIP7702UpgradeContractAddress=n.getEIP7702ContractAddresses=n.getEIP7702SupportedChains=n.FeatureFlag=void 0;const r=e("@metamask/utils"),s=e("./signature.cjs"),a=e("./utils.cjs"),i=e("../logger.cjs");var o;!function(e){e.EIP7702="confirmations_eip_7702",e.GasBuffer="confirmations_gas_buffer",e.IncomingTransactions="confirmations_incoming_transactions",e.Transactions="confirmations_transactions"}(o||(n.FeatureFlag=o={}));const c=(0,r.createModuleLogger)(i.projectLogger,"feature-flags");function u(e,t,n){const r=l(t);return(r?.[o.EIP7702]?.contracts?.[e.toLowerCase()]??[]).filter(t=>(0,s.isValidSignature)([t.address,(0,a.padHexToEvenLength)(e)],t.signature,n)).map(e=>e.address)}function l(e){const t=e.call("RemoteFeatureFlagController:getState").remoteFeatureFlags;return c("Retrieved feature flags",t),t}n.getEIP7702SupportedChains=function(e){const t=l(e);return t?.[o.EIP7702]?.supportedChains??[]},n.getEIP7702ContractAddresses=u,n.getEIP7702UpgradeContractAddress=function(e,t,n){return u(e,t,n)?.[0]},n.getBatchSizeLimit=function(e){const t=l(e);return t?.[o.Transactions]?.batchSizeLimit??10},n.getAcceleratedPollingParams=function(e,t){const n=l(t),r=n?.[o.Transactions]?.acceleratedPolling;return{countMax:r?.perChainConfig?.[e]?.countMax||r?.defaultCountMax||10,intervalMs:r?.perChainConfig?.[e]?.intervalMs||r?.defaultIntervalMs||3e3}},n.getGasFeeRandomisation=function(e){const t=l(e),n=t?.[o.Transactions]?.gasFeeRandomisation||{};return{randomisedGasFeeDigits:n.randomisedGasFeeDigits||{},preservedNumberOfDigits:n.preservedNumberOfDigits}},n.getGasEstimateFallback=function(e,t){const n=l(t),r=n?.[o.Transactions]?.gasEstimateFallback,s=r?.perChainConfig?.[e],a=s?.percentage??r?.default?.percentage??35;return{fixed:s?.fixed??r?.default?.fixed,percentage:a}},n.getGasEstimateBuffer=function({chainId:e,isCustomRPC:t,isUpgradeWithDataToSelf:n,messenger:r}){const s=l(r),a=s?.[o.GasBuffer],i=a?.perChainConfig?.[e],c=t?undefined:i?.included,u=t?undefined:a?.included;return(n?i?.eip7702:undefined)??c??i?.base??u??a?.default??1},n.getIncomingTransactionsPollingInterval=function(e){const t=l(e);return t?.[o.IncomingTransactions]?.pollingIntervalMs??24e4}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/utils/feature-flags.cjs"}],[2798,{"../api/simulation-api.cjs":2769,"../logger.cjs":2791,"./batch.cjs":2794,"./eip7702.cjs":2795,"./feature-flags.cjs":2797,"@metamask/rpc-errors":2421,"@metamask/utils":2835},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getGasFeeTokens=void 0;const r=e("@metamask/rpc-errors"),s=e("@metamask/utils"),a=e("./batch.cjs"),i=e("./eip7702.cjs"),o=e("./feature-flags.cjs"),c=e("../api/simulation-api.cjs"),u=e("../logger.cjs"),l=(0,s.createModuleLogger)(u.projectLogger,"gas-fee-tokens");n.getGasFeeTokens=async function({chainId:e,isEIP7702GasFeeTokensEnabled:t,messenger:n,publicKeyEIP7702:s,transactionMeta:u,getSimulationConfig:d}){const{delegationAddress:f,txParams:h}=u,{authorizationList:p}=h,m=h.data,g=h.from,b=h.to,y=h.value;l("Request",{chainId:e,txParams:h});const w=await t(u)&&(0,i.doesChainSupportEIP7702)(e,n);let v=p?.map(e=>({address:e.address,from:g}));!w||f||v||(v=function({chainId:e,from:t,messenger:n,publicKeyEIP7702:s}){if(!s)throw r.rpcErrors.internal(i.ERROR_MESSGE_PUBLIC_KEY);const c=(0,o.getEIP7702UpgradeContractAddress)(e,n,s);if(!c)throw r.rpcErrors.internal(a.ERROR_MESSAGE_NO_UPGRADE_CONTRACT);return[{address:c,from:t}]}({chainId:e,from:g,messenger:n,publicKeyEIP7702:s}));try{const t=await(0,c.simulateTransactions)(e,{getSimulationConfig:d,transactions:[{authorizationList:v,data:m,from:g,to:b,value:y}],suggestFees:{withTransfer:!0,withFeeTransfer:!0,with7702:w}});l("Response",t);const n=function(e){const t=e.transactions?.[0]?.fees?.[0],n=e.sponsorship?.isSponsored??!1;return{gasFeeTokens:(t?.tokenFees??[]).map(e=>({amount:e.balanceNeededToken,balance:e.currentBalanceToken,decimals:e.token.decimals,fee:e.serviceFee,gas:t.gas,gasTransfer:e.transferEstimate,maxFeePerGas:t.maxFeePerGas,maxPriorityFeePerGas:t.maxPriorityFeePerGas,rateWei:e.rateWei,recipient:e.feeRecipient,symbol:e.token.symbol,tokenAddress:e.token.address})),isGasFeeSponsored:n}}(t);return l("Gas fee tokens",n),n}catch(e){return l("Failed to gas fee tokens",e),{gasFeeTokens:[],isGasFeeSponsored:!1}}}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/utils/gas-fee-tokens.cjs"}],[2799,{"../logger.cjs":2791,"../types.cjs":2792,"./gas-flow.cjs":2800,"./swaps.cjs":2808,"@metamask/controller-utils":1321,"@metamask/utils":2835},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.gweiDecimalToWeiDecimal=n.gweiDecimalToWeiHex=n.updateGasFees=void 0;const r=e("@metamask/controller-utils"),s=e("@metamask/utils"),a=e("./gas-flow.cjs"),i=e("./swaps.cjs"),o=e("../logger.cjs"),c=e("../types.cjs"),u=(0,s.createModuleLogger)(o.projectLogger,"gas-fees");function l(e){return(0,r.toHex)((0,r.gweiDecToWEIBN)(e))}n.updateGasFees=async function(e){const{txMeta:t}=e,n={...t.txParams},o=i.SWAP_TRANSACTION_TYPES.includes(t.type)?undefined:e.getSavedGasFees(t.chainId),d=await async function(e){const{eip1559:t,ethQuery:n,gasFeeFlows:i,getGasFeeEstimates:o,messenger:l,txMeta:d}=e,{networkClientId:f}=d;if(!t&&d.txParams.gasPrice||t&&d.txParams.maxFeePerGas&&d.txParams.maxPriorityFeePerGas)return{};const h=(0,a.getGasFeeFlow)(d,i,l);try{const e=await o({networkClientId:f}),t=await h.getGasFees({ethQuery:n,gasFeeControllerData:e,messenger:l,transactionMeta:d}),r=t.estimates?.type;switch(r){case c.GasFeeEstimateType.FeeMarket:return t.estimates.medium;case c.GasFeeEstimateType.Legacy:return{gasPrice:t.estimates.medium};case c.GasFeeEstimateType.GasPrice:return{gasPrice:t.estimates.gasPrice};default:throw new Error(`Unsupported gas fee estimate type returned from flow: ${r}`)}}catch(e){u("Failed to get suggested gas fees",e)}const p=await(0,r.query)(n,"gasPrice");return{gasPrice:p?(0,s.add0x)(p.toString(16)):undefined}}(e);u("Suggested gas fees",d);const f={...e,initialParams:n,savedGasFees:o,suggestedGasFees:d};t.txParams.maxFeePerGas=function(e){const{savedGasFees:t,eip1559:n,initialParams:r,suggestedGasFees:s}=e;if(!n)return undefined;if(t){const e=l(t.maxBaseFee);return u("Using maxFeePerGas from savedGasFees",e),e}if(r.maxFeePerGas)return u("Using maxFeePerGas from request",r.maxFeePerGas),r.maxFeePerGas;if(r.gasPrice&&!r.maxPriorityFeePerGas)return u("Setting maxFeePerGas to gasPrice from request",r.gasPrice),r.gasPrice;if(s.maxFeePerGas)return u("Using suggested maxFeePerGas",s.maxFeePerGas),s.maxFeePerGas;if(s.gasPrice)return u("Setting maxFeePerGas to suggested gasPrice",s.gasPrice),s.gasPrice;return u("maxFeePerGas not set"),undefined}(f),t.txParams.maxPriorityFeePerGas=function(e){const{eip1559:t,initialParams:n,savedGasFees:r,suggestedGasFees:s,txMeta:a}=e;if(!t)return undefined;if(r){const e=l(r.priorityFee);return u("Using maxPriorityFeePerGas from savedGasFees.priorityFee",e),e}if(n.maxPriorityFeePerGas)return u("Using maxPriorityFeePerGas from request",n.maxPriorityFeePerGas),n.maxPriorityFeePerGas;if(n.gasPrice&&!n.maxFeePerGas)return u("Setting maxPriorityFeePerGas to gasPrice from request",n.gasPrice),n.gasPrice;if(s.maxPriorityFeePerGas)return u("Using suggested maxPriorityFeePerGas",s.maxPriorityFeePerGas),s.maxPriorityFeePerGas;if(a.txParams.maxFeePerGas)return u("Setting maxPriorityFeePerGas to maxFeePerGas",a.txParams.maxFeePerGas),a.txParams.maxFeePerGas;return u("maxPriorityFeePerGas not set"),undefined}(f),t.txParams.gasPrice=function(e){const{eip1559:t,initialParams:n,suggestedGasFees:r}=e;if(t)return undefined;if(n.gasPrice)return u("Using gasPrice from request",n.gasPrice),n.gasPrice;if(r.maxFeePerGas)return u("Using suggested maxFeePerGas",r.maxFeePerGas),r.maxFeePerGas;if(r.gasPrice)return u("Using suggested gasPrice",r.gasPrice),r.gasPrice;return u("gasPrice not set"),undefined}(f),t.userFeeLevel=function(e){const{initialParams:t,savedGasFees:n,suggestedGasFees:s,txMeta:a}=e;if(n)return c.UserFeeLevel.CUSTOM;if(!t.maxFeePerGas&&!t.maxPriorityFeePerGas&&t.gasPrice)return a.origin===r.ORIGIN_METAMASK?c.UserFeeLevel.CUSTOM:c.UserFeeLevel.DAPP_SUGGESTED;if(!t.maxFeePerGas&&!t.maxPriorityFeePerGas&&s.maxFeePerGas&&s.maxPriorityFeePerGas)return c.UserFeeLevel.MEDIUM;if(!t.maxFeePerGas&&!t.maxPriorityFeePerGas&&s.gasPrice)return c.UserFeeLevel.MEDIUM;if(a.origin===r.ORIGIN_METAMASK)return c.UserFeeLevel.MEDIUM;return c.UserFeeLevel.DAPP_SUGGESTED}(f),u("Updated gas fee properties",{maxFeePerGas:t.txParams.maxFeePerGas,maxPriorityFeePerGas:t.txParams.maxPriorityFeePerGas,gasPrice:t.txParams.gasPrice}),(t.txParams.maxFeePerGas||t.txParams.maxPriorityFeePerGas)&&delete t.txParams.gasPrice,t.txParams.gasPrice&&(delete t.txParams.maxFeePerGas,delete t.txParams.maxPriorityFeePerGas),function(e){e.defaultGasEstimates||(e.defaultGasEstimates={});e.defaultGasEstimates.maxFeePerGas=e.txParams.maxFeePerGas,e.defaultGasEstimates.maxPriorityFeePerGas=e.txParams.maxPriorityFeePerGas,e.defaultGasEstimates.gasPrice=e.txParams.gasPrice,e.defaultGasEstimates.estimateType=e.userFeeLevel}(t)},n.gweiDecimalToWeiHex=l,n.gweiDecimalToWeiDecimal=function(e){return(1e9*Number(e)).toString().split(".")[0]}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/utils/gas-fees.cjs"}],[2800,{"../types.cjs":2792,"@metamask/controller-utils":1321},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.mergeGasFeeEstimates=n.getGasFeeFlow=void 0;const r=e("@metamask/controller-utils"),s=e("../types.cjs");function a(e,t){return(0,r.weiHexToGweiDec)(e[t])}n.getGasFeeFlow=function(e,t,n){return t.find(t=>t.matchesTransaction({transactionMeta:e,messenger:n}))},n.mergeGasFeeEstimates=function({gasFeeControllerEstimates:e,transactionGasFeeEstimates:t}){const n=t.type;return n===s.GasFeeEstimateType.FeeMarket?Object.values(s.GasFeeEstimateLevel).reduce((n,s)=>{return{...n,[s]:(a=e?.[s],i=t[s],{...a,suggestedMaxFeePerGas:(0,r.weiHexToGweiDec)(i.maxFeePerGas),suggestedMaxPriorityFeePerGas:(0,r.weiHexToGweiDec)(i.maxPriorityFeePerGas)})};var a,i},{...e}):n===s.GasFeeEstimateType.Legacy?Object.values(s.GasFeeEstimateLevel).reduce((e,n)=>({...e,[n]:a(t,n)}),{}):n===s.GasFeeEstimateType.GasPrice?{gasPrice:(i=t,(0,r.weiHexToGweiDec)(i.gasPrice))}:e;var i}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/utils/gas-flow.cjs"}],[2801,{"../api/simulation-api.cjs":2769,"../logger.cjs":2791,"../types.cjs":2792,"./eip7702.cjs":2795,"./feature-flags.cjs":2797,"@metamask/controller-utils":1321,"@metamask/utils":2835,"bn.js":3732},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.simulateGasBatch=n.addGasBuffer=n.estimateGas=n.updateGas=n.DUMMY_AUTHORIZATION_SIGNATURE=n.INTRINSIC_GAS=n.MAX_GAS_BLOCK_PERCENT=n.DEFAULT_GAS_MULTIPLIER=n.FIXED_GAS=n.log=void 0;const r=e("@metamask/controller-utils"),s=e("@metamask/utils"),a=e("bn.js"),i=e("./eip7702.cjs"),o=e("./feature-flags.cjs"),c=e("../api/simulation-api.cjs"),u=e("../logger.cjs"),l=e("../types.cjs");async function d({chainId:e,ethQuery:t,ignoreDelegationSignatures:a,isSimulationEnabled:i,getSimulationConfig:c,messenger:u,txParams:d}){const f={...d},{authorizationList:m,data:g,from:b,value:y,to:w}=f;if(a&&!i)throw new Error("Gas estimation with ignored delegation signatures is not supported as simulation disabled");const{gasLimit:v,number:E}=await async function(e){return await(0,r.query)(e,"getBlockByNumber",["latest",!1])}(t),T=(0,r.hexToBN)(v),{percentage:S,fixed:x}=(0,o.getGasEstimateFallback)(e,u),P=x?(0,r.toHex)(x):(0,r.BNToHex)((0,r.fractionBN)(T,S,100));(0,n.log)("Estimation fallback values",P),f.data=g?(0,s.add0x)(g):g,f.value=y||"0x0",f.authorizationList=function(e,t){return e?.map(e=>({...e,chainId:e.chainId??t,nonce:e.nonce??"0x1",r:e.r??n.DUMMY_AUTHORIZATION_SIGNATURE,s:e.s??n.DUMMY_AUTHORIZATION_SIGNATURE,yParity:e.yParity??"0x1"}))}(f.authorizationList,e),delete f.gasPrice,delete f.maxFeePerGas,delete f.maxPriorityFeePerGas;let k,I=P;const A=d.type===l.TransactionEnvelopeType.setCode&&Boolean(m?.length)&&Boolean(g)&&"0x"!==g&&b?.toLowerCase()===w?.toLowerCase();try{I=i&&A?await async function(e,t,s,a){const i=await(0,r.query)(t,"estimateGas",[{...e,data:"0x"}]);(0,n.log)("Upgrade only gas",i);const o=e.authorizationList?.[0].address;let c;try{c=await h({chainId:s,delegationAddress:o,getSimulationConfig:a,transaction:e})}catch(e){(0,n.log)("Error while simulating data portion of upgrade",e)}if(c===undefined){try{c=await p(t,{...e,authorizationList:undefined,type:undefined},o)}catch(e){throw(0,n.log)("Error while estimating data portion of upgrade",e),e}(0,n.log)("Success estimating data portion of upgrade",c)}(0,n.log)("Execute gas",c);const u=(0,r.BNToHex)((0,r.hexToBN)(i).add((0,r.hexToBN)(c)).subn(n.INTRINSIC_GAS));return(0,n.log)("Total type 4 gas",u),u}(f,t,e,c):a&&i?await h({chainId:e,getSimulationConfig:c,transaction:f}):await p(t,f)}catch(e){k={reason:e.message,errorKey:e.errorKey,debug:{blockNumber:E,blockGasLimit:v}},(0,n.log)("Estimation failed",{...k,fallback:P})}return{blockGasLimit:v,estimatedGas:I,isUpgradeWithDataToSelf:A,simulationFails:k}}function f(e,t,a){const i=(0,r.hexToBN)(e),o=(0,r.fractionBN)((0,r.hexToBN)(t),n.MAX_GAS_BLOCK_PERCENT,100),c=(0,r.fractionBN)(i,100*a,100);if(i.gt(o)){const t=(0,s.add0x)(e);return(0,n.log)("Using estimated value",t),t}if(c.lt(o)){const e=(0,s.add0x)((0,r.BNToHex)(c));return(0,n.log)("Using padded estimate",e,a),e}const u=(0,s.add0x)((0,r.BNToHex)(o));return(0,n.log)("Using 90% of block gas limit",u),u}async function h({chainId:e,delegationAddress:t,getSimulationConfig:n,transaction:r}){const a=await(0,c.simulateTransactions)(e,{getSimulationConfig:n,transactions:[{to:r.to,from:r.from,data:r.data,value:r.value}],overrides:{[r.from]:{code:t&&i.DELEGATION_PREFIX+(0,s.remove0x)(t)}}}),o=a?.transactions?.[0].gasLimit;if(!o)throw new Error("No simulated gas returned");return o}function p(e,t,n){const{from:a}=t,o=[t];return n&&(o.push("latest"),o.push({[a]:{code:i.DELEGATION_PREFIX+(0,s.remove0x)(n)}})),(0,r.query)(e,"estimateGas",o)}n.log=(0,s.createModuleLogger)(u.projectLogger,"gas"),n.FIXED_GAS="0x5208",n.DEFAULT_GAS_MULTIPLIER=1.5,n.MAX_GAS_BLOCK_PERCENT=90,n.INTRINSIC_GAS=21e3,n.DUMMY_AUTHORIZATION_SIGNATURE="0x1111111111111111111111111111111111111111111111111111111111111111",n.updateGas=async function(e){const{txMeta:t}=e,s={...t.txParams},[a,i,c]=await async function(e){const{chainId:t,isCustomNetwork:s,isSimulationEnabled:a,getSimulationConfig:i,messenger:c,txMeta:u}=e,{disableGasBuffer:h}=u;if(u.txParams.gas)return(0,n.log)("Using value from request",u.txParams.gas),[u.txParams.gas,undefined,u.txParams.gas];if(await async function({ethQuery:e,txMeta:t,isCustomNetwork:n}){const{txParams:{to:s,data:a,type:i}}=t;if(n||!s||a||i===l.TransactionEnvelopeType.setCode)return!1;const o=await async function(e,t){return await(0,r.query)(e,"getCode",[t])}(e,s);return!o||"0x"===o}(e))return(0,n.log)("Using fixed value",n.FIXED_GAS),[n.FIXED_GAS,undefined,n.FIXED_GAS];const{blockGasLimit:p,estimatedGas:m,isUpgradeWithDataToSelf:g,simulationFails:b}=await d({chainId:t,ethQuery:e.ethQuery,isSimulationEnabled:a,getSimulationConfig:i,messenger:c,txParams:u.txParams});(0,n.log)("Original estimated gas",m),b&&(0,n.log)("Using original fallback estimate as simulation failed");h&&(0,n.log)("Gas buffer disabled");if(b||h)return[m,b,m];const y=(0,o.getGasEstimateBuffer)({chainId:t,isCustomRPC:s,isUpgradeWithDataToSelf:g,messenger:c});(0,n.log)("Buffer",y);const w=f(m,p,y);return(0,n.log)("Buffered gas",w),[w,b,m]}(e);t.txParams.gas=a,t.simulationFails=i,t.gasLimitNoBuffer=c,s.gas||(t.originalGasEstimate=t.txParams.gas),t.defaultGasEstimates||(t.defaultGasEstimates={}),t.defaultGasEstimates.gas=t.txParams.gas},n.estimateGas=d,n.addGasBuffer=f,n.simulateGasBatch=async function({chainId:e,from:t,getSimulationConfig:s,transactions:i}){try{const n=await(0,c.simulateTransactions)(e,{getSimulationConfig:s,transactions:i.map(e=>({...e.params,from:t}))});if(!n?.transactions||n.transactions.length!==i.length)throw new Error("Simulation response does not match transaction count");const o=n.transactions.reduce((e,t)=>{const n=t?.gasLimit;if(!n)throw new Error("No simulated gas returned for one of the transactions");return e.add((0,r.hexToBN)(n))},new a.BN(0));return{gasLimit:(0,r.BNToHex)(o)}}catch(e){throw(0,n.log)("Error while simulating gas batch",e),new Error("Cannot estimate transaction batch total gas as simulation failed")}}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/utils/gas.cjs"}],[2802,{"fast-json-patch":4140,lodash:4565},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.updateTransactionHistory=n.addInitialHistorySnapshot=n.DISPLAYED_TRANSACTION_HISTORY_PATHS=n.MAX_TRANSACTION_HISTORY_LENGTH=void 0;const s=r(e("fast-json-patch")),a=e("lodash");function i(e,t,n){const r=s.default.compare(e,t);return r[0]&&(n&&(r[0].note=n),r[0].timestamp=Date.now()),r}function o(e){return(0,a.cloneDeep)(e).reduce((e,t)=>s.default.applyPatch(e,t).newDocument)}function c(e){const t={...e};return delete t.history,(0,a.cloneDeep)(t)}n.MAX_TRANSACTION_HISTORY_LENGTH=100,n.DISPLAYED_TRANSACTION_HISTORY_PATHS=["/status","/txParams/gasPrice","/txParams/gas","/estimatedBaseFee","/blockTimestamp"],n.addInitialHistorySnapshot=function(e){const t=c(e);return(0,a.merge)({},e,{history:[t]})},n.updateTransactionHistory=function(e,t){if(!e.history)return e;const r=c(e),s=i(o(e.history),r,t);if(0===s.length)return e;let u=[...e.history,s];return u.length>n.MAX_TRANSACTION_HISTORY_LENGTH&&(u=function(e){const t=e[0],r=e.slice(1),s=r.findIndex(e=>!e.some(({path:e})=>n.DISPLAYED_TRANSACTION_HISTORY_PATHS.includes(e)));if(-1===s)return e;const a=s===r.length-1?s-1:s+1,c=Math.min(s,a),u=r[c],l=r[c+1],d=o([t,...r.slice(0,c)]),f=o([d,u,l]),h=i(d,f,`${String(u[0].note)}, ${String(l[0].note)}`);return r.splice(c,2,h),[t,...r]}(u)),(0,a.merge)({},e,{history:u})}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/utils/history.cjs"}],[2803,{"../logger.cjs":2791,"@metamask/utils":2835},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getTransactionLayer1GasFee=n.updateTransactionLayer1GasFee=void 0;const r=e("@metamask/utils"),s=e("../logger.cjs"),a=(0,r.createModuleLogger)(s.projectLogger,"layer-1-gas-fee-flow");async function i({layer1GasFeeFlows:e,messenger:t,provider:n,transactionMeta:r}){const s=function(e,t,n){return t.find(t=>t.matchesTransaction({transactionMeta:e,messenger:n}))}(r,e,t);if(!s)return undefined;a("Found layer 1 gas fee flow",s.constructor.name,r.id);try{const{layer1Fee:e}=await s.getLayer1Fee({provider:n,transactionMeta:r});return e}catch(e){return a("Failed to get layer 1 gas fee",r.id,e),undefined}}n.updateTransactionLayer1GasFee=async function(e){const t=await i(e);if(!t)return;const{transactionMeta:n}=e;n.layer1GasFee=t,a("Updated layer 1 gas fee",t,n.id)},n.getTransactionLayer1GasFee=i}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/utils/layer1-gas-fee-flow.cjs"}],[2804,{"../logger.cjs":2791,"@metamask/controller-utils":1321},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getAndFormatTransactionsForNonceTracker=n.getNextNonce=void 0;const r=e("@metamask/controller-utils"),s=e("../logger.cjs"),a=(0,s.createModuleLogger)(s.projectLogger,"nonce");n.getNextNonce=async function(e,t){const{customNonceValue:n,isExternalSign:s,txParams:{from:i,nonce:o}}=e;if(s)return[undefined,undefined];const c=n?(0,r.toHex)(n):undefined;if(c)return a("Using custom nonce",c),[c,undefined];if(o)return a("Using existing nonce",o),[o,undefined];const u=await t(i),l=(0,r.toHex)(u.nextNonce),d=u.releaseLock.bind(u);return a("Using nonce from nonce tracker",l,u.nonceDetails),[l,d]},n.getAndFormatTransactionsForNonceTracker=function(e,t,n,r){return r.filter(({chainId:r,isTransfer:s,isUserOperation:a,status:i,txParams:{from:o}})=>!s&&!a&&r===e&&n.includes(i)&&o.toLowerCase()===t.toLowerCase()).map(({status:e,txParams:{from:t,gas:n,value:r,nonce:s}})=>({status:e,history:[{}],txParams:{from:t??"",gas:n??"",value:r??"",nonce:s??""}}))}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/utils/nonce.cjs"}],[2805,{"@ethereumjs/common":555,"@ethereumjs/tx":572,"@metamask/utils":2835,lodash:4565},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.serializeTransaction=n.prepareTransaction=n.HARDFORK=void 0;const r=e("@ethereumjs/common"),s=e("@ethereumjs/tx"),a=e("@metamask/utils"),i=e("lodash");function o(e){const t={chainId:parseInt(e,16),defaultHardfork:n.HARDFORK};return r.Common.custom(t,{eips:[7702]})}function c(e){return e?"0x0"===e?"0x":e.replace?.(/^0x(00)+/u,"0x")??e:e}n.HARDFORK=r.Hardfork.Prague,n.prepareTransaction=function(e,t){const n=function(e){const t=(0,i.cloneDeep)(e);return function(e){if(!e)return;for(const t of e)t.nonce=c(t.nonce),t.r=c(t.r),t.s=c(t.s),t.yParity=c(t.yParity)}(t.authorizationList),t}(t);return s.TransactionFactory.fromTxData(n,{freeze:!1,common:o(e)})},n.serializeTransaction=function(e){return(0,a.bytesToHex)(e.serialize())}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/utils/prepare.cjs"}],[2806,{"@metamask/controller-utils":1321,"@metamask/utils":2835},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getTransactionParamsWithIncreasedGasFee=void 0;const r=e("@metamask/controller-utils"),s=e("@metamask/utils");function a(e,t){const n=(0,r.convertHexToDecimal)(e),a=parseInt(""+n*t,10);return(0,s.add0x)(a.toString(16))}n.getTransactionParamsWithIncreasedGasFee=function(e,t,n){const r=function(e,t,n){if(n&&"gasPrice"in n)return n.gasPrice;const r=e.gasPrice;if(!r||"0x0"===r)return undefined;return a(r,t)}(e,t,n),s=function(e,t,n){if(n&&"maxFeePerGas"in n&&"maxPriorityFeePerGas"in n)return n;const r=e.maxFeePerGas,s=e.maxPriorityFeePerGas;if(!r||!s||"0x0"===r||"0x0"===s)return undefined;const i=a(r,t),o=a(s,t);return{maxFeePerGas:i,maxPriorityFeePerGas:o}}(e,t,n);if(s){const t={...e,...s};return delete t.gasPrice,t}if(r){const t={...e,gasPrice:r};return delete t.maxFeePerGas,delete t.maxPriorityFeePerGas,t}throw new Error("Cannot increase gas fee as no current values and no new values were provided")}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/utils/retry.cjs"}],[2807,{"@ethersproject/wallet":708,"@metamask/utils":2835},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.isValidSignature=void 0;const r=e("@ethersproject/wallet"),s=e("@metamask/utils");n.isValidSignature=function(e,t,n){try{const a=(0,s.add0x)(e.map(s.remove0x).join("")),i=(0,s.hexToBytes)(a);return(0,r.verifyMessage)(i,t).toLowerCase()===n.toLowerCase()}catch{return!1}}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/utils/signature.cjs"}],[2808,{"../constants.cjs":2770,"../logger.cjs":2791,"../types.cjs":2792,"./utils.cjs":2810,"@metamask/controller-utils":1321,lodash:4565},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.updatePostTransactionBalance=n.updateSwapsTransaction=n.SWAP_TRANSACTION_TYPES=n.SWAPS_CHAINID_DEFAULT_TOKEN_MAP=n.DEFAULT_TOKEN_ADDRESS=n.UPDATE_POST_TX_BALANCE_ATTEMPTS=n.UPDATE_POST_TX_BALANCE_TIMEOUT=void 0;const r=e("@metamask/controller-utils"),s=e("lodash"),a=e("./utils.cjs"),i=e("../constants.cjs"),o=e("../logger.cjs"),c=e("../types.cjs"),u=(0,o.createModuleLogger)(o.projectLogger,"swaps");n.UPDATE_POST_TX_BALANCE_TIMEOUT=5e3,n.UPDATE_POST_TX_BALANCE_ATTEMPTS=6;const l="0x539";n.DEFAULT_TOKEN_ADDRESS="0x0000000000000000000000000000000000000000";const d={name:"Ether",address:n.DEFAULT_TOKEN_ADDRESS,decimals:18},f={name:"Binance Coin",address:n.DEFAULT_TOKEN_ADDRESS,decimals:18},h={name:"Matic",address:n.DEFAULT_TOKEN_ADDRESS,decimals:18},p={name:"Avalanche",address:n.DEFAULT_TOKEN_ADDRESS,decimals:18},m={name:"Test Ether",address:n.DEFAULT_TOKEN_ADDRESS,decimals:18},g={name:"Ether",address:n.DEFAULT_TOKEN_ADDRESS,decimals:18},b={...d},y={...d},w={...d},v={name:"Sei",address:n.DEFAULT_TOKEN_ADDRESS,decimals:18};function E(e,t){return!(!e||!t)&&e===n.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[t]?.address}function T(e){return new Promise(t=>setTimeout(t,e))}n.SWAPS_CHAINID_DEFAULT_TOKEN_MAP={[i.CHAIN_IDS.MAINNET]:d,[l]:m,[i.CHAIN_IDS.BSC]:f,[i.CHAIN_IDS.POLYGON]:h,[i.CHAIN_IDS.GOERLI]:g,[i.CHAIN_IDS.AVALANCHE]:p,[i.CHAIN_IDS.OPTIMISM]:y,[i.CHAIN_IDS.ARBITRUM]:b,[i.CHAIN_IDS.ZKSYNC_ERA]:w,[i.CHAIN_IDS.SEI]:v},n.SWAP_TRANSACTION_TYPES=[c.TransactionType.swap,c.TransactionType.swapAndSend,c.TransactionType.swapApproval],n.updateSwapsTransaction=function(e,t,r,{isSwapsDisabled:i,cancelTransaction:o,messenger:u}){if(i||!n.SWAP_TRANSACTION_TYPES.includes(t))return e;if(t===c.TransactionType.swap&&!1===r?.hasApproveTx&&e.simulationFails)throw o(e.id),new Error("Simulation failed");const l=r?.meta;if(!l)return e;let d=e;return t===c.TransactionType.swapApproval&&(d=function(e,{type:t,sourceTokenSymbol:n}){(0,a.validateIfTransactionUnapproved)(e,"updateSwapApprovalTransaction");let r={type:t,sourceTokenSymbol:n};return r=(0,s.pickBy)({type:t,sourceTokenSymbol:n}),(0,s.merge)({},e,r)}(e,l),u.publish("TransactionController:transactionNewSwapApproval",{transactionMeta:d})),t===c.TransactionType.swapAndSend&&(d=function(e,{approvalTxId:t,destinationTokenAddress:n,destinationTokenAmount:r,destinationTokenDecimals:i,destinationTokenSymbol:o,estimatedBaseFee:c,sourceTokenAddress:u,sourceTokenAmount:l,sourceTokenDecimals:d,sourceTokenSymbol:f,swapAndSendRecipient:h,swapMetaData:p,swapTokenValue:m,type:g}){(0,a.validateIfTransactionUnapproved)(e,"updateSwapTransaction");let b={approvalTxId:t,destinationTokenAddress:n,destinationTokenAmount:r,destinationTokenDecimals:i,destinationTokenSymbol:o,estimatedBaseFee:c,sourceTokenAddress:u,sourceTokenAmount:l,sourceTokenDecimals:d,sourceTokenSymbol:f,swapAndSendRecipient:h,swapMetaData:p,swapTokenValue:m,type:g};return b=(0,s.pickBy)(b),(0,s.merge)({},e,b)}(e,l),u.publish("TransactionController:transactionNewSwapAndSend",{transactionMeta:d})),t===c.TransactionType.swap&&(d=function(e,{sourceTokenSymbol:t,destinationTokenSymbol:n,type:r,destinationTokenDecimals:i,destinationTokenAddress:o,swapMetaData:c,swapTokenValue:u,estimatedBaseFee:l,approvalTxId:d}){(0,a.validateIfTransactionUnapproved)(e,"updateSwapTransaction");let f={sourceTokenSymbol:t,destinationTokenSymbol:n,type:r,destinationTokenDecimals:i,destinationTokenAddress:o,swapMetaData:c,swapTokenValue:u,estimatedBaseFee:l,approvalTxId:d};return f=(0,s.pickBy)(f),(0,s.merge)({},e,f)}(e,l),u.publish("TransactionController:transactionNewSwap",{transactionMeta:d})),d},n.updatePostTransactionBalance=async function(e,{ethQuery:t,getTransaction:s,updateTransaction:a}){u("Updating post transaction balance",e.id);const i=e.id;let o,c;for(let a=0;a<n.UPDATE_POST_TX_BALANCE_ATTEMPTS;a++){u("Querying balance",{attempt:a});const l=await(0,r.query)(t,"getBalance",[e.txParams.from]);o={...s(i)??{}},c=o.approvalTxId?s(o.approvalTxId):undefined,o.postTxBalance=l.toString(16);const d=E(e.destinationTokenAddress,e.chainId);if(!d||e.preTxBalance!==o.postTxBalance){u("Finishing post balance update",{isDefaultTokenAddress:d,preTxBalance:e.preTxBalance,postTxBalance:o.postTxBalance});break}u("Waiting for balance to update",{delay:n.UPDATE_POST_TX_BALANCE_TIMEOUT}),await T(n.UPDATE_POST_TX_BALANCE_TIMEOUT)}return a(o,"TransactionController#updatePostTransactionBalance - Add post transaction balance"),u("Completed post balance update",o?.postTxBalance),{updatedTransactionMeta:o,approvalTransactionMeta:c}}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/utils/swaps.cjs"}],[2809,{"../types.cjs":2792,"./eip7702.cjs":2795,"@ethersproject/abi":612,"@metamask/controller-utils":1321,"@metamask/metamask-eth-abis":2077},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.determineTransactionType=n.ESTIMATE_GAS_ERROR=void 0;const r=e("@ethersproject/abi"),s=e("@metamask/controller-utils"),a=e("@metamask/metamask-eth-abis"),i=e("./eip7702.cjs"),o=e("../types.cjs");n.ESTIMATE_GAS_ERROR="eth_estimateGas rpc method error";const c=new r.Interface(a.abiERC20),u=new r.Interface(a.abiERC721),l=new r.Interface(a.abiERC1155),d=new r.Interface(a.abiFiatTokenV2);n.determineTransactionType=async function(e,t){const{data:n,to:r}=e;if(n&&!r)return{type:o.TransactionType.deployContract,getCodeResponse:undefined};let a,f=Boolean(n?.length);if(t){const e=await async function(e,t){let n;try{n=await(0,s.query)(e,"getCode",[t])}catch(e){n=null}const r=!!n&&("0x"!==n&&"0x0"!==n&&!n.startsWith(i.DELEGATION_PREFIX));return{contractCode:n,isContractAddress:r}}(t,r);a=e.contractCode,f=e.isContractAddress}if(!f)return{type:o.TransactionType.simpleSend,getCodeResponse:a};const h=0!==Number(e.value??"0"),p={type:o.TransactionType.contractInteraction,getCodeResponse:a};if(!n||h)return p;const m=function(e){if(!e||e.length<10)return undefined;const t=e.substring(0,10).toLowerCase();for(const e of[c,u,l,d])try{return e.getFunction(t).name}catch{}return undefined}(n);if(!m)return p;const g=[o.TransactionType.tokenMethodApprove,o.TransactionType.tokenMethodSetApprovalForAll,o.TransactionType.tokenMethodTransfer,o.TransactionType.tokenMethodTransferFrom,o.TransactionType.tokenMethodSafeTransferFrom,o.TransactionType.tokenMethodIncreaseAllowance].find(e=>e.toLowerCase()===m.toLowerCase());return g?{type:g,getCodeResponse:a}:p}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/utils/transaction-type.cjs"}],[2810,{"../types.cjs":2792,"@metamask/utils":2835,"bn.js":3732},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.setEnvelopeType=n.getPercentageChange=n.padHexToEvenLength=n.normalizeGasFeeValues=n.normalizeTxError=n.validateIfTransactionUnapproved=n.validateGasValues=n.isEIP1559Transaction=n.normalizeTransactionParams=n.ESTIMATE_GAS_ERROR=void 0;const s=e("@metamask/utils"),a=r(e("bn.js")),i=e("../types.cjs");n.ESTIMATE_GAS_ERROR="eth_estimateGas rpc method error";const o={accessList:e=>e,authorizationList:e=>e,data:e=>(0,s.add0x)(u(e)),from:e=>(0,s.add0x)(e).toLowerCase(),gas:e=>(0,s.add0x)(e),gasLimit:e=>(0,s.add0x)(e),gasPrice:e=>(0,s.add0x)(e),nonce:e=>(0,s.add0x)(e),to:e=>(0,s.add0x)(e).toLowerCase(),value:e=>(0,s.add0x)(e),maxFeePerGas:e=>(0,s.add0x)(e),maxPriorityFeePerGas:e=>(0,s.add0x)(e),estimatedBaseFee:e=>(0,s.add0x)(e),type:e=>(0,s.add0x)(e)};n.normalizeTransactionParams=function(e){const t={from:""};for(const n of(0,s.getKnownPropertyNames)(o))e[n]&&(t[n]=o[n](e[n]));return t.value||(t.value="0x0"),t.gasLimit&&!t.gas&&(t.gas=t.gasLimit),t},n.isEIP1559Transaction=function(e){const t=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);return t(e,"maxFeePerGas")&&t(e,"maxPriorityFeePerGas")};function c(e){try{return JSON.parse(JSON.stringify(e)),!0}catch{return!1}}function u(e){const t=e.toLowerCase().startsWith("0x")?e.slice(0,2):"",n=t?e.slice(2):e;return t+(n.length%2==0?n:`0${n}`)}n.validateGasValues=e=>{Object.keys(e).forEach(t=>{const n=e[t];if("string"!=typeof n||!(0,s.isStrictHexString)(n))throw new TypeError(`expected hex string for ${t} but received: ${n}`)})},n.validateIfTransactionUnapproved=function(e,t){if(e?.status!==i.TransactionStatus.unapproved)throw new Error(`TransactionsController: Can only call ${t} on an unapproved transaction.\n      Current tx status: ${e?.status}`)},n.normalizeTxError=function(e){return{name:e.name,message:e.message,stack:e.stack,code:e.code,rpc:c(e.value)?e.value:undefined}},n.normalizeGasFeeValues=function(e){const t=e=>"string"==typeof e?(0,s.add0x)(e):e;return"gasPrice"in e?{gasPrice:t(e.gasPrice)}:{maxFeePerGas:t(e.maxFeePerGas),maxPriorityFeePerGas:t(e.maxPriorityFeePerGas)}},n.padHexToEvenLength=u,n.getPercentageChange=function(e,t){const n=new a.default(10).pow(new a.default(18)),r=e.mul(n),s=t.mul(n),i=s.sub(r);return i.isZero()?0:r.isZero()&&!s.isZero()?100:i.muln(100).div(r).abs().toNumber()},n.setEnvelopeType=function(e,t){e.accessList?e.type=i.TransactionEnvelopeType.accessList:e.authorizationList?e.type=i.TransactionEnvelopeType.setCode:e.type=t?i.TransactionEnvelopeType.feeMarket:i.TransactionEnvelopeType.legacy}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/utils/utils.cjs"}],[2811,{"../types.cjs":2792,"./utils.cjs":2810,"@ethersproject/abi":612,"@metamask/controller-utils":1321,"@metamask/metamask-eth-abis":2077,"@metamask/rpc-errors":2421,"@metamask/utils":2835},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.validateBatchRequest=n.validateParamTo=n.validateTxParams=n.validateTransactionOrigin=n.ErrorCode=void 0;const r=e("@ethersproject/abi"),s=e("@metamask/controller-utils"),a=e("@metamask/metamask-eth-abis"),i=e("@metamask/rpc-errors"),o=e("@metamask/utils"),c=e("./utils.cjs"),u=e("../types.cjs");var l;!function(e){e[e.DuplicateBundleId=5720]="DuplicateBundleId",e[e.BundleTooLarge=5740]="BundleTooLarge",e[e.RejectedUpgrade=5750]="RejectedUpgrade"}(l||(n.ErrorCode=l={}));const d=[u.TransactionEnvelopeType.feeMarket,u.TransactionEnvelopeType.setCode];function f(e,t){const n=e.type;switch(t){case"authorizationList":if(n&&n!==u.TransactionEnvelopeType.setCode)throw i.rpcErrors.invalidParams(`Invalid transaction envelope type: specified type "${n}" but including authorizationList requires type: "${u.TransactionEnvelopeType.setCode}"`);break;case"maxFeePerGas":case"maxPriorityFeePerGas":if(n&&!d.includes(n))throw i.rpcErrors.invalidParams(`Invalid transaction envelope type: specified type "${n}" but including maxFeePerGas and maxPriorityFeePerGas requires type: "${d.join(", ")}"`);break;default:if(n&&d.includes(n))throw i.rpcErrors.invalidParams(`Invalid transaction envelope type: specified type "${n}" but included a gasPrice instead of maxFeePerGas and maxPriorityFeePerGas`)}}function h(e,t,n){if(void 0!==e[n])throw i.rpcErrors.invalidParams(`Invalid transaction params: specified ${t} but also included ${n}, these cannot be mixed`)}function p(e,t){const n=e[t];if("string"!=typeof n||!(0,o.isStrictHexString)(n))throw i.rpcErrors.invalidParams(`Invalid transaction params: ${String(t)} is not a valid hexadecimal string. got: (${String(n)})`)}function m(e){p(e,"address"),function(e,t,n){const r=(0,o.remove0x)(e).length/2;if(r!==t)throw i.rpcErrors.invalidParams(`Invalid transaction params: ${n} must be ${t} bytes. got: ${r} bytes`)}(e.address,20,"address");for(const t of["chainId","nonce","r","s"])e[t]&&p(e,t);const{yParity:t}=e;if(t&&!["0x0","0x1"].includes(t))throw i.rpcErrors.invalidParams(`Invalid transaction params: yParity must be '0x0' or '0x1'. got: ${t}`)}n.validateTransactionOrigin=async function({data:e,from:t,internalAccounts:n,origin:r,permittedAddresses:a,txParams:o,type:c}){if(!r||r===s.ORIGIN_METAMASK)return;const{authorizationList:l,to:d,type:f}=o;if(a&&!a.includes(t))throw i.providerErrors.unauthorized({data:{origin:r}});if(c===u.TransactionType.batch)return;if(l||f===u.TransactionEnvelopeType.setCode)throw i.rpcErrors.invalidParams("External EIP-7702 transactions are not supported");if(Boolean(e&&"0x"!==e)&&n?.some(e=>e.toLowerCase()===d?.toLowerCase()))throw i.rpcErrors.invalidParams("External transactions to internal accounts cannot include data")},n.validateTxParams=function(e,t=!0,n){!function(e){if(e&&!Object.values(u.TransactionEnvelopeType).includes(e))throw i.rpcErrors.invalidParams(`Invalid transaction envelope type: "${e}". Must be one of: ${Object.values(u.TransactionEnvelopeType).join(", ")}`)}(e.type),function(e,t){if((0,c.isEIP1559Transaction)(e)&&!t)throw i.rpcErrors.invalidParams("Invalid transaction params: params specify an EIP-1559 transaction but the current network does not support EIP-1559")}(e,t),function(e){if(!e||"string"!=typeof e)throw i.rpcErrors.invalidParams(`Invalid "from" address ${e}: not a string.`);if(!(0,s.isValidHexAddress)(e))throw i.rpcErrors.invalidParams('Invalid "from" address.')}(e.from),function(e){if("0x"===e.to||e.to===undefined){if(!e.data)throw i.rpcErrors.invalidParams('Invalid "to" address.');delete e.to}else if(e.to!==undefined&&!(0,s.isValidHexAddress)(e.to))throw i.rpcErrors.invalidParams('Invalid "to" address.')}(e),function(e){if(e!==undefined){if(e.includes("-"))throw i.rpcErrors.invalidParams(`Invalid transaction value "${e}": not a positive number.`);if(e.includes("."))throw i.rpcErrors.invalidParams(`Invalid transaction value "${e}": number must be in wei.`);const t=parseInt(e,10);if(!(Number.isFinite(t)&&!Number.isNaN(t)&&!isNaN(Number(e))&&Number.isSafeInteger(t)))throw i.rpcErrors.invalidParams(`Invalid transaction value ${e}: number must be a valid number.`)}}(e.value),function(e){if(e){const t=new r.Interface(a.abiERC20);try{t.parseTransaction({data:e})}catch(e){if(e.message.match(/BUFFER_OVERRUN/u))throw i.rpcErrors.invalidParams("Invalid transaction params: data out-of-bounds, BUFFER_OVERRUN.")}}}(e.data),function(e,t){if(e&&t&&e.toLowerCase?.()!==t.toLowerCase())throw i.rpcErrors.invalidParams(`Invalid transaction params: chainId must match the network client, got: ${e}, expected: ${t}`)}(e.chainId,n),function(e){e.gasPrice&&(f(e,"gasPrice"),h(e,"gasPrice","maxFeePerGas"),h(e,"gasPrice","maxPriorityFeePerGas"),p(e,"gasPrice"));e.maxFeePerGas&&(f(e,"maxFeePerGas"),h(e,"maxFeePerGas","gasPrice"),p(e,"maxFeePerGas"));e.maxPriorityFeePerGas&&(f(e,"maxPriorityFeePerGas"),h(e,"maxPriorityFeePerGas","gasPrice"),p(e,"maxPriorityFeePerGas"));e.gasLimit&&p(e,"gasLimit");e.gas&&p(e,"gas")}(e),function(e){const{authorizationList:t}=e;if(!t)return;if(f(e,"authorizationList"),!Array.isArray(t))throw i.rpcErrors.invalidParams("Invalid transaction params: authorizationList must be an array");for(const e of t)m(e)}(e)},n.validateParamTo=function(e){if(!e||"string"!=typeof e)throw i.rpcErrors.invalidParams('Invalid "to" address')},n.validateBatchRequest=function({internalAccounts:e,request:t,sizeLimit:n}){const{origin:r}=t,a=r&&r!==s.ORIGIN_METAMASK,o=e.map(e=>e.toLowerCase());if(a&&t.transactions.some(e=>{const t=e.params.to?.toLowerCase(),n=e.params.data,r=o.includes(t),s=Boolean(n&&"0x"!==n);return r&&s}))throw i.rpcErrors.invalidParams("External calls to internal accounts cannot include data");if(a&&t.transactions.length>n)throw new i.JsonRpcError(l.BundleTooLarge,`Batch size cannot exceed ${n}. got: ${t.transactions.length}`)}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/utils/validation.cjs"}],[2825,{"./errors.cjs":2833,"@metamask/superstruct":2741},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.assertExhaustive=n.assertStruct=n.assert=n.AssertionError=void 0;const r=e("@metamask/superstruct"),s=e("./errors.cjs");function a(e,t){return n=e,Boolean("string"==typeof n?.prototype?.constructor?.name)?new e({message:t}):e({message:t});var n}class i extends Error{constructor(e){super(e.message),this.code="ERR_ASSERTION"}}n.AssertionError=i,n.assert=function(e,t="Assertion failed.",n=i){if(!e){if(t instanceof Error)throw t;throw a(n,t)}},n.assertStruct=function(e,t,n="Assertion failed",o=i){try{(0,r.assert)(e,t)}catch(e){throw a(o,`${n}: ${function(e){return(0,s.getErrorMessage)(e).replace(/\.$/u,"")}(e)}.`)}},n.assertExhaustive=function(e){throw new Error("Invalid branch reached. Should be detected during compilation.")}}}},{package:"@metamask/utils",file:"node_modules/@metamask/utils/dist/assert.cjs"}],[2826,{"./assert.cjs":2825,"@metamask/superstruct":2741},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.base64=void 0;const r=e("@metamask/superstruct"),s=e("./assert.cjs");n.base64=(e,t={})=>{const n=t.paddingRequired??!1,a=t.characterSet??"base64";let i,o;return"base64"===a?i=String.raw`[A-Za-z0-9+\/]`:((0,s.assert)("base64url"===a),i=String.raw`[-_A-Za-z0-9]`),o=n?new RegExp(`^(?:${i}{4})*(?:${i}{3}=|${i}{2}==)?$`,"u"):new RegExp(`^(?:${i}{4})*(?:${i}{2,3}|${i}{3}=|${i}{2}==)?$`,"u"),(0,r.pattern)(e,o)}}}},{package:"@metamask/utils",file:"node_modules/@metamask/utils/dist/base64.cjs"}],[2827,{"./assert.cjs":2825,"./hex.cjs":2834,"@scure/base":2912,buffer:3793},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){Object.defineProperty(n,"__esModule",{value:!0}),n.areUint8ArraysEqual=n.createDataView=n.concatBytes=n.valueToBytes=n.base64ToBytes=n.stringToBytes=n.numberToBytes=n.signedBigIntToBytes=n.bigIntToBytes=n.hexToBytes=n.bytesToBase64=n.bytesToString=n.bytesToNumber=n.bytesToSignedBigInt=n.bytesToBigInt=n.bytesToHex=n.assertIsBytes=n.isBytes=void 0;const r=e("@scure/base"),s=e("./assert.cjs"),a=e("./hex.cjs");const i=function(){const e=[];return()=>{if(0===e.length)for(let t=0;t<256;t++)e.push(t.toString(16).padStart(2,"0"));return e}}();function o(e){return e instanceof Uint8Array}function c(e){(0,s.assert)(o(e),"Value must be a Uint8Array.")}function u(e){if(c(e),0===e.length)return"0x";const t=i(),n=new Array(e.length);for(let r=0;r<e.length;r++)n[r]=t[e[r]];return(0,a.add0x)(n.join(""))}function l(e){c(e);const t=u(e);return BigInt(t)}function d(e){if("0x"===e?.toLowerCase?.())return new Uint8Array;(0,a.assertIsHexString)(e);const t=(0,a.remove0x)(e).toLowerCase(),n=t.length%2==0?t:`0${t}`,r=new Uint8Array(n.length/2);for(let e=0;e<r.length;e++){const t=n.charCodeAt(2*e),s=n.charCodeAt(2*e+1),a=t-(t<58?48:87),i=s-(s<58?48:87);r[e]=16*a+i}return r}function f(e){(0,s.assert)("bigint"==typeof e,"Value must be a bigint."),(0,s.assert)(e>=BigInt(0),"Value must be a non-negative bigint.");return d(e.toString(16))}function h(e){(0,s.assert)("number"==typeof e,"Value must be a number."),(0,s.assert)(e>=0,"Value must be a non-negative number."),(0,s.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToBytes` instead.");return d(e.toString(16))}function p(e){return(0,s.assert)("string"==typeof e,"Value must be a string."),(new TextEncoder).encode(e)}function m(e){if("bigint"==typeof e)return f(e);if("number"==typeof e)return h(e);if("string"==typeof e)return e.startsWith("0x")?d(e):p(e);if(o(e))return e;throw new TypeError(`Unsupported value type: "${typeof e}".`)}n.isBytes=o,n.assertIsBytes=c,n.bytesToHex=u,n.bytesToBigInt=l,n.bytesToSignedBigInt=function(e){c(e);let t=BigInt(0);for(const n of e)t=(t<<BigInt(8))+BigInt(n);return BigInt.asIntN(8*e.length,t)},n.bytesToNumber=function(e){c(e);const t=l(e);return(0,s.assert)(t<=BigInt(Number.MAX_SAFE_INTEGER),"Number is not a safe integer. Use `bytesToBigInt` instead."),Number(t)},n.bytesToString=function(e){return c(e),(new TextDecoder).decode(e)},n.bytesToBase64=function(e){return c(e),r.base64.encode(e)},n.hexToBytes=d,n.bigIntToBytes=f,n.signedBigIntToBytes=function(e,t){(0,s.assert)("bigint"==typeof e,"Value must be a bigint."),(0,s.assert)("number"==typeof t,"Byte length must be a number."),(0,s.assert)(t>0,"Byte length must be greater than 0."),(0,s.assert)(function(e,t){(0,s.assert)(t>0);const n=e>>BigInt(31);return!((~e&n)+(e&~n)>>BigInt(8*t-1))}(e,t),"Byte length is too small to represent the given value.");let n=e;const r=new Uint8Array(t);for(let e=0;e<r.length;e++)r[e]=Number(BigInt.asUintN(8,n)),n>>=BigInt(8);return r.reverse()},n.numberToBytes=h,n.stringToBytes=p,n.base64ToBytes=function(e){return(0,s.assert)("string"==typeof e,"Value must be a string."),r.base64.decode(e)},n.valueToBytes=m,n.concatBytes=function(e){const t=new Array(e.length);let n=0;for(let r=0;r<e.length;r++){const s=m(e[r]);t[r]=s,n+=s.length}const r=new Uint8Array(n);for(let e=0,n=0;e<t.length;e++)r.set(t[e],n),n+=t[e].length;return r},n.createDataView=function(e){if(void 0!==t&&e instanceof t){const t=e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);return new DataView(t)}return new DataView(e.buffer,e.byteOffset,e.byteLength)},n.areUint8ArraysEqual=function(e,t){let n=e.byteLength^t.byteLength;const r=Math.max(e.byteLength,t.byteLength);for(let s=0;s<r;s++){n|=(e[s]??0)^(t[s]??0)}return 0===n}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/utils",file:"node_modules/@metamask/utils/dist/bytes.cjs"}],[2828,{"./superstruct.cjs":2843,"@metamask/superstruct":2741},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.toCaipAssetId=n.toCaipAssetType=n.toCaipAccountId=n.toCaipChainId=n.parseCaipAssetId=n.parseCaipAssetType=n.parseCaipAccountId=n.parseCaipChainId=n.isCaipAssetId=n.isCaipAssetType=n.isCaipTokenId=n.isCaipAssetReference=n.isCaipAssetNamespace=n.isCaipAccountAddress=n.isCaipAccountId=n.isCaipReference=n.isCaipNamespace=n.isCaipChainId=n.KnownCaipNamespace=n.CaipAssetTypeOrIdStruct=n.CaipAssetIdStruct=n.CaipAssetTypeStruct=n.CaipTokenIdStruct=n.CaipAssetReferenceStruct=n.CaipAssetNamespaceStruct=n.CaipAccountAddressStruct=n.CaipAccountIdStruct=n.CaipReferenceStruct=n.CaipNamespaceStruct=n.CaipChainIdStruct=n.CAIP_ASSET_ID_REGEX=n.CAIP_ASSET_TYPE_REGEX=n.CAIP_TOKEN_ID_REGEX=n.CAIP_ASSET_REFERENCE_REGEX=n.CAIP_ASSET_NAMESPACE_REGEX=n.CAIP_ACCOUNT_ADDRESS_REGEX=n.CAIP_ACCOUNT_ID_REGEX=n.CAIP_REFERENCE_REGEX=n.CAIP_NAMESPACE_REGEX=n.CAIP_CHAIN_ID_REGEX=void 0;const r=e("@metamask/superstruct"),s=e("./superstruct.cjs");n.CAIP_CHAIN_ID_REGEX=/^(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32})$/u,n.CAIP_NAMESPACE_REGEX=/^[-a-z0-9]{3,8}$/u,n.CAIP_REFERENCE_REGEX=/^[-_a-zA-Z0-9]{1,32}$/u,n.CAIP_ACCOUNT_ID_REGEX=/^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32})):(?<accountAddress>[-.%a-zA-Z0-9]{1,128})$/u,n.CAIP_ACCOUNT_ADDRESS_REGEX=/^[-.%a-zA-Z0-9]{1,128}$/u,n.CAIP_ASSET_NAMESPACE_REGEX=/^[-a-z0-9]{3,8}$/u,n.CAIP_ASSET_REFERENCE_REGEX=/^[-.%a-zA-Z0-9]{1,128}$/u,n.CAIP_TOKEN_ID_REGEX=/^[-.%a-zA-Z0-9]{1,78}$/u,n.CAIP_ASSET_TYPE_REGEX=/^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32}))\/(?<assetNamespace>[-a-z0-9]{3,8}):(?<assetReference>[-.%a-zA-Z0-9]{1,128})$/u,n.CAIP_ASSET_ID_REGEX=/^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32}))\/(?<assetNamespace>[-a-z0-9]{3,8}):(?<assetReference>[-.%a-zA-Z0-9]{1,128})\/(?<tokenId>[-.%a-zA-Z0-9]{1,78})$/u;function a(e){return(0,r.is)(e,n.CaipNamespaceStruct)}function i(e){return(0,r.is)(e,n.CaipReferenceStruct)}function o(e){return(0,r.is)(e,n.CaipAccountAddressStruct)}function c(e){return(0,r.is)(e,n.CaipAssetNamespaceStruct)}function u(e){return(0,r.is)(e,n.CaipAssetReferenceStruct)}function l(e){return(0,r.is)(e,n.CaipTokenIdStruct)}n.CaipChainIdStruct=(0,s.definePattern)("CaipChainId",n.CAIP_CHAIN_ID_REGEX),n.CaipNamespaceStruct=(0,s.definePattern)("CaipNamespace",n.CAIP_NAMESPACE_REGEX),n.CaipReferenceStruct=(0,s.definePattern)("CaipReference",n.CAIP_REFERENCE_REGEX),n.CaipAccountIdStruct=(0,s.definePattern)("CaipAccountId",n.CAIP_ACCOUNT_ID_REGEX),n.CaipAccountAddressStruct=(0,s.definePattern)("CaipAccountAddress",n.CAIP_ACCOUNT_ADDRESS_REGEX),n.CaipAssetNamespaceStruct=(0,s.definePattern)("CaipAssetNamespace",n.CAIP_ASSET_NAMESPACE_REGEX),n.CaipAssetReferenceStruct=(0,s.definePattern)("CaipAssetReference",n.CAIP_ASSET_REFERENCE_REGEX),n.CaipTokenIdStruct=(0,s.definePattern)("CaipTokenId",n.CAIP_TOKEN_ID_REGEX),n.CaipAssetTypeStruct=(0,s.definePattern)("CaipAssetType",n.CAIP_ASSET_TYPE_REGEX),n.CaipAssetIdStruct=(0,s.definePattern)("CaipAssetId",n.CAIP_ASSET_ID_REGEX),n.CaipAssetTypeOrIdStruct=(0,s.definePattern)("CaipAssetTypeOrId",/^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32}))\/(?<assetNamespace>[-a-z0-9]{3,8}):(?<assetReference>[-.%a-zA-Z0-9]{1,128})(\/(?<tokenId>[-.%a-zA-Z0-9]{1,78}))?$/u),function(e){e.Bip122="bip122",e.Solana="solana",e.Tron="tron",e.Eip155="eip155",e.Wallet="wallet"}(n.KnownCaipNamespace||(n.KnownCaipNamespace={})),n.isCaipChainId=function(e){return(0,r.is)(e,n.CaipChainIdStruct)},n.isCaipNamespace=a,n.isCaipReference=i,n.isCaipAccountId=function(e){return(0,r.is)(e,n.CaipAccountIdStruct)},n.isCaipAccountAddress=o,n.isCaipAssetNamespace=c,n.isCaipAssetReference=u,n.isCaipTokenId=l,n.isCaipAssetType=function(e){return(0,r.is)(e,n.CaipAssetTypeStruct)},n.isCaipAssetId=function(e){return(0,r.is)(e,n.CaipAssetIdStruct)},n.parseCaipChainId=function(e){const t=n.CAIP_CHAIN_ID_REGEX.exec(e);if(!t?.groups)throw new Error("Invalid CAIP chain ID.");return{namespace:t.groups.namespace,reference:t.groups.reference}},n.parseCaipAccountId=function(e){const t=n.CAIP_ACCOUNT_ID_REGEX.exec(e);if(!t?.groups)throw new Error("Invalid CAIP account ID.");return{address:t.groups.accountAddress,chainId:t.groups.chainId,chain:{namespace:t.groups.namespace,reference:t.groups.reference}}},n.parseCaipAssetType=function(e){const t=n.CAIP_ASSET_TYPE_REGEX.exec(e);if(!t?.groups)throw new Error("Invalid CAIP asset type.");return{assetNamespace:t.groups.assetNamespace,assetReference:t.groups.assetReference,chainId:t.groups.chainId,chain:{namespace:t.groups.namespace,reference:t.groups.reference}}},n.parseCaipAssetId=function(e){const t=n.CAIP_ASSET_ID_REGEX.exec(e);if(!t?.groups)throw new Error("Invalid CAIP asset ID.");return{assetNamespace:t.groups.assetNamespace,assetReference:t.groups.assetReference,tokenId:t.groups.tokenId,chainId:t.groups.chainId,chain:{namespace:t.groups.namespace,reference:t.groups.reference}}},n.toCaipChainId=function(e,t){if(!a(e))throw new Error(`Invalid "namespace", must match: ${n.CAIP_NAMESPACE_REGEX.toString()}`);if(!i(t))throw new Error(`Invalid "reference", must match: ${n.CAIP_REFERENCE_REGEX.toString()}`);return`${e}:${t}`},n.toCaipAccountId=function(e,t,r){if(!a(e))throw new Error(`Invalid "namespace", must match: ${n.CAIP_NAMESPACE_REGEX.toString()}`);if(!i(t))throw new Error(`Invalid "reference", must match: ${n.CAIP_REFERENCE_REGEX.toString()}`);if(!o(r))throw new Error(`Invalid "accountAddress", must match: ${n.CAIP_ACCOUNT_ADDRESS_REGEX.toString()}`);return`${e}:${t}:${r}`},n.toCaipAssetType=function(e,t,r,s){if(!a(e))throw new Error(`Invalid "namespace", must match: ${n.CAIP_NAMESPACE_REGEX.toString()}`);if(!i(t))throw new Error(`Invalid "reference", must match: ${n.CAIP_REFERENCE_REGEX.toString()}`);if(!c(r))throw new Error(`Invalid "assetNamespace", must match: ${n.CAIP_ASSET_NAMESPACE_REGEX.toString()}`);if(!u(s))throw new Error(`Invalid "assetReference", must match: ${n.CAIP_ASSET_REFERENCE_REGEX.toString()}`);return`${e}:${t}/${r}:${s}`},n.toCaipAssetId=function(e,t,r,s,o){if(!a(e))throw new Error(`Invalid "namespace", must match: ${n.CAIP_NAMESPACE_REGEX.toString()}`);if(!i(t))throw new Error(`Invalid "reference", must match: ${n.CAIP_REFERENCE_REGEX.toString()}`);if(!c(r))throw new Error(`Invalid "assetNamespace", must match: ${n.CAIP_ASSET_NAMESPACE_REGEX.toString()}`);if(!u(s))throw new Error(`Invalid "assetReference", must match: ${n.CAIP_ASSET_REFERENCE_REGEX.toString()}`);if(!l(o))throw new Error(`Invalid "tokenId", must match: ${n.CAIP_TOKEN_ID_REGEX.toString()}`);return`${e}:${t}/${r}:${s}/${o}`}}}},{package:"@metamask/utils",file:"node_modules/@metamask/utils/dist/caip-types.cjs"}],[2829,{"./base64.cjs":2826,"@metamask/superstruct":2741},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ChecksumStruct=void 0;const r=e("@metamask/superstruct"),s=e("./base64.cjs");n.ChecksumStruct=(0,r.size)((0,s.base64)((0,r.string)(),{paddingRequired:!0}),44,44)}}},{package:"@metamask/utils",file:"node_modules/@metamask/utils/dist/checksum.cjs"}],[2830,{"./assert.cjs":2825,"./bytes.cjs":2827,"./hex.cjs":2834,"@metamask/superstruct":2741},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.createHex=n.createBytes=n.createBigInt=n.createNumber=void 0;const r=e("@metamask/superstruct"),s=e("./assert.cjs"),a=e("./bytes.cjs"),i=e("./hex.cjs"),o=(0,r.union)([(0,r.number)(),(0,r.bigint)(),(0,r.string)(),i.StrictHexStruct]),c=(0,r.coerce)((0,r.number)(),o,Number),u=(0,r.coerce)((0,r.bigint)(),o,BigInt),l=((0,r.union)([i.StrictHexStruct,(0,r.instance)(Uint8Array)]),(0,r.coerce)((0,r.instance)(Uint8Array),(0,r.union)([i.StrictHexStruct]),a.hexToBytes)),d=(0,r.coerce)(i.StrictHexStruct,(0,r.instance)(Uint8Array),a.bytesToHex);n.createNumber=function(e){try{const t=(0,r.create)(e,c);return(0,s.assert)(Number.isFinite(t),`Expected a number-like value, got "${e}".`),t}catch(t){if(t instanceof r.StructError)throw new Error(`Expected a number-like value, got "${e}".`);throw t}},n.createBigInt=function(e){try{return(0,r.create)(e,u)}catch(e){if(e instanceof r.StructError)throw new Error(`Expected a number-like value, got "${String(e.value)}".`);throw e}},n.createBytes=function(e){if("string"==typeof e&&"0x"===e.toLowerCase())return new Uint8Array;try{return(0,r.create)(e,l)}catch(e){if(e instanceof r.StructError)throw new Error(`Expected a bytes-like value, got "${String(e.value)}".`);throw e}},n.createHex=function(e){if(e instanceof Uint8Array&&0===e.length||"string"==typeof e&&"0x"===e.toLowerCase())return"0x";try{return(0,r.create)(e,d)}catch(e){if(e instanceof r.StructError)throw new Error(`Expected a bytes-like value, got "${String(e.value)}".`);throw e}}}}},{package:"@metamask/utils",file:"node_modules/@metamask/utils/dist/coercers.cjs"}],[2831,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,a=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},i=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n};Object.defineProperty(n,"__esModule",{value:!0}),n.FrozenSet=n.FrozenMap=void 0;class o{get size(){return a(this,r,"f").size}[(r=new WeakMap,Symbol.iterator)](){return a(this,r,"f")[Symbol.iterator]()}constructor(e){r.set(this,void 0),i(this,r,new Map(e),"f"),Object.freeze(this)}entries(){return a(this,r,"f").entries()}forEach(e,t){return a(this,r,"f").forEach((n,r,s)=>e.call(t,n,r,this))}get(e){return a(this,r,"f").get(e)}has(e){return a(this,r,"f").has(e)}keys(){return a(this,r,"f").keys()}values(){return a(this,r,"f").values()}toString(){return`FrozenMap(${this.size}) {${this.size>0?` ${[...this.entries()].map(([e,t])=>`${String(e)} => ${String(t)}`).join(", ")} `:""}}`}}n.FrozenMap=o;class c{get size(){return a(this,s,"f").size}[(s=new WeakMap,Symbol.iterator)](){return a(this,s,"f")[Symbol.iterator]()}constructor(e){s.set(this,void 0),i(this,s,new Set(e),"f"),Object.freeze(this)}entries(){return a(this,s,"f").entries()}forEach(e,t){return a(this,s,"f").forEach((n,r,s)=>e.call(t,n,r,this))}has(e){return a(this,s,"f").has(e)}keys(){return a(this,s,"f").keys()}values(){return a(this,s,"f").values()}toString(){return`FrozenSet(${this.size}) {${this.size>0?` ${[...this.values()].map(e=>String(e)).join(", ")} `:""}}`}}n.FrozenSet=c,Object.freeze(o),Object.freeze(o.prototype),Object.freeze(c),Object.freeze(c.prototype)}}},{package:"@metamask/utils",file:"node_modules/@metamask/utils/dist/collections.cjs"}],[2832,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0})}}},{package:"@metamask/utils",file:"node_modules/@metamask/utils/dist/encryption-types.cjs"}],[2833,{"./misc.cjs":2839,"pony-cause":4797},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.wrapError=n.getErrorMessage=n.isErrorWithStack=n.isErrorWithMessage=n.isErrorWithCode=void 0;const r=e("pony-cause"),s=e("./misc.cjs");function a(e){return"object"==typeof e&&null!==e&&"code"in e}function i(e){return"object"==typeof e&&null!==e&&"message"in e}n.isErrorWithCode=a,n.isErrorWithMessage=i,n.isErrorWithStack=function(e){return"object"==typeof e&&null!==e&&"stack"in e},n.getErrorMessage=function(e){return i(e)&&"string"==typeof e.message?e.message:(0,s.isNullOrUndefined)(e)?"":String(e)},n.wrapError=function(e,t){if((n=e)instanceof Error||(0,s.isObject)(n)&&"Error"===n.constructor.name){let n;return n=2===Error.length?new Error(t,{cause:e}):new r.ErrorWithCause(t,{cause:e}),a(e)&&(n.code=e.code),n}var n;return t.length>0?new Error(`${String(e)}: ${t}`):new Error(String(e))}}}},{package:"@metamask/utils",file:"node_modules/@metamask/utils/dist/errors.cjs"}],[2834,{"./assert.cjs":2825,"@metamask/superstruct":2741,"@noble/hashes/sha3":2889,lodash:4565},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.remove0x=n.add0x=n.isValidHexAddress=n.isValidHexAddressUnmemoized=n.isValidChecksumAddress=n.isValidChecksumAddressUnmemoized=n.getChecksumAddress=n.getChecksumAddressUnmemoized=n.assertIsStrictHexString=n.assertIsHexString=n.isHexChecksumAddress=n.isHexAddress=n.isStrictHexString=n.isHexString=n.HexChecksumAddressStruct=n.HexAddressStruct=n.StrictHexStruct=n.HexStruct=void 0;const r=e("@metamask/superstruct"),s=e("@noble/hashes/sha3"),a=e("lodash"),i=e("./assert.cjs"),o=/^(?:0x)?[0-9a-f]+$/iu,c=/^0x[0-9a-f]+$/iu,u=/^0x[0-9a-f]{40}$/u,l=/^0x[0-9a-fA-F]{40}$/u;n.HexStruct=(0,r.pattern)((0,r.string)(),o),n.StrictHexStruct=(0,r.pattern)((0,r.string)(),c),n.HexAddressStruct=(0,r.pattern)((0,r.string)(),u),n.HexChecksumAddressStruct=(0,r.pattern)((0,r.string)(),l);const d=e=>"string"==typeof e;function f(e){return d(e)&&o.test(e)}function h(e){return d(e)&&c.test(e)}function p(e){return d(e)&&u.test(e)}function m(e){return d(e)&&l.test(e)}function g(e){(0,i.assert)(m(e),"Invalid hex address.");const t=w(e).toLowerCase(),n=(0,s.keccak_256)(t),{length:r}=t,a=new Array(r);for(let e=0;e<r;e++){const r=1&e,s=n[e>>1],i=0===r?s>>4:15&s;a[e]=i>=8?t[e].toUpperCase():t[e]}return`0x${a.join("")}`}function b(e){return!!m(e)&&(0,n.getChecksumAddress)(e)===e}function y(e){return p(e)||(0,n.isValidChecksumAddress)(e)}function w(e){return e.startsWith("0x")||e.startsWith("0X")?e.substring(2):e}n.isHexString=f,n.isStrictHexString=h,n.isHexAddress=p,n.isHexChecksumAddress=m,n.assertIsHexString=function(e){(0,i.assert)(f(e),"Value must be a hexadecimal string.")},n.assertIsStrictHexString=function(e){(0,i.assert)(h(e),'Value must be a hexadecimal string, starting with "0x".')},n.getChecksumAddressUnmemoized=g,n.getChecksumAddress=(0,a.memoize)(g),n.isValidChecksumAddressUnmemoized=b,n.isValidChecksumAddress=(0,a.memoize)(b),n.isValidHexAddressUnmemoized=y,n.isValidHexAddress=(0,a.memoize)(y),n.add0x=function(e){return e.startsWith("0x")?e:e.startsWith("0X")?`0x${e.substring(2)}`:`0x${e}`},n.remove0x=w}}},{package:"@metamask/utils",file:"node_modules/@metamask/utils/dist/hex.cjs"}],[2835,{"./assert.cjs":2825,"./base64.cjs":2826,"./bytes.cjs":2827,"./caip-types.cjs":2828,"./checksum.cjs":2829,"./coercers.cjs":2830,"./collections.cjs":2831,"./encryption-types.cjs":2832,"./errors.cjs":2833,"./hex.cjs":2834,"./json.cjs":2836,"./keyring.cjs":2837,"./logging.cjs":2838,"./misc.cjs":2839,"./number.cjs":2840,"./opaque.cjs":2841,"./promise.cjs":2842,"./superstruct.cjs":2843,"./time.cjs":2844,"./transaction-types.cjs":2845,"./unitsConversion.cjs":2846,"./versions.cjs":2847},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){r===undefined&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){r===undefined&&(r=n),e[r]=t[n]}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(n,"__esModule",{value:!0}),n.unitMap=n.getValueOfUnit=n.numberToString=n.fromWei=n.toWei=n.remove0x=n.add0x=n.isValidChecksumAddress=n.getChecksumAddress=n.isValidHexAddress=n.assertIsStrictHexString=n.assertIsHexString=n.isHexChecksumAddress=n.isHexAddress=n.isStrictHexString=n.isHexString=n.HexChecksumAddressStruct=n.HexAddressStruct=n.StrictHexStruct=n.HexStruct=void 0,s(e("./assert.cjs"),n),s(e("./base64.cjs"),n),s(e("./bytes.cjs"),n),s(e("./caip-types.cjs"),n),s(e("./checksum.cjs"),n),s(e("./coercers.cjs"),n),s(e("./collections.cjs"),n),s(e("./encryption-types.cjs"),n),s(e("./errors.cjs"),n);var a=e("./hex.cjs");Object.defineProperty(n,"HexStruct",{enumerable:!0,get:function(){return a.HexStruct}}),Object.defineProperty(n,"StrictHexStruct",{enumerable:!0,get:function(){return a.StrictHexStruct}}),Object.defineProperty(n,"HexAddressStruct",{enumerable:!0,get:function(){return a.HexAddressStruct}}),Object.defineProperty(n,"HexChecksumAddressStruct",{enumerable:!0,get:function(){return a.HexChecksumAddressStruct}}),Object.defineProperty(n,"isHexString",{enumerable:!0,get:function(){return a.isHexString}}),Object.defineProperty(n,"isStrictHexString",{enumerable:!0,get:function(){return a.isStrictHexString}}),Object.defineProperty(n,"isHexAddress",{enumerable:!0,get:function(){return a.isHexAddress}}),Object.defineProperty(n,"isHexChecksumAddress",{enumerable:!0,get:function(){return a.isHexChecksumAddress}}),Object.defineProperty(n,"assertIsHexString",{enumerable:!0,get:function(){return a.assertIsHexString}}),Object.defineProperty(n,"assertIsStrictHexString",{enumerable:!0,get:function(){return a.assertIsStrictHexString}}),Object.defineProperty(n,"isValidHexAddress",{enumerable:!0,get:function(){return a.isValidHexAddress}}),Object.defineProperty(n,"getChecksumAddress",{enumerable:!0,get:function(){return a.getChecksumAddress}}),Object.defineProperty(n,"isValidChecksumAddress",{enumerable:!0,get:function(){return a.isValidChecksumAddress}}),Object.defineProperty(n,"add0x",{enumerable:!0,get:function(){return a.add0x}}),Object.defineProperty(n,"remove0x",{enumerable:!0,get:function(){return a.remove0x}}),s(e("./json.cjs"),n),s(e("./keyring.cjs"),n),s(e("./logging.cjs"),n),s(e("./misc.cjs"),n),s(e("./number.cjs"),n),s(e("./opaque.cjs"),n),s(e("./promise.cjs"),n),s(e("./superstruct.cjs"),n),s(e("./time.cjs"),n),s(e("./transaction-types.cjs"),n),s(e("./versions.cjs"),n);var i=e("./unitsConversion.cjs");Object.defineProperty(n,"toWei",{enumerable:!0,get:function(){return i.toWei}}),Object.defineProperty(n,"fromWei",{enumerable:!0,get:function(){return i.fromWei}}),Object.defineProperty(n,"numberToString",{enumerable:!0,get:function(){return i.numberToString}}),Object.defineProperty(n,"getValueOfUnit",{enumerable:!0,get:function(){return i.getValueOfUnit}}),Object.defineProperty(n,"unitMap",{enumerable:!0,get:function(){return i.unitMap}})}}},{package:"@metamask/utils",file:"node_modules/@metamask/utils/dist/index.cjs"}],[2836,{"./assert.cjs":2825,"./misc.cjs":2839,"@metamask/superstruct":2741},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getJsonRpcIdValidator=n.assertIsJsonRpcError=n.isJsonRpcError=n.assertIsJsonRpcFailure=n.isJsonRpcFailure=n.assertIsJsonRpcSuccess=n.isJsonRpcSuccess=n.assertIsJsonRpcResponse=n.isJsonRpcResponse=n.assertIsPendingJsonRpcResponse=n.isPendingJsonRpcResponse=n.JsonRpcResponseStruct=n.JsonRpcFailureStruct=n.JsonRpcSuccessStruct=n.PendingJsonRpcResponseStruct=n.assertIsJsonRpcRequest=n.isJsonRpcRequest=n.assertIsJsonRpcNotification=n.isJsonRpcNotification=n.JsonRpcNotificationStruct=n.JsonRpcRequestStruct=n.JsonRpcParamsStruct=n.JsonRpcErrorStruct=n.JsonRpcIdStruct=n.JsonRpcVersionStruct=n.jsonrpc2=n.getJsonSize=n.getSafeJson=n.isValidJson=n.JsonStruct=n.UnsafeJsonStruct=n.exactOptional=n.object=void 0;const r=e("@metamask/superstruct"),s=e("./assert.cjs"),a=e("./misc.cjs");function i({path:e,branch:t}){const n=e[e.length-1];return(0,a.hasProperty)(t[t.length-2],n)}function o(e){return new r.Struct({...e,type:`optional ${e.type}`,validator:(t,n)=>!i(n)||e.validator(t,n),refiner:(t,n)=>!i(n)||e.refiner(t,n)})}function c(e){if(null===e||"boolean"==typeof e||"string"==typeof e)return!0;if("number"==typeof e&&Number.isFinite(e))return!0;if("object"==typeof e){let t=!0;if(Array.isArray(e)){for(let n=0;n<e.length;n++)if(!c(e[n])){t=!1;break}return t}const n=Object.entries(e);for(let e=0;e<n.length;e++)if("string"!=typeof n[e][0]||!c(n[e][1])){t=!1;break}return t}return!1}function u(e){return(0,r.create)(e,n.JsonStruct)}n.object=e=>(0,r.object)(e),n.exactOptional=o,n.UnsafeJsonStruct=(0,r.define)("JSON",e=>c(e)),n.JsonStruct=(0,r.coerce)(n.UnsafeJsonStruct,(0,r.refine)((0,r.any)(),"JSON",e=>(0,r.is)(e,n.UnsafeJsonStruct)),e=>JSON.parse(JSON.stringify(e,(e,t)=>"__proto__"===e||"constructor"===e?undefined:t))),n.isValidJson=function(e){try{return u(e),!0}catch{return!1}},n.getSafeJson=u,n.getJsonSize=function(e){(0,s.assertStruct)(e,n.JsonStruct,"Invalid JSON value");const t=JSON.stringify(e);return(new TextEncoder).encode(t).byteLength},n.jsonrpc2="2.0",n.JsonRpcVersionStruct=(0,r.literal)(n.jsonrpc2),n.JsonRpcIdStruct=(0,r.nullable)((0,r.union)([(0,r.number)(),(0,r.string)()])),n.JsonRpcErrorStruct=(0,n.object)({code:(0,r.integer)(),message:(0,r.string)(),data:o(n.JsonStruct),stack:o((0,r.string)())}),n.JsonRpcParamsStruct=(0,r.union)([(0,r.record)((0,r.string)(),n.JsonStruct),(0,r.array)(n.JsonStruct)]),n.JsonRpcRequestStruct=(0,n.object)({id:n.JsonRpcIdStruct,jsonrpc:n.JsonRpcVersionStruct,method:(0,r.string)(),params:o(n.JsonRpcParamsStruct)}),n.JsonRpcNotificationStruct=(0,n.object)({jsonrpc:n.JsonRpcVersionStruct,method:(0,r.string)(),params:o(n.JsonRpcParamsStruct)}),n.isJsonRpcNotification=function(e){return(0,r.is)(e,n.JsonRpcNotificationStruct)},n.assertIsJsonRpcNotification=function(e,t){(0,s.assertStruct)(e,n.JsonRpcNotificationStruct,"Invalid JSON-RPC notification",t)},n.isJsonRpcRequest=function(e){return(0,r.is)(e,n.JsonRpcRequestStruct)},n.assertIsJsonRpcRequest=function(e,t){(0,s.assertStruct)(e,n.JsonRpcRequestStruct,"Invalid JSON-RPC request",t)},n.PendingJsonRpcResponseStruct=(0,r.object)({id:n.JsonRpcIdStruct,jsonrpc:n.JsonRpcVersionStruct,result:(0,r.optional)((0,r.unknown)()),error:(0,r.optional)(n.JsonRpcErrorStruct)}),n.JsonRpcSuccessStruct=(0,n.object)({id:n.JsonRpcIdStruct,jsonrpc:n.JsonRpcVersionStruct,result:n.JsonStruct}),n.JsonRpcFailureStruct=(0,n.object)({id:n.JsonRpcIdStruct,jsonrpc:n.JsonRpcVersionStruct,error:n.JsonRpcErrorStruct}),n.JsonRpcResponseStruct=(0,r.union)([n.JsonRpcSuccessStruct,n.JsonRpcFailureStruct]),n.isPendingJsonRpcResponse=function(e){return(0,r.is)(e,n.PendingJsonRpcResponseStruct)},n.assertIsPendingJsonRpcResponse=function(e,t){(0,s.assertStruct)(e,n.PendingJsonRpcResponseStruct,"Invalid pending JSON-RPC response",t)},n.isJsonRpcResponse=function(e){return(0,r.is)(e,n.JsonRpcResponseStruct)},n.assertIsJsonRpcResponse=function(e,t){(0,s.assertStruct)(e,n.JsonRpcResponseStruct,"Invalid JSON-RPC response",t)},n.isJsonRpcSuccess=function(e){return(0,r.is)(e,n.JsonRpcSuccessStruct)},n.assertIsJsonRpcSuccess=function(e,t){(0,s.assertStruct)(e,n.JsonRpcSuccessStruct,"Invalid JSON-RPC success response",t)},n.isJsonRpcFailure=function(e){return(0,r.is)(e,n.JsonRpcFailureStruct)},n.assertIsJsonRpcFailure=function(e,t){(0,s.assertStruct)(e,n.JsonRpcFailureStruct,"Invalid JSON-RPC failure response",t)},n.isJsonRpcError=function(e){return(0,r.is)(e,n.JsonRpcErrorStruct)},n.assertIsJsonRpcError=function(e,t){(0,s.assertStruct)(e,n.JsonRpcErrorStruct,"Invalid JSON-RPC error",t)},n.getJsonRpcIdValidator=function(e){const{permitEmptyString:t,permitFractions:n,permitNull:r}={permitEmptyString:!0,permitFractions:!1,permitNull:!0,...e};return e=>Boolean("number"==typeof e&&(n||Number.isInteger(e))||"string"==typeof e&&(t||e.length>0)||r&&null===e)}}}},{package:"@metamask/utils",file:"node_modules/@metamask/utils/dist/json.cjs"}],[2837,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0})}}},{package:"@metamask/utils",file:"node_modules/@metamask/utils/dist/keyring.cjs"}],[2838,{debug:3943},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.createModuleLogger=n.createProjectLogger=void 0;const s=(0,r(e("debug")).default)("metamask");n.createProjectLogger=function(e){return s.extend(e)},n.createModuleLogger=function(e,t){return e.extend(t)}}}},{package:"@metamask/utils",file:"node_modules/@metamask/utils/dist/logging.cjs"}],[2839,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.calculateNumberSize=n.calculateStringSize=n.isASCII=n.isPlainObject=n.ESCAPE_CHARACTERS_REGEXP=n.JsonSize=n.getKnownPropertyNames=n.hasProperty=n.isObject=n.isNullOrUndefined=n.isNonEmptyArray=void 0,n.isNonEmptyArray=function(e){return Array.isArray(e)&&e.length>0},n.isNullOrUndefined=function(e){return null===e||e===undefined},n.isObject=function(e){return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)};function r(e){return e.charCodeAt(0)<=127}n.hasProperty=(e,t)=>Object.hasOwnProperty.call(e,t),n.getKnownPropertyNames=function(e){return Object.getOwnPropertyNames(e)},function(e){e[e.Null=4]="Null",e[e.Comma=1]="Comma",e[e.Wrapper=1]="Wrapper",e[e.True=4]="True",e[e.False=5]="False",e[e.Quote=1]="Quote",e[e.Colon=1]="Colon",e[e.Date=24]="Date"}(n.JsonSize||(n.JsonSize={})),n.ESCAPE_CHARACTERS_REGEXP=/"|\\|\n|\r|\t/gu,n.isPlainObject=function(e){if("object"!=typeof e||null===e)return!1;try{let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}catch(e){return!1}},n.isASCII=r,n.calculateStringSize=function(e){return e.split("").reduce((e,t)=>r(t)?e+1:e+2,0)+(e.match(n.ESCAPE_CHARACTERS_REGEXP)??[]).length},n.calculateNumberSize=function(e){return e.toString().length}}}},{package:"@metamask/utils",file:"node_modules/@metamask/utils/dist/misc.cjs"}],[2840,{"./assert.cjs":2825,"./hex.cjs":2834},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.hexToBigInt=n.hexToNumber=n.bigIntToHex=n.numberToHex=void 0;const r=e("./assert.cjs"),s=e("./hex.cjs");n.numberToHex=e=>((0,r.assert)("number"==typeof e,"Value must be a number."),(0,r.assert)(e>=0,"Value must be a non-negative number."),(0,r.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToHex` instead."),(0,s.add0x)(e.toString(16)));n.bigIntToHex=e=>((0,r.assert)("bigint"==typeof e,"Value must be a bigint."),(0,r.assert)(e>=0,"Value must be a non-negative bigint."),(0,s.add0x)(e.toString(16)));n.hexToNumber=e=>{(0,s.assertIsHexString)(e);const t=parseInt(e,16);return(0,r.assert)(Number.isSafeInteger(t),"Value is not a safe integer. Use `hexToBigInt` instead."),t};n.hexToBigInt=e=>((0,s.assertIsHexString)(e),BigInt((0,s.add0x)(e)))}}},{package:"@metamask/utils",file:"node_modules/@metamask/utils/dist/number.cjs"}],[2841,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0})}}},{package:"@metamask/utils",file:"node_modules/@metamask/utils/dist/opaque.cjs"}],[2842,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.createDeferredPromise=void 0,n.createDeferredPromise=function({suppressUnhandledRejection:e=!1}={}){let t,n;const r=new Promise((e,r)=>{t=e,n=r});return e&&r.catch(e=>{}),{promise:r,resolve:t,reject:n}}}}},{package:"@metamask/utils",file:"node_modules/@metamask/utils/dist/promise.cjs"}],[2843,{"@metamask/superstruct":2741},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.definePattern=void 0;const r=e("@metamask/superstruct");n.definePattern=function(e,t){return(0,r.define)(e,e=>"string"==typeof e&&t.test(e))}}}},{package:"@metamask/utils",file:"node_modules/@metamask/utils/dist/superstruct.cjs"}],[2844,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.timeSince=n.inMilliseconds=n.Duration=void 0,function(e){e[e.Millisecond=1]="Millisecond",e[e.Second=1e3]="Second",e[e.Minute=6e4]="Minute",e[e.Hour=36e5]="Hour",e[e.Day=864e5]="Day",e[e.Week=6048e5]="Week",e[e.Year=31536e6]="Year"}(n.Duration||(n.Duration={}));const r=(e,t)=>{if(!(e=>Number.isInteger(e)&&e>=0)(e))throw new Error(`"${t}" must be a non-negative integer. Received: "${e}".`)};n.inMilliseconds=function(e,t){return r(e,"count"),e*t},n.timeSince=function(e){return r(e,"timestamp"),Date.now()-e}}}},{package:"@metamask/utils",file:"node_modules/@metamask/utils/dist/time.cjs"}],[2845,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0})}}},{package:"@metamask/utils",file:"node_modules/@metamask/utils/dist/transaction-types.cjs"}],[2846,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.toWei=n.fromWei=n.numberToString=n.getValueOfUnit=n.unitMap=n.numericToBigInt=void 0;const r=BigInt(0),s=BigInt(-1);function a(e){if("string"==typeof e)return BigInt(e);if("number"==typeof e)return BigInt(e);if("bigint"==typeof e)return e;throw new Error(`Cannot convert ${typeof e} to BigInt`)}n.numericToBigInt=a,n.unitMap={noether:"0",wei:"1",kwei:"1000",Kwei:"1000",babbage:"1000",femtoether:"1000",mwei:"1000000",Mwei:"1000000",lovelace:"1000000",picoether:"1000000",gwei:"1000000000",Gwei:"1000000000",shannon:"1000000000",nanoether:"1000000000",nano:"1000000000",szabo:"1000000000000",microether:"1000000000000",micro:"1000000000000",finney:"1000000000000000",milliether:"1000000000000000",milli:"1000000000000000",ether:"1000000000000000000",kether:"1000000000000000000000",grand:"1000000000000000000000",mether:"1000000000000000000000000",gether:"1000000000000000000000000000",tether:"1000000000000000000000000000000"};const i=Object.fromEntries(Object.entries(n.unitMap).map(([e,t])=>[e,BigInt(t)])),o=Object.fromEntries(Object.entries(n.unitMap).map(([e,t])=>[e,t.length-1||1])),c=/^-?[0-9.]+$/u,u=/^([0-9]*[1-9]|0)(0*)/u,l=/\B(?=(\d{3})+(?!\d))/gu;function d(e){if("string"==typeof e){if(!c.test(e))throw new Error(`while converting number to string, invalid number value '${e}', should be a number matching (^-?[0-9.]+).`);return e}if("number"==typeof e)return String(e);if("bigint"==typeof e)return e.toString();throw new Error(`while converting number to string, invalid number value '${String(e)}' type ${typeof e}.`)}n.getValueOfUnit=function(e="ether"){const t=e.toLowerCase(),r=i[t];if(r===undefined)throw new Error(`The unit provided ${e} doesn't exist, please use the one of the following units ${JSON.stringify(n.unitMap,null,2)}`);return r},n.numberToString=d,n.fromWei=function(e,t,c){let d=a(e);const f=d<r,h=t.toLowerCase(),p=i[h],m=o[h],g=c??{};if(p===undefined)throw new Error(`The unit provided ${t} doesn't exist, please use the one of the following units ${JSON.stringify(n.unitMap,null,2)}`);if(p===r)return f?"-0":"0";f&&(d*=s);let b=(d%p).toString();if(b=b.padStart(m,"0"),!g.pad){const e=b.match(u);b=e?.[1]??"0"}let y=(d/p).toString();g.commify&&(y=y.replace(l,","));let w=`${y}${"0"===b?"":`.${b}`}`;return f&&(w=`-${w}`),w},n.toWei=function(e,t){const a=t.toLowerCase(),c=i[a],u=o[a];if(c===undefined)throw new Error(`The unit provided ${t} doesn't exist, please use the one of the following units ${JSON.stringify(n.unitMap,null,2)}`);if(c===r)return r;if("bigint"==typeof e&&"wei"===a)return e;if("bigint"==typeof e)return e*c;let l=d(e);const f=l.startsWith("-");if(f&&(l=l.substring(1)),"."===l)throw new Error(`While converting number ${e} to wei, invalid value`);const h=l.split(".");if(h.length>2)throw new Error(`While converting number ${e} to wei,  too many decimal points`);let p=h[0],m=h[1];if(p||(p="0"),m||(m="0"),m.length>u)throw new Error(`While converting number ${e} to wei, too many decimal places`);m=m.padEnd(u,"0");let g=BigInt(p)*c+BigInt(m);return f&&(g*=s),g}}}},{package:"@metamask/utils",file:"node_modules/@metamask/utils/dist/unitsConversion.cjs"}],[2847,{"./assert.cjs":2825,"@metamask/superstruct":2741,semver:5283},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.satisfiesVersionRange=n.gtRange=n.gtVersion=n.assertIsSemVerRange=n.assertIsSemVerVersion=n.isValidSemVerRange=n.isValidSemVerVersion=n.VersionRangeStruct=n.VersionStruct=void 0;const r=e("@metamask/superstruct"),s=e("semver"),a=e("./assert.cjs");n.VersionStruct=(0,r.refine)((0,r.string)(),"Version",e=>null!==(0,s.valid)(e)||`Expected SemVer version, got "${e}"`),n.VersionRangeStruct=(0,r.refine)((0,r.string)(),"Version range",e=>null!==(0,s.validRange)(e)||`Expected SemVer range, got "${e}"`),n.isValidSemVerVersion=function(e){return(0,r.is)(e,n.VersionStruct)},n.isValidSemVerRange=function(e){return(0,r.is)(e,n.VersionRangeStruct)},n.assertIsSemVerVersion=function(e){(0,a.assertStruct)(e,n.VersionStruct)},n.assertIsSemVerRange=function(e){(0,a.assertStruct)(e,n.VersionRangeStruct)},n.gtVersion=function(e,t){return(0,s.gt)(e,t)},n.gtRange=function(e,t){return(0,s.gtr)(e,t)},n.satisfiesVersionRange=function(e,t){return(0,s.satisfies)(e,t,{includePrerelease:!0})}}}},{package:"@metamask/utils",file:"node_modules/@metamask/utils/dist/versions.cjs"}],[2849,{"./utils":2859,assert:3789,buffer:3793},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0});const s=r(e("assert")),a=e("./utils");let i=[];var o;!function(e){e.STANDARD="standard",e.URI="uri",e.MINIMAL="minimal"}(o||(o={}));const c=e=>"ableacidalsoapexaquaarchatomauntawayaxisbackbaldbarnbeltbetabiasbluebodybragbrewbulbbuzzcalmcashcatschefcityclawcodecolacookcostcruxcurlcuspcyandarkdatadaysdelidicedietdoordowndrawdropdrumdulldutyeacheasyechoedgeepicevenexamexiteyesfactfairfernfigsfilmfishfizzflapflewfluxfoxyfreefrogfuelfundgalagamegeargemsgiftgirlglowgoodgraygrimgurugushgyrohalfhanghardhawkheathelphighhillholyhopehornhutsicedideaidleinchinkyintoirisironitemjadejazzjoinjoltjowljudojugsjumpjunkjurykeepkenokeptkeyskickkilnkingkitekiwiknoblamblavalazyleaflegsliarlimplionlistlogoloudloveluaulucklungmainmanymathmazememomenumeowmildmintmissmonknailnavyneednewsnextnoonnotenumbobeyoboeomitonyxopenovalowlspaidpartpeckplaypluspoempoolposepuffpumapurrquadquizraceramprealredorichroadrockroofrubyruinrunsrustsafesagascarsetssilkskewslotsoapsolosongstubsurfswantacotasktaxitenttiedtimetinytoiltombtoystriptunatwinuglyundouniturgeuservastveryvetovialvibeviewvisavoidvowswallwandwarmwaspwavewaxywebswhatwhenwhizwolfworkyankyawnyellyogayurtzapszerozestzinczonezoom".slice(4*e,4*e+4),u=e=>`${e}${a.getCRCHex(t.from(e,"hex"))}`,l=(e,n)=>{const r=u(e);return t.from(r,"hex").reduce((e,t)=>[...e,c(t)],[]).join(n)},d=e=>{const n=u(e);return t.from(n,"hex").reduce((e,t)=>e+(e=>{const t=c(e);return`${t[0]}${t[3]}`})(t),"")},f=(e,n,r)=>{const o=(4==r?e.split(n):a.partition(e,2)).map(e=>((e,n)=>{s.default(e.length===n,"Invalid Bytewords: word.length does not match wordLength provided");const r=26;if(0===i.length){i=[...new Array(676)].map(()=>-1);for(let e=0;e<256;e++){const t=c(e);let n=t[0].charCodeAt(0)-"a".charCodeAt(0),s=t[3].charCodeAt(0)-"a".charCodeAt(0);i[s*r+n]=e}}let a=e[0].toLowerCase().charCodeAt(0)-"a".charCodeAt(0),o=e[4==n?3:1].toLowerCase().charCodeAt(0)-"a".charCodeAt(0);s.default(0<=a&&a<r&&0<=o&&o<r,"Invalid Bytewords: invalid word");let u=i[o*r+a];if(s.default(-1!==u,"Invalid Bytewords: value not in lookup table"),4==n){const t=c(u);let n=e[1].toLowerCase(),r=e[2].toLowerCase();s.default(n===t[1]&&r===t[2],"Invalid Bytewords: invalid middle letters of word")}return t.from([u]).toString("hex")})(e,r)).join("");s.default(o.length>=5,"Invalid Bytewords: invalid decoded string length");const[u,l]=a.split(t.from(o,"hex"),4),d=a.getCRCHex(u);return s.default(d===l.toString("hex"),"Invalid Checksum"),u.toString("hex")};n.default={decode:(e,t=o.MINIMAL)=>{switch(t){case o.STANDARD:return f(e," ",4);case o.URI:return f(e,"-",4);case o.MINIMAL:return f(e,"",2);default:throw new Error(`Invalid style ${t}`)}},encode:(e,t=o.MINIMAL)=>{switch(t){case o.STANDARD:return l(e," ");case o.URI:return l(e,"-");case o.MINIMAL:return d(e);default:throw new Error(`Invalid style ${t}`)}},STYLES:o}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@ngraveio/bc-ur",file:"node_modules/@ngraveio/bc-ur/dist/bytewords.js"}],[2850,{buffer:3793,"cbor-sync":3813},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){Object.defineProperty(n,"__esModule",{value:!0}),n.cborDecode=n.cborEncode=void 0;const r=e("cbor-sync");n.cborEncode=e=>r.encode(e);n.cborDecode=e=>r.decode(t.isBuffer(e)?e:t.from(e,"hex"))}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@ngraveio/bc-ur",file:"node_modules/@ngraveio/bc-ur/dist/cbor.js"}],[2851,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.InvalidChecksumError=n.InvalidSequenceComponentError=n.InvalidTypeError=n.InvalidPathLengthError=n.InvalidSchemeError=void 0;class r extends Error{constructor(){super("Invalid Scheme"),this.name="InvalidSchemeError"}}n.InvalidSchemeError=r;class s extends Error{constructor(){super("Invalid Path"),this.name="InvalidPathLengthError"}}n.InvalidPathLengthError=s;class a extends Error{constructor(){super("Invalid Type"),this.name="InvalidTypeError"}}n.InvalidTypeError=a;class i extends Error{constructor(){super("Invalid Sequence Component"),this.name="InvalidSequenceComponentError"}}n.InvalidSequenceComponentError=i;class o extends Error{constructor(){super("Invalid Checksum"),this.name="InvalidChecksumError"}}n.InvalidChecksumError=o}}},{package:"@ngraveio/bc-ur",file:"node_modules/@ngraveio/bc-ur/dist/errors.js"}],[2852,{"./errors":2851,"./fountainUtils":2854,"./utils":2859,buffer:3793},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){Object.defineProperty(n,"__esModule",{value:!0}),n.FountainDecoderPart=void 0;const r=e("./utils"),s=e("./fountainUtils"),a=e("./errors");class i{constructor(e,t){this._indexes=e,this._fragment=t}get indexes(){return this._indexes}get fragment(){return this._fragment}static fromEncoderPart(e){const t=s.chooseFragments(e.seqNum,e.seqLength,e.checksum),n=e.fragment;return new i(t,n)}isSimple(){return 1===this.indexes.length}}n.FountainDecoderPart=i;class o{constructor(){this.result=undefined,this.expectedMessageLength=0,this.expectedChecksum=0,this.expectedFragmentLength=0,this.processedPartsCount=0,this.expectedPartIndexes=[],this.lastPartIndexes=[],this.queuedParts=[],this.receivedPartIndexes=[],this.mixedParts=[],this.simpleParts=[]}validatePart(e){if(0===this.expectedPartIndexes.length)[...new Array(e.seqLength)].forEach((e,t)=>this.expectedPartIndexes.push(t)),this.expectedMessageLength=e.messageLength,this.expectedChecksum=e.checksum,this.expectedFragmentLength=e.fragment.length;else{if(this.expectedPartIndexes.length!==e.seqLength)return!1;if(this.expectedMessageLength!==e.messageLength)return!1;if(this.expectedChecksum!==e.checksum)return!1;if(this.expectedFragmentLength!==e.fragment.length)return!1}return!0}reducePartByPart(e,t){if(r.arrayContains(e.indexes,t.indexes)){const n=r.setDifference(e.indexes,t.indexes),s=r.bufferXOR(e.fragment,t.fragment);return new i(n,s)}return e}reduceMixedBy(e){const t=[];this.mixedParts.map(({value:t})=>this.reducePartByPart(t,e)).forEach(e=>{e.isSimple()?this.queuedParts.push(e):t.push({key:e.indexes,value:e})}),this.mixedParts=t}processSimplePart(e){const t=e.indexes[0];if(!this.receivedPartIndexes.includes(t))if(this.simpleParts.push({key:e.indexes,value:e}),this.receivedPartIndexes.push(t),r.arraysEqual(this.receivedPartIndexes,this.expectedPartIndexes)){const e=this.simpleParts.map(({value:e})=>e).sort((e,t)=>e.indexes[0]-t.indexes[0]),t=o.joinFragments(e.map(e=>e.fragment),this.expectedMessageLength);r.getCRC(t)===this.expectedChecksum?this.result=t:this.error=new a.InvalidChecksumError}else this.reduceMixedBy(e)}processMixedPart(e){if(this.mixedParts.some(({key:t})=>r.arraysEqual(t,e.indexes)))return;let t=this.simpleParts.reduce((e,{value:t})=>this.reducePartByPart(e,t),e);t=this.mixedParts.reduce((e,{value:t})=>this.reducePartByPart(e,t),t),t.isSimple()?this.queuedParts.push(t):(this.reduceMixedBy(t),this.mixedParts.push({key:t.indexes,value:t}))}processQueuedItem(){if(0===this.queuedParts.length)return;const e=this.queuedParts.shift();e.isSimple()?this.processSimplePart(e):this.processMixedPart(e)}receivePart(e){if(this.isComplete())return!1;if(!this.validatePart(e))return!1;const t=i.fromEncoderPart(e);for(this.lastPartIndexes=t.indexes,this.queuedParts.push(t);!this.isComplete()&&this.queuedParts.length>0;)this.processQueuedItem();return this.processedPartsCount+=1,!0}isComplete(){return Boolean(this.result!==undefined&&this.result.length>0)}isSuccess(){return Boolean(this.error===undefined&&this.isComplete())}resultMessage(){return this.isSuccess()?this.result:t.from([])}isFailure(){return this.error!==undefined}resultError(){return this.error?this.error.message:""}expectedPartCount(){return this.expectedPartIndexes.length}getExpectedPartIndexes(){return[...this.expectedPartIndexes]}getReceivedPartIndexes(){return[...this.receivedPartIndexes]}getLastPartIndexes(){return[...this.lastPartIndexes]}estimatedPercentComplete(){if(this.isComplete())return 1;const e=this.expectedPartCount();return 0===e?0:Math.min(.99,this.processedPartsCount/(1.75*e))}getProgress(){if(this.isComplete())return 1;const e=this.expectedPartCount();return 0===e?0:this.receivedPartIndexes.length/e}}n.default=o,o.joinFragments=(e,n)=>t.concat(e).slice(0,n)}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@ngraveio/bc-ur",file:"node_modules/@ngraveio/bc-ur/dist/fountainDecoder.js"}],[2853,{"./cbor":2850,"./fountainUtils":2854,"./utils":2859,assert:3789,buffer:3793},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.FountainEncoderPart=void 0;const s=r(e("assert")),a=e("./utils"),i=e("./fountainUtils"),o=e("./cbor");class c{constructor(e,t,n,r,s){this._seqNum=e,this._seqLength=t,this._messageLength=n,this._checksum=r,this._fragment=s}get messageLength(){return this._messageLength}get fragment(){return this._fragment}get seqNum(){return this._seqNum}get seqLength(){return this._seqLength}get checksum(){return this._checksum}cbor(){const e=o.cborEncode([this._seqNum,this._seqLength,this._messageLength,this._checksum,this._fragment]);return t.from(e)}description(){return`seqNum:${this._seqNum}, seqLen:${this._seqLength}, messageLen:${this._messageLength}, checksum:${this._checksum}, data:${this._fragment.toString("hex")}`}static fromCBOR(e){const[n,r,a,i,u]=o.cborDecode(e);return s.default("number"==typeof n),s.default("number"==typeof r),s.default("number"==typeof a),s.default("number"==typeof i),s.default(t.isBuffer(u)&&u.length>0),new c(n,r,a,i,t.from(u))}}n.FountainEncoderPart=c;class u{constructor(e,t=100,n=0,r=10){const s=u.findNominalFragmentLength(e.length,r,t);this._messageLength=e.length,this._fragments=u.partitionMessage(e,s),this.fragmentLength=s,this.seqNum=a.toUint32(n),this.checksum=a.getCRC(e)}get fragmentsLength(){return this._fragments.length}get fragments(){return this._fragments}get messageLength(){return this._messageLength}isComplete(){return this.seqNum>=this._fragments.length}isSinglePart(){return 1===this._fragments.length}seqLength(){return this._fragments.length}mix(e){return e.reduce((e,t)=>a.bufferXOR(this._fragments[t],e),t.alloc(this.fragmentLength,0))}nextPart(){this.seqNum=a.toUint32(this.seqNum+1);const e=i.chooseFragments(this.seqNum,this._fragments.length,this.checksum),t=this.mix(e);return new c(this.seqNum,this._fragments.length,this._messageLength,this.checksum,t)}static findNominalFragmentLength(e,t,n){s.default(e>0),s.default(t>0),s.default(n>=t);const r=Math.ceil(e/t);let a=0;for(let t=1;t<=r&&(a=Math.ceil(e/t),!(a<=n));t++);return a}static partitionMessage(e,n){let r,s=t.from(e),i=[];for(;s.length>0;)[r,s]=a.split(s,-n),r=t.alloc(n,0).fill(r,0,r.length),i.push(r);return i}}n.default=u}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@ngraveio/bc-ur",file:"node_modules/@ngraveio/bc-ur/dist/fountainEncoder.js"}],[2854,{"./utils":2859,"./xoshiro":2860,"@keystonehq/alias-sampling":741,buffer:3793},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.chooseFragments=n.shuffle=n.chooseDegree=void 0;const s=e("./utils"),a=r(e("./xoshiro")),i=r(e("@keystonehq/alias-sampling"));n.chooseDegree=(e,t)=>{const n=[...new Array(e)].map((e,t)=>1/(t+1));return i.default(n,undefined,t.nextDouble).next()+1};n.shuffle=(e,t)=>{let n=[...e],r=[];for(;n.length>0;){let e=t.nextInt(0,n.length-1),s=n[e];n.splice(e,1),r.push(s)}return r};n.chooseFragments=(e,r,i)=>{if(e<=r)return[e-1];{const o=t.concat([s.intToBytes(e),s.intToBytes(i)]),c=new a.default(o),u=n.chooseDegree(r,c),l=[...new Array(r)].map((e,t)=>t);return n.shuffle(l,c).slice(0,u)}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@ngraveio/bc-ur",file:"node_modules/@ngraveio/bc-ur/dist/fountainUtils.js"}],[2855,{"./ur":2856,"./urDecoder":2857,"./urEncoder":2858},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.URDecoder=n.UREncoder=n.UR=void 0;const s=r(e("./ur"));n.UR=s.default;const a=r(e("./urEncoder"));n.UREncoder=a.default;const i=r(e("./urDecoder"));n.URDecoder=i.default}}},{package:"@ngraveio/bc-ur",file:"node_modules/@ngraveio/bc-ur/dist/index.js"}],[2856,{"./cbor":2850,"./errors":2851,"./utils":2859,buffer:3793},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){Object.defineProperty(n,"__esModule",{value:!0});const r=e("./errors"),s=e("./utils"),a=e("./cbor");class i{constructor(e,t="bytes"){if(this._cborPayload=e,this._type=t,!s.isURType(this._type))throw new r.InvalidTypeError}static fromBuffer(e){return new i(a.cborEncode(e))}static from(e,n){return i.fromBuffer(t.from(e,n))}decodeCBOR(){return a.cborDecode(this._cborPayload)}get type(){return this._type}get cbor(){return this._cborPayload}equals(e){return this.type===e.type&&this.cbor.equals(e.cbor)}}n.default=i}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@ngraveio/bc-ur",file:"node_modules/@ngraveio/bc-ur/dist/ur.js"}],[2857,{"./bytewords":2849,"./errors":2851,"./fountainDecoder":2852,"./fountainEncoder":2853,"./ur":2856,"./utils":2859,assert:3789,buffer:3793},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0});const s=r(e("./fountainDecoder")),a=r(e("./bytewords")),i=r(e("assert")),o=e("./utils"),c=e("./errors"),u=r(e("./ur")),l=e("./fountainEncoder");class d{constructor(e=new s.default,t="bytes"){this.fountainDecoder=e,this.type=t,i.default(o.isURType(t),"Invalid UR type"),this.expected_type=""}static decodeBody(e,n){const r=a.default.decode(n,a.default.STYLES.MINIMAL);return new u.default(t.from(r,"hex"),e)}validatePart(e){return this.expected_type?this.expected_type===e:!!o.isURType(e)&&(this.expected_type=e,!0)}static decode(e){const[t,n]=this.parse(e);if(0===n.length)throw new c.InvalidPathLengthError;const r=n[0];return d.decodeBody(t,r)}static parse(e){const t=e.toLowerCase();if("ur:"!==t.slice(0,3))throw new c.InvalidSchemeError;const n=t.slice(3).split("/"),r=n[0];if(n.length<2)throw new c.InvalidPathLengthError;if(!o.isURType(r))throw new c.InvalidTypeError;return[r,n.slice(1)]}static parseSequenceComponent(e){const t=e.split("-");if(2!==t.length)throw new c.InvalidSequenceComponentError;const n=o.toUint32(Number(t[0])),r=Number(t[1]);if(n<1||r<1)throw new c.InvalidSequenceComponentError;return[n,r]}receivePart(e){if(this.result!==undefined)return!1;const[t,n]=d.parse(e);if(!this.validatePart(t))return!1;if(1===n.length)return this.result=d.decodeBody(t,n[0]),!0;if(2!==n.length)throw new c.InvalidPathLengthError;const[r,s]=n,[i,o]=d.parseSequenceComponent(r),f=a.default.decode(s,a.default.STYLES.MINIMAL),h=l.FountainEncoderPart.fromCBOR(f);return i===h.seqNum&&o===h.seqLength&&(!!this.fountainDecoder.receivePart(h)&&(this.fountainDecoder.isSuccess()?this.result=new u.default(this.fountainDecoder.resultMessage(),t):this.fountainDecoder.isFailure()&&(this.error=new c.InvalidSchemeError),!0))}resultUR(){return this.result?this.result:new u.default(t.from([]))}isComplete(){return this.result&&this.result.cbor.length>0}isSuccess(){return!this.error&&this.isComplete()}isError(){return this.error!==undefined}resultError(){return this.error?this.error.message:""}expectedPartCount(){return this.fountainDecoder.expectedPartCount()}expectedPartIndexes(){return this.fountainDecoder.getExpectedPartIndexes()}receivedPartIndexes(){return this.fountainDecoder.getReceivedPartIndexes()}lastPartIndexes(){return this.fountainDecoder.getLastPartIndexes()}estimatedPercentComplete(){return this.fountainDecoder.estimatedPercentComplete()}getProgress(){return this.fountainDecoder.getProgress()}}n.default=d}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@ngraveio/bc-ur",file:"node_modules/@ngraveio/bc-ur/dist/urDecoder.js"}],[2858,{"./bytewords":2849,"./fountainEncoder":2853},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0});const s=r(e("./fountainEncoder")),a=r(e("./bytewords"));class i{constructor(e,t,n,r){this.ur=e,this.fountainEncoder=new s.default(e.cbor,t,n,r)}get fragmentsLength(){return this.fountainEncoder.fragmentsLength}get fragments(){return this.fountainEncoder.fragments}get messageLength(){return this.fountainEncoder.messageLength}get cbor(){return this.ur.cbor}encodeWhole(){return[...new Array(this.fragmentsLength)].map(()=>this.nextPart())}nextPart(){const e=this.fountainEncoder.nextPart();return this.fountainEncoder.isSinglePart()?i.encodeSinglePart(this.ur):i.encodePart(this.ur.type,e)}static encodeUri(e,t){return[e,t.join("/")].join(":")}static encodeUR(e){return i.encodeUri("ur",e)}static encodePart(e,t){const n=`${t.seqNum}-${t.seqLength}`,r=a.default.encode(t.cbor().toString("hex"),a.default.STYLES.MINIMAL);return i.encodeUR([e,n,r])}static encodeSinglePart(e){const t=a.default.encode(e.cbor.toString("hex"),a.default.STYLES.MINIMAL);return i.encodeUR([e.type,t])}}n.default=i}}},{package:"@ngraveio/bc-ur",file:"node_modules/@ngraveio/bc-ur/dist/urEncoder.js"}],[2859,{buffer:3793,crc:3889,"sha.js":5305},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.bufferXOR=n.setDifference=n.arrayContains=n.arraysEqual=n.hasPrefix=n.isURType=n.intToBytes=n.toUint32=n.getCRCHex=n.getCRC=n.split=n.partition=n.sha256Hash=void 0;const s=r(e("sha.js")),a=e("crc");n.sha256Hash=e=>s.default("sha256").update(e).digest();n.partition=(e,t)=>e.match(new RegExp(".{1,"+t+"}","g"))||[e];n.split=(e,t)=>[e.slice(0,-t),e.slice(-t)];n.getCRC=e=>a.crc32(e);n.getCRCHex=e=>a.crc32(e).toString(16).padStart(8,"0");n.toUint32=e=>e>>>0;n.intToBytes=e=>{const n=new ArrayBuffer(4);return new DataView(n).setUint32(0,e,!1),t.from(n)};n.isURType=e=>e.split("").every((t,n)=>{let r=e.charCodeAt(n);return"a".charCodeAt(0)<=r&&r<="z".charCodeAt(0)||("0".charCodeAt(0)<=r&&r<="9".charCodeAt(0)||r==="-".charCodeAt(0))});n.hasPrefix=(e,t)=>0===e.indexOf(t);n.arraysEqual=(e,t)=>e.length===t.length&&e.every(e=>t.includes(e));n.arrayContains=(e,t)=>t.every(t=>e.includes(t));n.setDifference=(e,t)=>e.filter(e=>t.indexOf(e)<0);n.bufferXOR=(e,n)=>{const r=Math.max(e.length,n.length),s=t.allocUnsafe(r);for(let t=0;t<r;++t)s[t]=e[t]^n[t];return s}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@ngraveio/bc-ur",file:"node_modules/@ngraveio/bc-ur/dist/utils.js"}],[2860,{"./utils":2859,"bignumber.js":2861,jsbi:4395},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0});const s=e("./utils"),a=r(e("bignumber.js")),i=r(e("jsbi")),o=(e,t)=>i.default.bitwiseXor(i.default.asUintN(64,i.default.leftShift(e,i.default.BigInt(t))),i.default.BigInt(i.default.asUintN(64,i.default.signedRightShift(e,i.default.subtract(i.default.BigInt(64),i.default.BigInt(t))))));n.default=class{constructor(e){this.next=()=>new a.default(this.roll().toString()),this.nextDouble=()=>new a.default(this.roll().toString()).div(0x10000000000000000),this.nextInt=(e,t)=>Math.floor(this.nextDouble().toNumber()*(t-e+1)+e),this.nextByte=()=>this.nextInt(0,255),this.nextData=e=>[...new Array(e)].map(()=>this.nextByte());const t=s.sha256Hash(e);this.s=[i.default.BigInt(0),i.default.BigInt(0),i.default.BigInt(0),i.default.BigInt(0)],this.setS(t)}setS(e){for(let t=0;t<4;t++){let n=8*t,r=i.default.BigInt(0);for(let t=0;t<8;t++)r=i.default.asUintN(64,i.default.leftShift(r,i.default.BigInt(8))),r=i.default.asUintN(64,i.default.bitwiseOr(r,i.default.BigInt(e[n+t])));this.s[t]=i.default.asUintN(64,r)}}roll(){const e=i.default.asUintN(64,i.default.multiply(o(i.default.asUintN(64,i.default.multiply(this.s[1],i.default.BigInt(5))),7),i.default.BigInt(9))),t=i.default.asUintN(64,i.default.leftShift(this.s[1],i.default.BigInt(17)));return this.s[2]=i.default.asUintN(64,i.default.bitwiseXor(this.s[2],i.default.BigInt(this.s[0]))),this.s[3]=i.default.asUintN(64,i.default.bitwiseXor(this.s[3],i.default.BigInt(this.s[1]))),this.s[1]=i.default.asUintN(64,i.default.bitwiseXor(this.s[1],i.default.BigInt(this.s[2]))),this.s[0]=i.default.asUintN(64,i.default.bitwiseXor(this.s[0],i.default.BigInt(this.s[3]))),this.s[2]=i.default.asUintN(64,i.default.bitwiseXor(this.s[2],i.default.BigInt(t))),this.s[3]=i.default.asUintN(64,o(this.s[3],45)),e}}}}},{package:"@ngraveio/bc-ur",file:"node_modules/@ngraveio/bc-ur/dist/xoshiro.js"}],[2861,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){!function(e){var n,r=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,s=Math.ceil,a=Math.floor,i="[BigNumber Error] ",o=i+"Number primitive has more than 15 significant digits: ",c=1e14,u=14,l=9007199254740991,d=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],f=1e7,h=1e9;function p(e){var t=0|e;return e>0||e===t?t:t-1}function m(e){for(var t,n,r=1,s=e.length,a=e[0]+"";r<s;){for(t=e[r++]+"",n=u-t.length;n--;t="0"+t);a+=t}for(s=a.length;48===a.charCodeAt(--s););return a.slice(0,s+1||1)}function g(e,t){var n,r,s=e.c,a=t.c,i=e.s,o=t.s,c=e.e,u=t.e;if(!i||!o)return null;if(n=s&&!s[0],r=a&&!a[0],n||r)return n?r?0:-o:i;if(i!=o)return i;if(n=i<0,r=c==u,!s||!a)return r?0:!s^n?1:-1;if(!r)return c>u^n?1:-1;for(o=(c=s.length)<(u=a.length)?c:u,i=0;i<o;i++)if(s[i]!=a[i])return s[i]>a[i]^n?1:-1;return c==u?0:c>u^n?1:-1}function b(e,t,n,r){if(e<t||e>n||e!==a(e))throw Error(i+(r||"Argument")+("number"==typeof e?e<t||e>n?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function y(e){var t=e.c.length-1;return p(e.e/u)==t&&e.c[t]%2!=0}function w(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function v(e,t,n){var r,s;if(t<0){for(s=n+".";++t;s+=n);e=s+e}else if(++t>(r=e.length)){for(s=n,t-=r;--t;s+=n);e+=s}else t<r&&(e=e.slice(0,t)+"."+e.slice(t));return e}n=function e(t){var n,E,T,S,x,P,k,I,A,_,C=K.prototype={constructor:K,toString:null,valueOf:null},j=new K(1),R=20,O=4,B=-7,F=21,L=-1e7,M=1e7,N=!1,D=1,G=0,H={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},U="0123456789abcdefghijklmnopqrstuvwxyz",q=!0;function K(e,t){var n,s,i,c,d,f,h,p,m=this;if(!(m instanceof K))return new K(e,t);if(null==t){if(e&&!0===e._isBigNumber)return m.s=e.s,void(!e.c||e.e>M?m.c=m.e=null:e.e<L?m.c=[m.e=0]:(m.e=e.e,m.c=e.c.slice()));if((f="number"==typeof e)&&0*e==0){if(m.s=1/e<0?(e=-e,-1):1,e===~~e){for(c=0,d=e;d>=10;d/=10,c++);return void(c>M?m.c=m.e=null:(m.e=c,m.c=[e]))}p=String(e)}else{if(!r.test(p=String(e)))return T(m,p,f);m.s=45==p.charCodeAt(0)?(p=p.slice(1),-1):1}(c=p.indexOf("."))>-1&&(p=p.replace(".","")),(d=p.search(/e/i))>0?(c<0&&(c=d),c+=+p.slice(d+1),p=p.substring(0,d)):c<0&&(c=p.length)}else{if(b(t,2,U.length,"Base"),10==t&&q)return W(m=new K(e),R+m.e+1,O);if(p=String(e),f="number"==typeof e){if(0*e!=0)return T(m,p,f,t);if(m.s=1/e<0?(p=p.slice(1),-1):1,K.DEBUG&&p.replace(/^0\.0*|\./,"").length>15)throw Error(o+e)}else m.s=45===p.charCodeAt(0)?(p=p.slice(1),-1):1;for(n=U.slice(0,t),c=d=0,h=p.length;d<h;d++)if(n.indexOf(s=p.charAt(d))<0){if("."==s){if(d>c){c=h;continue}}else if(!i&&(p==p.toUpperCase()&&(p=p.toLowerCase())||p==p.toLowerCase()&&(p=p.toUpperCase()))){i=!0,d=-1,c=0;continue}return T(m,String(e),f,t)}f=!1,(c=(p=E(p,t,10,m.s)).indexOf("."))>-1?p=p.replace(".",""):c=p.length}for(d=0;48===p.charCodeAt(d);d++);for(h=p.length;48===p.charCodeAt(--h););if(p=p.slice(d,++h)){if(h-=d,f&&K.DEBUG&&h>15&&(e>l||e!==a(e)))throw Error(o+m.s*e);if((c=c-d-1)>M)m.c=m.e=null;else if(c<L)m.c=[m.e=0];else{if(m.e=c,m.c=[],d=(c+1)%u,c<0&&(d+=u),d<h){for(d&&m.c.push(+p.slice(0,d)),h-=u;d<h;)m.c.push(+p.slice(d,d+=u));d=u-(p=p.slice(d)).length}else d-=h;for(;d--;p+="0");m.c.push(+p)}}else m.c=[m.e=0]}function V(e,t,n,r){var s,a,i,o,c;if(null==n?n=O:b(n,0,8),!e.c)return e.toString();if(s=e.c[0],i=e.e,null==t)c=m(e.c),c=1==r||2==r&&(i<=B||i>=F)?w(c,i):v(c,i,"0");else if(a=(e=W(new K(e),t,n)).e,o=(c=m(e.c)).length,1==r||2==r&&(t<=a||a<=B)){for(;o<t;c+="0",o++);c=w(c,a)}else if(t-=i,c=v(c,a,"0"),a+1>o){if(--t>0)for(c+=".";t--;c+="0");}else if((t+=a-o)>0)for(a+1==o&&(c+=".");t--;c+="0");return e.s<0&&s?"-"+c:c}function $(e,t){for(var n,r,s=1,a=new K(e[0]);s<e.length;s++)(!(r=new K(e[s])).s||(n=g(a,r))===t||0===n&&a.s===t)&&(a=r);return a}function z(e,t,n){for(var r=1,s=t.length;!t[--s];t.pop());for(s=t[0];s>=10;s/=10,r++);return(n=r+n*u-1)>M?e.c=e.e=null:n<L?e.c=[e.e=0]:(e.e=n,e.c=t),e}function W(e,t,n,r){var i,o,l,f,h,p,m,g=e.c,b=d;if(g){e:{for(i=1,f=g[0];f>=10;f/=10,i++);if((o=t-i)<0)o+=u,l=t,h=g[p=0],m=a(h/b[i-l-1]%10);else if((p=s((o+1)/u))>=g.length){if(!r)break e;for(;g.length<=p;g.push(0));h=m=0,i=1,l=(o%=u)-u+1}else{for(h=f=g[p],i=1;f>=10;f/=10,i++);m=(l=(o%=u)-u+i)<0?0:a(h/b[i-l-1]%10)}if(r=r||t<0||null!=g[p+1]||(l<0?h:h%b[i-l-1]),r=n<4?(m||r)&&(0==n||n==(e.s<0?3:2)):m>5||5==m&&(4==n||r||6==n&&(o>0?l>0?h/b[i-l]:0:g[p-1])%10&1||n==(e.s<0?8:7)),t<1||!g[0])return g.length=0,r?(t-=e.e+1,g[0]=b[(u-t%u)%u],e.e=-t||0):g[0]=e.e=0,e;if(0==o?(g.length=p,f=1,p--):(g.length=p+1,f=b[u-o],g[p]=l>0?a(h/b[i-l]%b[l])*f:0),r)for(;;){if(0==p){for(o=1,l=g[0];l>=10;l/=10,o++);for(l=g[0]+=f,f=1;l>=10;l/=10,f++);o!=f&&(e.e++,g[0]==c&&(g[0]=1));break}if(g[p]+=f,g[p]!=c)break;g[p--]=0,f=1}for(o=g.length;0===g[--o];g.pop());}e.e>M?e.c=e.e=null:e.e<L&&(e.c=[e.e=0])}return e}function J(e){var t,n=e.e;return null===n?e.toString():(t=m(e.c),t=n<=B||n>=F?w(t,n):v(t,n,"0"),e.s<0?"-"+t:t)}return K.clone=e,K.ROUND_UP=0,K.ROUND_DOWN=1,K.ROUND_CEIL=2,K.ROUND_FLOOR=3,K.ROUND_HALF_UP=4,K.ROUND_HALF_DOWN=5,K.ROUND_HALF_EVEN=6,K.ROUND_HALF_CEIL=7,K.ROUND_HALF_FLOOR=8,K.EUCLID=9,K.config=K.set=function(e){var t,n;if(null!=e){if("object"!=typeof e)throw Error(i+"Object expected: "+e);if(e.hasOwnProperty(t="DECIMAL_PLACES")&&(b(n=e[t],0,h,t),R=n),e.hasOwnProperty(t="ROUNDING_MODE")&&(b(n=e[t],0,8,t),O=n),e.hasOwnProperty(t="EXPONENTIAL_AT")&&((n=e[t])&&n.pop?(b(n[0],-h,0,t),b(n[1],0,h,t),B=n[0],F=n[1]):(b(n,-h,h,t),B=-(F=n<0?-n:n))),e.hasOwnProperty(t="RANGE"))if((n=e[t])&&n.pop)b(n[0],-h,-1,t),b(n[1],1,h,t),L=n[0],M=n[1];else{if(b(n,-h,h,t),!n)throw Error(i+t+" cannot be zero: "+n);L=-(M=n<0?-n:n)}if(e.hasOwnProperty(t="CRYPTO")){if((n=e[t])!==!!n)throw Error(i+t+" not true or false: "+n);if(n){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw N=!n,Error(i+"crypto unavailable");N=n}else N=n}if(e.hasOwnProperty(t="MODULO_MODE")&&(b(n=e[t],0,9,t),D=n),e.hasOwnProperty(t="POW_PRECISION")&&(b(n=e[t],0,h,t),G=n),e.hasOwnProperty(t="FORMAT")){if("object"!=typeof(n=e[t]))throw Error(i+t+" not an object: "+n);H=n}if(e.hasOwnProperty(t="ALPHABET")){if("string"!=typeof(n=e[t])||/^.?$|[+\-.\s]|(.).*\1/.test(n))throw Error(i+t+" invalid: "+n);q="0123456789"==n.slice(0,10),U=n}}return{DECIMAL_PLACES:R,ROUNDING_MODE:O,EXPONENTIAL_AT:[B,F],RANGE:[L,M],CRYPTO:N,MODULO_MODE:D,POW_PRECISION:G,FORMAT:H,ALPHABET:U}},K.isBigNumber=function(e){if(!e||!0!==e._isBigNumber)return!1;if(!K.DEBUG)return!0;var t,n,r=e.c,s=e.e,o=e.s;e:if("[object Array]"=={}.toString.call(r)){if((1===o||-1===o)&&s>=-h&&s<=h&&s===a(s)){if(0===r[0]){if(0===s&&1===r.length)return!0;break e}if((t=(s+1)%u)<1&&(t+=u),String(r[0]).length==t){for(t=0;t<r.length;t++)if((n=r[t])<0||n>=c||n!==a(n))break e;if(0!==n)return!0}}}else if(null===r&&null===s&&(null===o||1===o||-1===o))return!0;throw Error(i+"Invalid BigNumber: "+e)},K.maximum=K.max=function(){return $(arguments,-1)},K.minimum=K.min=function(){return $(arguments,1)},K.random=(S=9007199254740992,x=Math.random()*S&2097151?function(){return a(Math.random()*S)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(e){var t,n,r,o,c,l=0,f=[],p=new K(j);if(null==e?e=R:b(e,0,h),o=s(e/u),N)if(crypto.getRandomValues){for(t=crypto.getRandomValues(new Uint32Array(o*=2));l<o;)(c=131072*t[l]+(t[l+1]>>>11))>=9e15?(n=crypto.getRandomValues(new Uint32Array(2)),t[l]=n[0],t[l+1]=n[1]):(f.push(c%1e14),l+=2);l=o/2}else{if(!crypto.randomBytes)throw N=!1,Error(i+"crypto unavailable");for(t=crypto.randomBytes(o*=7);l<o;)(c=281474976710656*(31&t[l])+1099511627776*t[l+1]+4294967296*t[l+2]+16777216*t[l+3]+(t[l+4]<<16)+(t[l+5]<<8)+t[l+6])>=9e15?crypto.randomBytes(7).copy(t,l):(f.push(c%1e14),l+=7);l=o/7}if(!N)for(;l<o;)(c=x())<9e15&&(f[l++]=c%1e14);for(o=f[--l],e%=u,o&&e&&(c=d[u-e],f[l]=a(o/c)*c);0===f[l];f.pop(),l--);if(l<0)f=[r=0];else{for(r=-1;0===f[0];f.splice(0,1),r-=u);for(l=1,c=f[0];c>=10;c/=10,l++);l<u&&(r-=u-l)}return p.e=r,p.c=f,p}),K.sum=function(){for(var e=1,t=arguments,n=new K(t[0]);e<t.length;)n=n.plus(t[e++]);return n},E=function(){var e="0123456789";function t(e,t,n,r){for(var s,a,i=[0],o=0,c=e.length;o<c;){for(a=i.length;a--;i[a]*=t);for(i[0]+=r.indexOf(e.charAt(o++)),s=0;s<i.length;s++)i[s]>n-1&&(null==i[s+1]&&(i[s+1]=0),i[s+1]+=i[s]/n|0,i[s]%=n)}return i.reverse()}return function(r,s,a,i,o){var c,u,l,d,f,h,p,g,b=r.indexOf("."),y=R,w=O;for(b>=0&&(d=G,G=0,r=r.replace(".",""),h=(g=new K(s)).pow(r.length-b),G=d,g.c=t(v(m(h.c),h.e,"0"),10,a,e),g.e=g.c.length),l=d=(p=t(r,s,a,o?(c=U,e):(c=e,U))).length;0==p[--d];p.pop());if(!p[0])return c.charAt(0);if(b<0?--l:(h.c=p,h.e=l,h.s=i,p=(h=n(h,g,y,w,a)).c,f=h.r,l=h.e),b=p[u=l+y+1],d=a/2,f=f||u<0||null!=p[u+1],f=w<4?(null!=b||f)&&(0==w||w==(h.s<0?3:2)):b>d||b==d&&(4==w||f||6==w&&1&p[u-1]||w==(h.s<0?8:7)),u<1||!p[0])r=f?v(c.charAt(1),-y,c.charAt(0)):c.charAt(0);else{if(p.length=u,f)for(--a;++p[--u]>a;)p[u]=0,u||(++l,p=[1].concat(p));for(d=p.length;!p[--d];);for(b=0,r="";b<=d;r+=c.charAt(p[b++]));r=v(r,l,c.charAt(0))}return r}}(),n=function(){function e(e,t,n){var r,s,a,i,o=0,c=e.length,u=t%f,l=t/f|0;for(e=e.slice();c--;)o=((s=u*(a=e[c]%f)+(r=l*a+(i=e[c]/f|0)*u)%f*f+o)/n|0)+(r/f|0)+l*i,e[c]=s%n;return o&&(e=[o].concat(e)),e}function t(e,t,n,r){var s,a;if(n!=r)a=n>r?1:-1;else for(s=a=0;s<n;s++)if(e[s]!=t[s]){a=e[s]>t[s]?1:-1;break}return a}function n(e,t,n,r){for(var s=0;n--;)e[n]-=s,s=e[n]<t[n]?1:0,e[n]=s*r+e[n]-t[n];for(;!e[0]&&e.length>1;e.splice(0,1));}return function(r,s,i,o,l){var d,f,h,m,g,b,y,w,v,E,T,S,x,P,k,I,A,_=r.s==s.s?1:-1,C=r.c,j=s.c;if(!(C&&C[0]&&j&&j[0]))return new K(r.s&&s.s&&(C?!j||C[0]!=j[0]:j)?C&&0==C[0]||!j?0*_:_/0:NaN);for(v=(w=new K(_)).c=[],_=i+(f=r.e-s.e)+1,l||(l=c,f=p(r.e/u)-p(s.e/u),_=_/u|0),h=0;j[h]==(C[h]||0);h++);if(j[h]>(C[h]||0)&&f--,_<0)v.push(1),m=!0;else{for(P=C.length,I=j.length,h=0,_+=2,(g=a(l/(j[0]+1)))>1&&(j=e(j,g,l),C=e(C,g,l),I=j.length,P=C.length),x=I,T=(E=C.slice(0,I)).length;T<I;E[T++]=0);A=j.slice(),A=[0].concat(A),k=j[0],j[1]>=l/2&&k++;do{if(g=0,(d=t(j,E,I,T))<0){if(S=E[0],I!=T&&(S=S*l+(E[1]||0)),(g=a(S/k))>1)for(g>=l&&(g=l-1),y=(b=e(j,g,l)).length,T=E.length;1==t(b,E,y,T);)g--,n(b,I<y?A:j,y,l),y=b.length,d=1;else 0==g&&(d=g=1),y=(b=j.slice()).length;if(y<T&&(b=[0].concat(b)),n(E,b,T,l),T=E.length,-1==d)for(;t(j,E,I,T)<1;)g++,n(E,I<T?A:j,T,l),T=E.length}else 0===d&&(g++,E=[0]);v[h++]=g,E[0]?E[T++]=C[x]||0:(E=[C[x]],T=1)}while((x++<P||null!=E[0])&&_--);m=null!=E[0],v[0]||v.splice(0,1)}if(l==c){for(h=1,_=v[0];_>=10;_/=10,h++);W(w,i+(w.e=h+f*u-1)+1,o,m)}else w.e=f,w.r=+m;return w}}(),P=/^(-?)0([xbo])(?=\w[\w.]*$)/i,k=/^([^.]+)\.$/,I=/^\.([^.]+)$/,A=/^-?(Infinity|NaN)$/,_=/^\s*\+(?=[\w.])|^\s+|\s+$/g,T=function(e,t,n,r){var s,a=n?t:t.replace(_,"");if(A.test(a))e.s=isNaN(a)?null:a<0?-1:1;else{if(!n&&(a=a.replace(P,function(e,t,n){return s="x"==(n=n.toLowerCase())?16:"b"==n?2:8,r&&r!=s?e:t}),r&&(s=r,a=a.replace(k,"$1").replace(I,"0.$1")),t!=a))return new K(a,s);if(K.DEBUG)throw Error(i+"Not a"+(r?" base "+r:"")+" number: "+t);e.s=null}e.c=e.e=null},C.absoluteValue=C.abs=function(){var e=new K(this);return e.s<0&&(e.s=1),e},C.comparedTo=function(e,t){return g(this,new K(e,t))},C.decimalPlaces=C.dp=function(e,t){var n,r,s,a=this;if(null!=e)return b(e,0,h),null==t?t=O:b(t,0,8),W(new K(a),e+a.e+1,t);if(!(n=a.c))return null;if(r=((s=n.length-1)-p(this.e/u))*u,s=n[s])for(;s%10==0;s/=10,r--);return r<0&&(r=0),r},C.dividedBy=C.div=function(e,t){return n(this,new K(e,t),R,O)},C.dividedToIntegerBy=C.idiv=function(e,t){return n(this,new K(e,t),0,1)},C.exponentiatedBy=C.pow=function(e,t){var n,r,o,c,l,d,f,h,p=this;if((e=new K(e)).c&&!e.isInteger())throw Error(i+"Exponent not an integer: "+J(e));if(null!=t&&(t=new K(t)),l=e.e>14,!p.c||!p.c[0]||1==p.c[0]&&!p.e&&1==p.c.length||!e.c||!e.c[0])return h=new K(Math.pow(+J(p),l?e.s*(2-y(e)):+J(e))),t?h.mod(t):h;if(d=e.s<0,t){if(t.c?!t.c[0]:!t.s)return new K(NaN);(r=!d&&p.isInteger()&&t.isInteger())&&(p=p.mod(t))}else{if(e.e>9&&(p.e>0||p.e<-1||(0==p.e?p.c[0]>1||l&&p.c[1]>=24e7:p.c[0]<8e13||l&&p.c[0]<=9999975e7)))return c=p.s<0&&y(e)?-0:0,p.e>-1&&(c=1/c),new K(d?1/c:c);G&&(c=s(G/u+2))}for(l?(n=new K(.5),d&&(e.s=1),f=y(e)):f=(o=Math.abs(+J(e)))%2,h=new K(j);;){if(f){if(!(h=h.times(p)).c)break;c?h.c.length>c&&(h.c.length=c):r&&(h=h.mod(t))}if(o){if(0===(o=a(o/2)))break;f=o%2}else if(W(e=e.times(n),e.e+1,1),e.e>14)f=y(e);else{if(0===(o=+J(e)))break;f=o%2}p=p.times(p),c?p.c&&p.c.length>c&&(p.c.length=c):r&&(p=p.mod(t))}return r?h:(d&&(h=j.div(h)),t?h.mod(t):c?W(h,G,O,undefined):h)},C.integerValue=function(e){var t=new K(this);return null==e?e=O:b(e,0,8),W(t,t.e+1,e)},C.isEqualTo=C.eq=function(e,t){return 0===g(this,new K(e,t))},C.isFinite=function(){return!!this.c},C.isGreaterThan=C.gt=function(e,t){return g(this,new K(e,t))>0},C.isGreaterThanOrEqualTo=C.gte=function(e,t){return 1===(t=g(this,new K(e,t)))||0===t},C.isInteger=function(){return!!this.c&&p(this.e/u)>this.c.length-2},C.isLessThan=C.lt=function(e,t){return g(this,new K(e,t))<0},C.isLessThanOrEqualTo=C.lte=function(e,t){return-1===(t=g(this,new K(e,t)))||0===t},C.isNaN=function(){return!this.s},C.isNegative=function(){return this.s<0},C.isPositive=function(){return this.s>0},C.isZero=function(){return!!this.c&&0==this.c[0]},C.minus=function(e,t){var n,r,s,a,i=this,o=i.s;if(t=(e=new K(e,t)).s,!o||!t)return new K(NaN);if(o!=t)return e.s=-t,i.plus(e);var l=i.e/u,d=e.e/u,f=i.c,h=e.c;if(!l||!d){if(!f||!h)return f?(e.s=-t,e):new K(h?i:NaN);if(!f[0]||!h[0])return h[0]?(e.s=-t,e):new K(f[0]?i:3==O?-0:0)}if(l=p(l),d=p(d),f=f.slice(),o=l-d){for((a=o<0)?(o=-o,s=f):(d=l,s=h),s.reverse(),t=o;t--;s.push(0));s.reverse()}else for(r=(a=(o=f.length)<(t=h.length))?o:t,o=t=0;t<r;t++)if(f[t]!=h[t]){a=f[t]<h[t];break}if(a&&(s=f,f=h,h=s,e.s=-e.s),(t=(r=h.length)-(n=f.length))>0)for(;t--;f[n++]=0);for(t=c-1;r>o;){if(f[--r]<h[r]){for(n=r;n&&!f[--n];f[n]=t);--f[n],f[r]+=c}f[r]-=h[r]}for(;0==f[0];f.splice(0,1),--d);return f[0]?z(e,f,d):(e.s=3==O?-1:1,e.c=[e.e=0],e)},C.modulo=C.mod=function(e,t){var r,s,a=this;return e=new K(e,t),!a.c||!e.s||e.c&&!e.c[0]?new K(NaN):!e.c||a.c&&!a.c[0]?new K(a):(9==D?(s=e.s,e.s=1,r=n(a,e,0,3),e.s=s,r.s*=s):r=n(a,e,0,D),(e=a.minus(r.times(e))).c[0]||1!=D||(e.s=a.s),e)},C.multipliedBy=C.times=function(e,t){var n,r,s,a,i,o,l,d,h,m,g,b,y,w,v,E=this,T=E.c,S=(e=new K(e,t)).c;if(!(T&&S&&T[0]&&S[0]))return!E.s||!e.s||T&&!T[0]&&!S||S&&!S[0]&&!T?e.c=e.e=e.s=null:(e.s*=E.s,T&&S?(e.c=[0],e.e=0):e.c=e.e=null),e;for(r=p(E.e/u)+p(e.e/u),e.s*=E.s,(l=T.length)<(m=S.length)&&(y=T,T=S,S=y,s=l,l=m,m=s),s=l+m,y=[];s--;y.push(0));for(w=c,v=f,s=m;--s>=0;){for(n=0,g=S[s]%v,b=S[s]/v|0,a=s+(i=l);a>s;)n=((d=g*(d=T[--i]%v)+(o=b*d+(h=T[i]/v|0)*g)%v*v+y[a]+n)/w|0)+(o/v|0)+b*h,y[a--]=d%w;y[a]=n}return n?++r:y.splice(0,1),z(e,y,r)},C.negated=function(){var e=new K(this);return e.s=-e.s||null,e},C.plus=function(e,t){var n,r=this,s=r.s;if(t=(e=new K(e,t)).s,!s||!t)return new K(NaN);if(s!=t)return e.s=-t,r.minus(e);var a=r.e/u,i=e.e/u,o=r.c,l=e.c;if(!a||!i){if(!o||!l)return new K(s/0);if(!o[0]||!l[0])return l[0]?e:new K(o[0]?r:0*s)}if(a=p(a),i=p(i),o=o.slice(),s=a-i){for(s>0?(i=a,n=l):(s=-s,n=o),n.reverse();s--;n.push(0));n.reverse()}for((s=o.length)-(t=l.length)<0&&(n=l,l=o,o=n,t=s),s=0;t;)s=(o[--t]=o[t]+l[t]+s)/c|0,o[t]=c===o[t]?0:o[t]%c;return s&&(o=[s].concat(o),++i),z(e,o,i)},C.precision=C.sd=function(e,t){var n,r,s,a=this;if(null!=e&&e!==!!e)return b(e,1,h),null==t?t=O:b(t,0,8),W(new K(a),e,t);if(!(n=a.c))return null;if(r=(s=n.length-1)*u+1,s=n[s]){for(;s%10==0;s/=10,r--);for(s=n[0];s>=10;s/=10,r++);}return e&&a.e+1>r&&(r=a.e+1),r},C.shiftedBy=function(e){return b(e,-9007199254740991,l),this.times("1e"+e)},C.squareRoot=C.sqrt=function(){var e,t,r,s,a,i=this,o=i.c,c=i.s,u=i.e,l=R+4,d=new K("0.5");if(1!==c||!o||!o[0])return new K(!c||c<0&&(!o||o[0])?NaN:o?i:1/0);if(0==(c=Math.sqrt(+J(i)))||c==1/0?(((t=m(o)).length+u)%2==0&&(t+="0"),c=Math.sqrt(+t),u=p((u+1)/2)-(u<0||u%2),r=new K(t=c==1/0?"5e"+u:(t=c.toExponential()).slice(0,t.indexOf("e")+1)+u)):r=new K(c+""),r.c[0])for((c=(u=r.e)+l)<3&&(c=0);;)if(a=r,r=d.times(a.plus(n(i,a,l,1))),m(a.c).slice(0,c)===(t=m(r.c)).slice(0,c)){if(r.e<u&&--c,"9999"!=(t=t.slice(c-3,c+1))&&(s||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(W(r,r.e+R+2,1),e=!r.times(r).eq(i));break}if(!s&&(W(a,a.e+R+2,0),a.times(a).eq(i))){r=a;break}l+=4,c+=4,s=1}return W(r,r.e+R+1,O,e)},C.toExponential=function(e,t){return null!=e&&(b(e,0,h),e++),V(this,e,t,1)},C.toFixed=function(e,t){return null!=e&&(b(e,0,h),e=e+this.e+1),V(this,e,t)},C.toFormat=function(e,t,n){var r,s=this;if(null==n)null!=e&&t&&"object"==typeof t?(n=t,t=null):e&&"object"==typeof e?(n=e,e=t=null):n=H;else if("object"!=typeof n)throw Error(i+"Argument not an object: "+n);if(r=s.toFixed(e,t),s.c){var a,o=r.split("."),c=+n.groupSize,u=+n.secondaryGroupSize,l=n.groupSeparator||"",d=o[0],f=o[1],h=s.s<0,p=h?d.slice(1):d,m=p.length;if(u&&(a=c,c=u,u=a,m-=a),c>0&&m>0){for(a=m%c||c,d=p.substr(0,a);a<m;a+=c)d+=l+p.substr(a,c);u>0&&(d+=l+p.slice(a)),h&&(d="-"+d)}r=f?d+(n.decimalSeparator||"")+((u=+n.fractionGroupSize)?f.replace(new RegExp("\\d{"+u+"}\\B","g"),"$&"+(n.fractionGroupSeparator||"")):f):d}return(n.prefix||"")+r+(n.suffix||"")},C.toFraction=function(e){var t,r,s,a,o,c,l,f,h,p,g,b,y=this,w=y.c;if(null!=e&&(!(l=new K(e)).isInteger()&&(l.c||1!==l.s)||l.lt(j)))throw Error(i+"Argument "+(l.isInteger()?"out of range: ":"not an integer: ")+J(l));if(!w)return new K(y);for(t=new K(j),h=r=new K(j),s=f=new K(j),b=m(w),o=t.e=b.length-y.e-1,t.c[0]=d[(c=o%u)<0?u+c:c],e=!e||l.comparedTo(t)>0?o>0?t:h:l,c=M,M=1/0,l=new K(b),f.c[0]=0;p=n(l,t,0,1),1!=(a=r.plus(p.times(s))).comparedTo(e);)r=s,s=a,h=f.plus(p.times(a=h)),f=a,t=l.minus(p.times(a=t)),l=a;return a=n(e.minus(r),s,0,1),f=f.plus(a.times(h)),r=r.plus(a.times(s)),f.s=h.s=y.s,g=n(h,s,o*=2,O).minus(y).abs().comparedTo(n(f,r,o,O).minus(y).abs())<1?[h,s]:[f,r],M=c,g},C.toNumber=function(){return+J(this)},C.toPrecision=function(e,t){return null!=e&&b(e,1,h),V(this,e,t,2)},C.toString=function(e){var t,n=this,r=n.s,s=n.e;return null===s?r?(t="Infinity",r<0&&(t="-"+t)):t="NaN":(null==e?t=s<=B||s>=F?w(m(n.c),s):v(m(n.c),s,"0"):10===e&&q?t=v(m((n=W(new K(n),R+s+1,O)).c),n.e,"0"):(b(e,2,U.length,"Base"),t=E(v(m(n.c),s,"0"),10,e,r,!0)),r<0&&n.c[0]&&(t="-"+t)),t},C.valueOf=C.toJSON=function(){return J(this)},C._isBigNumber=!0,null!=t&&K.set(t),K}(),n.default=n.BigNumber=n,"function"==typeof define&&define.amd?define(function(){return n}):void 0!==t&&t.exports?t.exports=n:(e||(e="undefined"!=typeof self&&self?self:window),e.BigNumber=n)}(this)}}},{package:"@ngraveio/bc-ur>bignumber.js",file:"node_modules/@ngraveio/bc-ur/node_modules/bignumber.js/bignumber.js"}],[2862,{"./utils.js":2865},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.polyval=n.ghash=void 0,n._toGHASHKey=u;const r=e("./utils.js"),s=16,a=new Uint8Array(16),i=(0,r.u32)(a),o=(e,t,n,r)=>({s3:n<<31|r>>>1,s2:t<<31|n>>>1,s1:e<<31|t>>>1,s0:e>>>1^225<<24&-(1&(1&r))}),c=e=>(e>>>0&255)<<24|(e>>>8&255)<<16|(e>>>16&255)<<8|e>>>24&255;function u(e){e.reverse();const t=1&e[15];let n=0;for(let t=0;t<e.length;t++){const r=e[t];e[t]=r>>>1|n,n=(1&r)<<7}return e[0]^=225&-t,e}class l{constructor(e,t){this.blockLen=s,this.outputLen=s,this.s0=0,this.s1=0,this.s2=0,this.s3=0,this.finished=!1,e=(0,r.toBytes)(e),(0,r.abytes)(e,16);const n=(0,r.createView)(e);let a=n.getUint32(0,!1),i=n.getUint32(4,!1),u=n.getUint32(8,!1),l=n.getUint32(12,!1);const d=[];for(let e=0;e<128;e++)d.push({s0:c(a),s1:c(i),s2:c(u),s3:c(l)}),({s0:a,s1:i,s2:u,s3:l}=o(a,i,u,l));const f=(h=t||1024)>65536?8:h>1024?4:2;var h;if(![1,2,4,8].includes(f))throw new Error("ghash: invalid window size, expected 2, 4 or 8");this.W=f;const p=128/f,m=this.windowSize=2**f,g=[];for(let e=0;e<p;e++)for(let t=0;t<m;t++){let n=0,r=0,s=0,a=0;for(let i=0;i<f;i++){if(!(t>>>f-i-1&1))continue;const{s0:o,s1:c,s2:u,s3:l}=d[f*e+i];n^=o,r^=c,s^=u,a^=l}g.push({s0:n,s1:r,s2:s,s3:a})}this.t=g}_updateBlock(e,t,n,r){e^=this.s0,t^=this.s1,n^=this.s2,r^=this.s3;const{W:s,t:a,windowSize:i}=this;let o=0,c=0,u=0,l=0;const d=(1<<s)-1;let f=0;for(const h of[e,t,n,r])for(let e=0;e<4;e++){const t=h>>>8*e&255;for(let e=8/s-1;e>=0;e--){const n=t>>>s*e&d,{s0:r,s1:h,s2:p,s3:m}=a[f*i+n];o^=r,c^=h,u^=p,l^=m,f+=1}}this.s0=o,this.s1=c,this.s2=u,this.s3=l}update(e){(0,r.aexists)(this),e=(0,r.toBytes)(e),(0,r.abytes)(e);const t=(0,r.u32)(e),n=Math.floor(e.length/s),o=e.length%s;for(let e=0;e<n;e++)this._updateBlock(t[4*e+0],t[4*e+1],t[4*e+2],t[4*e+3]);return o&&(a.set(e.subarray(n*s)),this._updateBlock(i[0],i[1],i[2],i[3]),(0,r.clean)(i)),this}destroy(){const{t:e}=this;for(const t of e)t.s0=0,t.s1=0,t.s2=0,t.s3=0}digestInto(e){(0,r.aexists)(this),(0,r.aoutput)(e,this),this.finished=!0;const{s0:t,s1:n,s2:s,s3:a}=this,i=(0,r.u32)(e);return i[0]=t,i[1]=n,i[2]=s,i[3]=a,e}digest(){const e=new Uint8Array(s);return this.digestInto(e),this.destroy(),e}}class d extends l{constructor(e,t){e=(0,r.toBytes)(e),(0,r.abytes)(e);const n=u((0,r.copyBytes)(e));super(n,t),(0,r.clean)(n)}update(e){e=(0,r.toBytes)(e),(0,r.aexists)(this);const t=(0,r.u32)(e),n=e.length%s,o=Math.floor(e.length/s);for(let e=0;e<o;e++)this._updateBlock(c(t[4*e+3]),c(t[4*e+2]),c(t[4*e+1]),c(t[4*e+0]));return n&&(a.set(e.subarray(o*s)),this._updateBlock(c(i[3]),c(i[2]),c(i[1]),c(i[0])),(0,r.clean)(i)),this}digestInto(e){(0,r.aexists)(this),(0,r.aoutput)(e,this),this.finished=!0;const{s0:t,s1:n,s2:s,s3:a}=this,i=(0,r.u32)(e);return i[0]=t,i[1]=n,i[2]=s,i[3]=a,e.reverse()}}function f(e){const t=(t,n)=>e(n,t.length).update((0,r.toBytes)(t)).digest(),n=e(new Uint8Array(16),0);return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=(t,n)=>e(t,n),t}n.ghash=f((e,t)=>new l(e,t)),n.polyval=f((e,t)=>new d(e,t))}}},{package:"@noble/ciphers",file:"node_modules/@noble/ciphers/_polyval.js"}],[2863,{"./_polyval.js":2862,"./utils.js":2865},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.unsafe=n.aeskwp=n.aeskw=n.siv=n.gcmsiv=n.gcm=n.cfb=n.cbc=n.ecb=n.ctr=void 0;const r=e("./_polyval.js"),s=e("./utils.js"),a=16,i=new Uint8Array(a);function o(e){return e<<1^283&-(e>>7)}function c(e,t){let n=0;for(;t>0;t>>=1)n^=e&-(1&t),e=o(e);return n}const u=(()=>{const e=new Uint8Array(256);for(let t=0,n=1;t<256;t++,n^=o(n))e[t]=n;const t=new Uint8Array(256);t[0]=99;for(let n=0;n<255;n++){let r=e[255-n];r|=r<<8,t[e[n]]=255&(r^r>>4^r>>5^r>>6^r>>7^99)}return(0,s.clean)(e),t})(),l=u.map((e,t)=>u.indexOf(t)),d=e=>e<<24|e>>>8,f=e=>e<<8|e>>>24,h=e=>e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255;function p(e,t){if(256!==e.length)throw new Error("Wrong sbox length");const n=new Uint32Array(256).map((n,r)=>t(e[r])),r=n.map(f),s=r.map(f),a=s.map(f),i=new Uint32Array(65536),o=new Uint32Array(65536),c=new Uint16Array(65536);for(let t=0;t<256;t++)for(let u=0;u<256;u++){const l=256*t+u;i[l]=n[t]^r[u],o[l]=s[t]^a[u],c[l]=e[t]<<8|e[u]}return{sbox:e,sbox2:c,T0:n,T1:r,T2:s,T3:a,T01:i,T23:o}}const m=p(u,e=>c(e,3)<<24|e<<16|e<<8|c(e,2)),g=p(l,e=>c(e,11)<<24|c(e,13)<<16|c(e,9)<<8|c(e,14)),b=(()=>{const e=new Uint8Array(16);for(let t=0,n=1;t<16;t++,n=o(n))e[t]=n;return e})();function y(e){(0,s.abytes)(e);const t=e.length;if(![16,24,32].includes(t))throw new Error("aes: invalid key size, should be 16, 24 or 32, got "+t);const{sbox2:n}=m,r=[];(0,s.isAligned32)(e)||r.push(e=(0,s.copyBytes)(e));const a=(0,s.u32)(e),i=a.length,o=e=>E(n,e,e,e,e),c=new Uint32Array(t+28);c.set(a);for(let e=i;e<c.length;e++){let t=c[e-1];e%i===0?t=o(d(t))^b[e/i-1]:i>6&&e%i===4&&(t=o(t)),c[e]=c[e-i]^t}return(0,s.clean)(...r),c}function w(e){const t=y(e),n=t.slice(),r=t.length,{sbox2:a}=m,{T0:i,T1:o,T2:c,T3:u}=g;for(let e=0;e<r;e+=4)for(let s=0;s<4;s++)n[e+s]=t[r-e-4+s];(0,s.clean)(t);for(let e=4;e<r-4;e++){const t=n[e],r=E(a,t,t,t,t);n[e]=i[255&r]^o[r>>>8&255]^c[r>>>16&255]^u[r>>>24]}return n}function v(e,t,n,r,s,a){return e[n<<8&65280|r>>>8&255]^t[s>>>8&65280|a>>>24&255]}function E(e,t,n,r,s){return e[255&t|65280&n]|e[r>>>16&255|s>>>16&65280]<<16}function T(e,t,n,r,s){const{sbox2:a,T01:i,T23:o}=m;let c=0;t^=e[c++],n^=e[c++],r^=e[c++],s^=e[c++];const u=e.length/4-2;for(let a=0;a<u;a++){const a=e[c++]^v(i,o,t,n,r,s),u=e[c++]^v(i,o,n,r,s,t),l=e[c++]^v(i,o,r,s,t,n),d=e[c++]^v(i,o,s,t,n,r);t=a,n=u,r=l,s=d}return{s0:e[c++]^E(a,t,n,r,s),s1:e[c++]^E(a,n,r,s,t),s2:e[c++]^E(a,r,s,t,n),s3:e[c++]^E(a,s,t,n,r)}}function S(e,t,n,r,s){const{sbox2:a,T01:i,T23:o}=g;let c=0;t^=e[c++],n^=e[c++],r^=e[c++],s^=e[c++];const u=e.length/4-2;for(let a=0;a<u;a++){const a=e[c++]^v(i,o,t,s,r,n),u=e[c++]^v(i,o,n,t,s,r),l=e[c++]^v(i,o,r,n,t,s),d=e[c++]^v(i,o,s,r,n,t);t=a,n=u,r=l,s=d}return{s0:e[c++]^E(a,t,s,r,n),s1:e[c++]^E(a,n,t,s,r),s2:e[c++]^E(a,r,n,t,s),s3:e[c++]^E(a,s,r,n,t)}}function x(e,t,n,r){(0,s.abytes)(t,a),(0,s.abytes)(n);const i=n.length;r=(0,s.getOutput)(i,r),(0,s.complexOverlapBytes)(n,r);const o=t,c=(0,s.u32)(o);let{s0:u,s1:l,s2:d,s3:f}=T(e,c[0],c[1],c[2],c[3]);const h=(0,s.u32)(n),p=(0,s.u32)(r);for(let t=0;t+4<=h.length;t+=4){p[t+0]=h[t+0]^u,p[t+1]=h[t+1]^l,p[t+2]=h[t+2]^d,p[t+3]=h[t+3]^f;let n=1;for(let e=o.length-1;e>=0;e--)n=n+(255&o[e])|0,o[e]=255&n,n>>>=8;({s0:u,s1:l,s2:d,s3:f}=T(e,c[0],c[1],c[2],c[3]))}const m=a*Math.floor(h.length/4);if(m<i){const e=new Uint32Array([u,l,d,f]),t=(0,s.u8)(e);for(let e=m,s=0;e<i;e++,s++)r[e]=n[e]^t[s];(0,s.clean)(e)}return r}function P(e,t,n,r,i){(0,s.abytes)(n,a),(0,s.abytes)(r),i=(0,s.getOutput)(r.length,i);const o=n,c=(0,s.u32)(o),u=(0,s.createView)(o),l=(0,s.u32)(r),d=(0,s.u32)(i),f=t?0:12,h=r.length;let p=u.getUint32(f,t),{s0:m,s1:g,s2:b,s3:y}=T(e,c[0],c[1],c[2],c[3]);for(let n=0;n+4<=l.length;n+=4)d[n+0]=l[n+0]^m,d[n+1]=l[n+1]^g,d[n+2]=l[n+2]^b,d[n+3]=l[n+3]^y,p=p+1>>>0,u.setUint32(f,p,t),({s0:m,s1:g,s2:b,s3:y}=T(e,c[0],c[1],c[2],c[3]));const w=a*Math.floor(l.length/4);if(w<h){const e=new Uint32Array([m,g,b,y]),t=(0,s.u8)(e);for(let e=w,n=0;e<h;e++,n++)i[e]=r[e]^t[n];(0,s.clean)(e)}return i}function k(e){if((0,s.abytes)(e),e.length%a!==0)throw new Error("aes-(cbc/ecb).decrypt ciphertext should consist of blocks with size 16")}function I(e,t,n){(0,s.abytes)(e);let r=e.length;const i=r%a;if(!t&&0!==i)throw new Error("aec/(cbc-ecb): unpadded plaintext with disabled padding");(0,s.isAligned32)(e)||(e=(0,s.copyBytes)(e));const o=(0,s.u32)(e);if(t){let e=a-i;e||(e=a),r+=e}n=(0,s.getOutput)(r,n),(0,s.complexOverlapBytes)(e,n);return{b:o,o:(0,s.u32)(n),out:n}}function A(e,t){if(!t)return e;const n=e.length;if(!n)throw new Error("aes/pcks5: empty ciphertext not allowed");const r=e[n-1];if(r<=0||r>16)throw new Error("aes/pcks5: wrong padding");const s=e.subarray(0,-r);for(let t=0;t<r;t++)if(e[n-t-1]!==r)throw new Error("aes/pcks5: wrong padding");return s}function _(e){const t=new Uint8Array(16),n=(0,s.u32)(t);t.set(e);const r=a-e.length;for(let e=a-r;e<a;e++)t[e]=r;return n}function C(e,t,n,r,a){const i=a?a.length:0,o=e.create(n,r.length+i);a&&o.update(a);const c=(0,s.u64Lengths)(8*r.length,8*i,t);o.update(r),o.update(c);const u=o.digest();return(0,s.clean)(c),u}n.ctr=(0,s.wrapCipher)({blockSize:16,nonceLength:16},function(e,t){function n(n,r){if((0,s.abytes)(n),r!==undefined&&((0,s.abytes)(r),!(0,s.isAligned32)(r)))throw new Error("unaligned destination");const a=y(e),i=(0,s.copyBytes)(t),o=[a,i];(0,s.isAligned32)(n)||o.push(n=(0,s.copyBytes)(n));const c=x(a,i,n,r);return(0,s.clean)(...o),c}return{encrypt:(e,t)=>n(e,t),decrypt:(e,t)=>n(e,t)}}),n.ecb=(0,s.wrapCipher)({blockSize:16},function(e,t={}){const n=!t.disablePadding;return{encrypt(t,r){const{b:a,o:i,out:o}=I(t,n,r),c=y(e);let u=0;for(;u+4<=a.length;){const{s0:e,s1:t,s2:n,s3:r}=T(c,a[u+0],a[u+1],a[u+2],a[u+3]);i[u++]=e,i[u++]=t,i[u++]=n,i[u++]=r}if(n){const e=_(t.subarray(4*u)),{s0:n,s1:r,s2:s,s3:a}=T(c,e[0],e[1],e[2],e[3]);i[u++]=n,i[u++]=r,i[u++]=s,i[u++]=a}return(0,s.clean)(c),o},decrypt(t,r){k(t);const a=w(e);r=(0,s.getOutput)(t.length,r);const i=[a];(0,s.isAligned32)(t)||i.push(t=(0,s.copyBytes)(t)),(0,s.complexOverlapBytes)(t,r);const o=(0,s.u32)(t),c=(0,s.u32)(r);for(let e=0;e+4<=o.length;){const{s0:t,s1:n,s2:r,s3:s}=S(a,o[e+0],o[e+1],o[e+2],o[e+3]);c[e++]=t,c[e++]=n,c[e++]=r,c[e++]=s}return(0,s.clean)(...i),A(r,n)}}}),n.cbc=(0,s.wrapCipher)({blockSize:16,nonceLength:16},function(e,t,n={}){const r=!n.disablePadding;return{encrypt(n,a){const i=y(e),{b:o,o:c,out:u}=I(n,r,a);let l=t;const d=[i];(0,s.isAligned32)(l)||d.push(l=(0,s.copyBytes)(l));const f=(0,s.u32)(l);let h=f[0],p=f[1],m=f[2],g=f[3],b=0;for(;b+4<=o.length;)h^=o[b+0],p^=o[b+1],m^=o[b+2],g^=o[b+3],({s0:h,s1:p,s2:m,s3:g}=T(i,h,p,m,g)),c[b++]=h,c[b++]=p,c[b++]=m,c[b++]=g;if(r){const e=_(n.subarray(4*b));h^=e[0],p^=e[1],m^=e[2],g^=e[3],({s0:h,s1:p,s2:m,s3:g}=T(i,h,p,m,g)),c[b++]=h,c[b++]=p,c[b++]=m,c[b++]=g}return(0,s.clean)(...d),u},decrypt(n,a){k(n);const i=w(e);let o=t;const c=[i];(0,s.isAligned32)(o)||c.push(o=(0,s.copyBytes)(o));const u=(0,s.u32)(o);a=(0,s.getOutput)(n.length,a),(0,s.isAligned32)(n)||c.push(n=(0,s.copyBytes)(n)),(0,s.complexOverlapBytes)(n,a);const l=(0,s.u32)(n),d=(0,s.u32)(a);let f=u[0],h=u[1],p=u[2],m=u[3];for(let e=0;e+4<=l.length;){const t=f,n=h,r=p,s=m;f=l[e+0],h=l[e+1],p=l[e+2],m=l[e+3];const{s0:a,s1:o,s2:c,s3:u}=S(i,f,h,p,m);d[e++]=a^t,d[e++]=o^n,d[e++]=c^r,d[e++]=u^s}return(0,s.clean)(...c),A(a,r)}}}),n.cfb=(0,s.wrapCipher)({blockSize:16,nonceLength:16},function(e,t){function n(n,r,i){(0,s.abytes)(n);const o=n.length;if(i=(0,s.getOutput)(o,i),(0,s.overlapBytes)(n,i))throw new Error("overlapping src and dst not supported.");const c=y(e);let u=t;const l=[c];(0,s.isAligned32)(u)||l.push(u=(0,s.copyBytes)(u)),(0,s.isAligned32)(n)||l.push(n=(0,s.copyBytes)(n));const d=(0,s.u32)(n),f=(0,s.u32)(i),h=r?f:d,p=(0,s.u32)(u);let m=p[0],g=p[1],b=p[2],w=p[3];for(let e=0;e+4<=d.length;){const{s0:t,s1:n,s2:r,s3:s}=T(c,m,g,b,w);f[e+0]=d[e+0]^t,f[e+1]=d[e+1]^n,f[e+2]=d[e+2]^r,f[e+3]=d[e+3]^s,m=h[e++],g=h[e++],b=h[e++],w=h[e++]}const v=a*Math.floor(d.length/4);if(v<o){({s0:m,s1:g,s2:b,s3:w}=T(c,m,g,b,w));const e=(0,s.u8)(new Uint32Array([m,g,b,w]));for(let t=v,r=0;t<o;t++,r++)i[t]=n[t]^e[r];(0,s.clean)(e)}return(0,s.clean)(...l),i}return{encrypt:(e,t)=>n(e,!0,t),decrypt:(e,t)=>n(e,!1,t)}}),n.gcm=(0,s.wrapCipher)({blockSize:16,nonceLength:12,tagLength:16,varSizeNonce:!0},function(e,t,n){if(t.length<8)throw new Error("aes/gcm: invalid nonce length");function a(e,t,s){const a=C(r.ghash,!1,e,s,n);for(let e=0;e<t.length;e++)a[e]^=t[e];return a}function o(){const n=y(e),a=i.slice(),o=i.slice();if(P(n,!1,o,o,a),12===t.length)o.set(t);else{const e=i.slice(),n=(0,s.createView)(e);(0,s.setBigUint64)(n,8,BigInt(8*t.length),!1);const c=r.ghash.create(a).update(t).update(e);c.digestInto(o),c.destroy()}return{xk:n,authKey:a,counter:o,tagMask:P(n,!1,o,i)}}return{encrypt(e){const{xk:t,authKey:n,counter:r,tagMask:i}=o(),c=new Uint8Array(e.length+16),u=[t,n,r,i];(0,s.isAligned32)(e)||u.push(e=(0,s.copyBytes)(e)),P(t,!1,r,e,c.subarray(0,e.length));const l=a(n,i,c.subarray(0,c.length-16));return u.push(l),c.set(l,e.length),(0,s.clean)(...u),c},decrypt(e){const{xk:t,authKey:n,counter:r,tagMask:i}=o(),c=[t,n,i,r];(0,s.isAligned32)(e)||c.push(e=(0,s.copyBytes)(e));const u=e.subarray(0,-16),l=e.subarray(-16),d=a(n,i,u);if(c.push(d),!(0,s.equalBytes)(d,l))throw new Error("aes/gcm: invalid ghash tag");const f=P(t,!1,r,u);return(0,s.clean)(...c),f}}});const j=(e,t,n)=>r=>{if(!Number.isSafeInteger(r)||t>r||r>n){throw new Error(e+": expected value in range "+("["+t+".."+n+"]")+", got "+r)}};function R(e){return e instanceof Uint32Array||ArrayBuffer.isView(e)&&"Uint32Array"===e.constructor.name}function O(e,t){if((0,s.abytes)(t,16),!R(e))throw new Error("_encryptBlock accepts result of expandKeyLE");const n=(0,s.u32)(t);let{s0:r,s1:a,s2:i,s3:o}=T(e,n[0],n[1],n[2],n[3]);return n[0]=r,n[1]=a,n[2]=i,n[3]=o,t}function B(e,t){if((0,s.abytes)(t,16),!R(e))throw new Error("_decryptBlock accepts result of expandKeyLE");const n=(0,s.u32)(t);let{s0:r,s1:a,s2:i,s3:o}=S(e,n[0],n[1],n[2],n[3]);return n[0]=r,n[1]=a,n[2]=i,n[3]=o,t}n.gcmsiv=(0,s.wrapCipher)({blockSize:16,nonceLength:12,tagLength:16,varSizeNonce:!0},function(e,t,n){const a=j("AAD",0,2**36),i=j("plaintext",0,2**36),o=j("nonce",12,12),c=j("ciphertext",16,2**36+16);function u(){const n=y(e),r=new Uint8Array(e.length),a=new Uint8Array(16),i=[n,r];let o=t;(0,s.isAligned32)(o)||i.push(o=(0,s.copyBytes)(o));const c=(0,s.u32)(o);let u=0,l=c[0],d=c[1],f=c[2],h=0;for(const e of[a,r].map(s.u32)){const t=(0,s.u32)(e);for(let e=0;e<t.length;e+=2){const{s0:r,s1:s}=T(n,u,l,d,f);t[e+0]=r,t[e+1]=s,u=++h}}const p={authKey:a,encKey:y(r)};return(0,s.clean)(...i),p}function l(e,a,i){const o=C(r.polyval,!0,a,i,n);for(let e=0;e<12;e++)o[e]^=t[e];o[15]&=127;const c=(0,s.u32)(o);let u=c[0],l=c[1],d=c[2],f=c[3];return({s0:u,s1:l,s2:d,s3:f}=T(e,u,l,d,f)),c[0]=u,c[1]=l,c[2]=d,c[3]=f,o}function d(e,t,n){let r=(0,s.copyBytes)(t);r[15]|=128;const a=P(e,!0,r,n);return(0,s.clean)(r),a}return(0,s.abytes)(e,16,24,32),o(t.length),n!==undefined&&a(n.length),{encrypt(e){i(e.length);const{encKey:t,authKey:n}=u(),r=l(t,n,e),a=[t,n,r];(0,s.isAligned32)(e)||a.push(e=(0,s.copyBytes)(e));const o=new Uint8Array(e.length+16);return o.set(r,e.length),o.set(d(t,r,e)),(0,s.clean)(...a),o},decrypt(e){c(e.length);const t=e.subarray(-16),{encKey:n,authKey:r}=u(),a=[n,r];(0,s.isAligned32)(e)||a.push(e=(0,s.copyBytes)(e));const i=d(n,t,e.subarray(0,-16)),o=l(n,r,i);if(a.push(o),!(0,s.equalBytes)(t,o))throw(0,s.clean)(...a),new Error("invalid polyval tag");return(0,s.clean)(...a),i}}}),n.siv=n.gcmsiv;const F={encrypt(e,t){if(t.length>=2**32)throw new Error("plaintext should be less than 4gb");const n=y(e);if(16===t.length)O(n,t);else{const e=(0,s.u32)(t);let r=e[0],a=e[1];for(let t=0,s=1;t<6;t++)for(let t=2;t<e.length;t+=2,s++){const{s0:i,s1:o,s2:c,s3:u}=T(n,r,a,e[t],e[t+1]);r=i,a=o^h(s),e[t]=c,e[t+1]=u}e[0]=r,e[1]=a}n.fill(0)},decrypt(e,t){if(t.length-8>=2**32)throw new Error("ciphertext should be less than 4gb");const n=w(e),r=t.length/8-1;if(1===r)B(n,t);else{const e=(0,s.u32)(t);let a=e[0],i=e[1];for(let t=0,s=6*r;t<6;t++)for(let t=2*r;t>=1;t-=2,s--){i^=h(s);const{s0:r,s1:o,s2:c,s3:u}=S(n,a,i,e[t],e[t+1]);a=r,i=o,e[t]=c,e[t+1]=u}e[0]=a,e[1]=i}n.fill(0)}},L=new Uint8Array(8).fill(166);n.aeskw=(0,s.wrapCipher)({blockSize:8},e=>({encrypt(t){if(!t.length||t.length%8!=0)throw new Error("invalid plaintext length");if(8===t.length)throw new Error("8-byte keys not allowed in AESKW, use AESKWP instead");const n=(0,s.concatBytes)(L,t);return F.encrypt(e,n),n},decrypt(t){if(t.length%8!=0||t.length<24)throw new Error("invalid ciphertext length");const n=(0,s.copyBytes)(t);if(F.decrypt(e,n),!(0,s.equalBytes)(n.subarray(0,8),L))throw new Error("integrity check failed");return n.subarray(0,8).fill(0),n.subarray(8)}}));const M=2790873510;n.aeskwp=(0,s.wrapCipher)({blockSize:8},e=>({encrypt(t){if(!t.length)throw new Error("invalid plaintext length");const n=8*Math.ceil(t.length/8),r=new Uint8Array(8+n);r.set(t,8);const a=(0,s.u32)(r);return a[0]=M,a[1]=h(t.length),F.encrypt(e,r),r},decrypt(t){if(t.length<16)throw new Error("invalid ciphertext length");const n=(0,s.copyBytes)(t),r=(0,s.u32)(n);F.decrypt(e,n);const a=h(r[1])>>>0,i=8*Math.ceil(a/8);if(r[0]!==M||n.length-8!==i)throw new Error("integrity check failed");for(let e=a;e<i;e++)if(0!==n[8+e])throw new Error("integrity check failed");return n.subarray(0,8).fill(0),n.subarray(8,8+a)}})),n.unsafe={expandKeyLE:y,expandKeyDecLE:w,encrypt:T,decrypt:S,encryptBlock:O,decryptBlock:B,ctrCounter:x,ctr32:P}}}},{package:"@noble/ciphers",file:"node_modules/@noble/ciphers/aes.js"}],[2864,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.crypto=void 0,n.crypto="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:undefined}}},{package:"@noble/ciphers",file:"node_modules/@noble/ciphers/crypto.js"}],[2865,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){function r(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function s(e){if("boolean"!=typeof e)throw new Error(`boolean expected, not ${e}`)}function a(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function i(e,...t){if(!r(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function o(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}
/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */
Object.defineProperty(n,"__esModule",{value:!0}),n.wrapCipher=n.Hash=n.nextTick=n.isLE=void 0,n.isBytes=r,n.abool=s,n.anumber=a,n.abytes=i,n.ahash=function(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.createHasher");a(e.outputLen),a(e.blockLen)},n.aexists=function(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")},n.aoutput=function(e,t){i(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)},n.u8=function(e){return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)},n.u32=function(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))},n.clean=function(...e){for(let t=0;t<e.length;t++)e[t].fill(0)},n.createView=o,n.bytesToHex=l,n.hexToBytes=h,n.hexToNumber=p,n.bytesToNumberBE=function(e){return p(l(e))},n.numberToBytesBE=function(e,t){return h(e.toString(16).padStart(2*t,"0"))},n.utf8ToBytes=m,n.bytesToUtf8=function(e){return(new TextDecoder).decode(e)},n.toBytes=function(e){if("string"==typeof e)e=m(e);else{if(!r(e))throw new Error("Uint8Array expected, got "+typeof e);e=w(e)}return e},n.overlapBytes=g,n.complexOverlapBytes=function(e,t){if(g(e,t)&&e.byteOffset<t.byteOffset)throw new Error("complex overlap of input and output is not supported")},n.concatBytes=function(...e){let t=0;for(let n=0;n<e.length;n++){const r=e[n];i(r),t+=r.length}const n=new Uint8Array(t);for(let t=0,r=0;t<e.length;t++){const s=e[t];n.set(s,r),r+=s.length}return n},n.checkOpts=function(e,t){if(null==t||"object"!=typeof t)throw new Error("options must be defined");return Object.assign(e,t)},n.equalBytes=function(e,t){if(e.length!==t.length)return!1;let n=0;for(let r=0;r<e.length;r++)n|=e[r]^t[r];return 0===n},n.getOutput=function(e,t,n=!0){if(t===undefined)return new Uint8Array(e);if(t.length!==e)throw new Error("invalid output length, expected "+e+", got: "+t.length);if(n&&!y(t))throw new Error("invalid output, must be aligned");return t},n.setBigUint64=b,n.u64Lengths=function(e,t,n){s(n);const r=new Uint8Array(16),a=o(r);return b(a,0,BigInt(t),n),b(a,8,BigInt(e),n),r},n.isAligned32=y,n.copyBytes=w,n.isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0];const c=(()=>"function"==typeof Uint8Array.from([]).toHex&&"function"==typeof Uint8Array.fromHex)(),u=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function l(e){if(i(e),c)return e.toHex();let t="";for(let n=0;n<e.length;n++)t+=u[e[n]];return t}const d={_0:48,_9:57,A:65,F:70,a:97,f:102};function f(e){return e>=d._0&&e<=d._9?e-d._0:e>=d.A&&e<=d.F?e-(d.A-10):e>=d.a&&e<=d.f?e-(d.a-10):void 0}function h(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);if(c)return Uint8Array.fromHex(e);const t=e.length,n=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let t=0,s=0;t<n;t++,s+=2){const n=f(e.charCodeAt(s)),a=f(e.charCodeAt(s+1));if(n===undefined||a===undefined){const t=e[s]+e[s+1];throw new Error('hex string expected, got non-hex character "'+t+'" at index '+s)}r[t]=16*n+a}return r}function p(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);return BigInt(""===e?"0":"0x"+e)}function m(e){if("string"!=typeof e)throw new Error("string expected");return new Uint8Array((new TextEncoder).encode(e))}function g(e,t){return e.buffer===t.buffer&&e.byteOffset<t.byteOffset+t.byteLength&&t.byteOffset<e.byteOffset+e.byteLength}n.nextTick=async()=>{};n.Hash=class{};function b(e,t,n,r){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,n,r);const s=BigInt(32),a=BigInt(4294967295),i=Number(n>>s&a),o=Number(n&a),c=r?4:0,u=r?0:4;e.setUint32(t+c,i,r),e.setUint32(t+u,o,r)}function y(e){return e.byteOffset%4==0}function w(e){return Uint8Array.from(e)}n.wrapCipher=(e,t)=>{function r(r,...s){if(i(r),!n.isLE)throw new Error("Non little-endian hardware is not yet supported");if(e.nonceLength!==undefined){const t=s[0];if(!t)throw new Error("nonce / iv required");e.varSizeNonce?i(t):i(t,e.nonceLength)}const a=e.tagLength;a&&s[1]!==undefined&&i(s[1]);const o=t(r,...s),c=(e,t)=>{if(t!==undefined){if(2!==e)throw new Error("cipher output not supported");i(t)}};let u=!1;return{encrypt(e,t){if(u)throw new Error("cannot encrypt() twice with same key + nonce");return u=!0,i(e),c(o.encrypt.length,t),o.encrypt(e,t)},decrypt(e,t){if(i(e),a&&e.length<a)throw new Error("invalid ciphertext length: smaller than tagLength="+a);return c(o.decrypt.length,t),o.decrypt(e,t)}}}return Object.assign(r,e),r}}}},{package:"@noble/ciphers",file:"node_modules/@noble/ciphers/utils.js"}],[2866,{"./utils.js":2865,"@noble/ciphers/crypto":2864},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.gcm=n.ctr=n.cbc=n.utils=void 0,n.randomBytes=a,n.getWebcryptoSubtle=i,n.managedNonce=function(e){const{nonceLength:t}=e;return(0,s.anumber)(t),(n,...r)=>({encrypt(i,...o){const c=a(t),u=e(n,c,...r).encrypt(i,...o),l=(0,s.concatBytes)(c,u);return u.fill(0),l},decrypt(s,...a){const i=s.subarray(0,t),o=s.subarray(t);return e(n,i,...r).decrypt(o,...a)}})};const r=e("@noble/ciphers/crypto"),s=e("./utils.js");function a(e=32){if(r.crypto&&"function"==typeof r.crypto.getRandomValues)return r.crypto.getRandomValues(new Uint8Array(e));if(r.crypto&&"function"==typeof r.crypto.randomBytes)return Uint8Array.from(r.crypto.randomBytes(e));throw new Error("crypto.getRandomValues must be defined")}function i(){if(r.crypto&&"object"==typeof r.crypto.subtle&&null!=r.crypto.subtle)return r.crypto.subtle;throw new Error("crypto.subtle must be defined")}n.utils={async encrypt(e,t,n,r){const s=i(),a=await s.importKey("raw",e,t,!0,["encrypt"]),o=await s.encrypt(n,a,r);return new Uint8Array(o)},async decrypt(e,t,n,r){const s=i(),a=await s.importKey("raw",e,t,!0,["decrypt"]),o=await s.decrypt(n,a,r);return new Uint8Array(o)}};const o="AES-CBC",c="AES-CTR",u="AES-GCM";function l(e){return(t,r,a)=>{(0,s.abytes)(t),(0,s.abytes)(r);const i={name:e,length:8*t.length},l=function(e,t,n){if(e===o)return{name:o,iv:t};if(e===c)return{name:c,counter:t,length:64};if(e===u)return n?{name:u,iv:t,additionalData:n}:{name:u,iv:t};throw new Error("unknown aes block mode")}(e,r,a);let d=!1;return{encrypt(e){if((0,s.abytes)(e),d)throw new Error("Cannot encrypt() twice with same key / nonce");return d=!0,n.utils.encrypt(t,i,l,e)},decrypt:e=>((0,s.abytes)(e),n.utils.decrypt(t,i,l,e))}}}n.cbc=l(o),n.ctr=l(c),n.gcm=(()=>l(u))()}}},{package:"@noble/ciphers",file:"node_modules/@noble/ciphers/webcrypto.js"}],[2867,{"./abstract/weierstrass.js":2874},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getHash=function(e){return{hash:e}},n.createCurve=function(e,t){const n=t=>(0,r.weierstrass)({...e,hash:t});return{...n(t),create:n}};
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const r=e("./abstract/weierstrass.js")}}},{package:"@noble/curves",file:"node_modules/@noble/curves/_shortw_utils.js"}],[2868,{"../utils.js":2877,"./modular.js":2871},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.wNAF=void 0,n.negateCt=o,n.normalizeZ=function(e,t){const n=(0,s.FpInvertBatch)(e.Fp,t.map(e=>e.Z));return t.map((t,r)=>e.fromAffine(t.toAffine(n[r])))},n.mulEndoUnsafe=function(e,t,n,r){let s=t,o=e.ZERO,c=e.ZERO;for(;n>a||r>a;)n&i&&(o=o.add(s)),r&i&&(c=c.add(s)),s=s.double(),n>>=i,r>>=i;return{p1:o,p2:c}},n.pippenger=function(e,t,n,s){d(n,e),f(s,t);const a=n.length,i=s.length;if(a!==i)throw new Error("arrays of points and scalars must have equal length");const o=e.ZERO,c=(0,r.bitLen)(BigInt(a));let u=1;c>12?u=c-3:c>4?u=c-2:c>0&&(u=2);const l=(0,r.bitMask)(u),h=new Array(Number(l)+1).fill(o),p=Math.floor((t.BITS-1)/u)*u;let m=o;for(let e=p;e>=0;e-=u){h.fill(o);for(let t=0;t<i;t++){const r=s[t],a=Number(r>>BigInt(e)&l);h[a]=h[a].add(n[t])}let t=o;for(let e=h.length-1,n=o;e>0;e--)n=n.add(h[e]),t=t.add(n);if(m=m.add(t),0!==e)for(let e=0;e<u;e++)m=m.double()}return m},n.precomputeMSMUnsafe=function(e,t,n,s){c(s,t.BITS),d(n,e);const a=e.ZERO,i=2**s-1,o=Math.ceil(t.BITS/s),u=(0,r.bitMask)(s),l=n.map(e=>{const t=[];for(let n=0,r=e;n<i;n++)t.push(r),r=r.add(e);return t});return e=>{if(f(e,t),e.length>n.length)throw new Error("array of scalars must be smaller than array of points");let r=a;for(let t=0;t<o;t++){if(r!==a)for(let e=0;e<s;e++)r=r.double();const n=BigInt(o*s-(t+1)*s);for(let t=0;t<e.length;t++){const s=e[t],a=Number(s>>n&u);a&&(r=r.add(l[t][a-1]))}}return r}},n.validateBasic=function(e){return(0,s.validateField)(e.Fp),(0,r.validateObject)(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...(0,s.nLength)(e.n,e.nBitLength),...e,p:e.Fp.ORDER})},n._createCurveFields=function(e,t,n={}){if(!t||"object"!=typeof t)throw new Error(`expected valid ${e} CURVE object`);for(const e of["p","n","h"]){const n=t[e];if(!("bigint"==typeof n&&n>a))throw new Error(`CURVE.${e} must be positive bigint`)}const r=b(t.p,n.Fp),s=b(t.n,n.Fn),i=["Gx","Gy","a","weierstrass"===e?"b":"d"];for(const e of i)if(!r.isValid(t[e]))throw new Error(`CURVE.${e} must be valid field element of CURVE.Fp`);return{Fp:r,Fn:s}};
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const r=e("../utils.js"),s=e("./modular.js"),a=BigInt(0),i=BigInt(1);function o(e,t){const n=t.negate();return e?n:t}function c(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function u(e,t){c(e,t);const n=2**e;return{windows:Math.ceil(t/e)+1,windowSize:2**(e-1),mask:(0,r.bitMask)(e),maxNumber:n,shiftBy:BigInt(e)}}function l(e,t,n){const{windowSize:r,mask:s,maxNumber:a,shiftBy:o}=n;let c=Number(e&s),u=e>>o;c>r&&(c-=a,u+=i);const l=t*r;return{nextN:u,offset:l+Math.abs(c)-1,isZero:0===c,isNeg:c<0,isNegF:t%2!=0,offsetF:l}}function d(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach((e,n)=>{if(!(e instanceof t))throw new Error("invalid point at index "+n)})}function f(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach((e,n)=>{if(!t.isValid(e))throw new Error("invalid scalar at index "+n)})}const h=new WeakMap,p=new WeakMap;function m(e){return p.get(e)||1}function g(e){if(e!==a)throw new Error("invalid wNAF")}function b(e,t){if(t){if(t.ORDER!==e)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return(0,s.validateField)(t),t}return(0,s.Field)(e)}n.wNAF=class{constructor(e,t){this.BASE=e.BASE,this.ZERO=e.ZERO,this.Fn=e.Fn,this.bits=t}_unsafeLadder(e,t,n=this.ZERO){let r=e;for(;t>a;)t&i&&(n=n.add(r)),r=r.double(),t>>=i;return n}precomputeWindow(e,t){const{windows:n,windowSize:r}=u(t,this.bits),s=[];let a=e,i=a;for(let e=0;e<n;e++){i=a,s.push(i);for(let e=1;e<r;e++)i=i.add(a),s.push(i);a=i.double()}return s}wNAF(e,t,n){if(!this.Fn.isValid(n))throw new Error("invalid scalar");let r=this.ZERO,s=this.BASE;const a=u(e,this.bits);for(let e=0;e<a.windows;e++){const{nextN:i,offset:c,isZero:u,isNeg:d,isNegF:f,offsetF:h}=l(n,e,a);n=i,u?s=s.add(o(f,t[h])):r=r.add(o(d,t[c]))}return g(n),{p:r,f:s}}wNAFUnsafe(e,t,n,r=this.ZERO){const s=u(e,this.bits);for(let e=0;e<s.windows&&n!==a;e++){const{nextN:a,offset:i,isZero:o,isNeg:c}=l(n,e,s);if(n=a,!o){const e=t[i];r=r.add(c?e.negate():e)}}return g(n),r}getPrecomputes(e,t,n){let r=h.get(t);return r||(r=this.precomputeWindow(t,e),1!==e&&("function"==typeof n&&(r=n(r)),h.set(t,r))),r}cached(e,t,n){const r=m(e);return this.wNAF(r,this.getPrecomputes(r,e,n),t)}unsafe(e,t,n,r){const s=m(e);return 1===s?this._unsafeLadder(e,t,r):this.wNAFUnsafe(s,this.getPrecomputes(s,e,n),t,r)}createCache(e,t){c(t,this.bits),p.set(e,t),h.delete(e)}hasCache(e){return 1!==m(e)}}}}},{package:"@noble/curves",file:"node_modules/@noble/curves/abstract/curve.js"}],[2869,{"../utils.js":2877,"./curve.js":2868,"./modular.js":2871},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.PrimeEdwardsPoint=void 0,n.edwards=l,n.eddsa=d,n.twistedEdwards=function(e){const{CURVE:t,curveOpts:n,hash:r,eddsaOpts:s}=function(e){const t={a:e.a,d:e.d,p:e.Fp.ORDER,n:e.n,h:e.h,Gx:e.Gx,Gy:e.Gy},n=e.Fp,r=(0,a.Field)(t.n,e.nBitLength,!0),s={Fp:n,Fn:r,uvRatio:e.uvRatio},i={randomBytes:e.randomBytes,adjustScalarBytes:e.adjustScalarBytes,domain:e.domain,prehash:e.prehash,mapToCurve:e.mapToCurve};return{CURVE:t,curveOpts:s,hash:e.hash,eddsaOpts:i}}(e),i=d(l(t,n),r,s);return function(e,t){const n=Object.assign({},t,{ExtendedPoint:t.Point,CURVE:e});return n}(e,i)};
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const r=e("../utils.js"),s=e("./curve.js"),a=e("./modular.js"),i=BigInt(0),o=BigInt(1),c=BigInt(2),u=BigInt(8);function l(e,t={}){const{Fp:n,Fn:a}=(0,s._createCurveFields)("edwards",e,t),{h:l,n:d}=e;(0,r._validateObject)(t,{},{uvRatio:"function"});const f=c<<BigInt(8*a.BYTES)-o,h=e=>n.create(e),p=t.uvRatio||((e,t)=>{try{return{isValid:!0,value:n.sqrt(n.div(e,t))}}catch(e){return{isValid:!1,value:i}}});if(!function(e,t,n,r){const s=e.sqr(n),a=e.sqr(r),i=e.add(e.mul(t.a,s),a),o=e.add(e.ONE,e.mul(t.d,e.mul(s,a)));return e.eql(i,o)}(n,e,e.Gx,e.Gy))throw new Error("bad curve params: generator point");function m(e,t,n=!1){const s=n?o:i;return(0,r.aInRange)("coordinate "+e,t,s,f),t}function g(e){if(!(e instanceof w))throw new Error("ExtendedPoint expected")}const b=(0,r.memoized)((e,t)=>{const{X:r,Y:s,Z:a}=e,c=e.is0();null==t&&(t=c?u:n.inv(a));const l=h(r*t),d=h(s*t),f=n.mul(a,t);if(c)return{x:i,y:o};if(f!==o)throw new Error("invZ was invalid");return{x:l,y:d}}),y=(0,r.memoized)(t=>{const{a:n,d:r}=e;if(t.is0())throw new Error("bad point: ZERO");const{X:s,Y:a,Z:i,T:o}=t,c=h(s*s),u=h(a*a),l=h(i*i),d=h(l*l),f=h(c*n);if(h(l*h(f+u))!==h(d+h(r*h(c*u))))throw new Error("bad point: equation left != right (1)");if(h(s*a)!==h(i*o))throw new Error("bad point: equation left != right (2)");return!0});class w{constructor(e,t,n,r){this.X=m("x",e),this.Y=m("y",t),this.Z=m("z",n,!0),this.T=m("t",r),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}get ex(){return this.X}get ey(){return this.Y}get ez(){return this.Z}get et(){return this.T}static normalizeZ(e){return(0,s.normalizeZ)(w,e)}static msm(e,t){return(0,s.pippenger)(w,a,e,t)}_setWindowSize(e){this.precompute(e)}static fromAffine(e){if(e instanceof w)throw new Error("extended point not allowed");const{x:t,y:n}=e||{};return m("x",t),m("y",n),new w(t,n,o,h(t*n))}precompute(e=8,t=!0){return v.createCache(this,e),t||this.multiply(c),this}assertValidity(){y(this)}equals(e){g(e);const{X:t,Y:n,Z:r}=this,{X:s,Y:a,Z:i}=e,o=h(t*i),c=h(s*r),u=h(n*i),l=h(a*r);return o===c&&u===l}is0(){return this.equals(w.ZERO)}negate(){return new w(h(-this.X),this.Y,this.Z,h(-this.T))}double(){const{a:t}=e,{X:n,Y:r,Z:s}=this,a=h(n*n),i=h(r*r),o=h(c*h(s*s)),u=h(t*a),l=n+r,d=h(h(l*l)-a-i),f=u+i,p=f-o,m=u-i,g=h(d*p),b=h(f*m),y=h(d*m),v=h(p*f);return new w(g,b,v,y)}add(t){g(t);const{a:n,d:r}=e,{X:s,Y:a,Z:i,T:o}=this,{X:c,Y:u,Z:l,T:d}=t,f=h(s*c),p=h(a*u),m=h(o*r*d),b=h(i*l),y=h((s+a)*(c+u)-f-p),v=b-m,E=b+m,T=h(p-n*f),S=h(y*v),x=h(E*T),P=h(y*T),k=h(v*E);return new w(S,x,k,P)}subtract(e){return this.add(e.negate())}multiply(e){const t=e;(0,r.aInRange)("scalar",t,o,d);const{p:n,f:a}=v.cached(this,t,e=>(0,s.normalizeZ)(w,e));return(0,s.normalizeZ)(w,[n,a])[0]}multiplyUnsafe(e,t=w.ZERO){const n=e;return(0,r.aInRange)("scalar",n,i,d),n===i?w.ZERO:this.is0()||n===o?this:v.unsafe(this,n,e=>(0,s.normalizeZ)(w,e),t)}isSmallOrder(){return this.multiplyUnsafe(l).is0()}isTorsionFree(){return v.unsafe(this,d).is0()}toAffine(e){return b(this,e)}clearCofactor(){return l===o?this:this.multiplyUnsafe(l)}static fromBytes(e,t=!1){return(0,r.abytes)(e),w.fromHex(e,t)}static fromHex(t,s=!1){const{d:a,a:c}=e,u=n.BYTES;t=(0,r.ensureBytes)("pointHex",t,u),(0,r.abool)("zip215",s);const l=t.slice(),d=t[u-1];l[u-1]=-129&d;const m=(0,r.bytesToNumberLE)(l),g=s?f:n.ORDER;(0,r.aInRange)("pointHex.y",m,i,g);const b=h(m*m),y=h(b-o),v=h(a*b-c);let{isValid:E,value:T}=p(y,v);if(!E)throw new Error("Point.fromHex: invalid y coordinate");const S=(T&o)===o,x=!!(128&d);if(!s&&T===i&&x)throw new Error("Point.fromHex: x=0 and x_0=1");return x!==S&&(T=h(-T)),w.fromAffine({x:T,y:m})}toBytes(){const{x:e,y:t}=this.toAffine(),s=(0,r.numberToBytesLE)(t,n.BYTES);return s[s.length-1]|=e&o?128:0,s}toRawBytes(){return this.toBytes()}toHex(){return(0,r.bytesToHex)(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}w.BASE=new w(e.Gx,e.Gy,o,h(e.Gx*e.Gy)),w.ZERO=new w(i,o,o,i),w.Fp=n,w.Fn=a;const v=new s.wNAF(w,8*a.BYTES);return w}function d(e,t,n){if("function"!=typeof t)throw new Error('"hash" function param is required');(0,r._validateObject)(n,{},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});const{prehash:s}=n,{BASE:a,Fp:c,Fn:u}=e,l=u.ORDER,d=n.randomBytes||r.randomBytes,f=n.adjustScalarBytes||(e=>e),h=n.domain||((e,t,n)=>{if((0,r.abool)("phflag",n),t.length||n)throw new Error("Contexts/pre-hash are not supported");return e});function p(e){return u.create(e)}function m(e){return p((0,r.bytesToNumberLE)(e))}function g(e){const{head:n,prefix:s,scalar:i}=function(e){const n=c.BYTES;e=(0,r.ensureBytes)("private key",e,n);const s=(0,r.ensureBytes)("hashed private key",t(e),2*n),a=f(s.slice(0,n));return{head:a,prefix:s.slice(n,2*n),scalar:m(a)}}(e),o=a.multiply(i),u=o.toBytes();return{head:n,prefix:s,scalar:i,point:o,pointBytes:u}}function b(e){return g(e).pointBytes}function y(e=Uint8Array.of(),...n){const a=(0,r.concatBytes)(...n);return m(t(h(a,(0,r.ensureBytes)("context",e),!!s)))}const w={zip215:!0};a.precompute(8);const v=c.BYTES,E={secret:v,public:v,signature:2*v,seed:v};function T(e=d(E.seed)){return e}const S={getExtendedPublicKey:g,randomSecretKey:T,isValidSecretKey:function(e){try{return!!u.fromBytes(e,!1)}catch(e){return!1}},isValidPublicKey:function(t,n){try{return!!e.fromBytes(t,n)}catch(e){return!1}},randomPrivateKey:T,toMontgomery(t){const{y:n}=e.fromBytes(t),r=32===v;if(!r&&57!==v)throw new Error("only defined for 25519 and 448");const s=r?c.div(o+n,o-n):c.div(n-o,n+o);return c.toBytes(s)},toMontgomeryPriv(e){(0,r.abytes)(e,v);const n=t(e.subarray(0,v));return f(n).subarray(0,v)},precompute:(t=8,n=e.BASE)=>n.precompute(t,!1)};return Object.freeze({keygen:function(e){const t=S.randomSecretKey(e);return{secretKey:t,publicKey:b(t)}},getPublicKey:b,sign:function(e,t,n={}){e=(0,r.ensureBytes)("message",e),s&&(e=s(e));const{prefix:o,scalar:u,pointBytes:d}=g(t),f=y(n.context,o,e),h=a.multiply(f).toBytes(),m=p(f+y(n.context,h,d,e)*u);(0,r.aInRange)("signature.s",m,i,l);const b=c.BYTES,w=(0,r.concatBytes)(h,(0,r.numberToBytesLE)(m,b));return(0,r.ensureBytes)("result",w,2*b)},verify:function(t,n,i,o=w){const{context:u,zip215:l}=o,d=c.BYTES;t=(0,r.ensureBytes)("signature",t,2*d),n=(0,r.ensureBytes)("message",n),i=(0,r.ensureBytes)("publicKey",i,d),l!==undefined&&(0,r.abool)("zip215",l),s&&(n=s(n));const f=(0,r.bytesToNumberLE)(t.slice(d,2*d));let h,p,m;try{h=e.fromHex(i,l),p=e.fromHex(t.slice(0,d),l),m=a.multiplyUnsafe(f)}catch(e){return!1}if(!l&&h.isSmallOrder())return!1;const g=y(u,p.toBytes(),h.toBytes(),n);return p.add(h.multiplyUnsafe(g)).subtract(m).clearCofactor().is0()},utils:S,Point:e,info:{type:"edwards",lengths:E}})}n.PrimeEdwardsPoint=class{constructor(e){this.ep=e}static fromBytes(e){throw new Error("fromBytes must be implemented by subclass")}static fromHex(e){throw new Error("fromHex must be implemented by subclass")}get x(){return this.toAffine().x}get y(){return this.toAffine().y}clearCofactor(){return this}assertValidity(){this.ep.assertValidity()}toAffine(e){return this.ep.toAffine(e)}toRawBytes(){return this.toBytes()}toHex(){return(0,r.bytesToHex)(this.toBytes())}toString(){return this.toHex()}isTorsionFree(){return!0}isSmallOrder(){return!1}add(e){return this.assertSame(e),this.init(this.ep.add(e.ep))}subtract(e){return this.assertSame(e),this.init(this.ep.subtract(e.ep))}multiply(e){return this.init(this.ep.multiply(e))}multiplyUnsafe(e){return this.init(this.ep.multiplyUnsafe(e))}double(){return this.init(this.ep.double())}negate(){return this.init(this.ep.negate())}precompute(e,t){return this.init(this.ep.precompute(e,t))}}}}},{package:"@noble/curves",file:"node_modules/@noble/curves/abstract/edwards.js"}],[2870,{"../utils.js":2877,"./modular.js":2871},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n._DST_scalar=void 0,n.expand_message_xmd=l,n.expand_message_xof=d,n.hash_to_field=f,n.isogenyMap=function(e,t){const n=t.map(e=>Array.from(e).reverse());return(t,r)=>{const[a,i,o,c]=n.map(n=>n.reduce((n,r)=>e.add(e.mul(n,t),r))),[u,l]=(0,s.FpInvertBatch)(e,[i,c],!0);return t=e.mul(a,u),r=e.mul(r,e.mul(o,l)),{x:t,y:r}}},n.createHasher=function(e,t,r){if("function"!=typeof t)throw new Error("mapToCurve() must be defined");function s(n){return e.fromAffine(t(n))}function a(t){const n=t.clearCofactor();return n.equals(e.ZERO)?e.ZERO:(n.assertValidity(),n)}return{defaults:r,hashToCurve(e,t){const n=f(e,2,Object.assign({},r,t)),i=s(n[0]),o=s(n[1]);return a(i.add(o))},encodeToCurve(e,t){const n=r.encodeDST?{DST:r.encodeDST}:{};return a(s(f(e,1,Object.assign({},r,n,t))[0]))},mapToCurve(e){if(!Array.isArray(e))throw new Error("expected array of bigints");for(const t of e)if("bigint"!=typeof t)throw new Error("expected array of bigints");return a(s(e))},hashToScalar(t,s){const a=e.Fn.ORDER;return f(t,1,Object.assign({},r,{p:a,m:1,DST:n._DST_scalar},s))[0][0]}}};const r=e("../utils.js"),s=e("./modular.js"),a=r.bytesToNumberBE;function i(e,t){if(c(e),c(t),e<0||e>=1<<8*t)throw new Error("invalid I2OSP input: "+e);const n=Array.from({length:t}).fill(0);for(let r=t-1;r>=0;r--)n[r]=255&e,e>>>=8;return new Uint8Array(n)}function o(e,t){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e[r]^t[r];return n}function c(e){if(!Number.isSafeInteger(e))throw new Error("number expected")}function u(e){if(!(0,r.isBytes)(e)&&"string"!=typeof e)throw new Error("DST must be Uint8Array or string");return"string"==typeof e?(0,r.utf8ToBytes)(e):e}function l(e,t,n,s){(0,r.abytes)(e),c(n),(t=u(t)).length>255&&(t=s((0,r.concatBytes)((0,r.utf8ToBytes)("H2C-OVERSIZE-DST-"),t)));const{outputLen:a,blockLen:l}=s,d=Math.ceil(n/a);if(n>65535||d>255)throw new Error("expand_message_xmd: invalid lenInBytes");const f=(0,r.concatBytes)(t,i(t.length,1)),h=i(0,l),p=i(n,2),m=new Array(d),g=s((0,r.concatBytes)(h,e,p,i(0,1),f));m[0]=s((0,r.concatBytes)(g,i(1,1),f));for(let e=1;e<=d;e++){const t=[o(g,m[e-1]),i(e+1,1),f];m[e]=s((0,r.concatBytes)(...t))}return(0,r.concatBytes)(...m).slice(0,n)}function d(e,t,n,s,a){if((0,r.abytes)(e),c(n),(t=u(t)).length>255){const e=Math.ceil(2*s/8);t=a.create({dkLen:e}).update((0,r.utf8ToBytes)("H2C-OVERSIZE-DST-")).update(t).digest()}if(n>65535||t.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return a.create({dkLen:n}).update(e).update(i(n,2)).update(t).update(i(t.length,1)).digest()}function f(e,t,n){(0,r._validateObject)(n,{p:"bigint",m:"number",k:"number",hash:"function"});const{p:i,k:o,m:u,hash:f,expand:h,DST:p}=n;if(!(0,r.isHash)(n.hash))throw new Error("expected valid hash");(0,r.abytes)(e),c(t);const m=i.toString(2).length,g=Math.ceil((m+o)/8),b=t*u*g;let y;if("xmd"===h)y=l(e,p,b,f);else if("xof"===h)y=d(e,p,b,o,f);else{if("_internal_pass"!==h)throw new Error('expand must be "xmd" or "xof"');y=e}const w=new Array(t);for(let e=0;e<t;e++){const t=new Array(u);for(let n=0;n<u;n++){const r=g*(n+e*u),o=y.subarray(r,r+g);t[n]=(0,s.mod)(a(o),i)}w[e]=t}return w}n._DST_scalar=(0,r.utf8ToBytes)("HashToScalar-")}}},{package:"@noble/curves",file:"node_modules/@noble/curves/abstract/hash-to-curve.js"}],[2871,{"../utils.js":2877},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.isNegativeLE=void 0,n.mod=p,n.pow=function(e,t,n){return T(k(n),e,t)},n.pow2=function(e,t,n){let r=e;for(;t-- >s;)r*=r,r%=n;return r},n.invert=m,n.tonelliShanks=w,n.FpSqrt=v,n.validateField=function(e){const t=E.reduce((e,t)=>(e[t]="function",e),{ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"});return(0,r._validateObject)(e,t),e},n.FpPow=T,n.FpInvertBatch=S,n.FpDiv=function(e,t,n){return e.mul(t,"bigint"==typeof n?m(n,e.ORDER):e.inv(n))},n.FpLegendre=x,n.FpIsSquare=function(e,t){return 1===x(e,t)},n.nLength=P,n.Field=k,n.FpSqrtOdd=function(e,t){if(!e.isOdd)throw new Error("Field doesn't have isOdd");const n=e.sqrt(t);return e.isOdd(n)?n:e.neg(n)},n.FpSqrtEven=function(e,t){if(!e.isOdd)throw new Error("Field doesn't have isOdd");const n=e.sqrt(t);return e.isOdd(n)?e.neg(n):n},n.hashToPrivateScalar=function(e,t,n=!1){const s=(e=(0,r.ensureBytes)("privateHash",e)).length,i=P(t).nByteLength+8;if(i<24||s<i||s>1024)throw new Error("hashToPrivateScalar: expected "+i+"-1024 bytes of input, got "+s);return p(n?(0,r.bytesToNumberLE)(e):(0,r.bytesToNumberBE)(e),t-a)+a},n.getFieldBytesLength=I,n.getMinHashLength=A,n.mapHashToField=function(e,t,n=!1){const s=e.length,i=I(t),o=A(t);if(s<16||s<o||s>1024)throw new Error("expected "+o+"-1024 bytes of input, got "+s);const c=p(n?(0,r.bytesToNumberLE)(e):(0,r.bytesToNumberBE)(e),t-a)+a;return n?(0,r.numberToBytesLE)(c,i):(0,r.numberToBytesBE)(c,i)};
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const r=e("../utils.js"),s=BigInt(0),a=BigInt(1),i=BigInt(2),o=BigInt(3),c=BigInt(4),u=BigInt(5),l=BigInt(7),d=BigInt(8),f=BigInt(9),h=BigInt(16);function p(e,t){const n=e%t;return n>=s?n:t+n}function m(e,t){if(e===s)throw new Error("invert: expected non-zero number");if(t<=s)throw new Error("invert: expected positive modulus, got "+t);let n=p(e,t),r=t,i=s,o=a,c=a,u=s;for(;n!==s;){const e=r/n,t=r%n,s=i-c*e,a=o-u*e;r=n,n=t,i=c,o=u,c=s,u=a}if(r!==a)throw new Error("invert: does not exist");return p(i,t)}function g(e,t,n){if(!e.eql(e.sqr(t),n))throw new Error("Cannot find square root")}function b(e,t){const n=(e.ORDER+a)/c,r=e.pow(t,n);return g(e,r,t),r}function y(e,t){const n=(e.ORDER-u)/d,r=e.mul(t,i),s=e.pow(r,n),a=e.mul(t,s),o=e.mul(e.mul(a,i),s),c=e.mul(a,e.sub(o,e.ONE));return g(e,c,t),c}function w(e){if(e<o)throw new Error("sqrt is not defined for small field");let t=e-a,n=0;for(;t%i===s;)t/=i,n++;let r=i;const c=k(e);for(;1===x(c,r);)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(1===n)return b;let u=c.pow(r,t);const l=(t+a)/i;return function(e,r){if(e.is0(r))return r;if(1!==x(e,r))throw new Error("Cannot find square root");let s=n,i=e.mul(e.ONE,u),o=e.pow(r,t),c=e.pow(r,l);for(;!e.eql(o,e.ONE);){if(e.is0(o))return e.ZERO;let t=1,n=e.sqr(o);for(;!e.eql(n,e.ONE);)if(t++,n=e.sqr(n),t===s)throw new Error("Cannot find square root");const r=a<<BigInt(s-t-1),u=e.pow(i,r);s=t,i=e.sqr(u),o=e.mul(o,i),c=e.mul(c,u)}return c}}function v(e){return e%c===o?b:e%d===u?y:e%h===f?function(e){const t=k(e),n=w(e),r=n(t,t.neg(t.ONE)),s=n(t,r),a=n(t,t.neg(r)),i=(e+l)/h;return(e,t)=>{let n=e.pow(t,i),o=e.mul(n,r);const c=e.mul(n,s),u=e.mul(n,a),l=e.eql(e.sqr(o),t),d=e.eql(e.sqr(c),t);n=e.cmov(n,o,l),o=e.cmov(u,c,d);const f=e.eql(e.sqr(o),t),h=e.cmov(n,o,f);return g(e,h,t),h}}(e):w(e)}n.isNegativeLE=(e,t)=>(p(e,t)&a)===a;const E=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function T(e,t,n){if(n<s)throw new Error("invalid exponent, negatives unsupported");if(n===s)return e.ONE;if(n===a)return t;let r=e.ONE,i=t;for(;n>s;)n&a&&(r=e.mul(r,i)),i=e.sqr(i),n>>=a;return r}function S(e,t,n=!1){const r=new Array(t.length).fill(n?e.ZERO:undefined),s=t.reduce((t,n,s)=>e.is0(n)?t:(r[s]=t,e.mul(t,n)),e.ONE),a=e.inv(s);return t.reduceRight((t,n,s)=>e.is0(n)?t:(r[s]=e.mul(t,r[s]),e.mul(t,n)),a),r}function x(e,t){const n=(e.ORDER-a)/i,r=e.pow(t,n),s=e.eql(r,e.ONE),o=e.eql(r,e.ZERO),c=e.eql(r,e.neg(e.ONE));if(!s&&!o&&!c)throw new Error("invalid Legendre symbol result");return s?1:o?0:-1}function P(e,t){t!==undefined&&(0,r.anumber)(t);const n=t!==undefined?t:e.toString(2).length;return{nBitLength:n,nByteLength:Math.ceil(n/8)}}function k(e,t,n=!1,i={}){if(e<=s)throw new Error("invalid field: expected ORDER > 0, got "+e);let o=undefined,c=undefined,u=!1,l=undefined;if("object"==typeof t&&null!=t){if(i.sqrt||n)throw new Error("cannot specify opts in two arguments");const e=t;e.BITS&&(o=e.BITS),e.sqrt&&(c=e.sqrt),"boolean"==typeof e.isLE&&(n=e.isLE),"boolean"==typeof e.modOnDecode&&(u=e.modOnDecode),l=e.allowedLengths}else"number"==typeof t&&(o=t),i.sqrt&&(c=i.sqrt);const{nBitLength:d,nByteLength:f}=P(e,o);if(f>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let h;const g=Object.freeze({ORDER:e,isLE:n,BITS:d,BYTES:f,MASK:(0,r.bitMask)(d),ZERO:s,ONE:a,allowedLengths:l,create:t=>p(t,e),isValid:t=>{if("bigint"!=typeof t)throw new Error("invalid field element: expected bigint, got "+typeof t);return s<=t&&t<e},is0:e=>e===s,isValidNot0:e=>!g.is0(e)&&g.isValid(e),isOdd:e=>(e&a)===a,neg:t=>p(-t,e),eql:(e,t)=>e===t,sqr:t=>p(t*t,e),add:(t,n)=>p(t+n,e),sub:(t,n)=>p(t-n,e),mul:(t,n)=>p(t*n,e),pow:(e,t)=>T(g,e,t),div:(t,n)=>p(t*m(n,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>m(t,e),sqrt:c||(t=>(h||(h=v(e)),h(g,t))),toBytes:e=>n?(0,r.numberToBytesLE)(e,f):(0,r.numberToBytesBE)(e,f),fromBytes:(t,s=!0)=>{if(l){if(!l.includes(t.length)||t.length>f)throw new Error("Field.fromBytes: expected "+l+" bytes, got "+t.length);const e=new Uint8Array(f);e.set(t,n?0:e.length-t.length),t=e}if(t.length!==f)throw new Error("Field.fromBytes: expected "+f+" bytes, got "+t.length);let a=n?(0,r.bytesToNumberLE)(t):(0,r.bytesToNumberBE)(t);if(u&&(a=p(a,e)),!s&&!g.isValid(a))throw new Error("invalid field element: outside of range 0..ORDER");return a},invertBatch:e=>S(g,e),cmov:(e,t,n)=>n?t:e});return Object.freeze(g)}function I(e){if("bigint"!=typeof e)throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function A(e){const t=I(e);return t+Math.ceil(t/2)}}}},{package:"@noble/curves",file:"node_modules/@noble/curves/abstract/modular.js"}],[2872,{"../utils.js":2877,"./modular.js":2871},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.montgomery=function(e){const t=(h=e,(0,r._validateObject)(h,{adjustScalarBytes:"function",powPminus2:"function"}),Object.freeze({...h})),{P:n,type:c,adjustScalarBytes:u,powPminus2:l,randomBytes:d}=t,f="x25519"===c;var h;if(!f&&"x448"!==c)throw new Error("invalid type");const p=d||r.randomBytes,m=f?255:448,g=f?32:56,b=f?BigInt(9):BigInt(5),y=f?BigInt(121665):BigInt(39081),w=f?o**BigInt(254):o**BigInt(447),v=f?BigInt(8)*o**BigInt(251)-i:BigInt(4)*o**BigInt(445)-i,E=w+v+i,T=e=>(0,s.mod)(e,n),S=x(b);function x(e){return(0,r.numberToBytesLE)(T(e),g)}function P(e,t){const s=function(e,t){(0,r.aInRange)("u",e,a,n),(0,r.aInRange)("scalar",t,w,E);const s=t,o=e;let c=i,u=a,d=e,f=i,h=a;for(let e=BigInt(m-1);e>=a;e--){const t=s>>e&i;h^=t,({x_2:c,x_3:d}=I(h,c,d)),({x_2:u,x_3:f}=I(h,u,f)),h=t;const n=c+u,r=T(n*n),a=c-u,l=T(a*a),p=r-l,m=d+f,g=T((d-f)*n),b=T(m*a),w=g+b,v=g-b;d=T(w*w),f=T(o*T(v*v)),c=T(r*l),u=T(p*(r+T(y*p)))}({x_2:c,x_3:d}=I(h,c,d)),({x_2:u,x_3:f}=I(h,u,f));const p=l(u);return T(c*p)}(function(e){const t=(0,r.ensureBytes)("u coordinate",e,g);return f&&(t[31]&=127),T((0,r.bytesToNumberLE)(t))}(t),function(e){return(0,r.bytesToNumberLE)(u((0,r.ensureBytes)("scalar",e,g)))}(e));if(s===a)throw new Error("invalid private or public key received");return x(s)}function k(e){return P(e,S)}function I(e,t,n){const r=T(e*(t-n));return{x_2:t=T(t-r),x_3:n=T(n+r)}}const A=(e=p(g))=>e,_={randomSecretKey:A,randomPrivateKey:A};const C={secret:g,public:g,seed:g};return{keygen:function(e){const t=_.randomSecretKey(e);return{secretKey:t,publicKey:k(t)}},getSharedSecret:(e,t)=>P(e,t),getPublicKey:e=>k(e),scalarMult:P,scalarMultBase:k,utils:_,GuBytes:S.slice(),info:{type:"montgomery",lengths:C}}};
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const r=e("../utils.js"),s=e("./modular.js"),a=BigInt(0),i=BigInt(1),o=BigInt(2)}}},{package:"@noble/curves",file:"node_modules/@noble/curves/abstract/montgomery.js"}],[2873,{"../utils.js":2877},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){r===undefined&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){r===undefined&&(r=n),e[r]=t[n]}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(n,"__esModule",{value:!0}),s(e("../utils.js"),n)}}},{package:"@noble/curves",file:"node_modules/@noble/curves/abstract/utils.js"}],[2874,{"../utils.js":2877,"./curve.js":2868,"./modular.js":2871,"@noble/hashes/hmac.js":2882,"@noble/hashes/utils":2891},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.DER=n.DERErr=void 0,n._splitEndoScalar=u,n._legacyHelperEquat=b,n._normFnElement=y,n.weierstrassN=w,n.weierstrassPoints=function(e){const{CURVE:t,curveOpts:n}=S(e),r=w(t,n);return function(e,t){const{Fp:n,Fn:r}=t;function s(e){return(0,a.inRange)(e,h,r.ORDER)}const i=b(n,e.a,e.b);return Object.assign({},{CURVE:e,Point:t,ProjectivePoint:t,normPrivateKeyToScalar:e=>y(r,e),weierstrassEquation:i,isWithinCurveOrder:s})}(e,r)},n.SWUFpSqrtRatio=E,n.mapToCurveSimpleSWU=function(e,t){(0,o.validateField)(e);const{A:n,B:r,Z:s}=t;if(!e.isValid(n)||!e.isValid(r)||!e.isValid(s))throw new Error("mapToCurveSimpleSWU: invalid opts");const a=E(e,s);if(!e.isOdd)throw new Error("Field does not have .isOdd()");return t=>{let i,c,u,l,d,f,h,p;i=e.sqr(t),i=e.mul(i,s),c=e.sqr(i),c=e.add(c,i),u=e.add(c,e.ONE),u=e.mul(u,r),l=e.cmov(s,e.neg(c),!e.eql(c,e.ZERO)),l=e.mul(l,n),c=e.sqr(u),f=e.sqr(l),d=e.mul(f,n),c=e.add(c,d),c=e.mul(c,u),f=e.mul(f,l),d=e.mul(f,r),c=e.add(c,d),h=e.mul(i,u);const{isValid:m,value:g}=a(c,f);p=e.mul(i,t),p=e.mul(p,g),h=e.cmov(h,u,m),p=e.cmov(p,g,m);const b=e.isOdd(t)===e.isOdd(p);p=e.cmov(e.neg(p),p,b);const y=(0,o.FpInvertBatch)(e,[l],!0)[0];return h=e.mul(h,y),{x:h,y:p}}},n.ecdsa=T,n.weierstrass=function(e){const{CURVE:t,curveOpts:n,hash:r,ecdsaOpts:s}=function(e){const{CURVE:t,curveOpts:n}=S(e),r={hmac:e.hmac,randomBytes:e.randomBytes,lowS:e.lowS,bits2int:e.bits2int,bits2int_modN:e.bits2int_modN};return{CURVE:t,curveOpts:n,hash:e.hash,ecdsaOpts:r}}(e),a=T(w(t,n),r,s);return function(e,t){return Object.assign({},t,{ProjectivePoint:t.Point,CURVE:e})}(e,a)};
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const r=e("@noble/hashes/hmac.js"),s=e("@noble/hashes/utils"),a=e("../utils.js"),i=e("./curve.js"),o=e("./modular.js"),c=(e,t)=>(e+(e>=0?t:-t)/p)/t;function u(e,t,n){const[[r,s],[i,o]]=t,u=c(o*e,n),l=c(-s*e,n);let d=e-u*r-l*i,p=-u*s-l*o;const m=d<f,g=p<f;m&&(d=-d),g&&(p=-p);const b=(0,a.bitMask)(Math.ceil((0,a.bitLen)(n)/2))+h;if(d<f||d>=b||p<f||p>=b)throw new Error("splitScalar (endomorphism): failed, k="+e);return{k1neg:m,k1:d,k2neg:g,k2:p}}function l(e){e.lowS!==undefined&&(0,a.abool)("lowS",e.lowS),e.prehash!==undefined&&(0,a.abool)("prehash",e.prehash)}class d extends Error{constructor(e=""){super(e)}}n.DERErr=d,n.DER={Err:d,_tlv:{encode:(e,t)=>{const{Err:r}=n.DER;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(1&t.length)throw new r("tlv.encode: unpadded data");const s=t.length/2,i=(0,a.numberToHexUnpadded)(s);if(i.length/2&128)throw new r("tlv.encode: long form length too big");const o=s>127?(0,a.numberToHexUnpadded)(i.length/2|128):"";return(0,a.numberToHexUnpadded)(e)+o+i+t},decode(e,t){const{Err:r}=n.DER;let s=0;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(t.length<2||t[s++]!==e)throw new r("tlv.decode: wrong tlv");const a=t[s++];let i=0;if(!!(128&a)){const e=127&a;if(!e)throw new r("tlv.decode(long): indefinite length not supported");if(e>4)throw new r("tlv.decode(long): byte length is too big");const n=t.subarray(s,s+e);if(n.length!==e)throw new r("tlv.decode: length bytes not complete");if(0===n[0])throw new r("tlv.decode(long): zero leftmost byte");for(const e of n)i=i<<8|e;if(s+=e,i<128)throw new r("tlv.decode(long): not minimal encoding")}else i=a;const o=t.subarray(s,s+i);if(o.length!==i)throw new r("tlv.decode: wrong value length");return{v:o,l:t.subarray(s+i)}}},_int:{encode(e){const{Err:t}=n.DER;if(e<f)throw new t("integer: negative integers are not allowed");let r=(0,a.numberToHexUnpadded)(e);if(8&Number.parseInt(r[0],16)&&(r="00"+r),1&r.length)throw new t("unexpected DER parsing assertion: unpadded hex");return r},decode(e){const{Err:t}=n.DER;if(128&e[0])throw new t("invalid signature integer: negative");if(0===e[0]&&!(128&e[1]))throw new t("invalid signature integer: unnecessary leading zero");return(0,a.bytesToNumberBE)(e)}},toSig(e){const{Err:t,_int:r,_tlv:s}=n.DER,i=(0,a.ensureBytes)("signature",e),{v:o,l:c}=s.decode(48,i);if(c.length)throw new t("invalid signature: left bytes after parsing");const{v:u,l:l}=s.decode(2,o),{v:d,l:f}=s.decode(2,l);if(f.length)throw new t("invalid signature: left bytes after parsing");return{r:r.decode(u),s:r.decode(d)}},hexFromSig(e){const{_tlv:t,_int:r}=n.DER,s=t.encode(2,r.encode(e.r))+t.encode(2,r.encode(e.s));return t.encode(48,s)}};const f=BigInt(0),h=BigInt(1),p=BigInt(2),m=BigInt(3),g=BigInt(4);function b(e,t,n){return function(r){const s=e.sqr(r),a=e.mul(s,r);return e.add(e.add(a,e.mul(r,t)),n)}}function y(e,t){const{BYTES:n}=e;let r;if("bigint"==typeof t)r=t;else{let s=(0,a.ensureBytes)("private key",t);try{r=e.fromBytes(s)}catch(e){throw new Error(`invalid private key: expected ui8a of size ${n}, got ${typeof t}`)}}if(!e.isValidNot0(r))throw new Error("invalid private key: out of range [1..N-1]");return r}function w(e,t={}){const{Fp:n,Fn:r}=(0,i._createCurveFields)("weierstrass",e,t),{h:s,n:o}=e;(0,a._validateObject)(t,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:c}=t;if(c&&(!n.is0(e.a)||"bigint"!=typeof c.beta||!Array.isArray(c.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');function l(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}const d=t.toBytes||function(e,t,r){const{x:s,y:i}=t.toAffine(),o=n.toBytes(s);if((0,a.abool)("isCompressed",r),r){l();const e=!n.isOdd(i);return(0,a.concatBytes)(v(e),o)}return(0,a.concatBytes)(Uint8Array.of(4),o,n.toBytes(i))},p=t.fromBytes||function(e){(0,a.abytes)(e);const t=n.BYTES,r=t+1,s=2*t+1,i=e.length,o=e[0],c=e.subarray(1);if(i!==r||2!==o&&3!==o){if(i===s&&4===o){const e=n.fromBytes(c.subarray(0*t,1*t)),r=n.fromBytes(c.subarray(1*t,2*t));if(!E(e,r))throw new Error("bad point: is not on curve");return{x:e,y:r}}throw new Error(`bad point: got length ${i}, expected compressed=${r} or uncompressed=${s}`)}{const e=n.fromBytes(c);if(!n.isValid(e))throw new Error("bad point: is not on curve, wrong x");const t=w(e);let r;try{r=n.sqrt(t)}catch(e){const t=e instanceof Error?": "+e.message:"";throw new Error("bad point: is not on curve, sqrt error"+t)}l();return!(1&~o)!==n.isOdd(r)&&(r=n.neg(r)),{x:e,y:r}}},w=b(n,e.a,e.b);function E(e,t){const r=n.sqr(t),s=w(e);return n.eql(r,s)}if(!E(e.Gx,e.Gy))throw new Error("bad curve params: generator point");const T=n.mul(n.pow(e.a,m),g),S=n.mul(n.sqr(e.b),BigInt(27));if(n.is0(n.add(T,S)))throw new Error("bad curve params: a or b");function x(e,t,r=!1){if(!n.isValid(t)||r&&n.is0(t))throw new Error(`bad point coordinate ${e}`);return t}function P(e){if(!(e instanceof C))throw new Error("ProjectivePoint expected")}function k(e){if(!c||!c.basises)throw new Error("no endo");return u(e,c.basises,r.ORDER)}const I=(0,a.memoized)((e,t)=>{const{X:r,Y:s,Z:a}=e;if(n.eql(a,n.ONE))return{x:r,y:s};const i=e.is0();null==t&&(t=i?n.ONE:n.inv(a));const o=n.mul(r,t),c=n.mul(s,t),u=n.mul(a,t);if(i)return{x:n.ZERO,y:n.ZERO};if(!n.eql(u,n.ONE))throw new Error("invZ was invalid");return{x:o,y:c}}),A=(0,a.memoized)(e=>{if(e.is0()){if(t.allowInfinityPoint&&!n.is0(e.Y))return;throw new Error("bad point: ZERO")}const{x:r,y:s}=e.toAffine();if(!n.isValid(r)||!n.isValid(s))throw new Error("bad point: x or y not field elements");if(!E(r,s))throw new Error("bad point: equation left != right");if(!e.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function _(e,t,r,s,a){return r=new C(n.mul(r.X,e),r.Y,r.Z),t=(0,i.negateCt)(s,t),r=(0,i.negateCt)(a,r),t.add(r)}class C{constructor(e,t,n){this.X=x("x",e),this.Y=x("y",t,!0),this.Z=x("z",n),Object.freeze(this)}static fromAffine(e){const{x:t,y:r}=e||{};if(!e||!n.isValid(t)||!n.isValid(r))throw new Error("invalid affine point");if(e instanceof C)throw new Error("projective point not allowed");return n.is0(t)&&n.is0(r)?C.ZERO:new C(t,r,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}static normalizeZ(e){return(0,i.normalizeZ)(C,e)}static fromBytes(e){return(0,a.abytes)(e),C.fromHex(e)}static fromHex(e){const t=C.fromAffine(p((0,a.ensureBytes)("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return C.BASE.multiply(y(r,e))}static msm(e,t){return(0,i.pippenger)(C,r,e,t)}_setWindowSize(e){this.precompute(e)}precompute(e=8,t=!0){return R.createCache(this,e),t||this.multiply(m),this}assertValidity(){A(this)}hasEvenY(){const{y:e}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(e)}equals(e){P(e);const{X:t,Y:r,Z:s}=this,{X:a,Y:i,Z:o}=e,c=n.eql(n.mul(t,o),n.mul(a,s)),u=n.eql(n.mul(r,o),n.mul(i,s));return c&&u}negate(){return new C(this.X,n.neg(this.Y),this.Z)}double(){const{a:t,b:r}=e,s=n.mul(r,m),{X:a,Y:i,Z:o}=this;let c=n.ZERO,u=n.ZERO,l=n.ZERO,d=n.mul(a,a),f=n.mul(i,i),h=n.mul(o,o),p=n.mul(a,i);return p=n.add(p,p),l=n.mul(a,o),l=n.add(l,l),c=n.mul(t,l),u=n.mul(s,h),u=n.add(c,u),c=n.sub(f,u),u=n.add(f,u),u=n.mul(c,u),c=n.mul(p,c),l=n.mul(s,l),h=n.mul(t,h),p=n.sub(d,h),p=n.mul(t,p),p=n.add(p,l),l=n.add(d,d),d=n.add(l,d),d=n.add(d,h),d=n.mul(d,p),u=n.add(u,d),h=n.mul(i,o),h=n.add(h,h),d=n.mul(h,p),c=n.sub(c,d),l=n.mul(h,f),l=n.add(l,l),l=n.add(l,l),new C(c,u,l)}add(t){P(t);const{X:r,Y:s,Z:a}=this,{X:i,Y:o,Z:c}=t;let u=n.ZERO,l=n.ZERO,d=n.ZERO;const f=e.a,h=n.mul(e.b,m);let p=n.mul(r,i),g=n.mul(s,o),b=n.mul(a,c),y=n.add(r,s),w=n.add(i,o);y=n.mul(y,w),w=n.add(p,g),y=n.sub(y,w),w=n.add(r,a);let v=n.add(i,c);return w=n.mul(w,v),v=n.add(p,b),w=n.sub(w,v),v=n.add(s,a),u=n.add(o,c),v=n.mul(v,u),u=n.add(g,b),v=n.sub(v,u),d=n.mul(f,w),u=n.mul(h,b),d=n.add(u,d),u=n.sub(g,d),d=n.add(g,d),l=n.mul(u,d),g=n.add(p,p),g=n.add(g,p),b=n.mul(f,b),w=n.mul(h,w),g=n.add(g,b),b=n.sub(p,b),b=n.mul(f,b),w=n.add(w,b),p=n.mul(g,w),l=n.add(l,p),p=n.mul(v,w),u=n.mul(y,u),u=n.sub(u,p),p=n.mul(y,g),d=n.mul(v,d),d=n.add(d,p),new C(u,l,d)}subtract(e){return this.add(e.negate())}is0(){return this.equals(C.ZERO)}multiply(e){const{endo:n}=t;if(!r.isValidNot0(e))throw new Error("invalid scalar: out of range");let s,a;const o=e=>R.cached(this,e,e=>(0,i.normalizeZ)(C,e));if(n){const{k1neg:t,k1:r,k2neg:i,k2:c}=k(e),{p:u,f:l}=o(r),{p:d,f:f}=o(c);a=l.add(f),s=_(n.beta,u,d,t,i)}else{const{p:t,f:n}=o(e);s=t,a=n}return(0,i.normalizeZ)(C,[s,a])[0]}multiplyUnsafe(e){const{endo:n}=t,s=this;if(!r.isValid(e))throw new Error("invalid scalar: out of range");if(e===f||s.is0())return C.ZERO;if(e===h)return s;if(R.hasCache(this))return this.multiply(e);if(n){const{k1neg:t,k1:r,k2neg:a,k2:o}=k(e),{p1:c,p2:u}=(0,i.mulEndoUnsafe)(C,s,r,o);return _(n.beta,c,u,t,a)}return R.unsafe(s,e)}multiplyAndAddUnsafe(e,t,n){const r=this.multiplyUnsafe(t).add(e.multiplyUnsafe(n));return r.is0()?undefined:r}toAffine(e){return I(this,e)}isTorsionFree(){const{isTorsionFree:e}=t;return s===h||(e?e(C,this):R.unsafe(this,o).is0())}clearCofactor(){const{clearCofactor:e}=t;return s===h?this:e?e(C,this):this.multiplyUnsafe(s)}isSmallOrder(){return this.multiplyUnsafe(s).is0()}toBytes(e=!0){return(0,a.abool)("isCompressed",e),this.assertValidity(),d(C,this,e)}toRawBytes(e=!0){return this.toBytes(e)}toHex(e=!0){return(0,a.bytesToHex)(this.toBytes(e))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}C.BASE=new C(e.Gx,e.Gy,n.ONE),C.ZERO=new C(n.ZERO,n.ONE,n.ZERO),C.Fp=n,C.Fn=r;const j=r.BITS,R=new i.wNAF(C,t.endo?Math.ceil(j/2):j);return C}function v(e){return Uint8Array.of(e?2:3)}function E(e,t){const n=e.ORDER;let r=f;for(let e=n-h;e%p===f;e/=p)r+=h;const s=r,a=p<<s-h-h,i=a*p,o=(n-h)/i,c=(o-h)/p,u=i-h,l=a,d=e.pow(t,o),b=e.pow(t,(o+h)/p);let y=(t,n)=>{let r=d,a=e.pow(n,u),i=e.sqr(a);i=e.mul(i,n);let o=e.mul(t,i);o=e.pow(o,c),o=e.mul(o,a),a=e.mul(o,n),i=e.mul(o,t);let f=e.mul(i,a);o=e.pow(f,l);let m=e.eql(o,e.ONE);a=e.mul(i,b),o=e.mul(f,r),i=e.cmov(a,i,m),f=e.cmov(o,f,m);for(let t=s;t>h;t--){let n=t-p;n=p<<n-h;let s=e.pow(f,n);const o=e.eql(s,e.ONE);a=e.mul(i,r),r=e.mul(r,r),s=e.mul(f,r),i=e.cmov(a,i,o),f=e.cmov(s,f,o)}return{isValid:m,value:i}};if(e.ORDER%g===m){const n=(e.ORDER-m)/g,r=e.sqrt(e.neg(t));y=(t,s)=>{let a=e.sqr(s);const i=e.mul(t,s);a=e.mul(a,i);let o=e.pow(a,n);o=e.mul(o,i);const c=e.mul(o,r),u=e.mul(e.sqr(o),s),l=e.eql(u,t);return{isValid:l,value:e.cmov(c,o,l)}}}return y}function T(e,t,i={}){(0,s.ahash)(t),(0,a._validateObject)(i,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const c=i.randomBytes||a.randomBytes,u=i.hmac||((e,...n)=>(0,r.hmac)(t,e,(0,a.concatBytes)(...n))),{Fp:d,Fn:m}=e,{ORDER:g,BITS:b}=m,w=(0,o.getMinHashLength)(g),E={secret:m.BYTES,public:1+d.BYTES,publicUncompressed:1+2*d.BYTES,signature:2*m.BYTES,seed:w};function T(e){return e>g>>h}function S(e,t){if(!m.isValidNot0(t))throw new Error(`invalid signature ${e}: out of range 1..CURVE.n`)}class x{constructor(e,t,n){S("r",e),S("s",t),this.r=e,this.s=t,null!=n&&(this.recovery=n),Object.freeze(this)}static fromBytes(e,t="compact"){if("compact"===t){const t=m.BYTES;(0,a.abytes)(e,2*t);const n=e.subarray(0,t),r=e.subarray(t,2*t);return new x(m.fromBytes(n),m.fromBytes(r))}if("der"===t){(0,a.abytes)(e);const{r:t,s:r}=n.DER.toSig(e);return new x(t,r)}throw new Error("invalid format")}static fromHex(e,t){return this.fromBytes((0,a.hexToBytes)(e),t)}addRecoveryBit(e){return new x(this.r,this.s,e)}recoverPublicKey(t){const n=d.ORDER,{r:r,s:s,recovery:i}=this;if(null==i||![0,1,2,3].includes(i))throw new Error("recovery id invalid");if(g*p<n&&i>1)throw new Error("recovery id is ambiguous for h>1 curve");const o=2===i||3===i?r+g:r;if(!d.isValid(o))throw new Error("recovery id 2 or 3 invalid");const c=d.toBytes(o),u=e.fromHex((0,a.concatBytes)(v(!(1&i)),c)),l=m.inv(o),f=j((0,a.ensureBytes)("msgHash",t)),h=m.create(-f*l),b=m.create(s*l),y=e.BASE.multiplyUnsafe(h).add(u.multiplyUnsafe(b));if(y.is0())throw new Error("point at infinify");return y.assertValidity(),y}hasHighS(){return T(this.s)}normalizeS(){return this.hasHighS()?new x(this.r,m.neg(this.s),this.recovery):this}toBytes(e="compact"){if("compact"===e)return(0,a.concatBytes)(m.toBytes(this.r),m.toBytes(this.s));if("der"===e)return(0,a.hexToBytes)(n.DER.hexFromSig(this));throw new Error("invalid format")}toHex(e){return(0,a.bytesToHex)(this.toBytes(e))}assertValidity(){}static fromCompact(e){return x.fromBytes((0,a.ensureBytes)("sig",e),"compact")}static fromDER(e){return x.fromBytes((0,a.ensureBytes)("sig",e),"der")}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return(0,a.bytesToHex)(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return(0,a.bytesToHex)(this.toBytes("compact"))}}function P(e){try{return!!y(m,e)}catch(e){return!1}}function k(e=c(w)){return(0,o.mapHashToField)(e,g)}const I={isValidSecretKey:P,isValidPublicKey:function(t,n){try{const r=t.length;return(!0!==n||r===E.public)&&((!1!==n||r===E.publicUncompressed)&&!!e.fromBytes(t))}catch(e){return!1}},randomSecretKey:k,isValidPrivateKey:P,randomPrivateKey:k,normPrivateKeyToScalar:e=>y(m,e),precompute:(t=8,n=e.BASE)=>n.precompute(t,!1)};function A(t,n=!0){return e.BASE.multiply(y(m,t)).toBytes(n)}function _(t){if("bigint"==typeof t)return!1;if(t instanceof e)return!0;if(m.allowedLengths||E.secret===E.public)return undefined;const n=(0,a.ensureBytes)("key",t).length;return n===E.public||n===E.publicUncompressed}const C=i.bits2int||function(e){if(e.length>8192)throw new Error("input is too large");const t=(0,a.bytesToNumberBE)(e),n=8*e.length-b;return n>0?t>>BigInt(n):t},j=i.bits2int_modN||function(e){return m.create(C(e))},R=(0,a.bitMask)(b);function O(e){return(0,a.aInRange)("num < 2^"+b,e,f,R),m.toBytes(e)}function B(n,r,s=F){if(["recovered","canonical"].some(e=>e in s))throw new Error("sign() legacy options not supported");let{lowS:i,prehash:o,extraEntropy:u}=s;null==i&&(i=!0),n=(0,a.ensureBytes)("msgHash",n),l(s),o&&(n=(0,a.ensureBytes)("prehashed msgHash",t(n)));const d=j(n),p=y(m,r),g=[O(p),O(d)];if(null!=u&&!1!==u){const e=!0===u?c(E.secret):u;g.push((0,a.ensureBytes)("extraEntropy",e))}const b=(0,a.concatBytes)(...g),w=d;return{seed:b,k2sig:function(t){const n=C(t);if(!m.isValidNot0(n))return;const r=m.inv(n),s=e.BASE.multiply(n).toAffine(),a=m.create(s.x);if(a===f)return;const o=m.create(r*m.create(w+a*p));if(o===f)return;let c=(s.x===a?0:2)|Number(s.y&h),u=o;return i&&T(o)&&(u=function(e){return T(e)?m.neg(e):e}(o),c^=1),new x(a,u,c)}}}const F={lowS:i.lowS,prehash:!1},L={lowS:i.lowS,prehash:!1};return e.BASE.precompute(8),Object.freeze({keygen:function(e){const t=I.randomSecretKey(e);return{secretKey:t,publicKey:A(t)}},getPublicKey:A,sign:function(e,n,r=F){const{seed:s,k2sig:i}=B(e,n,r);return(0,a.createHmacDrbg)(t.outputLen,m.BYTES,u)(s,i)},verify:function(r,s,i,o=L){const c=r;s=(0,a.ensureBytes)("msgHash",s),i=(0,a.ensureBytes)("publicKey",i),l(o);const{lowS:u,prehash:d,format:f}=o;if("strict"in o)throw new Error("options.strict was renamed to lowS");let h,p=undefined;if(f===undefined){const e="string"==typeof c||(0,a.isBytes)(c),t=!e&&null!==c&&"object"==typeof c&&"bigint"==typeof c.r&&"bigint"==typeof c.s;if(!e&&!t)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(t)p=new x(c.r,c.s);else if(e){try{p=x.fromDER(c)}catch(e){if(!(e instanceof n.DER.Err))throw e}if(!p)try{p=x.fromCompact(c)}catch(e){return!1}}}else if("compact"===f||"der"===f){if("string"!=typeof c&&!(0,a.isBytes)(c))throw new Error('"der" / "compact" format expects Uint8Array signature');p=x.fromBytes((0,a.ensureBytes)("sig",c),f)}else{if("js"!==f)throw new Error('format must be "compact", "der" or "js"');if(!(c instanceof x))throw new Error('"js" format expects Signature instance');p=c}if(!p)return!1;try{if(h=e.fromHex(i),u&&p.hasHighS())return!1;d&&(s=t(s));const{r:n,s:r}=p,a=j(s),o=m.inv(r),c=m.create(a*o),l=m.create(n*o),f=e.BASE.multiplyUnsafe(c).add(h.multiplyUnsafe(l));if(f.is0())return!1;return m.create(f.x)===n}catch(e){return!1}},getSharedSecret:function(t,n,r=!0){if(!0===_(t))throw new Error("first arg must be private key");if(!1===_(n))throw new Error("second arg must be public key");const s=y(m,t);return e.fromHex(n).multiply(s).toBytes(r)},utils:I,Point:e,Signature:x,info:{type:"weierstrass",lengths:E,publicKeyHasPrefix:!0}})}function S(e){const t={a:e.a,b:e.b,p:e.Fp.ORDER,n:e.n,h:e.h,Gx:e.Gx,Gy:e.Gy},n=e.Fp;let r=e.allowedPrivateKeyLengths?Array.from(new Set(e.allowedPrivateKeyLengths.map(e=>Math.ceil(e/2)))):undefined;return{CURVE:t,curveOpts:{Fp:n,Fn:(0,o.Field)(t.n,{BITS:e.nBitLength,allowedLengths:r,modOnDecode:e.wrapPrivateKey}),allowInfinityPoint:e.allowInfinityPoint,endo:e.endo,isTorsionFree:e.isTorsionFree,clearCofactor:e.clearCofactor,fromBytes:e.fromBytes,toBytes:e.toBytes}}}}}},{package:"@noble/curves",file:"node_modules/@noble/curves/abstract/weierstrass.js"}],[2875,{"./abstract/curve.js":2868,"./abstract/edwards.js":2869,"./abstract/hash-to-curve.js":2870,"./abstract/modular.js":2871,"./abstract/montgomery.js":2872,"./utils.js":2877,"@noble/hashes/sha2.js":2887,"@noble/hashes/utils.js":2891},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ED25519_TORSION_SUBGROUP=n.hash_to_ristretto255=n.hashToRistretto255=n.encodeToCurve=n.hashToCurve=n.ristretto255_hasher=n.ristretto255=n.RistrettoPoint=n.ed25519_hasher=n.edwardsToMontgomery=n.x25519=n.ed25519ph=n.ed25519ctx=n.ed25519=void 0,n.edwardsToMontgomeryPub=k,n.edwardsToMontgomeryPriv=function(e){return n.ed25519.utils.toMontgomeryPriv((0,l.ensureBytes)("pub",e))};
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const r=e("@noble/hashes/sha2.js"),s=e("@noble/hashes/utils.js"),a=e("./abstract/curve.js"),i=e("./abstract/edwards.js"),o=e("./abstract/hash-to-curve.js"),c=e("./abstract/modular.js"),u=e("./abstract/montgomery.js"),l=e("./utils.js"),d=BigInt(0),f=BigInt(1),h=BigInt(2),p=BigInt(3),m=BigInt(5),g=BigInt(8),b={p:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:g,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function y(e){const t=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),a=b.p,i=e*e%a*e%a,o=(0,c.pow2)(i,h,a)*i%a,u=(0,c.pow2)(o,f,a)*e%a,l=(0,c.pow2)(u,m,a)*u%a,d=(0,c.pow2)(l,t,a)*l%a,p=(0,c.pow2)(d,n,a)*d%a,g=(0,c.pow2)(p,r,a)*p%a,y=(0,c.pow2)(g,s,a)*g%a,w=(0,c.pow2)(y,s,a)*g%a,v=(0,c.pow2)(w,t,a)*l%a;return{pow_p_5_8:(0,c.pow2)(v,h,a)*e%a,b2:i}}function w(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}const v=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function E(e,t){const n=b.p,r=(0,c.mod)(t*t*t,n),s=y(e*(0,c.mod)(r*r*t,n)).pow_p_5_8;let a=(0,c.mod)(e*r*s,n);const i=(0,c.mod)(t*a*a,n),o=a,u=(0,c.mod)(a*v,n),l=i===e,d=i===(0,c.mod)(-e,n),f=i===(0,c.mod)(-e*v,n);return l&&(a=o),(d||f)&&(a=u),(0,c.isNegativeLE)(a,n)&&(a=(0,c.mod)(-a,n)),{isValid:l||d,value:a}}const T=(()=>(0,c.Field)(b.p,{isLE:!0}))(),S=(()=>(0,c.Field)(b.n,{isLE:!0}))(),x=(()=>({...b,Fp:T,hash:r.sha512,adjustScalarBytes:w,uvRatio:E}))();function P(e,t,n){if(t.length>255)throw new Error("Context is too big");return(0,s.concatBytes)((0,s.utf8ToBytes)("SigEd25519 no Ed25519 collisions"),new Uint8Array([n?1:0,t.length]),t,e)}function k(e){return n.ed25519.utils.toMontgomery((0,l.ensureBytes)("pub",e))}n.ed25519=(0,i.twistedEdwards)(x),n.ed25519ctx=(0,i.twistedEdwards)({...x,domain:P}),n.ed25519ph=(0,i.twistedEdwards)(Object.assign({},x,{domain:P,prehash:r.sha512})),n.x25519=(()=>{const e=b.p;return(0,u.montgomery)({P:e,type:"x25519",powPminus2:t=>{const{pow_p_5_8:n,b2:r}=y(t);return(0,c.mod)((0,c.pow2)(n,p,e)*r,e)},adjustScalarBytes:w})})(),n.edwardsToMontgomery=k;const I=(()=>(T.ORDER+p)/g)(),A=(()=>T.pow(h,I))(),_=(()=>T.sqrt(T.neg(T.ONE)))();const C=(()=>(0,c.FpSqrtEven)(T,T.neg(BigInt(486664))))();function j(e){const{xMn:t,xMd:n,yMn:r,yMd:s}=function(e){const t=(T.ORDER-m)/g,n=BigInt(486662);let r=T.sqr(e);r=T.mul(r,h);let s=T.add(r,T.ONE),a=T.neg(n),i=T.sqr(s),o=T.mul(i,s),c=T.mul(r,n);c=T.mul(c,a),c=T.add(c,i),c=T.mul(c,a);let u=T.sqr(o);i=T.sqr(u),u=T.mul(u,o),u=T.mul(u,c),i=T.mul(i,u);let l=T.pow(i,t);l=T.mul(l,u);let d=T.mul(l,_);i=T.sqr(l),i=T.mul(i,o);let p=T.eql(i,c),b=T.cmov(d,l,p),y=T.mul(a,r),w=T.mul(l,e);w=T.mul(w,A);let v=T.mul(w,_),E=T.mul(c,r);i=T.sqr(w),i=T.mul(i,o);let S=T.eql(i,E),x=T.cmov(v,w,S);i=T.sqr(b),i=T.mul(i,o);let P=T.eql(i,c),k=T.cmov(y,a,P),I=T.cmov(x,b,P),C=T.isOdd(I);return I=T.cmov(I,T.neg(I),P!==C),{xMn:k,xMd:s,yMn:I,yMd:f}}(e);let a=T.mul(t,s);a=T.mul(a,C);let i=T.mul(n,r),o=T.sub(t,n),u=T.add(t,n),l=T.mul(i,u),d=T.eql(l,T.ZERO);a=T.cmov(a,T.ZERO,d),i=T.cmov(i,T.ONE,d),o=T.cmov(o,T.ONE,d),u=T.cmov(u,T.ONE,d);const[p,b]=(0,c.FpInvertBatch)(T,[i,u],!0);return{x:T.mul(a,p),y:T.mul(o,b)}}n.ed25519_hasher=(0,o.createHasher)(n.ed25519.Point,e=>j(e[0]),{DST:"edwards25519_XMD:SHA-512_ELL2_RO_",encodeDST:"edwards25519_XMD:SHA-512_ELL2_NU_",p:T.ORDER,m:1,k:128,expand:"xmd",hash:r.sha512});const R=v,O=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),B=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),F=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),L=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952"),M=e=>E(f,e),N=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),D=e=>n.ed25519.CURVE.Fp.create((0,l.bytesToNumberLE)(e)&N);function G(e){const{d:t}=n.ed25519.CURVE,r=n.ed25519.CURVE.Fp.ORDER,s=n.ed25519.CURVE.Fp.create,a=s(R*e*e),i=s((a+f)*F);let o=BigInt(-1);const u=s((o-t*a)*s(a+t));let{isValid:l,value:d}=E(i,u),h=s(d*e);(0,c.isNegativeLE)(h,r)||(h=s(-h)),l||(d=h),l||(o=a);const p=s(o*(a-f)*L-u),m=d*d,g=s((d+d)*u),b=s(p*O),y=s(f-m),w=s(f+m);return new n.ed25519.Point(s(g*w),s(y*b),s(b*w),s(g*y))}function H(e){(0,s.abytes)(e,64);const t=G(D(e.subarray(0,32))),n=G(D(e.subarray(32,64)));return new U(t.add(n))}class U extends i.PrimeEdwardsPoint{constructor(e){super(e)}static fromAffine(e){return new U(n.ed25519.Point.fromAffine(e))}assertSame(e){if(!(e instanceof U))throw new Error("RistrettoPoint expected")}init(e){return new U(e)}static hashToCurve(e){return H((0,l.ensureBytes)("ristrettoHash",e,64))}static fromBytes(e){(0,s.abytes)(e,32);const{a:t,d:r}=n.ed25519.CURVE,a=T.ORDER,i=T.create,o=D(e);if(!(0,l.equalBytes)((0,l.numberToBytesLE)(o,32),e)||(0,c.isNegativeLE)(o,a))throw new Error("invalid ristretto255 encoding 1");const u=i(o*o),h=i(f+t*u),p=i(f-t*u),m=i(h*h),g=i(p*p),b=i(t*r*m-g),{isValid:y,value:w}=M(i(b*g)),v=i(w*p),E=i(w*v*b);let S=i((o+o)*v);(0,c.isNegativeLE)(S,a)&&(S=i(-S));const x=i(h*E),P=i(S*x);if(!y||(0,c.isNegativeLE)(P,a)||x===d)throw new Error("invalid ristretto255 encoding 2");return new U(new n.ed25519.Point(S,x,f,P))}static fromHex(e){return U.fromBytes((0,l.ensureBytes)("ristrettoHex",e,32))}static msm(e,t){return(0,a.pippenger)(U,n.ed25519.Point.Fn,e,t)}toBytes(){let{X:e,Y:t,Z:n,T:r}=this.ep;const s=T.ORDER,a=T.create,i=a(a(n+t)*a(n-t)),o=a(e*t),u=a(o*o),{value:d}=M(a(i*u)),f=a(d*i),h=a(d*o),p=a(f*h*r);let m;if((0,c.isNegativeLE)(r*p,s)){let n=a(t*R),r=a(e*R);e=n,t=r,m=a(f*B)}else m=h;(0,c.isNegativeLE)(e*p,s)&&(t=a(-t));let g=a((n-t)*m);return(0,c.isNegativeLE)(g,s)&&(g=a(-g)),(0,l.numberToBytesLE)(g,32)}equals(e){this.assertSame(e);const{X:t,Y:n}=this.ep,{X:r,Y:s}=e.ep,a=T.create,i=a(t*s)===a(n*r),o=a(n*s)===a(t*r);return i||o}is0(){return this.equals(U.ZERO)}}U.BASE=(()=>new U(n.ed25519.Point.BASE))(),U.ZERO=(()=>new U(n.ed25519.Point.ZERO))(),U.Fp=T,U.Fn=S,n.RistrettoPoint=U,n.ristretto255={Point:U},n.ristretto255_hasher={hashToCurve(e,t){const n=t?.DST||"ristretto255_XMD:SHA-512_R255MAP_RO_";return H((0,o.expand_message_xmd)(e,n,64,r.sha512))},hashToScalar:(e,t={DST:o._DST_scalar})=>S.create((0,l.bytesToNumberLE)((0,o.expand_message_xmd)(e,t.DST,64,r.sha512)))},n.hashToCurve=n.ed25519_hasher.hashToCurve,n.encodeToCurve=n.ed25519_hasher.encodeToCurve,n.hashToRistretto255=n.ristretto255_hasher.hashToCurve,n.hash_to_ristretto255=n.ristretto255_hasher.hashToCurve,n.ED25519_TORSION_SUBGROUP=["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"]}}},{package:"@noble/curves",file:"node_modules/@noble/curves/ed25519.js"}],[2876,{"./_shortw_utils.js":2867,"./abstract/hash-to-curve.js":2870,"./abstract/modular.js":2871,"./abstract/weierstrass.js":2874,"./utils.js":2877,"@noble/hashes/sha2.js":2887,"@noble/hashes/utils.js":2891},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.encodeToCurve=n.hashToCurve=n.secp256k1_hasher=n.schnorr=n.secp256k1=void 0;
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const r=e("@noble/hashes/sha2.js"),s=e("@noble/hashes/utils.js"),a=e("./_shortw_utils.js"),i=e("./abstract/hash-to-curve.js"),o=e("./abstract/modular.js"),c=e("./abstract/weierstrass.js"),u=e("./utils.js"),l={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},d={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),basises:[[BigInt("0x3086d221a7d46bcde86c90e49284eb15"),-BigInt("0xe4437ed6010e88286f547fa90abfe4c3")],[BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),BigInt("0x3086d221a7d46bcde86c90e49284eb15")]]},f=BigInt(0),h=BigInt(1),p=BigInt(2);function m(e){const t=l.p,n=BigInt(3),r=BigInt(6),s=BigInt(11),a=BigInt(22),i=BigInt(23),c=BigInt(44),u=BigInt(88),d=e*e*e%t,f=d*d*e%t,h=(0,o.pow2)(f,n,t)*f%t,m=(0,o.pow2)(h,n,t)*f%t,b=(0,o.pow2)(m,p,t)*d%t,y=(0,o.pow2)(b,s,t)*b%t,w=(0,o.pow2)(y,a,t)*y%t,v=(0,o.pow2)(w,c,t)*w%t,E=(0,o.pow2)(v,u,t)*v%t,T=(0,o.pow2)(E,c,t)*w%t,S=(0,o.pow2)(T,n,t)*f%t,x=(0,o.pow2)(S,i,t)*y%t,P=(0,o.pow2)(x,r,t)*d%t,k=(0,o.pow2)(P,p,t);if(!g.eql(g.sqr(k),e))throw new Error("Cannot find square root");return k}const g=(0,o.Field)(l.p,undefined,undefined,{sqrt:m});n.secp256k1=(0,a.createCurve)({...l,Fp:g,lowS:!0,endo:d},r.sha256);const b={};function y(e,...t){let n=b[e];if(n===undefined){const t=(0,r.sha256)(Uint8Array.from(e,e=>e.charCodeAt(0)));n=(0,u.concatBytes)(t,t),b[e]=n}return(0,r.sha256)((0,u.concatBytes)(n,...t))}const w=e=>e.toBytes(!0).slice(1),v=e=>(0,u.numberToBytesBE)(e,32),E=e=>(0,o.mod)(e,l.p),T=e=>(0,o.mod)(e,l.n),S=(()=>n.secp256k1.Point)(),x=e=>e%p===f;function P(e){let t=(0,c._normFnElement)(S.Fn,e),n=S.BASE.multiply(t);return{scalar:x(n.y)?t:T(-t),bytes:w(n)}}function k(e){(0,u.aInRange)("x",e,h,l.p);const t=E(e*e);let n=m(E(t*e+BigInt(7)));x(n)||(n=E(-n));const r=S.fromAffine({x:e,y:n});return r.assertValidity(),r}const I=u.bytesToNumberBE;function A(...e){return T(I(y("BIP0340/challenge",...e)))}function _(e){return P(e).bytes}function C(e,t,n=(0,s.randomBytes)(32)){const r=(0,u.ensureBytes)("message",e),{bytes:a,scalar:i}=P(t),o=(0,u.ensureBytes)("auxRand",n,32),c=v(i^I(y("BIP0340/aux",o))),l=y("BIP0340/nonce",c,a,r),d=T(I(l));if(d===f)throw new Error("sign failed: k is zero");const{bytes:h,scalar:p}=P(d),m=A(h,a,r),g=new Uint8Array(64);if(g.set(h,0),g.set(v(T(p+m*i)),32),!j(g,r,a))throw new Error("sign: Invalid signature produced");return g}function j(e,t,n){const r=(0,u.ensureBytes)("signature",e,64),s=(0,u.ensureBytes)("message",t),a=(0,u.ensureBytes)("publicKey",n,32);try{const e=k(I(a)),t=I(r.subarray(0,32));if(!(0,u.inRange)(t,h,l.p))return!1;const n=I(r.subarray(32,64));if(!(0,u.inRange)(n,h,l.n))return!1;const i=A(v(t),w(e),s),o=S.BASE.multiplyUnsafe(n).add(e.multiplyUnsafe(T(-i))),{x:c,y:d}=o.toAffine();return!(o.is0()||!x(d)||c!==t)}catch(e){return!1}}n.schnorr=(()=>{const e=(e=(0,s.randomBytes)(48))=>(0,o.mapHashToField)(e,l.n);return n.secp256k1.utils.randomSecretKey,{keygen:function(t){const n=e(t);return{secretKey:n,publicKey:_(n)}},getPublicKey:_,sign:C,verify:j,Point:S,utils:{randomSecretKey:e,randomPrivateKey:e,taggedHash:y,lift_x:k,pointToBytes:w,numberToBytesBE:u.numberToBytesBE,bytesToNumberBE:u.bytesToNumberBE,mod:o.mod},info:{type:"weierstrass",publicKeyHasPrefix:!1,lengths:{secret:32,public:32,signature:64,seed:48}}}})();const R=(()=>(0,i.isogenyMap)(g,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(e=>e.map(e=>BigInt(e)))))(),O=(()=>(0,c.mapToCurveSimpleSWU)(g,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:g.create(BigInt("-11"))}))();n.secp256k1_hasher=(0,i.createHasher)(n.secp256k1.Point,e=>{const{x:t,y:n}=O(g.create(e[0]));return R(t,n)},{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:g.ORDER,m:1,k:128,expand:"xmd",hash:r.sha256}),n.hashToCurve=n.secp256k1_hasher.hashToCurve,n.encodeToCurve=n.secp256k1_hasher.encodeToCurve}}},{package:"@noble/curves",file:"node_modules/@noble/curves/secp256k1.js"}],[2877,{"@noble/hashes/utils.js":2891},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.notImplemented=n.bitMask=n.utf8ToBytes=n.randomBytes=n.isBytes=n.hexToBytes=n.concatBytes=n.bytesToUtf8=n.bytesToHex=n.anumber=n.abytes=void 0,n.abool=function(e,t){if("boolean"!=typeof t)throw new Error(e+" boolean expected, got "+t)},n.numberToHexUnpadded=o,n.hexToNumber=c,n.bytesToNumberBE=function(e){return c((0,r.bytesToHex)(e))},n.bytesToNumberLE=function(e){return(0,r.abytes)(e),c((0,r.bytesToHex)(Uint8Array.from(e).reverse()))},n.numberToBytesBE=u,n.numberToBytesLE=function(e,t){return u(e,t).reverse()},n.numberToVarBytesBE=function(e){return(0,r.hexToBytes)(o(e))},n.ensureBytes=function(e,t,n){let s;if("string"==typeof t)try{s=(0,r.hexToBytes)(t)}catch(t){throw new Error(e+" must be hex string or Uint8Array, cause: "+t)}else{if(!(0,r.isBytes)(t))throw new Error(e+" must be hex string or Uint8Array");s=Uint8Array.from(t)}const a=s.length;if("number"==typeof n&&a!==n)throw new Error(e+" of length "+n+" expected, got "+a);return s},n.equalBytes=function(e,t){if(e.length!==t.length)return!1;let n=0;for(let r=0;r<e.length;r++)n|=e[r]^t[r];return 0===n},n.inRange=d,n.aInRange=function(e,t,n,r){if(!d(t,n,r))throw new Error("expected valid "+e+": "+n+" <= n < "+r+", got "+t)},n.bitLen=function(e){let t;for(t=0;e>a;e>>=i,t+=1);return t},n.bitGet=function(e,t){return e>>BigInt(t)&i},n.bitSet=function(e,t,n){return e|(n?i:a)<<BigInt(t)},n.createHmacDrbg=function(e,t,n){if("number"!=typeof e||e<2)throw new Error("hashLen must be a number");if("number"!=typeof t||t<2)throw new Error("qByteLen must be a number");if("function"!=typeof n)throw new Error("hmacFn must be a function");const s=e=>new Uint8Array(e),a=e=>Uint8Array.of(e);let i=s(e),o=s(e),c=0;const u=()=>{i.fill(1),o.fill(0),c=0},l=(...e)=>n(o,i,...e),d=(e=s(0))=>{o=l(a(0),e),i=l(),0!==e.length&&(o=l(a(1),e),i=l())},f=()=>{if(c++>=1e3)throw new Error("drbg: tried 1000 values");let e=0;const n=[];for(;e<t;){i=l();const t=i.slice();n.push(t),e+=i.length}return(0,r.concatBytes)(...n)};return(e,t)=>{u(),d(e);let n=undefined;for(;!(n=t(f()));)d();return u(),n}},n.validateObject=function(e,t,n={}){const r=(t,n,r)=>{const s=f[n];if("function"!=typeof s)throw new Error("invalid validator function");const a=e[t];if(!(r&&a===undefined||s(a,e)))throw new Error("param "+String(t)+" is invalid. Expected "+n+", got "+a)};for(const[e,n]of Object.entries(t))r(e,n,!1);for(const[e,t]of Object.entries(n))r(e,t,!0);return e},n.isHash=function(e){return"function"==typeof e&&Number.isSafeInteger(e.outputLen)},n._validateObject=function(e,t,n={}){if(!e||"object"!=typeof e)throw new Error("expected valid options object");function r(t,n,r){const s=e[t];if(r&&s===undefined)return;const a=typeof s;if(a!==n||null===s)throw new Error(`param "${t}" is invalid: expected ${n}, got ${a}`)}Object.entries(t).forEach(([e,t])=>r(e,t,!1)),Object.entries(n).forEach(([e,t])=>r(e,t,!0))},n.memoized=function(e){const t=new WeakMap;return(n,...r)=>{const s=t.get(n);if(s!==undefined)return s;const a=e(n,...r);return t.set(n,a),a}};
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const r=e("@noble/hashes/utils.js");var s=e("@noble/hashes/utils.js");Object.defineProperty(n,"abytes",{enumerable:!0,get:function(){return s.abytes}}),Object.defineProperty(n,"anumber",{enumerable:!0,get:function(){return s.anumber}}),Object.defineProperty(n,"bytesToHex",{enumerable:!0,get:function(){return s.bytesToHex}}),Object.defineProperty(n,"bytesToUtf8",{enumerable:!0,get:function(){return s.bytesToUtf8}}),Object.defineProperty(n,"concatBytes",{enumerable:!0,get:function(){return s.concatBytes}}),Object.defineProperty(n,"hexToBytes",{enumerable:!0,get:function(){return s.hexToBytes}}),Object.defineProperty(n,"isBytes",{enumerable:!0,get:function(){return s.isBytes}}),Object.defineProperty(n,"randomBytes",{enumerable:!0,get:function(){return s.randomBytes}}),Object.defineProperty(n,"utf8ToBytes",{enumerable:!0,get:function(){return s.utf8ToBytes}});const a=BigInt(0),i=BigInt(1);function o(e){const t=e.toString(16);return 1&t.length?"0"+t:t}function c(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);return""===e?a:BigInt("0x"+e)}function u(e,t){return(0,r.hexToBytes)(e.toString(16).padStart(2*t,"0"))}const l=e=>"bigint"==typeof e&&a<=e;function d(e,t,n){return l(e)&&l(t)&&l(n)&&t<=e&&e<n}n.bitMask=e=>(i<<BigInt(e))-i;const f={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||(0,r.isBytes)(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};n.notImplemented=()=>{throw new Error("not implemented")}}}},{package:"@noble/curves",file:"node_modules/@noble/curves/utils.js"}],[2878,{"./utils.js":2891},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SHA512_IV=n.SHA384_IV=n.SHA224_IV=n.SHA256_IV=n.HashMD=void 0,n.setBigUint64=s,n.Chi=function(e,t,n){return e&t^~e&n},n.Maj=function(e,t,n){return e&t^e&n^t&n};const r=e("./utils.js");function s(e,t,n,r){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,n,r);const s=BigInt(32),a=BigInt(4294967295),i=Number(n>>s&a),o=Number(n&a),c=r?4:0,u=r?0:4;e.setUint32(t+c,i,r),e.setUint32(t+u,o,r)}class a extends r.Hash{constructor(e,t,n,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=s,this.buffer=new Uint8Array(e),this.view=(0,r.createView)(this.buffer)}update(e){(0,r.aexists)(this),e=(0,r.toBytes)(e),(0,r.abytes)(e);const{view:t,buffer:n,blockLen:s}=this,a=e.length;for(let i=0;i<a;){const o=Math.min(s-this.pos,a-i);if(o===s){const t=(0,r.createView)(e);for(;s<=a-i;i+=s)this.process(t,i);continue}n.set(e.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===s&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){(0,r.aexists)(this),(0,r.aoutput)(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:a,isLE:i}=this;let{pos:o}=this;t[o++]=128,(0,r.clean)(this.buffer.subarray(o)),this.padOffset>a-o&&(this.process(n,0),o=0);for(let e=o;e<a;e++)t[e]=0;s(n,a-8,BigInt(8*this.length),i),this.process(n,0);const c=(0,r.createView)(e),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=u/4,d=this.get();if(l>d.length)throw new Error("_sha2: outputLen bigger than state");for(let e=0;e<l;e++)c.setUint32(4*e,d[e],i)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:r,finished:s,destroyed:a,pos:i}=this;return e.destroyed=a,e.finished=s,e.length=r,e.pos=i,r%t&&e.buffer.set(n),e}clone(){return this._cloneInto()}}n.HashMD=a,n.SHA256_IV=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),n.SHA224_IV=Uint32Array.from([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]),n.SHA384_IV=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),n.SHA512_IV=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209])}}},{package:"@noble/hashes",file:"node_modules/@noble/hashes/_md.js"}],[2879,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.toBig=n.shrSL=n.shrSH=n.rotrSL=n.rotrSH=n.rotrBL=n.rotrBH=n.rotr32L=n.rotr32H=n.rotlSL=n.rotlSH=n.rotlBL=n.rotlBH=n.add5L=n.add5H=n.add4L=n.add4H=n.add3L=n.add3H=void 0,n.add=v,n.fromBig=a,n.split=i;const r=BigInt(2**32-1),s=BigInt(32);function a(e,t=!1){return t?{h:Number(e&r),l:Number(e>>s&r)}:{h:0|Number(e>>s&r),l:0|Number(e&r)}}function i(e,t=!1){const n=e.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let i=0;i<n;i++){const{h:n,l:o}=a(e[i],t);[r[i],s[i]]=[n,o]}return[r,s]}const o=(e,t)=>BigInt(e>>>0)<<s|BigInt(t>>>0);n.toBig=o;const c=(e,t,n)=>e>>>n;n.shrSH=c;const u=(e,t,n)=>e<<32-n|t>>>n;n.shrSL=u;const l=(e,t,n)=>e>>>n|t<<32-n;n.rotrSH=l;const d=(e,t,n)=>e<<32-n|t>>>n;n.rotrSL=d;const f=(e,t,n)=>e<<64-n|t>>>n-32;n.rotrBH=f;const h=(e,t,n)=>e>>>n-32|t<<64-n;n.rotrBL=h;const p=(e,t)=>t;n.rotr32H=p;const m=(e,t)=>e;n.rotr32L=m;const g=(e,t,n)=>e<<n|t>>>32-n;n.rotlSH=g;const b=(e,t,n)=>t<<n|e>>>32-n;n.rotlSL=b;const y=(e,t,n)=>t<<n-32|e>>>64-n;n.rotlBH=y;const w=(e,t,n)=>e<<n-32|t>>>64-n;function v(e,t,n,r){const s=(t>>>0)+(r>>>0);return{h:e+n+(s/2**32|0)|0,l:0|s}}n.rotlBL=w;const E=(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0);n.add3L=E;const T=(e,t,n,r)=>t+n+r+(e/2**32|0)|0;n.add3H=T;const S=(e,t,n,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0);n.add4L=S;const x=(e,t,n,r,s)=>t+n+r+s+(e/2**32|0)|0;n.add4H=x;const P=(e,t,n,r,s)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)+(s>>>0);n.add5L=P;const k=(e,t,n,r,s,a)=>t+n+r+s+a+(e/2**32|0)|0;n.add5H=k;const I={fromBig:a,split:i,toBig:o,shrSH:c,shrSL:u,rotrSH:l,rotrSL:d,rotrBH:f,rotrBL:h,rotr32H:p,rotr32L:m,rotlSH:g,rotlSL:b,rotlBH:y,rotlBL:w,add:v,add3L:E,add3H:T,add4L:S,add4H:x,add5H:k,add5L:P};n.default=I}}},{package:"@noble/hashes",file:"node_modules/@noble/hashes/_u64.js"}],[2880,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.crypto=void 0,n.crypto="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:undefined}}},{package:"@noble/hashes",file:"node_modules/@noble/hashes/crypto.js"}],[2881,{"./hmac.js":2882,"./utils.js":2891},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.hkdf=void 0,n.extract=a,n.expand=c;const r=e("./hmac.js"),s=e("./utils.js");function a(e,t,n){return(0,s.ahash)(e),n===undefined&&(n=new Uint8Array(e.outputLen)),(0,r.hmac)(e,(0,s.toBytes)(n),(0,s.toBytes)(t))}const i=Uint8Array.from([0]),o=Uint8Array.of();function c(e,t,n,a=32){(0,s.ahash)(e),(0,s.anumber)(a);const c=e.outputLen;if(a>255*c)throw new Error("Length should be <= 255*HashLen");const u=Math.ceil(a/c);n===undefined&&(n=o);const l=new Uint8Array(u*c),d=r.hmac.create(e,t),f=d._cloneInto(),h=new Uint8Array(d.outputLen);for(let e=0;e<u;e++)i[0]=e+1,f.update(0===e?o:h).update(n).update(i).digestInto(h),l.set(h,c*e),d._cloneInto(f);return d.destroy(),f.destroy(),(0,s.clean)(h,i),l.slice(0,a)}n.hkdf=(e,t,n,r,s)=>c(e,a(e,t,n),r,s)}}},{package:"@noble/hashes",file:"node_modules/@noble/hashes/hkdf.js"}],[2882,{"./utils.js":2891},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.hmac=n.HMAC=void 0;const r=e("./utils.js");class s extends r.Hash{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,(0,r.ahash)(e);const n=(0,r.toBytes)(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,a=new Uint8Array(s);a.set(n.length>s?e.create().update(n).digest():n);for(let e=0;e<a.length;e++)a[e]^=54;this.iHash.update(a),this.oHash=e.create();for(let e=0;e<a.length;e++)a[e]^=106;this.oHash.update(a),(0,r.clean)(a)}update(e){return(0,r.aexists)(this),this.iHash.update(e),this}digestInto(e){(0,r.aexists)(this),(0,r.abytes)(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:r,destroyed:s,blockLen:a,outputLen:i}=this;return e.finished=r,e.destroyed=s,e.blockLen=a,e.outputLen=i,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}n.HMAC=s;n.hmac=(e,t,n)=>new s(e,t).update(n).digest(),n.hmac.create=(e,t)=>new s(e,t)}}},{package:"@noble/hashes",file:"node_modules/@noble/hashes/hmac.js"}],[2883,{"./_md.js":2878,"./utils.js":2891},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ripemd160=n.RIPEMD160=n.md5=n.MD5=n.sha1=n.SHA1=void 0;const r=e("./_md.js"),s=e("./utils.js"),a=Uint32Array.from([1732584193,4023233417,2562383102,271733878,3285377520]),i=new Uint32Array(80);class o extends r.HashMD{constructor(){super(64,20,8,!1),this.A=0|a[0],this.B=0|a[1],this.C=0|a[2],this.D=0|a[3],this.E=0|a[4]}get(){const{A:e,B:t,C:n,D:r,E:s}=this;return[e,t,n,r,s]}set(e,t,n,r,s){this.A=0|e,this.B=0|t,this.C=0|n,this.D=0|r,this.E=0|s}process(e,t){for(let n=0;n<16;n++,t+=4)i[n]=e.getUint32(t,!1);for(let e=16;e<80;e++)i[e]=(0,s.rotl)(i[e-3]^i[e-8]^i[e-14]^i[e-16],1);let{A:n,B:a,C:o,D:c,E:u}=this;for(let e=0;e<80;e++){let t,l;e<20?(t=(0,r.Chi)(a,o,c),l=1518500249):e<40?(t=a^o^c,l=1859775393):e<60?(t=(0,r.Maj)(a,o,c),l=2400959708):(t=a^o^c,l=3395469782);const d=(0,s.rotl)(n,5)+t+u+l+i[e]|0;u=c,c=o,o=(0,s.rotl)(a,30),a=n,n=d}n=n+this.A|0,a=a+this.B|0,o=o+this.C|0,c=c+this.D|0,u=u+this.E|0,this.set(n,a,o,c,u)}roundClean(){(0,s.clean)(i)}destroy(){this.set(0,0,0,0,0),(0,s.clean)(this.buffer)}}n.SHA1=o,n.sha1=(0,s.createHasher)(()=>new o);const c=Math.pow(2,32),u=Array.from({length:64},(e,t)=>Math.floor(c*Math.abs(Math.sin(t+1)))),l=a.slice(0,4),d=new Uint32Array(16);class f extends r.HashMD{constructor(){super(64,16,8,!0),this.A=0|l[0],this.B=0|l[1],this.C=0|l[2],this.D=0|l[3]}get(){const{A:e,B:t,C:n,D:r}=this;return[e,t,n,r]}set(e,t,n,r){this.A=0|e,this.B=0|t,this.C=0|n,this.D=0|r}process(e,t){for(let n=0;n<16;n++,t+=4)d[n]=e.getUint32(t,!0);let{A:n,B:a,C:i,D:o}=this;for(let e=0;e<64;e++){let t,c,l;e<16?(t=(0,r.Chi)(a,i,o),c=e,l=[7,12,17,22]):e<32?(t=(0,r.Chi)(o,a,i),c=(5*e+1)%16,l=[5,9,14,20]):e<48?(t=a^i^o,c=(3*e+5)%16,l=[4,11,16,23]):(t=i^(a|~o),c=7*e%16,l=[6,10,15,21]),t=t+n+u[e]+d[c],n=o,o=i,i=a,a+=(0,s.rotl)(t,l[e%4])}n=n+this.A|0,a=a+this.B|0,i=i+this.C|0,o=o+this.D|0,this.set(n,a,i,o)}roundClean(){(0,s.clean)(d)}destroy(){this.set(0,0,0,0),(0,s.clean)(this.buffer)}}n.MD5=f,n.md5=(0,s.createHasher)(()=>new f);const h=Uint8Array.from([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),p=(()=>Uint8Array.from(new Array(16).fill(0).map((e,t)=>t)))(),m=(()=>p.map(e=>(9*e+5)%16))(),g=(()=>{const e=[[p],[m]];for(let t=0;t<4;t++)for(let n of e)n.push(n[t].map(e=>h[e]));return e})(),b=(()=>g[0])(),y=(()=>g[1])(),w=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(e=>Uint8Array.from(e)),v=b.map((e,t)=>e.map(e=>w[t][e])),E=y.map((e,t)=>e.map(e=>w[t][e])),T=Uint32Array.from([0,1518500249,1859775393,2400959708,2840853838]),S=Uint32Array.from([1352829926,1548603684,1836072691,2053994217,0]);function x(e,t,n,r){return 0===e?t^n^r:1===e?t&n|~t&r:2===e?(t|~n)^r:3===e?t&r|n&~r:t^(n|~r)}const P=new Uint32Array(16);class k extends r.HashMD{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:e,h1:t,h2:n,h3:r,h4:s}=this;return[e,t,n,r,s]}set(e,t,n,r,s){this.h0=0|e,this.h1=0|t,this.h2=0|n,this.h3=0|r,this.h4=0|s}process(e,t){for(let n=0;n<16;n++,t+=4)P[n]=e.getUint32(t,!0);let n=0|this.h0,r=n,a=0|this.h1,i=a,o=0|this.h2,c=o,u=0|this.h3,l=u,d=0|this.h4,f=d;for(let e=0;e<5;e++){const t=4-e,h=T[e],p=S[e],m=b[e],g=y[e],w=v[e],k=E[e];for(let t=0;t<16;t++){const r=(0,s.rotl)(n+x(e,a,o,u)+P[m[t]]+h,w[t])+d|0;n=d,d=u,u=0|(0,s.rotl)(o,10),o=a,a=r}for(let e=0;e<16;e++){const n=(0,s.rotl)(r+x(t,i,c,l)+P[g[e]]+p,k[e])+f|0;r=f,f=l,l=0|(0,s.rotl)(c,10),c=i,i=n}}this.set(this.h1+o+l|0,this.h2+u+f|0,this.h3+d+r|0,this.h4+n+i|0,this.h0+a+c|0)}roundClean(){(0,s.clean)(P)}destroy(){this.destroyed=!0,(0,s.clean)(this.buffer),this.set(0,0,0,0,0)}}n.RIPEMD160=k,n.ripemd160=(0,s.createHasher)(()=>new k)}}},{package:"@noble/hashes",file:"node_modules/@noble/hashes/legacy.js"}],[2884,{"./hmac.js":2882,"./utils.js":2891},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.pbkdf2=function(e,t,n,r){const{c:o,dkLen:c,DK:u,PRF:l,PRFSalt:d}=a(e,t,n,r);let f;const h=new Uint8Array(4),p=(0,s.createView)(h),m=new Uint8Array(l.outputLen);for(let e=1,t=0;t<c;e++,t+=l.outputLen){const n=u.subarray(t,t+l.outputLen);p.setInt32(0,e,!1),(f=d._cloneInto(f)).update(h).digestInto(m),n.set(m.subarray(0,n.length));for(let e=1;e<o;e++){l._cloneInto(f).update(m).digestInto(m);for(let e=0;e<n.length;e++)n[e]^=m[e]}}return i(l,d,u,f,m)},n.pbkdf2Async=async function(e,t,n,r){const{c:o,dkLen:c,asyncTick:u,DK:l,PRF:d,PRFSalt:f}=a(e,t,n,r);let h;const p=new Uint8Array(4),m=(0,s.createView)(p),g=new Uint8Array(d.outputLen);for(let e=1,t=0;t<c;e++,t+=d.outputLen){const n=l.subarray(t,t+d.outputLen);m.setInt32(0,e,!1),(h=f._cloneInto(h)).update(p).digestInto(g),n.set(g.subarray(0,n.length)),await(0,s.asyncLoop)(o-1,u,()=>{d._cloneInto(h).update(g).digestInto(g);for(let e=0;e<n.length;e++)n[e]^=g[e]})}return i(d,f,l,h,g)};const r=e("./hmac.js"),s=e("./utils.js");function a(e,t,n,a){(0,s.ahash)(e);const i=(0,s.checkOpts)({dkLen:32,asyncTick:10},a),{c:o,dkLen:c,asyncTick:u}=i;if((0,s.anumber)(o),(0,s.anumber)(c),(0,s.anumber)(u),o<1)throw new Error("iterations (c) should be >= 1");const l=(0,s.kdfInputToBytes)(t),d=(0,s.kdfInputToBytes)(n),f=new Uint8Array(c),h=r.hmac.create(e,l),p=h._cloneInto().update(d);return{c:o,dkLen:c,asyncTick:u,DK:f,PRF:h,PRFSalt:p}}function i(e,t,n,r,a){return e.destroy(),t.destroy(),r&&r.destroy(),(0,s.clean)(a),n}}}},{package:"@noble/hashes",file:"node_modules/@noble/hashes/pbkdf2.js"}],[2885,{"./legacy.js":2883},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ripemd160=n.RIPEMD160=void 0;const r=e("./legacy.js");n.RIPEMD160=r.RIPEMD160,n.ripemd160=r.ripemd160}}},{package:"@noble/hashes",file:"node_modules/@noble/hashes/ripemd160.js"}],[2886,{"./pbkdf2.js":2884,"./sha2.js":2887,"./utils.js":2891},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.scrypt=function(e,t,n){const{N:r,r:s,p:i,dkLen:l,blockSize32:d,V:f,B32:h,B:p,tmp:m,blockMixCb:g}=c(e,t,n);(0,a.swap32IfBE)(h);for(let e=0;e<i;e++){const t=d*e;for(let e=0;e<d;e++)f[e]=h[t+e];for(let e=0,t=0;e<r-1;e++)o(f,t,f,t+=d,s),g();o(f,(r-1)*d,h,t,s),g();for(let e=0;e<r;e++){const e=h[t+d-16]%r;for(let n=0;n<d;n++)m[n]=h[t+n]^f[e*d+n];o(m,0,h,t,s),g()}}return(0,a.swap32IfBE)(h),u(e,l,p,f,m)},n.scryptAsync=async function(e,t,n){const{N:r,r:s,p:i,dkLen:l,blockSize32:d,V:f,B32:h,B:p,tmp:m,blockMixCb:g,asyncTick:b}=c(e,t,n);(0,a.swap32IfBE)(h);for(let e=0;e<i;e++){const t=d*e;for(let e=0;e<d;e++)f[e]=h[t+e];let n=0;await(0,a.asyncLoop)(r-1,b,()=>{o(f,n,f,n+=d,s),g()}),o(f,(r-1)*d,h,t,s),g(),await(0,a.asyncLoop)(r,b,()=>{const e=h[t+d-16]%r;for(let n=0;n<d;n++)m[n]=h[t+n]^f[e*d+n];o(m,0,h,t,s),g()})}return(0,a.swap32IfBE)(h),u(e,l,p,f,m)};const r=e("./pbkdf2.js"),s=e("./sha2.js"),a=e("./utils.js");function i(e,t,n,r,s,i){let o=e[t++]^n[r++],c=e[t++]^n[r++],u=e[t++]^n[r++],l=e[t++]^n[r++],d=e[t++]^n[r++],f=e[t++]^n[r++],h=e[t++]^n[r++],p=e[t++]^n[r++],m=e[t++]^n[r++],g=e[t++]^n[r++],b=e[t++]^n[r++],y=e[t++]^n[r++],w=e[t++]^n[r++],v=e[t++]^n[r++],E=e[t++]^n[r++],T=e[t++]^n[r++],S=o,x=c,P=u,k=l,I=d,A=f,_=h,C=p,j=m,R=g,O=b,B=y,F=w,L=v,M=E,N=T;for(let e=0;e<8;e+=2)I^=(0,a.rotl)(S+F|0,7),j^=(0,a.rotl)(I+S|0,9),F^=(0,a.rotl)(j+I|0,13),S^=(0,a.rotl)(F+j|0,18),R^=(0,a.rotl)(A+x|0,7),L^=(0,a.rotl)(R+A|0,9),x^=(0,a.rotl)(L+R|0,13),A^=(0,a.rotl)(x+L|0,18),M^=(0,a.rotl)(O+_|0,7),P^=(0,a.rotl)(M+O|0,9),_^=(0,a.rotl)(P+M|0,13),O^=(0,a.rotl)(_+P|0,18),k^=(0,a.rotl)(N+B|0,7),C^=(0,a.rotl)(k+N|0,9),B^=(0,a.rotl)(C+k|0,13),N^=(0,a.rotl)(B+C|0,18),x^=(0,a.rotl)(S+k|0,7),P^=(0,a.rotl)(x+S|0,9),k^=(0,a.rotl)(P+x|0,13),S^=(0,a.rotl)(k+P|0,18),_^=(0,a.rotl)(A+I|0,7),C^=(0,a.rotl)(_+A|0,9),I^=(0,a.rotl)(C+_|0,13),A^=(0,a.rotl)(I+C|0,18),B^=(0,a.rotl)(O+R|0,7),j^=(0,a.rotl)(B+O|0,9),R^=(0,a.rotl)(j+B|0,13),O^=(0,a.rotl)(R+j|0,18),F^=(0,a.rotl)(N+M|0,7),L^=(0,a.rotl)(F+N|0,9),M^=(0,a.rotl)(L+F|0,13),N^=(0,a.rotl)(M+L|0,18);s[i++]=o+S|0,s[i++]=c+x|0,s[i++]=u+P|0,s[i++]=l+k|0,s[i++]=d+I|0,s[i++]=f+A|0,s[i++]=h+_|0,s[i++]=p+C|0,s[i++]=m+j|0,s[i++]=g+R|0,s[i++]=b+O|0,s[i++]=y+B|0,s[i++]=w+F|0,s[i++]=v+L|0,s[i++]=E+M|0,s[i++]=T+N|0}function o(e,t,n,r,s){let a=r+0,o=r+16*s;for(let r=0;r<16;r++)n[o+r]=e[t+16*(2*s-1)+r];for(let r=0;r<s;r++,a+=16,t+=16)i(n,o,e,t,n,a),r>0&&(o+=16),i(n,a,e,t+=16,n,o)}function c(e,t,n){const i=(0,a.checkOpts)({dkLen:32,asyncTick:10,maxmem:1073742848},n),{N:o,r:c,p:u,dkLen:l,asyncTick:d,maxmem:f,onProgress:h}=i;if((0,a.anumber)(o),(0,a.anumber)(c),(0,a.anumber)(u),(0,a.anumber)(l),(0,a.anumber)(d),(0,a.anumber)(f),h!==undefined&&"function"!=typeof h)throw new Error("progressCb should be function");const p=128*c,m=p/4,g=Math.pow(2,32);if(o<=1||o&o-1||o>g)throw new Error("Scrypt: N must be larger than 1, a power of 2, and less than 2^32");if(u<0||u>32*(g-1)/p)throw new Error("Scrypt: p must be a positive integer less than or equal to ((2^32 - 1) * 32) / (128 * r)");if(l<0||l>32*(g-1))throw new Error("Scrypt: dkLen should be positive integer less than or equal to (2^32 - 1) * 32");if(p*(o+u)>f)throw new Error("Scrypt: memused is bigger than maxMem. Expected 128 * r * (N + p) > maxmem of "+f);const b=(0,r.pbkdf2)(s.sha256,e,t,{c:1,dkLen:p*u}),y=(0,a.u32)(b),w=(0,a.u32)(new Uint8Array(p*o)),v=(0,a.u32)(new Uint8Array(p));let E=()=>{};if(h){const e=2*o*u,t=Math.max(Math.floor(e/1e4),1);let n=0;E=()=>{n++,!h||n%t&&n!==e||h(n/e)}}return{N:o,r:c,p:u,dkLen:l,blockSize32:m,V:w,B32:y,B:b,tmp:v,blockMixCb:E,asyncTick:d}}function u(e,t,n,i,o){const c=(0,r.pbkdf2)(s.sha256,e,n,{c:1,dkLen:t});return(0,a.clean)(n,i,o),c}}}},{package:"@noble/hashes",file:"node_modules/@noble/hashes/scrypt.js"}],[2887,{"./_md.js":2878,"./_u64.js":2879,"./utils.js":2891},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.sha512_224=n.sha512_256=n.sha384=n.sha512=n.sha224=n.sha256=n.SHA512_256=n.SHA512_224=n.SHA384=n.SHA512=n.SHA224=n.SHA256=void 0;const r=e("./_md.js"),s=e("./_u64.js"),a=e("./utils.js"),i=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),o=new Uint32Array(64);class c extends r.HashMD{constructor(e=32){super(64,e,8,!1),this.A=0|r.SHA256_IV[0],this.B=0|r.SHA256_IV[1],this.C=0|r.SHA256_IV[2],this.D=0|r.SHA256_IV[3],this.E=0|r.SHA256_IV[4],this.F=0|r.SHA256_IV[5],this.G=0|r.SHA256_IV[6],this.H=0|r.SHA256_IV[7]}get(){const{A:e,B:t,C:n,D:r,E:s,F:a,G:i,H:o}=this;return[e,t,n,r,s,a,i,o]}set(e,t,n,r,s,a,i,o){this.A=0|e,this.B=0|t,this.C=0|n,this.D=0|r,this.E=0|s,this.F=0|a,this.G=0|i,this.H=0|o}process(e,t){for(let n=0;n<16;n++,t+=4)o[n]=e.getUint32(t,!1);for(let e=16;e<64;e++){const t=o[e-15],n=o[e-2],r=(0,a.rotr)(t,7)^(0,a.rotr)(t,18)^t>>>3,s=(0,a.rotr)(n,17)^(0,a.rotr)(n,19)^n>>>10;o[e]=s+o[e-7]+r+o[e-16]|0}let{A:n,B:s,C:c,D:u,E:l,F:d,G:f,H:h}=this;for(let e=0;e<64;e++){const t=h+((0,a.rotr)(l,6)^(0,a.rotr)(l,11)^(0,a.rotr)(l,25))+(0,r.Chi)(l,d,f)+i[e]+o[e]|0,p=((0,a.rotr)(n,2)^(0,a.rotr)(n,13)^(0,a.rotr)(n,22))+(0,r.Maj)(n,s,c)|0;h=f,f=d,d=l,l=u+t|0,u=c,c=s,s=n,n=t+p|0}n=n+this.A|0,s=s+this.B|0,c=c+this.C|0,u=u+this.D|0,l=l+this.E|0,d=d+this.F|0,f=f+this.G|0,h=h+this.H|0,this.set(n,s,c,u,l,d,f,h)}roundClean(){(0,a.clean)(o)}destroy(){this.set(0,0,0,0,0,0,0,0),(0,a.clean)(this.buffer)}}n.SHA256=c;class u extends c{constructor(){super(28),this.A=0|r.SHA224_IV[0],this.B=0|r.SHA224_IV[1],this.C=0|r.SHA224_IV[2],this.D=0|r.SHA224_IV[3],this.E=0|r.SHA224_IV[4],this.F=0|r.SHA224_IV[5],this.G=0|r.SHA224_IV[6],this.H=0|r.SHA224_IV[7]}}n.SHA224=u;const l=(()=>s.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))))(),d=(()=>l[0])(),f=(()=>l[1])(),h=new Uint32Array(80),p=new Uint32Array(80);class m extends r.HashMD{constructor(e=64){super(128,e,16,!1),this.Ah=0|r.SHA512_IV[0],this.Al=0|r.SHA512_IV[1],this.Bh=0|r.SHA512_IV[2],this.Bl=0|r.SHA512_IV[3],this.Ch=0|r.SHA512_IV[4],this.Cl=0|r.SHA512_IV[5],this.Dh=0|r.SHA512_IV[6],this.Dl=0|r.SHA512_IV[7],this.Eh=0|r.SHA512_IV[8],this.El=0|r.SHA512_IV[9],this.Fh=0|r.SHA512_IV[10],this.Fl=0|r.SHA512_IV[11],this.Gh=0|r.SHA512_IV[12],this.Gl=0|r.SHA512_IV[13],this.Hh=0|r.SHA512_IV[14],this.Hl=0|r.SHA512_IV[15]}get(){const{Ah:e,Al:t,Bh:n,Bl:r,Ch:s,Cl:a,Dh:i,Dl:o,Eh:c,El:u,Fh:l,Fl:d,Gh:f,Gl:h,Hh:p,Hl:m}=this;return[e,t,n,r,s,a,i,o,c,u,l,d,f,h,p,m]}set(e,t,n,r,s,a,i,o,c,u,l,d,f,h,p,m){this.Ah=0|e,this.Al=0|t,this.Bh=0|n,this.Bl=0|r,this.Ch=0|s,this.Cl=0|a,this.Dh=0|i,this.Dl=0|o,this.Eh=0|c,this.El=0|u,this.Fh=0|l,this.Fl=0|d,this.Gh=0|f,this.Gl=0|h,this.Hh=0|p,this.Hl=0|m}process(e,t){for(let n=0;n<16;n++,t+=4)h[n]=e.getUint32(t),p[n]=e.getUint32(t+=4);for(let e=16;e<80;e++){const t=0|h[e-15],n=0|p[e-15],r=s.rotrSH(t,n,1)^s.rotrSH(t,n,8)^s.shrSH(t,n,7),a=s.rotrSL(t,n,1)^s.rotrSL(t,n,8)^s.shrSL(t,n,7),i=0|h[e-2],o=0|p[e-2],c=s.rotrSH(i,o,19)^s.rotrBH(i,o,61)^s.shrSH(i,o,6),u=s.rotrSL(i,o,19)^s.rotrBL(i,o,61)^s.shrSL(i,o,6),l=s.add4L(a,u,p[e-7],p[e-16]),d=s.add4H(l,r,c,h[e-7],h[e-16]);h[e]=0|d,p[e]=0|l}let{Ah:n,Al:r,Bh:a,Bl:i,Ch:o,Cl:c,Dh:u,Dl:l,Eh:m,El:g,Fh:b,Fl:y,Gh:w,Gl:v,Hh:E,Hl:T}=this;for(let e=0;e<80;e++){const t=s.rotrSH(m,g,14)^s.rotrSH(m,g,18)^s.rotrBH(m,g,41),S=s.rotrSL(m,g,14)^s.rotrSL(m,g,18)^s.rotrBL(m,g,41),x=m&b^~m&w,P=g&y^~g&v,k=s.add5L(T,S,P,f[e],p[e]),I=s.add5H(k,E,t,x,d[e],h[e]),A=0|k,_=s.rotrSH(n,r,28)^s.rotrBH(n,r,34)^s.rotrBH(n,r,39),C=s.rotrSL(n,r,28)^s.rotrBL(n,r,34)^s.rotrBL(n,r,39),j=n&a^n&o^a&o,R=r&i^r&c^i&c;E=0|w,T=0|v,w=0|b,v=0|y,b=0|m,y=0|g,({h:m,l:g}=s.add(0|u,0|l,0|I,0|A)),u=0|o,l=0|c,o=0|a,c=0|i,a=0|n,i=0|r;const O=s.add3L(A,C,R);n=s.add3H(O,I,_,j),r=0|O}({h:n,l:r}=s.add(0|this.Ah,0|this.Al,0|n,0|r)),({h:a,l:i}=s.add(0|this.Bh,0|this.Bl,0|a,0|i)),({h:o,l:c}=s.add(0|this.Ch,0|this.Cl,0|o,0|c)),({h:u,l:l}=s.add(0|this.Dh,0|this.Dl,0|u,0|l)),({h:m,l:g}=s.add(0|this.Eh,0|this.El,0|m,0|g)),({h:b,l:y}=s.add(0|this.Fh,0|this.Fl,0|b,0|y)),({h:w,l:v}=s.add(0|this.Gh,0|this.Gl,0|w,0|v)),({h:E,l:T}=s.add(0|this.Hh,0|this.Hl,0|E,0|T)),this.set(n,r,a,i,o,c,u,l,m,g,b,y,w,v,E,T)}roundClean(){(0,a.clean)(h,p)}destroy(){(0,a.clean)(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}n.SHA512=m;class g extends m{constructor(){super(48),this.Ah=0|r.SHA384_IV[0],this.Al=0|r.SHA384_IV[1],this.Bh=0|r.SHA384_IV[2],this.Bl=0|r.SHA384_IV[3],this.Ch=0|r.SHA384_IV[4],this.Cl=0|r.SHA384_IV[5],this.Dh=0|r.SHA384_IV[6],this.Dl=0|r.SHA384_IV[7],this.Eh=0|r.SHA384_IV[8],this.El=0|r.SHA384_IV[9],this.Fh=0|r.SHA384_IV[10],this.Fl=0|r.SHA384_IV[11],this.Gh=0|r.SHA384_IV[12],this.Gl=0|r.SHA384_IV[13],this.Hh=0|r.SHA384_IV[14],this.Hl=0|r.SHA384_IV[15]}}n.SHA384=g;const b=Uint32Array.from([2352822216,424955298,1944164710,2312950998,502970286,855612546,1738396948,1479516111,258812777,2077511080,2011393907,79989058,1067287976,1780299464,286451373,2446758561]),y=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);class w extends m{constructor(){super(28),this.Ah=0|b[0],this.Al=0|b[1],this.Bh=0|b[2],this.Bl=0|b[3],this.Ch=0|b[4],this.Cl=0|b[5],this.Dh=0|b[6],this.Dl=0|b[7],this.Eh=0|b[8],this.El=0|b[9],this.Fh=0|b[10],this.Fl=0|b[11],this.Gh=0|b[12],this.Gl=0|b[13],this.Hh=0|b[14],this.Hl=0|b[15]}}n.SHA512_224=w;class v extends m{constructor(){super(32),this.Ah=0|y[0],this.Al=0|y[1],this.Bh=0|y[2],this.Bl=0|y[3],this.Ch=0|y[4],this.Cl=0|y[5],this.Dh=0|y[6],this.Dl=0|y[7],this.Eh=0|y[8],this.El=0|y[9],this.Fh=0|y[10],this.Fl=0|y[11],this.Gh=0|y[12],this.Gl=0|y[13],this.Hh=0|y[14],this.Hl=0|y[15]}}n.SHA512_256=v,n.sha256=(0,a.createHasher)(()=>new c),n.sha224=(0,a.createHasher)(()=>new u),n.sha512=(0,a.createHasher)(()=>new m),n.sha384=(0,a.createHasher)(()=>new g),n.sha512_256=(0,a.createHasher)(()=>new v),n.sha512_224=(0,a.createHasher)(()=>new w)}}},{package:"@noble/hashes",file:"node_modules/@noble/hashes/sha2.js"}],[2888,{"./sha2.js":2887},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.sha224=n.SHA224=n.sha256=n.SHA256=void 0;const r=e("./sha2.js");n.SHA256=r.SHA256,n.sha256=r.sha256,n.SHA224=r.SHA224,n.sha224=r.sha224}}},{package:"@noble/hashes",file:"node_modules/@noble/hashes/sha256.js"}],[2889,{"./_u64.js":2879,"./utils.js":2891},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.shake256=n.shake128=n.keccak_512=n.keccak_384=n.keccak_256=n.keccak_224=n.sha3_512=n.sha3_384=n.sha3_256=n.sha3_224=n.Keccak=void 0,n.keccakP=w;const r=e("./_u64.js"),s=e("./utils.js"),a=BigInt(0),i=BigInt(1),o=BigInt(2),c=BigInt(7),u=BigInt(256),l=BigInt(113),d=[],f=[],h=[];for(let e=0,t=i,n=1,r=0;e<24;e++){[n,r]=[r,(2*n+3*r)%5],d.push(2*(5*r+n)),f.push((e+1)*(e+2)/2%64);let s=a;for(let e=0;e<7;e++)t=(t<<i^(t>>c)*l)%u,t&o&&(s^=i<<(i<<BigInt(e))-i);h.push(s)}const p=(0,r.split)(h,!0),m=p[0],g=p[1],b=(e,t,n)=>n>32?(0,r.rotlBH)(e,t,n):(0,r.rotlSH)(e,t,n),y=(e,t,n)=>n>32?(0,r.rotlBL)(e,t,n):(0,r.rotlSL)(e,t,n);function w(e,t=24){const n=new Uint32Array(10);for(let r=24-t;r<24;r++){for(let t=0;t<10;t++)n[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){const r=(t+8)%10,s=(t+2)%10,a=n[s],i=n[s+1],o=b(a,i,1)^n[r],c=y(a,i,1)^n[r+1];for(let n=0;n<50;n+=10)e[t+n]^=o,e[t+n+1]^=c}let t=e[2],s=e[3];for(let n=0;n<24;n++){const r=f[n],a=b(t,s,r),i=y(t,s,r),o=d[n];t=e[o],s=e[o+1],e[o]=a,e[o+1]=i}for(let t=0;t<50;t+=10){for(let r=0;r<10;r++)n[r]=e[t+r];for(let r=0;r<10;r++)e[t+r]^=~n[(r+2)%10]&n[(r+4)%10]}e[0]^=m[r],e[1]^=g[r]}(0,s.clean)(n)}class v extends s.Hash{constructor(e,t,n,r=!1,a=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=t,this.outputLen=n,this.enableXOF=r,this.rounds=a,(0,s.anumber)(n),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=(0,s.u32)(this.state)}clone(){return this._cloneInto()}keccak(){(0,s.swap32IfBE)(this.state32),w(this.state32,this.rounds),(0,s.swap32IfBE)(this.state32),this.posOut=0,this.pos=0}update(e){(0,s.aexists)(this),e=(0,s.toBytes)(e),(0,s.abytes)(e);const{blockLen:t,state:n}=this,r=e.length;for(let s=0;s<r;){const a=Math.min(t-this.pos,r-s);for(let t=0;t<a;t++)n[this.pos++]^=e[s++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:n,blockLen:r}=this;e[n]^=t,128&t&&n===r-1&&this.keccak(),e[r-1]^=128,this.keccak()}writeInto(e){(0,s.aexists)(this,!1),(0,s.abytes)(e),this.finish();const t=this.state,{blockLen:n}=this;for(let r=0,s=e.length;r<s;){this.posOut>=n&&this.keccak();const a=Math.min(n-this.posOut,s-r);e.set(t.subarray(this.posOut,this.posOut+a),r),this.posOut+=a,r+=a}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return(0,s.anumber)(e),this.xofInto(new Uint8Array(e))}digestInto(e){if((0,s.aoutput)(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,(0,s.clean)(this.state)}_cloneInto(e){const{blockLen:t,suffix:n,outputLen:r,rounds:s,enableXOF:a}=this;return e||(e=new v(t,n,r,a,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=n,e.outputLen=r,e.enableXOF=a,e.destroyed=this.destroyed,e}}n.Keccak=v;const E=(e,t,n)=>(0,s.createHasher)(()=>new v(t,e,n));n.sha3_224=E(6,144,28),n.sha3_256=E(6,136,32),n.sha3_384=E(6,104,48),n.sha3_512=E(6,72,64),n.keccak_224=E(1,144,28),n.keccak_256=E(1,136,32),n.keccak_384=E(1,104,48),n.keccak_512=E(1,72,64);const T=(e,t,n)=>(0,s.createXOFer)((r={})=>new v(t,e,r.dkLen===undefined?n:r.dkLen,!0));n.shake128=T(31,168,16),n.shake256=T(31,136,32)}}},{package:"@noble/hashes",file:"node_modules/@noble/hashes/sha3.js"}],[2890,{"./sha2.js":2887},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.sha512_256=n.SHA512_256=n.sha512_224=n.SHA512_224=n.sha384=n.SHA384=n.sha512=n.SHA512=void 0;const r=e("./sha2.js");n.SHA512=r.SHA512,n.sha512=r.sha512,n.SHA384=r.SHA384,n.sha384=r.sha384,n.SHA512_224=r.SHA512_224,n.sha512_224=r.sha512_224,n.SHA512_256=r.SHA512_256,n.sha512_256=r.sha512_256}}},{package:"@noble/hashes",file:"node_modules/@noble/hashes/sha512.js"}],[2891,{"@noble/hashes/crypto":2880},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){
/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */
Object.defineProperty(n,"__esModule",{value:!0}),n.wrapXOFConstructorWithOpts=n.wrapConstructorWithOpts=n.wrapConstructor=n.Hash=n.nextTick=n.swap32IfBE=n.byteSwapIfBE=n.swap8IfBE=n.isLE=void 0,n.isBytes=s,n.anumber=a,n.abytes=i,n.ahash=function(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.createHasher");a(e.outputLen),a(e.blockLen)},n.aexists=function(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")},n.aoutput=function(e,t){i(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)},n.u8=function(e){return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)},n.u32=function(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))},n.clean=function(...e){for(let t=0;t<e.length;t++)e[t].fill(0)},n.createView=function(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)},n.rotr=function(e,t){return e<<32-t|e>>>t},n.rotl=function(e,t){return e<<t|e>>>32-t>>>0},n.byteSwap=o,n.byteSwap32=c,n.bytesToHex=function(e){if(i(e),u)return e.toHex();let t="";for(let n=0;n<e.length;n++)t+=l[e[n]];return t},n.hexToBytes=function(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);if(u)return Uint8Array.fromHex(e);const t=e.length,n=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let t=0,s=0;t<n;t++,s+=2){const n=f(e.charCodeAt(s)),a=f(e.charCodeAt(s+1));if(n===undefined||a===undefined){const t=e[s]+e[s+1];throw new Error('hex string expected, got non-hex character "'+t+'" at index '+s)}r[t]=16*n+a}return r},n.asyncLoop=async function(e,t,r){let s=Date.now();for(let a=0;a<e;a++){r(a);const e=Date.now()-s;e>=0&&e<t||(await(0,n.nextTick)(),s+=e)}},n.utf8ToBytes=h,n.bytesToUtf8=function(e){return(new TextDecoder).decode(e)},n.toBytes=p,n.kdfInputToBytes=function(e){"string"==typeof e&&(e=h(e));return i(e),e},n.concatBytes=function(...e){let t=0;for(let n=0;n<e.length;n++){const r=e[n];i(r),t+=r.length}const n=new Uint8Array(t);for(let t=0,r=0;t<e.length;t++){const s=e[t];n.set(s,r),r+=s.length}return n},n.checkOpts=function(e,t){if(t!==undefined&&"[object Object]"!=={}.toString.call(t))throw new Error("options should be object or undefined");return Object.assign(e,t)},n.createHasher=m,n.createOptHasher=g,n.createXOFer=b,n.randomBytes=function(e=32){if(r.crypto&&"function"==typeof r.crypto.getRandomValues)return r.crypto.getRandomValues(new Uint8Array(e));if(r.crypto&&"function"==typeof r.crypto.randomBytes)return Uint8Array.from(r.crypto.randomBytes(e));throw new Error("crypto.getRandomValues must be defined")};const r=e("@noble/hashes/crypto");function s(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function a(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function i(e,...t){if(!s(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function o(e){return e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255}function c(e){for(let t=0;t<e.length;t++)e[t]=o(e[t]);return e}n.isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0],n.swap8IfBE=n.isLE?e=>e:e=>o(e),n.byteSwapIfBE=n.swap8IfBE,n.swap32IfBE=n.isLE?e=>e:c;const u=(()=>"function"==typeof Uint8Array.from([]).toHex&&"function"==typeof Uint8Array.fromHex)(),l=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));const d={_0:48,_9:57,A:65,F:70,a:97,f:102};function f(e){return e>=d._0&&e<=d._9?e-d._0:e>=d.A&&e<=d.F?e-(d.A-10):e>=d.a&&e<=d.f?e-(d.a-10):void 0}function h(e){if("string"!=typeof e)throw new Error("string expected");return new Uint8Array((new TextEncoder).encode(e))}function p(e){return"string"==typeof e&&(e=h(e)),i(e),e}n.nextTick=async()=>{};function m(e){const t=t=>e().update(p(t)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function g(e){const t=(t,n)=>e(n).update(p(t)).digest(),n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=t=>e(t),t}function b(e){const t=(t,n)=>e(n).update(p(t)).digest(),n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=t=>e(t),t}n.Hash=class{},n.wrapConstructor=m,n.wrapConstructorWithOpts=g,n.wrapXOFConstructorWithOpts=b}}},{package:"@noble/hashes",file:"node_modules/@noble/hashes/utils.js"}],[2896,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){function r(e){var t=e.getBoundingClientRect();return{width:t.width,height:t.height,top:t.top,right:t.right,bottom:t.bottom,left:t.left,x:t.left,y:t.top}}function s(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function a(e){var t=s(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function i(e){return e instanceof s(e).Element||e instanceof Element}function o(e){return e instanceof s(e).HTMLElement||e instanceof HTMLElement}function c(e){return"undefined"!=typeof ShadowRoot&&(e instanceof s(e).ShadowRoot||e instanceof ShadowRoot)}function u(e){return e?(e.nodeName||"").toLowerCase():null}function l(e){return((i(e)?e.ownerDocument:e.document)||window.document).documentElement}function d(e){return r(l(e)).left+a(e).scrollLeft}function f(e){return s(e).getComputedStyle(e)}function h(e){var t=f(e),n=t.overflow,r=t.overflowX,s=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+s+r)}function p(e,t,n){void 0===n&&(n=!1);var i,c,f=l(t),p=r(e),m=o(t),g={scrollLeft:0,scrollTop:0},b={x:0,y:0};return(m||!m&&!n)&&(("body"!==u(t)||h(f))&&(g=(i=t)!==s(i)&&o(i)?{scrollLeft:(c=i).scrollLeft,scrollTop:c.scrollTop}:a(i)),o(t)?((b=r(t)).x+=t.clientLeft,b.y+=t.clientTop):f&&(b.x=d(f))),{x:p.left+g.scrollLeft-b.x,y:p.top+g.scrollTop-b.y,width:p.width,height:p.height}}function m(e){var t=r(e),n=e.offsetWidth,s=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-s)<=1&&(s=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:s}}function g(e){return"html"===u(e)?e:e.assignedSlot||e.parentNode||(c(e)?e.host:null)||l(e)}function b(e){return["html","body","#document"].indexOf(u(e))>=0?e.ownerDocument.body:o(e)&&h(e)?e:b(g(e))}function y(e,t){var n;void 0===t&&(t=[]);var r=b(e),a=r===(null==(n=e.ownerDocument)?void 0:n.body),i=s(r),o=a?[i].concat(i.visualViewport||[],h(r)?r:[]):r,c=t.concat(o);return a?c:c.concat(y(g(o)))}function w(e){return["table","td","th"].indexOf(u(e))>=0}function v(e){return o(e)&&"fixed"!==f(e).position?e.offsetParent:null}function E(e){for(var t=s(e),n=v(e);n&&w(n)&&"static"===f(n).position;)n=v(n);return n&&("html"===u(n)||"body"===u(n)&&"static"===f(n).position)?t:n||function(e){var t=-1!==navigator.userAgent.toLowerCase().indexOf("firefox");if(-1!==navigator.userAgent.indexOf("Trident")&&o(e)&&"fixed"===f(e).position)return null;for(var n=g(e);o(n)&&["html","body"].indexOf(u(n))<0;){var r=f(n);if("none"!==r.transform||"none"!==r.perspective||"paint"===r.contain||-1!==["transform","perspective"].indexOf(r.willChange)||t&&"filter"===r.willChange||t&&r.filter&&"none"!==r.filter)return n;n=n.parentNode}return null}(e)||t}Object.defineProperty(n,"__esModule",{value:!0});var T="top",S="bottom",x="right",P="left",k="auto",I=[T,S,x,P],A="start",_="end",C="viewport",j="popper",R=I.reduce(function(e,t){return e.concat([t+"-"+A,t+"-"+_])},[]),O=[].concat(I,[k]).reduce(function(e,t){return e.concat([t,t+"-"+A,t+"-"+_])},[]),B=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function F(e){var t=new Map,n=new Set,r=[];function s(e){n.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach(function(e){if(!n.has(e)){var r=t.get(e);r&&s(r)}}),r.push(e)}return e.forEach(function(e){t.set(e.name,e)}),e.forEach(function(e){n.has(e.name)||s(e)}),r}function L(e){return e.split("-")[0]}var M=Math.max,N=Math.min,D=Math.round;function G(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&c(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function H(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function U(e,t){return t===C?H(function(e){var t=s(e),n=l(e),r=t.visualViewport,a=n.clientWidth,i=n.clientHeight,o=0,c=0;return r&&(a=r.width,i=r.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(o=r.offsetLeft,c=r.offsetTop)),{width:a,height:i,x:o+d(e),y:c}}(e)):o(t)?function(e){var t=r(e);return t.top=t.top+e.clientTop,t.left=t.left+e.clientLeft,t.bottom=t.top+e.clientHeight,t.right=t.left+e.clientWidth,t.width=e.clientWidth,t.height=e.clientHeight,t.x=t.left,t.y=t.top,t}(t):H(function(e){var t,n=l(e),r=a(e),s=null==(t=e.ownerDocument)?void 0:t.body,i=M(n.scrollWidth,n.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),o=M(n.scrollHeight,n.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),c=-r.scrollLeft+d(e),u=-r.scrollTop;return"rtl"===f(s||n).direction&&(c+=M(n.clientWidth,s?s.clientWidth:0)-i),{width:i,height:o,x:c,y:u}}(l(e)))}function q(e,t,n){var r="clippingParents"===t?function(e){var t=y(g(e)),n=["absolute","fixed"].indexOf(f(e).position)>=0&&o(e)?E(e):e;return i(n)?t.filter(function(e){return i(e)&&G(e,n)&&"body"!==u(e)}):[]}(e):[].concat(t),s=[].concat(r,[n]),a=s[0],c=s.reduce(function(t,n){var r=U(e,n);return t.top=M(r.top,t.top),t.right=N(r.right,t.right),t.bottom=N(r.bottom,t.bottom),t.left=M(r.left,t.left),t},U(e,a));return c.width=c.right-c.left,c.height=c.bottom-c.top,c.x=c.left,c.y=c.top,c}function K(e){return e.split("-")[1]}function V(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function $(e){var t,n=e.reference,r=e.element,s=e.placement,a=s?L(s):null,i=s?K(s):null,o=n.x+n.width/2-r.width/2,c=n.y+n.height/2-r.height/2;switch(a){case T:t={x:o,y:n.y-r.height};break;case S:t={x:o,y:n.y+n.height};break;case x:t={x:n.x+n.width,y:c};break;case P:t={x:n.x-r.width,y:c};break;default:t={x:n.x,y:n.y}}var u=a?V(a):null;if(null!=u){var l="y"===u?"height":"width";switch(i){case A:t[u]=t[u]-(n[l]/2-r[l]/2);break;case _:t[u]=t[u]+(n[l]/2-r[l]/2)}}return t}function z(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function W(e,t){return t.reduce(function(t,n){return t[n]=e,t},{})}function J(e,t){void 0===t&&(t={});var n=t,s=n.placement,a=void 0===s?e.placement:s,o=n.boundary,c=void 0===o?"clippingParents":o,u=n.rootBoundary,d=void 0===u?C:u,f=n.elementContext,h=void 0===f?j:f,p=n.altBoundary,m=void 0!==p&&p,g=n.padding,b=void 0===g?0:g,y=z("number"!=typeof b?b:W(b,I)),w=h===j?"reference":j,v=e.elements.reference,E=e.rects.popper,P=e.elements[m?w:h],k=q(i(P)?P:P.contextElement||l(e.elements.popper),c,d),A=r(v),_=$({reference:A,element:E,strategy:"absolute",placement:a}),R=H(Object.assign({},E,_)),O=h===j?R:A,B={top:k.top-O.top+y.top,bottom:O.bottom-k.bottom+y.bottom,left:k.left-O.left+y.left,right:O.right-k.right+y.right},F=e.modifiersData.offset;if(h===j&&F){var L=F[a];Object.keys(B).forEach(function(e){var t=[x,S].indexOf(e)>=0?1:-1,n=[T,S].indexOf(e)>=0?"y":"x";B[e]+=L[n]*t})}return B}var X={placement:"bottom",modifiers:[],strategy:"absolute"};function Y(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(e){return!(e&&"function"==typeof e.getBoundingClientRect)})}function Z(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,r=void 0===n?[]:n,s=t.defaultOptions,a=void 0===s?X:s;return function(e,t,n){void 0===n&&(n=a);var s,o,c={placement:"bottom",orderedModifiers:[],options:Object.assign({},X,a),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},u=[],l=!1,d={state:c,setOptions:function(n){f(),c.options=Object.assign({},a,c.options,n),c.scrollParents={reference:i(e)?y(e):e.contextElement?y(e.contextElement):[],popper:y(t)};var s=function(e){var t=F(e);return B.reduce(function(e,n){return e.concat(t.filter(function(e){return e.phase===n}))},[])}(function(e){var t=e.reduce(function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e},{});return Object.keys(t).map(function(e){return t[e]})}([].concat(r,c.options.modifiers)));return c.orderedModifiers=s.filter(function(e){return e.enabled}),c.orderedModifiers.forEach(function(e){var t=e.name,n=e.options,r=void 0===n?{}:n,s=e.effect;if("function"==typeof s){var a=s({state:c,name:t,instance:d,options:r}),i=function(){};u.push(a||i)}}),d.update()},forceUpdate:function(){if(!l){var e=c.elements,t=e.reference,n=e.popper;if(Y(t,n)){c.rects={reference:p(t,E(n),"fixed"===c.options.strategy),popper:m(n)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(e){return c.modifiersData[e.name]=Object.assign({},e.data)});for(var r=0;r<c.orderedModifiers.length;r++)if(!0!==c.reset){var s=c.orderedModifiers[r],a=s.fn,i=s.options,o=void 0===i?{}:i,u=s.name;"function"==typeof a&&(c=a({state:c,options:o,name:u,instance:d})||c)}else c.reset=!1,r=-1}}},update:(s=function(){return new Promise(function(e){d.forceUpdate(),e(c)})},function(){return o||(o=new Promise(function(e){Promise.resolve().then(function(){o=undefined,e(s())})})),o}),destroy:function(){f(),l=!0}};if(!Y(e,t))return d;function f(){u.forEach(function(e){return e()}),u=[]}return d.setOptions(n).then(function(e){!l&&n.onFirstUpdate&&n.onFirstUpdate(e)}),d}}var Q={passive:!0};var ee={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,r=e.options,a=r.scroll,i=void 0===a||a,o=r.resize,c=void 0===o||o,u=s(t.elements.popper),l=[].concat(t.scrollParents.reference,t.scrollParents.popper);return i&&l.forEach(function(e){e.addEventListener("scroll",n.update,Q)}),c&&u.addEventListener("resize",n.update,Q),function(){i&&l.forEach(function(e){e.removeEventListener("scroll",n.update,Q)}),c&&u.removeEventListener("resize",n.update,Q)}},data:{}};var te={name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=$({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},ne={top:"auto",right:"auto",bottom:"auto",left:"auto"};function re(e){var t,n=e.popper,r=e.popperRect,a=e.placement,i=e.offsets,o=e.position,c=e.gpuAcceleration,u=e.adaptive,d=e.roundOffsets,h=!0===d?function(e){var t=e.x,n=e.y,r=window.devicePixelRatio||1;return{x:D(D(t*r)/r)||0,y:D(D(n*r)/r)||0}}(i):"function"==typeof d?d(i):i,p=h.x,m=void 0===p?0:p,g=h.y,b=void 0===g?0:g,y=i.hasOwnProperty("x"),w=i.hasOwnProperty("y"),v=P,k=T,I=window;if(u){var A=E(n),_="clientHeight",C="clientWidth";A===s(n)&&"static"!==f(A=l(n)).position&&(_="scrollHeight",C="scrollWidth"),a===T&&(k=S,b-=A[_]-r.height,b*=c?1:-1),a===P&&(v=x,m-=A[C]-r.width,m*=c?1:-1)}var j,R=Object.assign({position:o},u&&ne);return c?Object.assign({},R,((j={})[k]=w?"0":"",j[v]=y?"0":"",j.transform=(I.devicePixelRatio||1)<2?"translate("+m+"px, "+b+"px)":"translate3d("+m+"px, "+b+"px, 0)",j)):Object.assign({},R,((t={})[k]=w?b+"px":"",t[v]=y?m+"px":"",t.transform="",t))}var se={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,r=n.gpuAcceleration,s=void 0===r||r,a=n.adaptive,i=void 0===a||a,o=n.roundOffsets,c=void 0===o||o,u={placement:L(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:s};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,re(Object.assign({},u,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:i,roundOffsets:c})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,re(Object.assign({},u,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}};var ae={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach(function(e){var n=t.styles[e]||{},r=t.attributes[e]||{},s=t.elements[e];o(s)&&u(s)&&(Object.assign(s.style,n),Object.keys(r).forEach(function(e){var t=r[e];!1===t?s.removeAttribute(e):s.setAttribute(e,!0===t?"":t)}))})},effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(e){var r=t.elements[e],s=t.attributes[e]||{},a=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:n[e]).reduce(function(e,t){return e[t]="",e},{});o(r)&&u(r)&&(Object.assign(r.style,a),Object.keys(s).forEach(function(e){r.removeAttribute(e)}))})}},requires:["computeStyles"]};var ie={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,r=e.name,s=n.offset,a=void 0===s?[0,0]:s,i=O.reduce(function(e,n){return e[n]=function(e,t,n){var r=L(e),s=[P,T].indexOf(r)>=0?-1:1,a="function"==typeof n?n(Object.assign({},t,{placement:e})):n,i=a[0],o=a[1];return i=i||0,o=(o||0)*s,[P,x].indexOf(r)>=0?{x:o,y:i}:{x:i,y:o}}(n,t.rects,a),e},{}),o=i[t.placement],c=o.x,u=o.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=c,t.modifiersData.popperOffsets.y+=u),t.modifiersData[r]=i}},oe={left:"right",right:"left",bottom:"top",top:"bottom"};function ce(e){return e.replace(/left|right|bottom|top/g,function(e){return oe[e]})}var ue={start:"end",end:"start"};function le(e){return e.replace(/start|end/g,function(e){return ue[e]})}function de(e,t){void 0===t&&(t={});var n=t,r=n.placement,s=n.boundary,a=n.rootBoundary,i=n.padding,o=n.flipVariations,c=n.allowedAutoPlacements,u=void 0===c?O:c,l=K(r),d=l?o?R:R.filter(function(e){return K(e)===l}):I,f=d.filter(function(e){return u.indexOf(e)>=0});0===f.length&&(f=d);var h=f.reduce(function(t,n){return t[n]=J(e,{placement:n,boundary:s,rootBoundary:a,padding:i})[L(n)],t},{});return Object.keys(h).sort(function(e,t){return h[e]-h[t]})}var fe={name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var s=n.mainAxis,a=void 0===s||s,i=n.altAxis,o=void 0===i||i,c=n.fallbackPlacements,u=n.padding,l=n.boundary,d=n.rootBoundary,f=n.altBoundary,h=n.flipVariations,p=void 0===h||h,m=n.allowedAutoPlacements,g=t.options.placement,b=L(g),y=c||(b===g||!p?[ce(g)]:function(e){if(L(e)===k)return[];var t=ce(e);return[le(e),t,le(t)]}(g)),w=[g].concat(y).reduce(function(e,n){return e.concat(L(n)===k?de(t,{placement:n,boundary:l,rootBoundary:d,padding:u,flipVariations:p,allowedAutoPlacements:m}):n)},[]),v=t.rects.reference,E=t.rects.popper,I=new Map,_=!0,C=w[0],j=0;j<w.length;j++){var R=w[j],O=L(R),B=K(R)===A,F=[T,S].indexOf(O)>=0,M=F?"width":"height",N=J(t,{placement:R,boundary:l,rootBoundary:d,altBoundary:f,padding:u}),D=F?B?x:P:B?S:T;v[M]>E[M]&&(D=ce(D));var G=ce(D),H=[];if(a&&H.push(N[O]<=0),o&&H.push(N[D]<=0,N[G]<=0),H.every(function(e){return e})){C=R,_=!1;break}I.set(R,H)}if(_)for(var U=function(e){var t=w.find(function(t){var n=I.get(t);if(n)return n.slice(0,e).every(function(e){return e})});if(t)return C=t,"break"},q=p?3:1;q>0;q--){if("break"===U(q))break}t.placement!==C&&(t.modifiersData[r]._skip=!0,t.placement=C,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function he(e,t,n){return M(e,N(t,n))}var pe={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name,s=n.mainAxis,a=void 0===s||s,i=n.altAxis,o=void 0!==i&&i,c=n.boundary,u=n.rootBoundary,l=n.altBoundary,d=n.padding,f=n.tether,h=void 0===f||f,p=n.tetherOffset,g=void 0===p?0:p,b=J(t,{boundary:c,rootBoundary:u,padding:d,altBoundary:l}),y=L(t.placement),w=K(t.placement),v=!w,k=V(y),I="x"===k?"y":"x",_=t.modifiersData.popperOffsets,C=t.rects.reference,j=t.rects.popper,R="function"==typeof g?g(Object.assign({},t.rects,{placement:t.placement})):g,O={x:0,y:0};if(_){if(a||o){var B="y"===k?T:P,F="y"===k?S:x,D="y"===k?"height":"width",G=_[k],H=_[k]+b[B],U=_[k]-b[F],q=h?-j[D]/2:0,$=w===A?C[D]:j[D],z=w===A?-j[D]:-C[D],W=t.elements.arrow,X=h&&W?m(W):{width:0,height:0},Y=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},Z=Y[B],Q=Y[F],ee=he(0,C[D],X[D]),te=v?C[D]/2-q-ee-Z-R:$-ee-Z-R,ne=v?-C[D]/2+q+ee+Q+R:z+ee+Q+R,re=t.elements.arrow&&E(t.elements.arrow),se=re?"y"===k?re.clientTop||0:re.clientLeft||0:0,ae=t.modifiersData.offset?t.modifiersData.offset[t.placement][k]:0,ie=_[k]+te-ae-se,oe=_[k]+ne-ae;if(a){var ce=he(h?N(H,ie):H,G,h?M(U,oe):U);_[k]=ce,O[k]=ce-G}if(o){var ue="x"===k?T:P,le="x"===k?S:x,de=_[I],fe=de+b[ue],pe=de-b[le],me=he(h?N(fe,ie):fe,de,h?M(pe,oe):pe);_[I]=me,O[I]=me-de}}t.modifiersData[r]=O}},requiresIfExists:["offset"]};var me={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,r=e.name,s=e.options,a=n.elements.arrow,i=n.modifiersData.popperOffsets,o=L(n.placement),c=V(o),u=[P,x].indexOf(o)>=0?"height":"width";if(a&&i){var l=function(e,t){return z("number"!=typeof(e="function"==typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:W(e,I))}(s.padding,n),d=m(a),f="y"===c?T:P,h="y"===c?S:x,p=n.rects.reference[u]+n.rects.reference[c]-i[c]-n.rects.popper[u],g=i[c]-n.rects.reference[c],b=E(a),y=b?"y"===c?b.clientHeight||0:b.clientWidth||0:0,w=p/2-g/2,v=l[f],k=y-d[u]-l[h],A=y/2-d[u]/2+w,_=he(v,A,k),C=c;n.modifiersData[r]=((t={})[C]=_,t.centerOffset=_-A,t)}},effect:function(e){var t=e.state,n=e.options.element,r=void 0===n?"[data-popper-arrow]":n;null!=r&&("string"!=typeof r||(r=t.elements.popper.querySelector(r)))&&G(t.elements.popper,r)&&(t.elements.arrow=r)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function ge(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function be(e){return[T,x,S,P].some(function(t){return e[t]>=0})}var ye={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,r=t.rects.reference,s=t.rects.popper,a=t.modifiersData.preventOverflow,i=J(t,{elementContext:"reference"}),o=J(t,{altBoundary:!0}),c=ge(i,r),u=ge(o,s,a),l=be(c),d=be(u);t.modifiersData[n]={referenceClippingOffsets:c,popperEscapeOffsets:u,isReferenceHidden:l,hasPopperEscaped:d},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":l,"data-popper-escaped":d})}},we=Z({defaultModifiers:[ee,te,se,ae]}),ve=[ee,te,se,ae,ie,fe,pe,me,ye],Ee=Z({defaultModifiers:ve});n.applyStyles=ae,n.arrow=me,n.computeStyles=se,n.createPopper=Ee,n.createPopperLite=we,n.defaultModifiers=ve,n.detectOverflow=J,n.eventListeners=ee,n.flip=fe,n.hide=ye,n.offset=ie,n.popperGenerator=Z,n.popperOffsets=te,n.preventOverflow=pe}}},{package:"@popperjs/core",file:"node_modules/@popperjs/core/dist/cjs/popper.js"}],[2897,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){t.exports=function(e,t){var n=new Array(arguments.length-1),r=0,s=2,a=!0;for(;s<arguments.length;)n[r++]=arguments[s++];return new Promise(function(s,i){n[r]=function(e){if(a)if(a=!1,e)i(e);else{for(var t=new Array(arguments.length-1),n=0;n<t.length;)t[n++]=arguments[n];s.apply(null,t)}};try{e.apply(t||null,n)}catch(e){a&&(a=!1,i(e))}})}}}},{package:"@trezor/connect-web>@trezor/connect>@trezor/protobuf>protobufjs>@protobufjs/aspromise",file:"node_modules/@protobufjs/aspromise/index.js"}],[2898,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=n;r.length=function(e){var t=e.length;if(!t)return 0;for(var n=0;--t%4>1&&"="===e.charAt(t);)++n;return Math.ceil(3*e.length)/4-n};for(var s=new Array(64),a=new Array(123),i=0;i<64;)a[s[i]=i<26?i+65:i<52?i+71:i<62?i-4:i-59|43]=i++;r.encode=function(e,t,n){for(var r,a=null,i=[],o=0,c=0;t<n;){var u=e[t++];switch(c){case 0:i[o++]=s[u>>2],r=(3&u)<<4,c=1;break;case 1:i[o++]=s[r|u>>4],r=(15&u)<<2,c=2;break;case 2:i[o++]=s[r|u>>6],i[o++]=s[63&u],c=0}o>8191&&((a||(a=[])).push(String.fromCharCode.apply(String,i)),o=0)}return c&&(i[o++]=s[r],i[o++]=61,1===c&&(i[o++]=61)),a?(o&&a.push(String.fromCharCode.apply(String,i.slice(0,o))),a.join("")):String.fromCharCode.apply(String,i.slice(0,o))};var o="invalid encoding";r.decode=function(e,t,n){for(var r,s=n,i=0,c=0;c<e.length;){var u=e.charCodeAt(c++);if(61===u&&i>1)break;if((u=a[u])===undefined)throw Error(o);switch(i){case 0:r=u,i=1;break;case 1:t[n++]=r<<2|(48&u)>>4,r=u,i=2;break;case 2:t[n++]=(15&r)<<4|(60&u)>>2,r=u,i=3;break;case 3:t[n++]=(3&r)<<6|u,i=0}}if(1===i)throw Error(o);return n-s},r.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}}}},{package:"@trezor/connect-web>@trezor/connect>@trezor/protobuf>protobufjs>@protobufjs/base64",file:"node_modules/@protobufjs/base64/index.js"}],[2899,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){function r(e,t){"string"==typeof e&&(t=e,e=undefined);var n=[];function s(e){if("string"!=typeof e){var t=a();if(r.verbose&&console.log("codegen: "+t),t="return "+t,e){for(var i=Object.keys(e),o=new Array(i.length+1),c=new Array(i.length),u=0;u<i.length;)o[u]=i[u],c[u]=e[i[u++]];return o[u]=t,Function.apply(null,o).apply(null,c)}return Function(t)()}for(var l=new Array(arguments.length-1),d=0;d<l.length;)l[d]=arguments[++d];if(d=0,e=e.replace(/%([%dfijs])/g,function(e,t){var n=l[d++];switch(t){case"d":case"f":return String(Number(n));case"i":return String(Math.floor(n));case"j":return JSON.stringify(n);case"s":return String(n)}return"%"}),d!==l.length)throw Error("parameter count mismatch");return n.push(e),s}function a(r){return"function "+(r||t||"")+"("+(e&&e.join(",")||"")+"){\n  "+n.join("\n  ")+"\n}"}return s.toString=a,s}t.exports=r,r.verbose=!1}}},{package:"@trezor/connect-web>@trezor/connect>@trezor/protobuf>protobufjs>@protobufjs/codegen",file:"node_modules/@protobufjs/codegen/index.js"}],[2900,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){function r(){this._listeners={}}t.exports=r,r.prototype.on=function(e,t,n){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:n||this}),this},r.prototype.off=function(e,t){if(e===undefined)this._listeners={};else if(t===undefined)this._listeners[e]=[];else for(var n=this._listeners[e],r=0;r<n.length;)n[r].fn===t?n.splice(r,1):++r;return this},r.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var n=[],r=1;r<arguments.length;)n.push(arguments[r++]);for(r=0;r<t.length;)t[r].fn.apply(t[r++].ctx,n)}return this}}}},{package:"@trezor/connect-web>@trezor/connect>@trezor/protobuf>protobufjs>@protobufjs/eventemitter",file:"node_modules/@protobufjs/eventemitter/index.js"}],[2901,{"@protobufjs/aspromise":2897,"@protobufjs/inquire":2903},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){t.exports=a;var r=e("@protobufjs/aspromise"),s=e("@protobufjs/inquire")("fs");function a(e,t,n){return"function"==typeof t?(n=t,t={}):t||(t={}),n?!t.xhr&&s&&s.readFile?s.readFile(e,function(r,s){return r&&"undefined"!=typeof XMLHttpRequest?a.xhr(e,t,n):r?n(r):n(null,t.binary?s:s.toString("utf8"))}):a.xhr(e,t,n):r(a,this,e,t)}a.xhr=function(e,t,n){var r=new XMLHttpRequest;r.onreadystatechange=function(){if(4!==r.readyState)return undefined;if(0!==r.status&&200!==r.status)return n(Error("status "+r.status));if(t.binary){var e=r.response;if(!e){e=[];for(var s=0;s<r.responseText.length;++s)e.push(255&r.responseText.charCodeAt(s))}return n(null,"undefined"!=typeof Uint8Array?new Uint8Array(e):e)}return n(null,r.responseText)},t.binary&&("overrideMimeType"in r&&r.overrideMimeType("text/plain; charset=x-user-defined"),r.responseType="arraybuffer"),r.open("GET",e),r.send()}}}},{package:"@trezor/connect-web>@trezor/connect>@trezor/protobuf>protobufjs>@protobufjs/fetch",file:"node_modules/@protobufjs/fetch/index.js"}],[2902,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){function r(e){return"undefined"!=typeof Float32Array?function(){var t=new Float32Array([-0]),n=new Uint8Array(t.buffer),r=128===n[3];function s(e,r,s){t[0]=e,r[s]=n[0],r[s+1]=n[1],r[s+2]=n[2],r[s+3]=n[3]}function a(e,r,s){t[0]=e,r[s]=n[3],r[s+1]=n[2],r[s+2]=n[1],r[s+3]=n[0]}function i(e,r){return n[0]=e[r],n[1]=e[r+1],n[2]=e[r+2],n[3]=e[r+3],t[0]}function o(e,r){return n[3]=e[r],n[2]=e[r+1],n[1]=e[r+2],n[0]=e[r+3],t[0]}e.writeFloatLE=r?s:a,e.writeFloatBE=r?a:s,e.readFloatLE=r?i:o,e.readFloatBE=r?o:i}():function(){function t(e,t,n,r){var s=t<0?1:0;if(s&&(t=-t),0===t)e(1/t>0?0:2147483648,n,r);else if(isNaN(t))e(2143289344,n,r);else if(t>34028234663852886e22)e((s<<31|2139095040)>>>0,n,r);else if(t<11754943508222875e-54)e((s<<31|Math.round(t/1401298464324817e-60))>>>0,n,r);else{var a=Math.floor(Math.log(t)/Math.LN2);e((s<<31|a+127<<23|8388607&Math.round(t*Math.pow(2,-a)*8388608))>>>0,n,r)}}function n(e,t,n){var r=e(t,n),s=2*(r>>31)+1,a=r>>>23&255,i=8388607&r;return 255===a?i?NaN:s*Infinity:0===a?1401298464324817e-60*s*i:s*Math.pow(2,a-150)*(i+8388608)}e.writeFloatLE=t.bind(null,s),e.writeFloatBE=t.bind(null,a),e.readFloatLE=n.bind(null,i),e.readFloatBE=n.bind(null,o)}(),"undefined"!=typeof Float64Array?function(){var t=new Float64Array([-0]),n=new Uint8Array(t.buffer),r=128===n[7];function s(e,r,s){t[0]=e,r[s]=n[0],r[s+1]=n[1],r[s+2]=n[2],r[s+3]=n[3],r[s+4]=n[4],r[s+5]=n[5],r[s+6]=n[6],r[s+7]=n[7]}function a(e,r,s){t[0]=e,r[s]=n[7],r[s+1]=n[6],r[s+2]=n[5],r[s+3]=n[4],r[s+4]=n[3],r[s+5]=n[2],r[s+6]=n[1],r[s+7]=n[0]}function i(e,r){return n[0]=e[r],n[1]=e[r+1],n[2]=e[r+2],n[3]=e[r+3],n[4]=e[r+4],n[5]=e[r+5],n[6]=e[r+6],n[7]=e[r+7],t[0]}function o(e,r){return n[7]=e[r],n[6]=e[r+1],n[5]=e[r+2],n[4]=e[r+3],n[3]=e[r+4],n[2]=e[r+5],n[1]=e[r+6],n[0]=e[r+7],t[0]}e.writeDoubleLE=r?s:a,e.writeDoubleBE=r?a:s,e.readDoubleLE=r?i:o,e.readDoubleBE=r?o:i}():function(){function t(e,t,n,r,s,a){var i=r<0?1:0;if(i&&(r=-r),0===r)e(0,s,a+t),e(1/r>0?0:2147483648,s,a+n);else if(isNaN(r))e(0,s,a+t),e(2146959360,s,a+n);else if(r>17976931348623157e292)e(0,s,a+t),e((i<<31|2146435072)>>>0,s,a+n);else{var o;if(r<22250738585072014e-324)e((o=r/5e-324)>>>0,s,a+t),e((i<<31|o/4294967296)>>>0,s,a+n);else{var c=Math.floor(Math.log(r)/Math.LN2);1024===c&&(c=1023),e(4503599627370496*(o=r*Math.pow(2,-c))>>>0,s,a+t),e((i<<31|c+1023<<20|1048576*o&1048575)>>>0,s,a+n)}}}function n(e,t,n,r,s){var a=e(r,s+t),i=e(r,s+n),o=2*(i>>31)+1,c=i>>>20&2047,u=4294967296*(1048575&i)+a;return 2047===c?u?NaN:o*Infinity:0===c?5e-324*o*u:o*Math.pow(2,c-1075)*(u+4503599627370496)}e.writeDoubleLE=t.bind(null,s,0,4),e.writeDoubleBE=t.bind(null,a,4,0),e.readDoubleLE=n.bind(null,i,0,4),e.readDoubleBE=n.bind(null,o,4,0)}(),e}function s(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}function a(e,t,n){t[n]=e>>>24,t[n+1]=e>>>16&255,t[n+2]=e>>>8&255,t[n+3]=255&e}function i(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function o(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}t.exports=r(r)}}},{package:"@trezor/connect-web>@trezor/connect>@trezor/protobuf>protobufjs>@protobufjs/float",file:"node_modules/@protobufjs/float/index.js"}],[2903,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){t.exports=function(e){try{var t=(0,eval)("quire".replace(/^/,"re"))(e);if(t&&(t.length||Object.keys(t).length))return t}catch(e){}return null}}}},{package:"@trezor/connect-web>@trezor/connect>@trezor/protobuf>protobufjs>@protobufjs/inquire",file:"node_modules/@protobufjs/inquire/index.js"}],[2904,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=n,s=r.isAbsolute=function(e){return/^(?:\/|\w+:)/.test(e)},a=r.normalize=function(e){var t=(e=e.replace(/\\/g,"/").replace(/\/{2,}/g,"/")).split("/"),n=s(e),r="";n&&(r=t.shift()+"/");for(var a=0;a<t.length;)".."===t[a]?a>0&&".."!==t[a-1]?t.splice(--a,2):n?t.splice(a,1):++a:"."===t[a]?t.splice(a,1):++a;return r+t.join("/")};r.resolve=function(e,t,n){return n||(t=a(t)),s(t)?t:(n||(e=a(e)),(e=e.replace(/(?:\/|^)[^/]+$/,"")).length?a(e+"/"+t):t)}}}},{package:"@trezor/connect-web>@trezor/connect>@trezor/protobuf>protobufjs>@protobufjs/path",file:"node_modules/@protobufjs/path/index.js"}],[2905,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){t.exports=function(e,t,n){var r=n||8192,s=r>>>1,a=null,i=r;return function(n){if(n<1||n>s)return e(n);i+n>r&&(a=e(r),i=0);var o=t.call(a,i,i+=n);return 7&i&&(i=1+(7|i)),o}}}}},{package:"@trezor/connect-web>@trezor/connect>@trezor/protobuf>protobufjs>@protobufjs/pool",file:"node_modules/@protobufjs/pool/index.js"}],[2906,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=n;r.length=function(e){for(var t=0,n=0,r=0;r<e.length;++r)(n=e.charCodeAt(r))<128?t+=1:n<2048?t+=2:55296==(64512&n)&&56320==(64512&e.charCodeAt(r+1))?(++r,t+=4):t+=3;return t},r.read=function(e,t,n){if(n-t<1)return"";for(var r,s=null,a=[],i=0;t<n;)(r=e[t++])<128?a[i++]=r:r>191&&r<224?a[i++]=(31&r)<<6|63&e[t++]:r>239&&r<365?(r=((7&r)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,a[i++]=55296+(r>>10),a[i++]=56320+(1023&r)):a[i++]=(15&r)<<12|(63&e[t++])<<6|63&e[t++],i>8191&&((s||(s=[])).push(String.fromCharCode.apply(String,a)),i=0);return s?(i&&s.push(String.fromCharCode.apply(String,a.slice(0,i))),s.join("")):String.fromCharCode.apply(String,a.slice(0,i))},r.write=function(e,t,n){for(var r,s,a=n,i=0;i<e.length;++i)(r=e.charCodeAt(i))<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):55296==(64512&r)&&56320==(64512&(s=e.charCodeAt(i+1)))?(r=65536+((1023&r)<<10)+(1023&s),++i,t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128);return n-a}}}},{package:"@trezor/connect-web>@trezor/connect>@trezor/protobuf>protobufjs>@protobufjs/utf8",file:"node_modules/@protobufjs/utf8/index.js"}],[2907,{"./redux-toolkit.cjs.development.js":2908},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){t.exports=e("./redux-toolkit.cjs.development.js")}}},{package:"@reduxjs/toolkit",file:"node_modules/@reduxjs/toolkit/dist/index.js"}],[2908,{_process:4803,immer:4360,redux:5011,"redux-thunk":5010,reselect:2910},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){var r,s=this&&this.__define||function(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]},a=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){s(this,constructor,e)}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__generator||function(e,t){var n,r,s,a,i={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(a){return function(o){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(s=2&a[0]?r.return:a[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,a[1])).done)return s;switch(r=0,s&&(a=[2&a[0],s.value]),a[0]){case 0:case 1:s=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(s=i.trys,(s=s.length>0&&s[s.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!s||a[1]>s[0]&&a[1]<s[3])){i.label=a[1];break}if(6===a[0]&&i.label<s[1]){i.label=s[1],s=a;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(a);break}s[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=s=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,o])}}},o=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,s=e.length;n<r;n++,s++)e[s]=t[n];return e},c=Object.create,u=Object.defineProperty,l=Object.defineProperties,d=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyDescriptors,h=Object.getOwnPropertyNames,p=Object.getOwnPropertySymbols,m=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable,y=function(e,t,n){return t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},w=function(e,t){for(var n in t||(t={}))g.call(t,n)&&y(e,n,t[n]);if(p)for(var r=0,s=p(t);r<s.length;r++){n=s[r];b.call(t,n)&&y(e,n,t[n])}return e},v=function(e,t){return l(e,f(t))},E=function(e){return u(e,"__esModule",{value:!0})},T=function(e,t,n){if(t&&"object"==typeof t||"function"==typeof t)for(var r=function(r){g.call(e,r)||"default"===r||u(e,r,{get:function(){return t[r]},enumerable:!(n=d(t,r))||n.enumerable})},s=0,a=h(t);s<a.length;s++){r(a[s])}return e},S=function(e){return T(E(u(null!=e?c(m(e)):{},"default",e&&e.__esModule&&"default"in e?{get:function(){return e.default},enumerable:!0}:{value:e,enumerable:!0})),e)},x=function(e,t,n){return new Promise(function(r,s){var a=function(e){try{o(n.next(e))}catch(e){s(e)}},i=function(e){try{o(n.throw(e))}catch(e){s(e)}},o=function(e){return e.done?r(e.value):Promise.resolve(e.value).then(a,i)};o((n=n.apply(e,t)).next())})};E(n),function(e,t){for(var n in t)u(e,n,{get:t[n],enumerable:!0})}(n,{EnhancerArray:function(){return z},MiddlewareArray:function(){return $},SHOULD_AUTOBATCH:function(){return Et},TaskAbortError:function(){return et},addListener:function(){return mt},autoBatchEnhancer:function(){return kt},clearAllListeners:function(){return gt},configureStore:function(){return de},createAction:function(){return M},createActionCreatorInvariantMiddleware:function(){return q},createAsyncThunk:function(){return Ce},createDraftSafeSelector:function(){return C},createEntityAdapter:function(){return xe},createImmutableStateInvariantMiddleware:function(){return re},createListenerMiddleware:function(){return wt},createNextState:function(){return k.default},createReducer:function(){return me},createSelector:function(){return I.createSelector},createSerializableStateInvariantMiddleware:function(){return oe},createSlice:function(){return be},current:function(){return k.current},findNonSerializableValue:function(){return ae},freeze:function(){return k.freeze},getDefaultMiddleware:function(){return ue},getType:function(){return U},isAction:function(){return N},isActionCreator:function(){return D},isAllOf:function(){return Be},isAnyOf:function(){return Oe},isAsyncThunkAction:function(){return He},isDraft:function(){return k.isDraft},isFluxStandardAction:function(){return G},isFulfilled:function(){return Ge},isImmutableDefault:function(){return Q},isPending:function(){return Me},isPlain:function(){return se},isPlainObject:function(){return B},isRejected:function(){return Ne},isRejectedWithValue:function(){return De},miniSerializeError:function(){return _e},nanoid:function(){return Pe},original:function(){return k.original},prepareAutoBatched:function(){return Tt},removeListener:function(){return bt},unwrapResult:function(){return je}});var P=S(e("immer"));T(n,S(e("redux")));var k=S(e("immer")),I=S(e("reselect")),A=S(e("immer")),_=S(e("reselect")),C=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=_.createSelector.apply(void 0,e);return function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return n.apply(void 0,o([(0,A.isDraft)(e)?(0,A.current)(e):e],t))}},j=S(e("redux")),R=S(e("redux")),O="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"==typeof arguments[0]?R.compose:R.compose.apply(null,arguments)};"undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;function B(e){if("object"!=typeof e||null===e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;for(var n=t;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return t===n}var F=S(e("redux-thunk")),L=function(e){return e&&"function"==typeof e.match};function M(e,t){function n(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(t){var s=t.apply(void 0,n);if(!s)throw new Error("prepareAction did not return an object");return w(w({type:e,payload:s.payload},"meta"in s&&{meta:s.meta}),"error"in s&&{error:s.error})}return{type:e,payload:n[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(t){return t.type===e},n}function N(e){return B(e)&&"type"in e}function D(e){return"function"==typeof e&&"type"in e&&L(e)}function G(e){return N(e)&&"string"==typeof e.type&&Object.keys(e).every(H)}function H(e){return["type","payload","error","meta"].indexOf(e)>-1}function U(e){return""+e}function q(e){void 0===e&&(e={});var t=e.isActionCreator,n=void 0===t?D:t;return function(){return function(e){return function(t){var r,s,a;return n(t)&&console.warn((r=t.type,s=r?(""+r).split("/"):[],a=s[s.length-1]||"actionCreator",'Detected an action creator with type "'+(r||"unknown")+"\" being dispatched. \nMake sure you're calling the action creator before dispatching, i.e. `dispatch("+a+"())` instead of `dispatch("+a+")`. This is necessary even if the action has no payload.")),e(t)}}}}var K=S(e("immer"));function V(e,t){var n=0;return{measureTime:function(e){var t=Date.now();try{return e()}finally{var r=Date.now();n+=r-t}},warnIfExceeded:function(){n>e&&console.warn(t+" took "+n+"ms, which is more than the warning threshold of "+e+"ms. \nIf your state or actions are very large, you may want to disable the middleware as it might cause too much of a slowdown in development mode. See https://redux-toolkit.js.org/api/getDefaultMiddleware for instructions.\nIt is disabled in production builds, so you don't need to worry about that.")}}}var $=function(e){function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var s=e.apply(this,n)||this;return Object.setPrototypeOf(s,t.prototype),s}return a(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),s(t.prototype,"concat",function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.prototype.concat.apply(this,t)}),s(t.prototype,"prepend",function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,o([void 0],e[0].concat(this)))):new(t.bind.apply(t,o([void 0],e.concat(this))))}),t}(Array),z=function(e){function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var s=e.apply(this,n)||this;return Object.setPrototypeOf(s,t.prototype),s}return a(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),s(t.prototype,"concat",function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.prototype.concat.apply(this,t)}),s(t.prototype,"prepend",function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,o([void 0],e[0].concat(this)))):new(t.bind.apply(t,o([void 0],e.concat(this))))}),t}(Array);function W(e){return(0,K.isDraftable)(e)?(0,K.default)(e,function(){}):e}var J=!1,X="Invariant failed";function Y(e,t){if(!e){if(J)throw new Error(X);throw new Error(X+": "+(t||""))}}function Z(e,t,n,r){return JSON.stringify(e,function(e,t){var n=[],r=[];t||(t=function(e,t){return n[0]===t?"[Circular ~]":"[Circular ~."+r.slice(0,n.indexOf(t)).join(".")+"]"});return function(s,a){if(n.length>0){var i=n.indexOf(this);~i?n.splice(i+1):n.push(this),~i?r.splice(i,Infinity,s):r.push(s),~n.indexOf(a)&&(a=t.call(this,s,a))}else n.push(a);return null==e?a:e.call(this,s,a)}}(t,r),n)}function Q(e){return"object"!=typeof e||null==e||Object.isFrozen(e)}function ee(e,t,n){var r=te(e,t,n);return{detectMutations:function(){return ne(e,t,r,n)}}}function te(e,t,n,r,s){void 0===t&&(t=[]),void 0===r&&(r=""),void 0===s&&(s=new Set);var a={value:n};if(!e(n)&&!s.has(n))for(var i in s.add(n),a.children={},n){var o=r?r+"."+i:i;t.length&&-1!==t.indexOf(o)||(a.children[i]=te(e,t,n[i],o))}return a}function ne(e,t,n,r,s,a){void 0===t&&(t=[]),void 0===s&&(s=!1),void 0===a&&(a="");var i=n?n.value:void 0,o=i===r;if(s&&!o&&!Number.isNaN(r))return{wasMutated:!0,path:a};if(e(i)||e(r))return{wasMutated:!1};var c={};for(var u in n.children)c[u]=!0;for(var u in r)c[u]=!0;var l=t.length>0,d=function(s){var i=a?a+"."+s:s;if(l&&t.some(function(e){return e instanceof RegExp?e.test(i):i===e}))return"continue";var c=ne(e,t,n.children[s],r[s],o,i);if(c.wasMutated)return{value:c}};for(var u in c){var f=d(u);if("object"==typeof f)return f.value}return{wasMutated:!1}}function re(e){void 0===e&&(e={});var t=e.isImmutable,n=void 0===t?Q:t,r=e.ignoredPaths,s=e.warnAfter,a=void 0===s?32:s,i=e.ignore;r=r||i;var o=ee.bind(null,n,r);return function(e){var t,n=e.getState,r=n(),s=o(r);return function(e){return function(i){var c=V(a,"ImmutableStateInvariantMiddleware");c.measureTime(function(){r=n(),t=s.detectMutations(),s=o(r),Y(!t.wasMutated,"A state mutation was detected between dispatches, in the path '"+(t.path||"")+"'.  This may cause incorrect behavior. (https://redux.js.org/style-guide/style-guide#do-not-mutate-state)")});var u=e(i);return c.measureTime(function(){r=n(),t=s.detectMutations(),s=o(r),t.wasMutated&&Y(!t.wasMutated,"A state mutation was detected inside a dispatch, in the path: "+(t.path||"")+". Take a look at the reducer(s) handling the action "+Z(i)+". (https://redux.js.org/style-guide/style-guide#do-not-mutate-state)")}),c.warnIfExceeded(),u}}}}function se(e){var t=typeof e;return null==e||"string"===t||"boolean"===t||"number"===t||Array.isArray(e)||B(e)}function ae(e,t,n,r,s,a){var i;if(void 0===t&&(t=""),void 0===n&&(n=se),void 0===s&&(s=[]),!n(e))return{keyPath:t||"<root>",value:e};if("object"!=typeof e||null===e)return!1;if(null==a?void 0:a.has(e))return!1;for(var o=null!=r?r(e):Object.entries(e),c=s.length>0,u=function(e,o){var u=t?t+"."+e:e;if(c&&s.some(function(e){return e instanceof RegExp?e.test(u):u===e}))return"continue";return n(o)?"object"==typeof o&&(i=ae(o,u,n,r,s,a))?{value:i}:void 0:{value:{keyPath:u,value:o}}},l=0,d=o;l<d.length;l++){var f=d[l],h=u(f[0],f[1]);if("object"==typeof h)return h.value}return a&&ie(e)&&a.add(e),!1}function ie(e){if(!Object.isFrozen(e))return!1;for(var t=0,n=Object.values(e);t<n.length;t++){var r=n[t];if("object"==typeof r&&null!==r&&!ie(r))return!1}return!0}function oe(e){void 0===e&&(e={});var t=e.isSerializable,n=void 0===t?se:t,r=e.getEntries,s=e.ignoredActions,a=void 0===s?[]:s,i=e.ignoredActionPaths,o=void 0===i?["meta.arg","meta.baseQueryMeta"]:i,c=e.ignoredPaths,u=void 0===c?[]:c,l=e.warnAfter,d=void 0===l?32:l,f=e.ignoreState,h=void 0!==f&&f,p=e.ignoreActions,m=void 0!==p&&p,g=e.disableCache,b=!(void 0!==g&&g)&&WeakSet?new WeakSet:void 0;return function(e){return function(t){return function(s){var i=t(s),c=V(d,"SerializableStateInvariantMiddleware");return m||a.length&&-1!==a.indexOf(s.type)||c.measureTime(function(){var e=ae(s,"",n,r,o,b);if(e){var t=e.keyPath,a=e.value;console.error("A non-serializable value was detected in an action, in the path: `"+t+"`. Value:",a,"\nTake a look at the logic that dispatched this action: ",s,"\n(See https://redux.js.org/faq/actions#why-should-type-be-a-string-or-at-least-serializable-why-should-my-action-types-be-constants)","\n(To allow non-serializable values see: https://redux-toolkit.js.org/usage/usage-guide#working-with-non-serializable-data)")}}),h||(c.measureTime(function(){var t=ae(e.getState(),"",n,r,u,b);if(t){var a=t.keyPath,i=t.value;console.error("A non-serializable value was detected in the state, in the path: `"+a+"`. Value:",i,"\nTake a look at the reducer(s) handling this action type: "+s.type+".\n(See https://redux.js.org/faq/organizing-state#can-i-put-functions-promises-or-other-non-serializable-items-in-my-store-state)")}}),c.warnIfExceeded()),i}}}}function ce(e){return"boolean"==typeof e}function ue(e){void 0===e&&(e={});var t=e.thunk,n=void 0===t||t,r=e.immutableCheck,s=void 0===r||r,a=e.serializableCheck,i=void 0===a||a,o=e.actionCreatorCheck,c=void 0===o||o,u=new $;if(n&&(ce(n)?u.push(F.default):u.push(F.default.withExtraArgument(n.extraArgument))),s){var l={};ce(s)||(l=s),u.unshift(re(l))}if(i){var d={};ce(i)||(d=i),u.push(oe(d))}if(c){var f={};ce(c)||(f=c),u.unshift(q(f))}return u}var le=!1;function de(e){var t,n=function(e){return ue(e)},r=e||{},s=r.reducer,a=void 0===s?void 0:s,i=r.middleware,c=void 0===i?n():i,u=r.devTools,l=void 0===u||u,d=r.preloadedState,f=void 0===d?void 0:d,h=r.enhancers,p=void 0===h?void 0:h;if("function"==typeof a)t=a;else{if(!B(a))throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');t=(0,j.combineReducers)(a)}var m=c;if("function"==typeof m&&(m=m(n),!le&&!Array.isArray(m)))throw new Error("when using a middleware builder function, an array of middleware must be returned");if(!le&&m.some(function(e){return"function"!=typeof e}))throw new Error("each middleware provided to configureStore must be a function");var g=j.applyMiddleware.apply(void 0,m),b=j.compose;l&&(b=O(w({trace:!le},"object"==typeof l&&l)));var y=new z(g),v=y;Array.isArray(p)?v=o([g],p):"function"==typeof p&&(v=p(y));var E=b.apply(void 0,v);return(0,j.createStore)(t,f,E)}var fe=S(e("immer"));function he(e){var t,n={},r=[],s={addCase:function(e,a){if(r.length>0)throw new Error("`builder.addCase` should only be called before calling `builder.addMatcher`");if(t)throw new Error("`builder.addCase` should only be called before calling `builder.addDefaultCase`");var i="string"==typeof e?e:e.type;if(!i)throw new Error("`builder.addCase` cannot be called with an empty action type");if(i in n)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return n[i]=a,s},addMatcher:function(e,n){if(t)throw new Error("`builder.addMatcher` should only be called before calling `builder.addDefaultCase`");return r.push({matcher:e,reducer:n}),s},addDefaultCase:function(e){if(t)throw new Error("`builder.addDefaultCase` can only be called once");return t=e,s}};return e(s),[n,r,t]}var pe=!1;function me(e,t,n,r){void 0===n&&(n=[]),"object"==typeof t&&(pe||(pe=!0,console.warn("The object notation for `createReducer` is deprecated, and will be removed in RTK 2.0. Please use the 'builder callback' notation instead: https://redux-toolkit.js.org/api/createReducer")));var s,a="function"==typeof t?he(t):[t,n,r],i=a[0],c=a[1],u=a[2];if("function"==typeof e)s=function(){return W(e())};else{var l=W(e);s=function(){return l}}function d(e,t){void 0===e&&(e=s());var n=o([i[t.type]],c.filter(function(e){return(0,e.matcher)(t)}).map(function(e){return e.reducer}));return 0===n.filter(function(e){return!!e}).length&&(n=[u]),n.reduce(function(e,n){if(n){var r;if((0,fe.isDraft)(e))return void 0===(r=n(e,t))?e:r;if((0,fe.isDraftable)(e))return(0,fe.default)(e,function(e){return n(e,t)});if(void 0===(r=n(e,t))){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return r}return e},e)}return d.getInitialState=s,d}var ge=!1;function be(e){var n=e.name;if(!n)throw new Error("`name` is a required option for createSlice");void 0!==t&&void 0===e.initialState&&console.error("You must provide an `initialState` value that is not `undefined`. You may have misspelled `initialState`");var r,s="function"==typeof e.initialState?e.initialState:W(e.initialState),a=e.reducers||{},i=Object.keys(a),o={},c={},u={};function l(){"object"==typeof e.extraReducers&&(ge||(ge=!0,console.warn("The object notation for `createSlice.extraReducers` is deprecated, and will be removed in RTK 2.0. Please use the 'builder callback' notation instead: https://redux-toolkit.js.org/api/createSlice")));var t="function"==typeof e.extraReducers?he(e.extraReducers):[e.extraReducers],n=t[0],r=void 0===n?{}:n,a=t[1],i=void 0===a?[]:a,o=t[2],u=void 0===o?void 0:o,l=w(w({},r),c);return me(s,function(e){for(var t in l)e.addCase(t,l[t]);for(var n=0,r=i;n<r.length;n++){var s=r[n];e.addMatcher(s.matcher,s.reducer)}u&&e.addDefaultCase(u)})}return i.forEach(function(e){var t,r,s=a[e],i=n+"/"+e;"reducer"in s?(t=s.reducer,r=s.prepare):t=s,o[e]=t,c[i]=t,u[e]=r?M(i,r):M(i)}),{name:n,reducer:function(e,t){return r||(r=l()),r(e,t)},actions:u,caseReducers:o,getInitialState:function(){return r||(r=l()),r.getInitialState()}}}var ye=S(e("immer"));function we(e){return function(t,n){var r=function(t){G(n)?e(n.payload,t):e(n,t)};return(0,ye.isDraft)(t)?(r(t),t):(0,ye.default)(t,r)}}function ve(e,t){var n=t(e);return void 0===n&&console.warn("The entity passed to the `selectId` implementation returned undefined.","You should probably provide your own `selectId` implementation.","The entity that was passed:",e,"The `selectId` implementation:",t.toString()),n}function Ee(e){return Array.isArray(e)||(e=Object.values(e)),e}function Te(e,t,n){for(var r=[],s=[],a=0,i=e=Ee(e);a<i.length;a++){var o=i[a],c=ve(o,t);c in n.entities?s.push({id:c,changes:o}):r.push(o)}return[r,s]}function Se(e){function t(t,n){var r=ve(t,e);r in n.entities||(n.ids.push(r),n.entities[r]=t)}function n(e,n){for(var r=0,s=e=Ee(e);r<s.length;r++){t(s[r],n)}}function r(t,n){var r=ve(t,e);r in n.entities||n.ids.push(r),n.entities[r]=t}function s(e,t){var n=!1;e.forEach(function(e){e in t.entities&&(delete t.entities[e],n=!0)}),n&&(t.ids=t.ids.filter(function(e){return e in t.entities}))}function a(t,n){var r={},s={};if(t.forEach(function(e){e.id in n.entities&&(s[e.id]={id:e.id,changes:w(w({},s[e.id]?s[e.id].changes:null),e.changes)})}),(t=Object.values(s)).length>0){var a=t.filter(function(t){return function(t,n,r){var s=r.entities[n.id],a=Object.assign({},s,n.changes),i=ve(a,e),o=i!==n.id;return o&&(t[n.id]=i,delete r.entities[n.id]),r.entities[i]=a,o}(r,t,n)}).length>0;a&&(n.ids=Object.keys(n.entities))}}function i(t,r){var s=Te(t,e,r),i=s[0];a(s[1],r),n(i,r)}return{removeAll:(o=function(e){Object.assign(e,{ids:[],entities:{}})},c=we(function(e,t){return o(t)}),function(e){return c(e,void 0)}),addOne:we(t),addMany:we(n),setOne:we(r),setMany:we(function(e,t){for(var n=0,s=e=Ee(e);n<s.length;n++){r(s[n],t)}}),setAll:we(function(e,t){e=Ee(e),t.ids=[],t.entities={},n(e,t)}),updateOne:we(function(e,t){return a([e],t)}),updateMany:we(a),upsertOne:we(function(e,t){return i([e],t)}),upsertMany:we(i),removeOne:we(function(e,t){return s([e],t)}),removeMany:we(s)};var o,c}function xe(e){void 0===e&&(e={});var t=w({sortComparer:!1,selectId:function(e){return e.id}},e),n=t.selectId,r=t.sortComparer,s={getInitialState:function(e){return void 0===e&&(e={}),Object.assign({ids:[],entities:{}},e)}},a={getSelectors:function(e){var t=function(e){return e.ids},n=function(e){return e.entities},r=C(t,n,function(e,t){return e.map(function(e){return t[e]})}),s=function(e,t){return t},a=function(e,t){return e[t]},i=C(t,function(e){return e.length});if(!e)return{selectIds:t,selectEntities:n,selectAll:r,selectTotal:i,selectById:C(n,s,a)};var o=C(e,n);return{selectIds:C(e,t),selectEntities:o,selectAll:C(e,r),selectTotal:C(e,i),selectById:C(o,s,a)}}},i=r?function(e,t){var n=Se(e);function r(t,n){var r=(t=Ee(t)).filter(function(t){return!(ve(t,e)in n.entities)});0!==r.length&&o(r,n)}function s(e,t){0!==(e=Ee(e)).length&&o(e,t)}function a(t,n){for(var r=!1,s=0,a=t;s<a.length;s++){var i=a[s],o=n.entities[i.id];if(o){r=!0,Object.assign(o,i.changes);var u=e(o);i.id!==u&&(delete n.entities[i.id],n.entities[u]=o)}}r&&c(n)}function i(t,n){var s=Te(t,e,n),i=s[0];a(s[1],n),r(i,n)}function o(t,n){t.forEach(function(t){n.entities[e(t)]=t}),c(n)}function c(n){var r=Object.values(n.entities);r.sort(t);var s=r.map(e);(function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(e[n]!==t[n])return!1;return!0})(n.ids,s)||(n.ids=s)}return{removeOne:n.removeOne,removeMany:n.removeMany,removeAll:n.removeAll,addOne:we(function(e,t){return r([e],t)}),updateOne:we(function(e,t){return a([e],t)}),upsertOne:we(function(e,t){return i([e],t)}),setOne:we(function(e,t){return s([e],t)}),setMany:we(s),setAll:we(function(e,t){e=Ee(e),t.entities={},t.ids=[],r(e,t)}),addMany:we(r),updateMany:we(a),upsertMany:we(i)}}(n,r):Se(n);return w(w(w({selectId:n,sortComparer:r},s),a),i)}var Pe=function(e){void 0===e&&(e=21);for(var t="",n=e;n--;)t+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return t},ke=["name","message","stack","code"],Ie=function(e,t){this.payload=e,this.meta=t},Ae=function(e,t){this.payload=e,this.meta=t},_e=function(e){if("object"==typeof e&&null!==e){for(var t={},n=0,r=ke;n<r.length;n++){var s=r[n];"string"==typeof e[s]&&(t[s]=e[s])}return t}return{message:String(e)}},Ce=function(){function e(e,t,n){var r=M(e+"/fulfilled",function(e,t,n,r){return{payload:e,meta:v(w({},r||{}),{arg:n,requestId:t,requestStatus:"fulfilled"})}}),s=M(e+"/pending",function(e,t,n){return{payload:void 0,meta:v(w({},n||{}),{arg:t,requestId:e,requestStatus:"pending"})}}),a=M(e+"/rejected",function(e,t,r,s,a){return{payload:s,error:(n&&n.serializeError||_e)(e||"Rejected"),meta:v(w({},a||{}),{arg:r,requestId:t,rejectedWithValue:!!s,requestStatus:"rejected",aborted:"AbortError"===(null==e?void 0:e.name),condition:"ConditionError"===(null==e?void 0:e.name)})}}),o=!1,c="undefined"!=typeof AbortController?AbortController:function(){function e(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return e.prototype.abort=function(){o||(o=!0,console.info("This platform does not implement AbortController. \nIf you want to use the AbortController to react to `abort` events, please consider importing a polyfill like 'abortcontroller-polyfill/dist/abortcontroller-polyfill-only'."))},e}();return Object.assign(function(e){return function(o,u,l){var d,f=(null==n?void 0:n.idGenerator)?n.idGenerator(e):Pe(),h=new c;function p(e){d=e,h.abort()}var m=function(){return x(this,null,function(){var c,m,g,b,y,w;return i(this,function(i){switch(i.label){case 0:return i.trys.push([0,4,,5]),b=null==(c=null==n?void 0:n.condition)?void 0:c.call(n,e,{getState:u,extra:l}),null===(v=b)||"object"!=typeof v||"function"!=typeof v.then?[3,2]:[4,b];case 1:b=i.sent(),i.label=2;case 2:if(!1===b||h.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return y=new Promise(function(e,t){return h.signal.addEventListener("abort",function(){return t({name:"AbortError",message:d||"Aborted"})})}),o(s(f,e,null==(m=null==n?void 0:n.getPendingMeta)?void 0:m.call(n,{requestId:f,arg:e},{getState:u,extra:l}))),[4,Promise.race([y,Promise.resolve(t(e,{dispatch:o,getState:u,extra:l,requestId:f,signal:h.signal,abort:p,rejectWithValue:function(e,t){return new Ie(e,t)},fulfillWithValue:function(e,t){return new Ae(e,t)}})).then(function(t){if(t instanceof Ie)throw t;return t instanceof Ae?r(t.payload,f,e,t.meta):r(t,f,e)})])];case 3:return g=i.sent(),[3,5];case 4:return w=i.sent(),g=w instanceof Ie?a(null,f,e,w.payload,w.meta):a(w,f,e),[3,5];case 5:return n&&!n.dispatchConditionRejection&&a.match(g)&&g.meta.condition||o(g),[2,g]}var v})})}();return Object.assign(m,{abort:p,requestId:f,arg:e,unwrap:function(){return m.then(je)}})}},{pending:s,rejected:a,fulfilled:r,typePrefix:e})}return e.withTypes=function(){return e},e}();function je(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}var Re=function(e,t){return L(e)?e.match(t):e(t)};function Oe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return e.some(function(e){return Re(e,t)})}}function Be(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return e.every(function(e){return Re(e,t)})}}function Fe(e,t){if(!e||!e.meta)return!1;var n="string"==typeof e.meta.requestId,r=t.indexOf(e.meta.requestStatus)>-1;return n&&r}function Le(e){return"function"==typeof e[0]&&"pending"in e[0]&&"fulfilled"in e[0]&&"rejected"in e[0]}function Me(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?function(e){return Fe(e,["pending"])}:Le(e)?function(t){var n=e.map(function(e){return e.pending});return Oe.apply(void 0,n)(t)}:Me()(e[0])}function Ne(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?function(e){return Fe(e,["rejected"])}:Le(e)?function(t){var n=e.map(function(e){return e.rejected});return Oe.apply(void 0,n)(t)}:Ne()(e[0])}function De(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=function(e){return e&&e.meta&&e.meta.rejectedWithValue};return 0===e.length||Le(e)?function(t){return Be(Ne.apply(void 0,e),n)(t)}:De()(e[0])}function Ge(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?function(e){return Fe(e,["fulfilled"])}:Le(e)?function(t){var n=e.map(function(e){return e.fulfilled});return Oe.apply(void 0,n)(t)}:Ge()(e[0])}function He(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?function(e){return Fe(e,["pending","fulfilled","rejected"])}:Le(e)?function(t){for(var n=[],r=0,s=e;r<s.length;r++){var a=s[r];n.push(a.pending,a.rejected,a.fulfilled)}return Oe.apply(void 0,n)(t)}:He()(e[0])}var Ue=function(e,t){if("function"!=typeof e)throw new TypeError(t+" is not a function")},qe=function(){},Ke=function(e,t){return void 0===t&&(t=qe),e.catch(t),e},Ve=function(e,t){return e.addEventListener("abort",t,{once:!0}),function(){return e.removeEventListener("abort",t)}},$e=function(e,t){var n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},ze="listener",We="completed",Je="cancelled",Xe="task-"+Je,Ye="task-"+We,Ze=ze+"-"+Je,Qe=ze+"-"+We,et=function(e){this.code=e,this.name="TaskAbortError",this.message="task "+Je+" (reason: "+e+")"},tt=function(e){if(e.aborted)throw new et(e.reason)};function nt(e,t){var n=qe;return new Promise(function(r,s){var a=function(){return s(new et(e.reason))};e.aborted?a():(n=Ve(e,a),t.finally(function(){return n()}).then(r,s))}).finally(function(){n=qe})}var rt=function(e){return function(t){return Ke(nt(e,t).then(function(t){return tt(e),t}))}},st=function(e){var t=rt(e);return function(e){return t(new Promise(function(t){return setTimeout(t,e)}))}},at=Object.assign,it={},ot="listenerMiddleware",ct=function(e,t){return function(n,r){Ue(n,"taskExecutor");var s,a=new AbortController;s=a,Ve(e,function(){return $e(s,e.reason)});var o,c,u=(o=function(){return x(void 0,null,function(){var t;return i(this,function(r){switch(r.label){case 0:return tt(e),tt(a.signal),[4,n({pause:rt(a.signal),delay:st(a.signal),signal:a.signal})];case 1:return t=r.sent(),tt(a.signal),[2,t]}})})},c=function(){return $e(a,Ye)},x(void 0,null,function(){var e;return i(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,4,5]),[4,Promise.resolve()];case 1:return t.sent(),[4,o()];case 2:return[2,{status:"ok",value:t.sent()}];case 3:return[2,{status:(e=t.sent())instanceof et?"cancelled":"rejected",error:e}];case 4:return null==c||c(),[7];case 5:return[2]}})}));return(null==r?void 0:r.autoJoin)&&t.push(u),{result:rt(e)(u),cancel:function(){$e(a,Xe)}}}},ut=function(e,t){return function(n,r){return Ke(function(n,r){return x(void 0,null,function(){var s,a,o,c;return i(this,function(i){switch(i.label){case 0:tt(t),s=function(){},a=new Promise(function(t,r){var a=e({predicate:n,effect:function(e,n){n.unsubscribe(),t([e,n.getState(),n.getOriginalState()])}});s=function(){a(),r()}}),o=[a],null!=r&&o.push(new Promise(function(e){return setTimeout(e,r,null)})),i.label=1;case 1:return i.trys.push([1,,3,4]),[4,nt(t,Promise.race(o))];case 2:return c=i.sent(),tt(t),[2,c];case 3:return s(),[7];case 4:return[2]}})})}(n,r))}},lt=function(e){var t=e.type,n=e.actionCreator,r=e.matcher,s=e.predicate,a=e.effect;if(t)s=M(t).match;else if(n)t=n.type,s=n.match;else if(r)s=r;else if(!s)throw new Error("Creating or removing a listener requires one of the known fields for matching an action");return Ue(a,"options.listener"),{predicate:s,type:t,effect:a}},dt=function(e){var t=lt(e),n=t.type,r=t.predicate,s=t.effect;return{id:Pe(),effect:s,type:n,predicate:r,pending:new Set,unsubscribe:function(){throw new Error("Unsubscribe not initialized")}}},ft=function(e){e.pending.forEach(function(e){$e(e,Ze)})},ht=function(e){return function(){e.forEach(ft),e.clear()}},pt=function(e,t,n){try{e(t,n)}catch(e){setTimeout(function(){throw e},0)}},mt=M(ot+"/add"),gt=M(ot+"/removeAll"),bt=M(ot+"/remove"),yt=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,o([ot+"/error"],e))};function wt(e){var t=this;void 0===e&&(e={});var n=new Map,r=e.extra,s=e.onError,a=void 0===s?yt:s;Ue(a,"onError");var o=function(e){for(var t=0,r=Array.from(n.values());t<r.length;t++){var s=r[t];if(e(s))return s}},c=function(e){var t=o(function(t){return t.effect===e.effect});return t||(t=dt(e)),function(e){return e.unsubscribe=function(){return n.delete(e.id)},n.set(e.id,e),function(t){e.unsubscribe(),(null==t?void 0:t.cancelActive)&&ft(e)}}(t)},u=function(e){var t=lt(e),n=t.type,r=t.effect,s=t.predicate,a=o(function(e){return("string"==typeof n?e.type===n:e.predicate===s)&&e.effect===r});return a&&(a.unsubscribe(),e.cancelActive&&ft(a)),!!a},l=function(e,s,o,u){return x(t,null,function(){var t,l,d,f;return i(this,function(i){switch(i.label){case 0:t=new AbortController,l=ut(c,t.signal),d=[],i.label=1;case 1:return i.trys.push([1,3,4,6]),e.pending.add(t),[4,Promise.resolve(e.effect(s,at({},o,{getOriginalState:u,condition:function(e,t){return l(e,t).then(Boolean)},take:l,delay:st(t.signal),pause:rt(t.signal),extra:r,signal:t.signal,fork:ct(t.signal,d),unsubscribe:e.unsubscribe,subscribe:function(){n.set(e.id,e)},cancelActiveListeners:function(){e.pending.forEach(function(e,n,r){e!==t&&($e(e,Ze),r.delete(e))})}})))];case 2:return i.sent(),[3,6];case 3:return(f=i.sent())instanceof et||pt(a,f,{raisedBy:"effect"}),[3,6];case 4:return[4,Promise.allSettled(d)];case 5:return i.sent(),$e(t,Qe),e.pending.delete(t),[7];case 6:return[2]}})})},d=ht(n);return{middleware:function(e){return function(t){return function(r){if(!N(r))return t(r);if(mt.match(r))return c(r.payload);if(!gt.match(r)){if(bt.match(r))return u(r.payload);var s,i=e.getState(),o=function(){if(i===it)throw new Error(ot+": getOriginalState can only be called synchronously");return i};try{if(s=t(r),n.size>0)for(var f=e.getState(),h=Array.from(n.values()),p=0,m=h;p<m.length;p++){var g=m[p],b=!1;try{b=g.predicate(r,f,i)}catch(e){b=!1,pt(a,e,{raisedBy:"predicate"})}b&&l(g,r,e,o)}}finally{i=it}return s}d()}}},startListening:c,stopListening:u,clearListeners:d}}var vt,Et="RTK_autoBatch",Tt=function(){return function(e){var t;return{payload:e,meta:(t={},t[Et]=!0,t)}}},St="function"==typeof queueMicrotask?queueMicrotask.bind("undefined"!=typeof window?window:"undefined"!=typeof global?global:globalThis):function(e){return(vt||(vt=Promise.resolve())).then(e).catch(function(e){return setTimeout(function(){throw e},0)})},xt=function(e){return function(t){setTimeout(t,e)}},Pt="undefined"!=typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:xt(10),kt=function(e){return void 0===e&&(e={type:"raf"}),function(t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var s=t.apply(void 0,n),a=!0,i=!1,o=!1,c=new Set,u="tick"===e.type?St:"raf"===e.type?Pt:"callback"===e.type?e.queueNotification:xt(e.timeout),l=function(){o=!1,i&&(i=!1,c.forEach(function(e){return e()}))};return Object.assign({},s,{subscribe:function(e){var t=s.subscribe(function(){return a&&e()});return c.add(e),function(){t(),c.delete(e)}},dispatch:function(e){var t;try{return a=!(null==(t=null==e?void 0:e.meta)?void 0:t[Et]),(i=!a)&&(o||(o=!0,u(l))),s.dispatch(e)}finally{a=!0}}})}}};(0,P.enableES5)()}).call(this)}).call(this,e("_process"))}}},{package:"@reduxjs/toolkit",file:"node_modules/@reduxjs/toolkit/dist/redux-toolkit.cjs.development.js"}],[2909,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.createCacheKeyComparator=a,n.defaultEqualityCheck=void 0,n.defaultMemoize=function(e,t){var n="object"==typeof t?t:{equalityCheck:t},i=n.equalityCheck,o=void 0===i?s:i,c=n.maxSize,u=void 0===c?1:c,l=n.resultEqualityCheck,d=a(o),f=1===u?(h=d,{get:function(e){return p&&h(p.key,e)?p.value:r},put:function(e,t){p={key:e,value:t}},getEntries:function(){return p?[p]:[]},clear:function(){p=undefined}}):function(e,t){var n=[];function s(e){var s=n.findIndex(function(n){return t(e,n.key)});if(s>-1){var a=n[s];return s>0&&(n.splice(s,1),n.unshift(a)),a.value}return r}function a(t,a){s(t)===r&&(n.unshift({key:t,value:a}),n.length>e&&n.pop())}function i(){return n}function o(){n=[]}return{get:s,put:a,getEntries:i,clear:o}}(u,d);var h,p;function m(){var t=f.get(arguments);if(t===r){if(t=e.apply(null,arguments),l){var n=f.getEntries().find(function(e){return l(e.value,t)});n&&(t=n.value)}f.put(arguments,t)}return t}return m.clearCache=function(){return f.clear()},m};var r="NOT_FOUND";var s=function(e,t){return e===t};function a(e){return function(t,n){if(null===t||null===n||t.length!==n.length)return!1;for(var r=t.length,s=0;s<r;s++)if(!e(t[s],n[s]))return!1;return!0}}n.defaultEqualityCheck=s}}},{package:"@reduxjs/toolkit>reselect",file:"node_modules/@reduxjs/toolkit/node_modules/reselect/lib/defaultMemoize.js"}],[2910,{"./defaultMemoize":2909},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.createSelector=void 0,n.createSelectorCreator=s,n.createStructuredSelector=void 0,Object.defineProperty(n,"defaultEqualityCheck",{enumerable:!0,get:function(){return r.defaultEqualityCheck}}),Object.defineProperty(n,"defaultMemoize",{enumerable:!0,get:function(){return r.defaultMemoize}});var r=e("./defaultMemoize");function s(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return function(){for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];var a,i=0,o={memoizeOptions:undefined},c=r.pop();if("object"==typeof c&&(o=c,c=r.pop()),"function"!=typeof c)throw new Error("createSelector expects an output function after the inputs, but received: ["+typeof c+"]");var u=o.memoizeOptions,l=void 0===u?n:u,d=Array.isArray(l)?l:[l],f=function(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every(function(e){return"function"==typeof e})){var n=t.map(function(e){return"function"==typeof e?"function "+(e.name||"unnamed")+"()":typeof e}).join(", ");throw new Error("createSelector expects all input-selectors to be functions, but received the following types: ["+n+"]")}return t}(r),h=e.apply(void 0,[function(){return i++,c.apply(null,arguments)}].concat(d)),p=e(function(){for(var e=[],t=f.length,n=0;n<t;n++)e.push(f[n].apply(null,arguments));return a=h.apply(null,e)});return Object.assign(p,{resultFunc:c,memoizedResultFunc:h,dependencies:f,lastResult:function(){return a},recomputations:function(){return i},resetRecomputations:function(){return i=0}}),p}}var a=s(r.defaultMemoize);n.createSelector=a;n.createStructuredSelector=function(e,t){if(void 0===t&&(t=a),"object"!=typeof e)throw new Error("createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+typeof e);var n=Object.keys(e),r=t(n.map(function(t){return e[t]}),function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce(function(e,t,r){return e[n[r]]=t,e},{})});return r}}}},{package:"@reduxjs/toolkit>reselect",file:"node_modules/@reduxjs/toolkit/node_modules/reselect/lib/index.js"}],[2912,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){function r(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function s(e,...t){if(!r(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function a(e,t){return!!Array.isArray(t)&&(0===t.length||(e?t.every(e=>"string"==typeof e):t.every(e=>Number.isSafeInteger(e))))}function i(e){if("function"!=typeof e)throw new Error("function expected");return!0}function o(e,t){if("string"!=typeof t)throw new Error(`${e}: string expected`);return!0}function c(e){if(!Number.isSafeInteger(e))throw new Error(`invalid integer: ${e}`)}function u(e){if(!Array.isArray(e))throw new Error("array expected")}function l(e,t){if(!a(!0,t))throw new Error(`${e}: array of strings expected`)}function d(e,t){if(!a(!1,t))throw new Error(`${e}: array of numbers expected`)}function f(...e){const t=e=>e,n=(e,t)=>n=>e(t(n));return{encode:e.map(e=>e.encode).reduceRight(n,t),decode:e.map(e=>e.decode).reduce(n,t)}}function h(e){const t="string"==typeof e?e.split(""):e,n=t.length;l("alphabet",t);const r=new Map(t.map((e,t)=>[e,t]));return{encode:r=>(u(r),r.map(r=>{if(!Number.isSafeInteger(r)||r<0||r>=n)throw new Error(`alphabet.encode: digit index outside alphabet "${r}". Allowed: ${e}`);return t[r]})),decode:t=>(u(t),t.map(t=>{o("alphabet.decode",t);const n=r.get(t);if(n===undefined)throw new Error(`Unknown letter: "${t}". Allowed: ${e}`);return n}))}}function p(e=""){return o("join",e),{encode:t=>(l("join.decode",t),t.join(e)),decode:t=>(o("join.decode",t),t.split(e))}}function m(e,t="="){return c(e),o("padding",t),{encode(n){for(l("padding.encode",n);n.length*e%8;)n.push(t);return n},decode(n){l("padding.decode",n);let r=n.length;if(r*e%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;r>0&&n[r-1]===t;r--){if((r-1)*e%8==0)throw new Error("padding: invalid, string has too much padding")}return n.slice(0,r)}}}function g(e){return i(e),{encode:e=>e,decode:t=>e(t)}}function b(e,t,n){if(t<2)throw new Error(`convertRadix: invalid from=${t}, base cannot be less than 2`);if(n<2)throw new Error(`convertRadix: invalid to=${n}, base cannot be less than 2`);if(u(e),!e.length)return[];let r=0;const s=[],a=Array.from(e,e=>{if(c(e),e<0||e>=t)throw new Error(`invalid integer: ${e}`);return e}),i=a.length;for(;;){let e=0,o=!0;for(let s=r;s<i;s++){const i=a[s],c=t*e,u=c+i;if(!Number.isSafeInteger(u)||c/t!==e||u-i!==c)throw new Error("convertRadix: carry overflow");const l=u/n;e=u%n;const d=Math.floor(l);if(a[s]=d,!Number.isSafeInteger(d)||d*n+e!==u)throw new Error("convertRadix: carry overflow");o&&(d?o=!1:r=s)}if(s.push(e),o)break}for(let t=0;t<e.length-1&&0===e[t];t++)s.push(0);return s.reverse()}
/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */
Object.defineProperty(n,"__esModule",{value:!0}),n.bytes=n.stringToBytes=n.str=n.bytesToString=n.hex=n.utf8=n.bech32m=n.bech32=n.base58check=n.createBase58check=n.base58xmr=n.base58xrp=n.base58flickr=n.base58=n.base64urlnopad=n.base64url=n.base64nopad=n.base64=n.base32crockford=n.base32hexnopad=n.base32hex=n.base32nopad=n.base32=n.base16=n.utils=void 0;const y=(e,t)=>0===t?e:y(t,e%t),w=(e,t)=>e+(t-y(e,t)),v=(()=>{let e=[];for(let t=0;t<40;t++)e.push(2**t);return e})();function E(e,t,n,r){if(u(e),t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(w(t,n)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${n} carryBits=${w(t,n)}`);let s=0,a=0;const i=v[t],o=v[n]-1,l=[];for(const r of e){if(c(r),r>=i)throw new Error(`convertRadix2: invalid data word=${r} from=${t}`);if(s=s<<t|r,a+t>32)throw new Error(`convertRadix2: carry overflow pos=${a} from=${t}`);for(a+=t;a>=n;a-=n)l.push((s>>a-n&o)>>>0);const e=v[a];if(e===undefined)throw new Error("invalid carry");s&=e-1}if(s=s<<n-a&o,!r&&a>=t)throw new Error("Excess padding");if(!r&&s>0)throw new Error(`Non-zero padding: ${s}`);return r&&a>0&&l.push(s>>>0),l}function T(e){c(e);return{encode:t=>{if(!r(t))throw new Error("radix.encode input should be Uint8Array");return b(Array.from(t),256,e)},decode:t=>(d("radix.decode",t),Uint8Array.from(b(t,e,256)))}}function S(e,t=!1){if(c(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(w(8,e)>32||w(e,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!r(n))throw new Error("radix2.encode input should be Uint8Array");return E(Array.from(n),8,e,!t)},decode:n=>(d("radix2.decode",n),Uint8Array.from(E(n,e,8,t)))}}function x(e){return i(e),function(...t){try{return e.apply(null,t)}catch(e){}}}function P(e,t){return c(e),i(t),{encode(n){if(!r(n))throw new Error("checksum.encode: input should be Uint8Array");const s=t(n).slice(0,e),a=new Uint8Array(n.length+e);return a.set(n),a.set(s,n.length),a},decode(n){if(!r(n))throw new Error("checksum.decode: input should be Uint8Array");const s=n.slice(0,-e),a=n.slice(-e),i=t(s).slice(0,e);for(let t=0;t<e;t++)if(i[t]!==a[t])throw new Error("Invalid checksum");return s}}}n.utils={alphabet:h,chain:f,checksum:P,convertRadix:b,convertRadix2:E,radix:T,radix2:S,join:p,padding:m},n.base16=f(S(4),h("0123456789ABCDEF"),p("")),n.base32=f(S(5),h("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),m(5),p("")),n.base32nopad=f(S(5),h("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),p("")),n.base32hex=f(S(5),h("0123456789ABCDEFGHIJKLMNOPQRSTUV"),m(5),p("")),n.base32hexnopad=f(S(5),h("0123456789ABCDEFGHIJKLMNOPQRSTUV"),p("")),n.base32crockford=f(S(5),h("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),p(""),g(e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")));const k=(()=>"function"==typeof Uint8Array.from([]).toBase64&&"function"==typeof Uint8Array.fromBase64)();n.base64=k?{encode:e=>(s(e),e.toBase64()),decode:e=>(o("base64",e),Uint8Array.fromBase64(e,{lastChunkHandling:"strict"}))}:f(S(6),h("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),m(6),p("")),n.base64nopad=f(S(6),h("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),p("")),n.base64url=k?{encode:e=>(s(e),e.toBase64({alphabet:"base64url"})),decode:e=>(o("base64",e),Uint8Array.fromBase64(e,{alphabet:"base64url"}))}:f(S(6),h("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),m(6),p("")),n.base64urlnopad=f(S(6),h("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),p(""));const I=e=>f(T(58),h(e),p(""));n.base58=I("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),n.base58flickr=I("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),n.base58xrp=I("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const A=[0,2,3,5,6,7,9,10,11];n.base58xmr={encode(e){let t="";for(let r=0;r<e.length;r+=8){const s=e.subarray(r,r+8);t+=n.base58.encode(s).padStart(A[s.length],"1")}return t},decode(e){let t=[];for(let r=0;r<e.length;r+=11){const s=e.slice(r,r+11),a=A.indexOf(s.length),i=n.base58.decode(s);for(let e=0;e<i.length-a;e++)if(0!==i[e])throw new Error("base58xmr: wrong padding");t=t.concat(Array.from(i.slice(i.length-a)))}return Uint8Array.from(t)}};n.createBase58check=e=>f(P(4,t=>e(e(t))),n.base58),n.base58check=n.createBase58check;const _=f(h("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),p("")),C=[996825010,642813549,513874426,1027748829,705979059];function j(e){const t=e>>25;let n=(33554431&e)<<5;for(let e=0;e<C.length;e++)1==(t>>e&1)&&(n^=C[e]);return n}function R(e,t,n=1){const r=e.length;let s=1;for(let t=0;t<r;t++){const n=e.charCodeAt(t);if(n<33||n>126)throw new Error(`Invalid prefix (${e})`);s=j(s)^n>>5}s=j(s);for(let t=0;t<r;t++)s=j(s)^31&e.charCodeAt(t);for(let e of t)s=j(s)^e;for(let e=0;e<6;e++)s=j(s);return s^=n,_.encode(E([s%v[30]],30,5,!1))}function O(e){const t="bech32"===e?1:734539939,n=S(5),s=n.decode,a=n.encode,i=x(s);function c(e,n,s=90){o("bech32.encode prefix",e),r(n)&&(n=Array.from(n)),d("bech32.encode",n);const a=e.length;if(0===a)throw new TypeError(`Invalid prefix length ${a}`);const i=a+7+n.length;if(!1!==s&&i>s)throw new TypeError(`Length ${i} exceeds limit ${s}`);const c=e.toLowerCase(),u=R(c,n,t);return`${c}1${_.encode(n)}${u}`}function u(e,n=90){o("bech32.decode input",e);const r=e.length;if(r<8||!1!==n&&r>n)throw new TypeError(`invalid string length: ${r} (${e}). Expected (8..${n})`);const s=e.toLowerCase();if(e!==s&&e!==e.toUpperCase())throw new Error("String must be lowercase or uppercase");const a=s.lastIndexOf("1");if(0===a||-1===a)throw new Error('Letter "1" must be present between prefix and data only');const i=s.slice(0,a),c=s.slice(a+1);if(c.length<6)throw new Error("Data must be at least 6 characters long");const u=_.decode(c).slice(0,-6),l=R(i,u,t);if(!c.endsWith(l))throw new Error(`Invalid checksum in ${e}: expected "${l}"`);return{prefix:i,words:u}}return{encode:c,decode:u,encodeFromBytes:function(e,t){return c(e,a(t))},decodeToBytes:function(e){const{prefix:t,words:n}=u(e,!1);return{prefix:t,words:n,bytes:s(n)}},decodeUnsafe:x(u),fromWords:s,fromWordsUnsafe:i,toWords:a}}n.bech32=O("bech32"),n.bech32m=O("bech32m"),n.utf8={encode:e=>(new TextDecoder).decode(e),decode:e=>(new TextEncoder).encode(e)};const B=(()=>"function"==typeof Uint8Array.from([]).toHex&&"function"==typeof Uint8Array.fromHex)(),F={encode:e=>(s(e),e.toHex()),decode:e=>(o("hex",e),Uint8Array.fromHex(e))};n.hex=B?F:f(S(4),h("0123456789abcdef"),p(""),g(e=>{if("string"!=typeof e||e.length%2!=0)throw new TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()}));const L={utf8:n.utf8,hex:n.hex,base16:n.base16,base32:n.base32,base64:n.base64,base64url:n.base64url,base58:n.base58,base58xmr:n.base58xmr},M="Invalid encoding type. Available types: utf8, hex, base16, base32, base64, base64url, base58, base58xmr";n.bytesToString=(e,t)=>{if("string"!=typeof e||!L.hasOwnProperty(e))throw new TypeError(M);if(!r(t))throw new TypeError("bytesToString() expects Uint8Array");return L[e].encode(t)},n.str=n.bytesToString;n.stringToBytes=(e,t)=>{if(!L.hasOwnProperty(e))throw new TypeError(M);if("string"!=typeof t)throw new TypeError("stringToBytes() expects string");return L[e].decode(t)},n.bytes=n.stringToBytes}}},{package:"@metamask/utils>@scure/base",file:"node_modules/@scure/base/lib/index.js"}],[2914,{"@solana/assertions":2915,"@solana/codecs-core":2916,"@solana/codecs-strings":2917,"@solana/errors":2918},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,a=e("@solana/codecs-core"),i=e("@solana/codecs-strings"),o=e("@solana/errors"),c=e("@solana/assertions");function u(){return r||(r=i.getBase58Encoder()),r}function l(e){if(e.length<32||e.length>44)return!1;const t=u();try{return 32===t.encode(e).byteLength}catch{return!1}}function d(e){if(e.length<32||e.length>44)throw new o.SolanaError(o.SOLANA_ERROR__ADDRESSES__STRING_LENGTH_OUT_OF_RANGE,{actualLength:e.length});const t=u().encode(e).byteLength;if(32!==t)throw new o.SolanaError(o.SOLANA_ERROR__ADDRESSES__INVALID_BYTE_LENGTH,{actualLength:t})}function f(e){return d(e),e}function h(){return a.transformEncoder(a.fixEncoderSize(u(),32),e=>f(e))}function p(){return a.fixDecoderSize((s||(s=i.getBase58Decoder()),s),32)}function m(){return a.combineCodec(h(),p())}var g=57896044618658097711785492504343953926634992332820282019728792003956564819949n,b=19681161376707505956807079304988542015446066515923890162744021073123829784752n;function y(e){const t=e%g;return t>=0n?t:g+t}function w(e,t){let n=e;for(;t-- >0n;)n*=n,n%=g;return n}function v(e,t){const n=y(t*t*t),r=function(e){const t=e*e%g*e%g,n=w(t,2n)*t%g,r=w(n,1n)*e%g,s=w(r,5n)*r%g,a=w(s,10n)*s%g,i=w(a,20n)*a%g,o=w(i,40n)*i%g,c=w(o,80n)*o%g,u=w(c,80n)*o%g,l=w(u,10n)*s%g;return w(l,2n)*e%g}(e*y(n*n*t));let s=y(e*n*r);const a=y(t*s*s),i=s,o=y(s*b),c=a===e,u=a===y(-e),l=a===y(-e*b);return c&&(s=i),(u||l)&&(s=o),1n==(1n&y(s))&&(s=y(-s)),c||u?s:null}function E(e){if(32!==e.byteLength)return!1;const t=function(e){const t=e.reduce((e,t,n)=>`${function(e){const t=e.toString(16);return 1===t.length?`0${t}`:t}(31===n?-129&t:t)}${e}`,"");return BigInt(`0x${t}`)}(e);return function(e,t){const n=y(e*e),r=v(y(n-1n),y(37095705934669439343138083508754565189542113879843219016388785533085940283555n*n+1n));return null!==r&&(0n!==r||!(128&t))}(t,e[31])}var T=[80,114,111,103,114,97,109,68,101,114,105,118,101,100,65,100,100,114,101,115,115];async function S({programAddress:e,seeds:t}){if(c.assertDigestCapabilityIsAvailable(),t.length>16)throw new o.SolanaError(o.SOLANA_ERROR__ADDRESSES__MAX_NUMBER_OF_PDA_SEEDS_EXCEEDED,{actual:t.length,maxSeeds:16});let n;const r=t.reduce((e,t,r)=>{const s="string"==typeof t?(n||(n=new TextEncoder)).encode(t):t;if(s.byteLength>32)throw new o.SolanaError(o.SOLANA_ERROR__ADDRESSES__MAX_PDA_SEED_LENGTH_EXCEEDED,{actual:s.byteLength,index:r,maxSeedLength:32});return e.push(...s),e},[]),s=m(),a=s.encode(e),i=await crypto.subtle.digest("SHA-256",new Uint8Array([...r,...a,...T])),u=new Uint8Array(i);if(E(u))throw new o.SolanaError(o.SOLANA_ERROR__ADDRESSES__INVALID_SEEDS_POINT_ON_CURVE);return s.decode(u)}n.address=f,n.assertIsAddress=d,n.assertIsProgramDerivedAddress=function(e){if(!(Array.isArray(e)&&2===e.length&&"string"==typeof e[0]&&"number"==typeof e[1]))throw new o.SolanaError(o.SOLANA_ERROR__ADDRESSES__MALFORMED_PDA);if(e[1]<0||e[1]>255)throw new o.SolanaError(o.SOLANA_ERROR__ADDRESSES__PDA_BUMP_SEED_OUT_OF_RANGE,{bump:e[1]});d(e[0])},n.createAddressWithSeed=async function({baseAddress:e,programAddress:t,seed:n}){const{encode:r,decode:s}=m(),a="string"==typeof n?(new TextEncoder).encode(n):n;if(a.byteLength>32)throw new o.SolanaError(o.SOLANA_ERROR__ADDRESSES__MAX_PDA_SEED_LENGTH_EXCEEDED,{actual:a.byteLength,index:0,maxSeedLength:32});const i=r(t);if(i.length>=T.length&&i.slice(-T.length).every((e,t)=>e===T[t]))throw new o.SolanaError(o.SOLANA_ERROR__ADDRESSES__PDA_ENDS_WITH_PDA_MARKER);const c=await crypto.subtle.digest("SHA-256",new Uint8Array([...r(e),...a,...i]));return s(new Uint8Array(c))},n.getAddressCodec=m,n.getAddressComparator=function(){return new Intl.Collator("en",{caseFirst:"lower",ignorePunctuation:!1,localeMatcher:"best fit",numeric:!1,sensitivity:"variant",usage:"sort"}).compare},n.getAddressDecoder=p,n.getAddressEncoder=h,n.getAddressFromPublicKey=async function(e){if(c.assertKeyExporterIsAvailable(),"public"!==e.type||"Ed25519"!==e.algorithm.name)throw new o.SolanaError(o.SOLANA_ERROR__ADDRESSES__INVALID_ED25519_PUBLIC_KEY);const t=await crypto.subtle.exportKey("raw",e);return p().decode(new Uint8Array(t))},n.getProgramDerivedAddress=async function({programAddress:e,seeds:t}){let n=255;for(;n>0;)try{return[await S({programAddress:e,seeds:[...t,new Uint8Array([n])]}),n]}catch(e){if(!o.isSolanaError(e,o.SOLANA_ERROR__ADDRESSES__INVALID_SEEDS_POINT_ON_CURVE))throw e;n--}throw new o.SolanaError(o.SOLANA_ERROR__ADDRESSES__FAILED_TO_FIND_VIABLE_PDA_BUMP_SEED)},n.isAddress=l,n.isProgramDerivedAddress=function(e){return Array.isArray(e)&&2===e.length&&"string"==typeof e[0]&&"number"==typeof e[1]&&e[1]>=0&&e[1]<=255&&l(e[0])}}}},{package:"@solana/addresses",file:"node_modules/@solana/addresses/dist/index.browser.cjs"}],[2915,{"@solana/errors":2918},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s=e("@solana/errors");function a(){if(!globalThis.isSecureContext)throw new s.SolanaError(s.SOLANA_ERROR__SUBTLE_CRYPTO__DISALLOWED_IN_INSECURE_CONTEXT)}n.assertDigestCapabilityIsAvailable=function(){var e;if(a(),void 0===globalThis.crypto||"function"!=typeof(null===(e=globalThis.crypto.subtle)||void 0===e?void 0:e.digest))throw new s.SolanaError(s.SOLANA_ERROR__SUBTLE_CRYPTO__DIGEST_UNIMPLEMENTED)},n.assertKeyExporterIsAvailable=function(){var e;if(a(),void 0===globalThis.crypto||"function"!=typeof(null===(e=globalThis.crypto.subtle)||void 0===e?void 0:e.exportKey))throw new s.SolanaError(s.SOLANA_ERROR__SUBTLE_CRYPTO__EXPORT_FUNCTION_UNIMPLEMENTED)},n.assertKeyGenerationIsAvailable=async function(){var e;if(a(),void 0===globalThis.crypto||"function"!=typeof(null===(e=globalThis.crypto.subtle)||void 0===e?void 0:e.generateKey))throw new s.SolanaError(s.SOLANA_ERROR__SUBTLE_CRYPTO__GENERATE_FUNCTION_UNIMPLEMENTED);if(!await async function(e){return void 0===r&&(r=new Promise(t=>{e.generateKey("Ed25519",!1,["sign","verify"]).then(()=>{t(r=!0)}).catch(()=>{t(r=!1)})})),"boolean"==typeof r?r:await r}(globalThis.crypto.subtle))throw new s.SolanaError(s.SOLANA_ERROR__SUBTLE_CRYPTO__ED25519_ALGORITHM_UNIMPLEMENTED)},n.assertPRNGIsAvailable=function(){if(void 0===globalThis.crypto||"function"!=typeof globalThis.crypto.getRandomValues)throw new s.SolanaError(s.SOLANA_ERROR__CRYPTO__RANDOM_VALUES_FUNCTION_UNIMPLEMENTED)},n.assertSigningCapabilityIsAvailable=function(){var e;if(a(),void 0===globalThis.crypto||"function"!=typeof(null===(e=globalThis.crypto.subtle)||void 0===e?void 0:e.sign))throw new s.SolanaError(s.SOLANA_ERROR__SUBTLE_CRYPTO__SIGN_FUNCTION_UNIMPLEMENTED)},n.assertVerificationCapabilityIsAvailable=function(){var e;if(a(),void 0===globalThis.crypto||"function"!=typeof(null===(e=globalThis.crypto.subtle)||void 0===e?void 0:e.verify))throw new s.SolanaError(s.SOLANA_ERROR__SUBTLE_CRYPTO__VERIFY_FUNCTION_UNIMPLEMENTED)}}}},{package:"@solana/addresses>@solana/assertions",file:"node_modules/@solana/addresses/node_modules/@solana/assertions/dist/index.browser.cjs"}]],[],{});